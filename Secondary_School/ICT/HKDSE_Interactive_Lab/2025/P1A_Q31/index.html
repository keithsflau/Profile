<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HKDSE 2025 Paper 1A Q31 - Data Validation Loop</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #0f172a;
        color: #e2e8f0;
      }
    </style>
  </head>
  <body class="min-h-screen p-4 md:p-8 flex flex-col items-center">
    <div id="root" class="w-full max-w-5xl"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // Lucide Icon Shim
      const LucideIcon = ({ name, size = 20, className = "" }) => {
        const formatName = (n) =>
          n
            .split("-")
            .map((p) => p.charAt(0).toUpperCase() + p.slice(1))
            .join("");
        const iconName = formatName(name);
        const [svgHtml, setSvgHtml] = useState("");
        useEffect(() => {
          if (window.lucide?.icons[iconName]?.toSvg) {
            setSvgHtml(
              window.lucide.icons[iconName].toSvg({
                width: size,
                height: size,
                class: className,
              })
            );
          }
        }, [name]);
        return (
          <span
            dangerouslySetInnerHTML={{ __html: svgHtml }}
            style={{ display: "inline-flex" }}
          />
        );
      };

      const InteractiveConsole = () => {
        const [logs, setLogs] = useState([]);
        const [inputValue, setInputValue] = useState("");
        const [state, setState] = useState("init"); // init, checking, valid

        const handleInput = (e) => {
          e.preventDefault();
          if (!inputValue) return;
          const num = parseInt(inputValue);

          const newLog = { msg: `> Input: ${inputValue}`, type: "user" };

          if (isNaN(num)) {
            setLogs((prev) => [
              ...prev,
              newLog,
              { msg: "Error: Not a number", type: "sys" },
            ]);
          } else if (num < 0) {
            setLogs((prev) => [
              ...prev,
              newLog,
              { msg: `Check: ${num} < 0 is TRUE`, type: "check" },
              { msg: "Invalid! Loop continues...", type: "sys" },
            ]);
          } else {
            setLogs((prev) => [
              ...prev,
              newLog,
              { msg: `Check: ${num} < 0 is FALSE`, type: "check" },
              { msg: "Valid! Loop terminates.", type: "success" },
            ]);
            setState("valid");
          }
          setInputValue("");
        };

        return (
          <div className="bg-black p-4 rounded-xl border border-slate-700 font-mono text-sm h-64 flex flex-col shadow-2xl">
            <div className="flex-1 overflow-y-auto space-y-1 mb-2">
              <div className="text-slate-500">// System Console</div>
              <div className="text-blue-400">
                Please enter a non-negative number (N):
              </div>
              {logs.map((L, i) => (
                <div
                  key={i}
                  className={`${
                    L.type === "user"
                      ? "text-white"
                      : L.type === "check"
                      ? "text-yellow-500"
                      : L.type === "success"
                      ? "text-green-500 font-bold"
                      : "text-red-400"
                  }`}
                >
                  {L.msg}
                </div>
              ))}
            </div>
            {state !== "valid" ? (
              <form onSubmit={handleInput} className="flex gap-2">
                <span className="text-green-400 font-bold">$</span>
                <input
                  type="number"
                  value={inputValue}
                  onChange={(e) => setInputValue(e.target.value)}
                  className="flex-1 bg-transparent border-none outline-none text-white placeholder-slate-600"
                  placeholder="Type number & Press Enter..."
                  autoFocus
                />
              </form>
            ) : (
              <div className="text-green-500 font-bold text-center border-t border-slate-800 pt-2">
                Program Finished Successfully.
                <button
                  onClick={() => {
                    setLogs([]);
                    setState("init");
                  }}
                  className="ml-4 text-xs bg-slate-800 px-2 py-1 rounded text-slate-300 hover:text-white"
                >
                  Reset
                </button>
              </div>
            )}
          </div>
        );
      };

      const App = () => {
        const [selectedOpt, setSelectedOpt] = useState(null);

        const options = [
          {
            id: "A",
            text: "Data Verification (數據驗證)",
            desc: "Usually means double-entry or check against source.",
          },
          {
            id: "B",
            text: "Data Validity Check (數據有效性檢驗)",
            desc: "Checking if data meets requirements (Range Check).",
          },
          {
            id: "C",
            text: "Data Integration (數據整合)",
            desc: "Combining data from different sources.",
          },
          {
            id: "D",
            text: "Data Generation (數據生成)",
            desc: "Creating new data.",
          },
        ];

        return (
          <div className="space-y-8 animate-fade-in w-full max-w-4xl mx-auto p-4 flex flex-col items-center">
            <header className="text-center space-y-4 max-w-3xl w-full">
              <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-cyan-900/30 border border-cyan-500/30 text-cyan-400 text-sm font-bold">
                <span className="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></span>
                HKDSE 2025 Paper 1A Q31
              </div>

              <div className="bg-slate-800/50 p-6 rounded-2xl border border-slate-700 text-left relative overflow-hidden flex flex-col md:flex-row gap-6 items-center">
                <div className="flex-1 space-y-4">
                  <div className="font-mono bg-slate-950 p-4 rounded-lg border-l-4 border-purple-500 text-sm md:text-base shadow-inner">
                    <span className="text-yellow-400">Input</span> N<br />
                    <span className="text-pink-400">While</span> N &lt; 0<br />
                    &nbsp;&nbsp;<span className="text-yellow-400">Input</span> N
                  </div>
                  <h2 className="text-lg font-bold text-white">
                    Question (題目)
                  </h2>
                  <p className="text-slate-300 leading-relaxed text-sm">
                    In the following algorithm, using the loop serves the
                    purpose of...
                    <br />
                    <span className="text-slate-500">
                      在以下算法, 使用循環的目的是...
                    </span>
                  </p>
                </div>

                <div className="w-full md:w-1/2">
                  <InteractiveConsole />
                </div>
              </div>
            </header>

            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 w-full">
              {options.map((opt) => (
                <button
                  key={opt.id}
                  onClick={() => setSelectedOpt(opt.id)}
                  className={`p-4 rounded-xl border text-left transition-all ${
                    selectedOpt === opt.id
                      ? opt.id === "B"
                        ? "bg-green-900/20 border-green-500 ring-1 ring-green-500"
                        : "bg-red-900/20 border-red-500 ring-1 ring-red-500"
                      : "bg-slate-800 border-slate-600 hover:bg-slate-700"
                  }`}
                >
                  <div className="font-bold text-white mb-1 flex items-center justify-between">
                    <span>
                      {opt.id}. {opt.text}
                    </span>
                    {selectedOpt === opt.id && (
                      <LucideIcon
                        name={opt.id === "B" ? "check-circle" : "x-circle"}
                        className={
                          opt.id === "B" ? "text-green-500" : "text-red-500"
                        }
                      />
                    )}
                  </div>
                  {selectedOpt === opt.id && (
                    <div className="text-xs text-slate-300 mt-2">
                      {opt.desc}
                    </div>
                  )}
                </button>
              ))}
            </div>

            {selectedOpt === "B" && (
              <div className="animate-fade-in bg-green-900/20 border border-green-500/30 p-6 rounded-2xl text-center">
                <h3 className="text-green-400 font-bold text-xl mb-2">
                  Correct!
                </h3>
                <p className="text-slate-300">
                  The loop ensures that <code>N</code> is never negative by
                  repeatedly asking for input until the condition{" "}
                  <code>N &lt; 0</code> is False.
                  <br />
                  This is a classic{" "}
                  <strong className="text-white">Range Check</strong> (Validity
                  Check).
                </p>
              </div>
            )}
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
