<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HKDSE ICT - Range Check Validator</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #0f172a;
        color: #e2e8f0;
      }
      .input-box {
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      .input-valid {
        border-color: #22c55e;
        box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
      }
      .input-invalid {
        border-color: #ef4444;
        box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        animation: shake 0.4s ease-in-out;
      }
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }
    </style>
  </head>
  <body class="min-h-screen p-8 flex justify-center items-center bg-slate-900">
    <div id="root" class="w-full max-w-2xl"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // --- LUCIDE ICON SHIM ---
      const LucideIcon = ({ name, size = 24, className = "" }) => {
        const formatName = (n) =>
          n
            .split("-")
            .map((p) => p.charAt(0).toUpperCase() + p.slice(1))
            .join("");
        const iconName = formatName(name);

        const [svgHtml, setSvgHtml] = useState("");

        useEffect(() => {
          if (
            window.lucide &&
            window.lucide.icons &&
            window.lucide.icons[iconName] &&
            typeof window.lucide.icons[iconName].toSvg === "function"
          ) {
            setSvgHtml(
              window.lucide.icons[iconName].toSvg({
                width: size,
                height: size,
                class: className,
              })
            );
          }
        }, [name, size, className, iconName]);

        return (
          <span
            dangerouslySetInnerHTML={{ __html: svgHtml }}
            style={{ display: "inline-flex" }}
          />
        );
      };
      const ShieldCheck = (p) => <LucideIcon name="shield-check" {...p} />;
      const AlertOctagon = (p) => <LucideIcon name="alert-octagon" {...p} />;
      const CheckCircle2 = (p) => <LucideIcon name="check-circle-2" {...p} />;
      const ArrowRight = (p) => <LucideIcon name="arrow-right" {...p} />;
      // --- END SHIM ---

      const App = () => {
        const [min, setMin] = useState(1);
        const [max, setMax] = useState(100);
        const [val, setVal] = useState("");
        const [status, setStatus] = useState("idle");

        const check = (e) => {
          const input = e.target.value;
          setVal(input);
          if (input === "") {
            setStatus("idle");
            return;
          }
          const num = parseFloat(input);
          if (isNaN(num)) {
            setStatus("invalid");
            return;
          }
          if (num >= min && num <= max) setStatus("valid");
          else setStatus("invalid");
        };

        return (
          <div className="space-y-8 text-center bg-slate-800 p-8 rounded-3xl border border-slate-700 shadow-2xl relative overflow-hidden">
            <header>
              <h1 className="text-3xl font-bold text-white mb-2 flex items-center justify-center gap-2">
                <ShieldCheck className="text-cyan-400" /> Data Validation: Range
                Check
              </h1>
              <p className="text-slate-400">Paper 1A Q33 Concept</p>
            </header>
            <div className="flex items-center justify-center gap-4 bg-slate-900 p-4 rounded-xl border border-slate-800 font-mono text-lg text-slate-300">
              <div className="flex flex-col items-center">
                <label className="text-[10px] text-slate-500 font-bold uppercase mb-1">
                  Min
                </label>
                <input
                  type="number"
                  value={min}
                  onChange={(e) => setMin(parseInt(e.target.value))}
                  className="w-16 bg-slate-800 border border-slate-600 rounded text-center text-white"
                />
              </div>
              <span className="text-slate-500 font-bold text-2xl">≤</span>
              <div className="text-cyan-400 font-bold">Input (N)</div>
              <span className="text-slate-500 font-bold text-2xl">≤</span>
              <div className="flex flex-col items-center">
                <label className="text-[10px] text-slate-500 font-bold uppercase mb-1">
                  Max
                </label>
                <input
                  type="number"
                  value={max}
                  onChange={(e) => setMax(parseInt(e.target.value))}
                  className="w-16 bg-slate-800 border border-slate-600 rounded text-center text-white"
                />
              </div>
            </div>
            <div className="relative h-24 my-12 w-full px-8">
              <div className="absolute top-1/2 left-0 right-0 h-1 bg-slate-700 -translate-y-1/2 rounded-full"></div>
              <div
                className="absolute top-1/2 h-2 bg-green-500/30 -translate-y-1/2 rounded pointer-events-none transition-all duration-300"
                style={{ left: "10%", right: "10%" }}
              ></div>
              <div
                className="absolute top-1/2 w-4 h-4 bg-slate-500 rounded-full -translate-y-1/2 border-2 border-slate-900 transition-all duration-300"
                style={{
                  left: `${Math.min(100, Math.max(0, (min / 150) * 100))}%`,
                }}
              >
                <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-xs font-bold text-slate-400">
                  {min}
                </span>
              </div>
              <div
                className="absolute top-1/2 w-4 h-4 bg-slate-500 rounded-full -translate-y-1/2 border-2 border-slate-900 transition-all duration-300"
                style={{
                  left: `${Math.min(100, Math.max(0, (max / 150) * 100))}%`,
                }}
              >
                <span className="absolute -top-8 left-1/2 -translate-x-1/2 text-xs font-bold text-slate-400">
                  {max}
                </span>
              </div>
              {val && !isNaN(val) && (
                <div
                  className="absolute top-1/2 -translate-y-1/2 transition-all duration-300"
                  style={{
                    left: `${Math.min(100, Math.max(0, (val / 150) * 100))}%`,
                  }}
                >
                  <div
                    className={`w-0 h-0 border-l-[8px] border-l-transparent border-r-[8px] border-r-transparent border-t-[12px] ${
                      status === "valid"
                        ? "border-t-green-500"
                        : "border-t-red-500"
                    } absolute -top-1 -translate-x-1/2`}
                  ></div>
                  <div
                    className={`mt-2 text-sm font-bold ${
                      status === "valid" ? "text-green-400" : "text-red-400"
                    } absolute -translate-x-1/2`}
                  >
                    {val}
                  </div>
                </div>
              )}
            </div>
            <div className="max-w-xs mx-auto relative">
              <input
                type="number"
                placeholder={`Enter ${min}-${max}`}
                value={val}
                onChange={check}
                className={`w-full bg-slate-900 border-2 rounded-xl p-4 text-center text-3xl font-bold text-white outline-none input-box ${
                  status === "valid"
                    ? "input-valid"
                    : status === "invalid"
                    ? "input-invalid"
                    : "border-slate-600 focus:border-cyan-500"
                }`}
              />
              <div className="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none">
                {status === "valid" && (
                  <CheckCircle2 className="text-green-500" size={32} />
                )}
                {status === "invalid" && (
                  <AlertOctagon className="text-red-500" size={32} />
                )}
              </div>
            </div>
            <div className="h-8">
              {status === "invalid" && (
                <p className="text-red-400 text-sm font-bold flex items-center justify-center gap-2 animate-bounce">
                  <AlertOctagon size={16} /> Invalid: Input must be between{" "}
                  {min} and {max}.
                </p>
              )}
              {status === "valid" && (
                <p className="text-green-400 text-sm font-bold flex items-center justify-center gap-2">
                  <CheckCircle2 size={16} /> Valid Input Accepted.
                </p>
              )}
            </div>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
