<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Homologous Series Master | 同系列大師</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-950 text-white min-h-screen flex flex-col">
    <header
      class="bg-gray-900/80 backdrop-blur-md border-b border-gray-800 px-6 py-4 flex justify-between items-center sticky top-0 z-30"
    >
      <div class="flex items-center gap-4">
        <a
          href="../../index.html"
          class="text-gray-400 hover:text-white transition-colors"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"
            />
          </svg>
        </a>
        <div>
          <h1
            class="text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent"
          >
            Homologous Series
            <span class="text-gray-500 text-sm ml-2">同系列大師</span>
          </h1>
          <p class="text-xs text-gray-400">
            Genearal Formula & Physical Properties
          </p>
        </div>
      </div>

      <div class="flex gap-2">
        <button
          onclick="setSeries('alkane')"
          id="btn-alkane"
          class="px-4 py-2 rounded-lg bg-blue-600 text-sm font-medium transition-all shadow-lg shadow-blue-500/20"
        >
          Alkanes
        </button>
        <button
          onclick="setSeries('alkene')"
          id="btn-alkene"
          class="px-4 py-2 rounded-lg bg-gray-800 text-gray-400 hover:text-white text-sm font-medium transition-all"
        >
          Alkenes
        </button>
        <button
          onclick="setSeries('alkanol')"
          id="btn-alkanol"
          class="px-4 py-2 rounded-lg bg-gray-800 text-gray-400 hover:text-white text-sm font-medium transition-all"
        >
          Alkanols
        </button>
      </div>
    </header>

    <main
      class="flex-grow flex flex-col md:flex-row gap-8 p-6 md:p-10 max-w-7xl mx-auto w-full"
    >
      <!-- Controls & Info -->
      <div class="w-full md:w-1/3 flex flex-col gap-6">
        <div
          class="bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-xl"
        >
          <h2
            class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-6"
          >
            Series Configuration
          </h2>

          <div class="mb-8">
            <label class="block text-sm text-gray-300 mb-2"
              >Number of Carbons (n)</label
            >
            <div class="flex items-center gap-4">
              <input
                type="range"
                id="n-slider"
                min="1"
                max="10"
                value="1"
                class="flex-grow h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"
              />
              <div
                id="n-display"
                class="w-12 h-12 rounded-xl bg-gray-800 flex items-center justify-center font-mono text-xl font-bold text-blue-400 border border-gray-700"
              >
                1
              </div>
            </div>
          </div>

          <div class="space-y-4">
            <div
              class="p-4 bg-gray-800/50 rounded-xl border border-gray-700/50"
            >
              <div class="text-xs text-gray-500 uppercase mb-1">
                General Formula (通式)
              </div>
              <div id="gen-formula" class="text-lg font-mono text-white">
                CnH2n+2
              </div>
            </div>

            <div
              class="p-4 bg-gray-800/50 rounded-xl border border-gray-700/50"
            >
              <div class="text-xs text-gray-500 uppercase mb-1">
                Functional Group (官能基)
              </div>
              <div id="func-group" class="text-lg font-medium text-white">
                None (Single Bonds)
              </div>
            </div>
          </div>
        </div>

        <div
          class="bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-xl flex-grow flex flex-col justify-center"
        >
          <div id="result-display" class="text-center">
            <div class="text-sm text-gray-400 mb-2">
              Molecular Formula (分子式)
            </div>
            <div
              id="mol-formula"
              class="text-4xl font-bold text-white mb-6 font-mono tracking-wider"
            >
              CH₄
            </div>

            <div class="text-sm text-gray-400 mb-2">IUPAC Name (命名)</div>
            <div
              id="iupac-name"
              class="text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent"
            >
              Methane
            </div>
            <div id="iupac-zh" class="text-xl text-gray-500 mt-1">甲烷</div>
          </div>
        </div>
      </div>

      <!-- Visuals & Graphs -->
      <div class="w-full md:w-2/3 flex flex-col gap-6">
        <!-- Structure Preview (Canvas/Text Representation) -->
        <div
          class="bg-gray-900 border border-gray-800 rounded-2xl p-6 h-64 flex items-center justify-center relative overflow-hidden group"
        >
          <div
            class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-900/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"
          ></div>
          <div
            id="structure-area"
            class="font-mono text-slate-300 text-lg leading-loose break-all max-w-[90%] text-center"
          >
            <!-- Simple structural string representation -->
            H - C - H
          </div>
          <div class="absolute bottom-4 right-4 text-xs text-gray-600">
            Simplified Structural Formula
          </div>
        </div>

        <!-- Boiling Point Trend Graph -->
        <div class="bg-gray-900 border border-gray-800 rounded-2xl p-6 h-80">
          <h3
            class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-4"
          >
            Boiling Point Trend (沸點趨勢)
          </h3>
          <div class="relative w-full h-full">
            <canvas id="bpChart"></canvas>
          </div>
        </div>
      </div>
    </main>

    <script>
      const PREFIXES = [
        "",
        "Meth",
        "Eth",
        "Prop",
        "But",
        "Pent",
        "Hex",
        "Hept",
        "Oct",
        "Non",
        "Dec",
      ];
      const ZH_PREFIXES = [
        "",
        "甲",
        "乙",
        "丙",
        "丁",
        "戊",
        "己",
        "庚",
        "辛",
        "壬",
        "癸",
      ];

      const SERIES_DATA = {
        alkane: {
          name: "Alkanes",
          gen: "CnH2n+2",
          func: "None (Simple C-C)",
          suffix: "ane",
          zh_suffix: "烷",
          bp_base: -160,
          bp_inc: 30, // Approx increment
          formula: (n) => `C${n}H${2 * n + 2}`,
        },
        alkene: {
          name: "Alkenes",
          gen: "CnH2n",
          func: "C=C Double Bond",
          suffix: "ene",
          zh_suffix: "烯",
          bp_base: -170, // Ethene
          bp_inc: 30,
          min_n: 2,
          formula: (n) => `C${n}H${2 * n}`,
        },
        alkanol: {
          name: "Alkanols",
          gen: "CnH2n+1OH",
          func: "-OH Hydroxyl Group",
          suffix: "anol",
          zh_suffix: "醇",
          bp_base: 65, // Methanol
          bp_inc: 20, // Increases but less steep initially due to H-bond dominance? Actually higher base.
          formula: (n) => `C${n}H${2 * n + 1}OH`,
        },
      };

      let currentSeries = "alkane";
      let currentN = 1;
      let chartInstance = null;

      // Init Chart
      const ctx = document.getElementById("bpChart").getContext("2d");
      Chart.defaults.color = "#94a3b8";
      Chart.defaults.borderColor = "#334155";

      function initChart() {
        chartInstance = new Chart(ctx, {
          type: "line",
          data: {
            labels: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
            datasets: [
              {
                label: "Boiling Point (°C)",
                data: [],
                borderColor: "#3b82f6",
                backgroundColor: "rgba(59, 130, 246, 0.1)",
                fill: true,
                tension: 0.4,
                pointBackgroundColor: "#3b82f6",
                pointRadius: 4,
                pointHoverRadius: 8,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                grid: { color: "#1e293b" },
                title: { display: true, text: "Temperature (°C)" },
              },
              x: {
                grid: { display: false },
                title: { display: true, text: "Number of Carbon Atoms" },
              },
            },
            plugins: {
              tooltip: {
                backgroundColor: "rgba(15, 23, 42, 0.9)",
                padding: 12,
                titleFont: { family: "Inter", size: 14 },
                bodyFont: { family: "Inter", size: 13 },
              },
            },
          },
        });
      }

      function updateApp() {
        const data = SERIES_DATA[currentSeries];

        // Validate n (Alkenes start at 2)
        if (data.min_n && currentN < data.min_n) currentN = data.min_n;
        document.getElementById("n-slider").min = data.min_n || 1;

        if (document.getElementById("n-slider").value != currentN) {
          document.getElementById("n-slider").value = currentN;
        }

        // Update Text
        document.getElementById("n-display").innerText = currentN;
        document.getElementById("gen-formula").innerHTML = createSubscriptHTML(
          data.gen
        );
        document.getElementById("func-group").innerText = data.func;

        const molF = data.formula(currentN);
        document.getElementById("mol-formula").innerHTML =
          createSubscriptHTML(molF);

        const engName = PREFIXES[currentN] + data.suffix;
        const zhName = ZH_PREFIXES[currentN] + data.zh_suffix;
        document.getElementById("iupac-name").innerText = engName;
        document.getElementById("iupac-zh").innerText = zhName;

        // Update Structure representation (Simplified text based)
        let struct = "";
        if (currentSeries === "alkane") {
          struct =
            `CH${sub(3)}` +
            (currentN > 2
              ? `-(CH${sub(2)})${sub(currentN - 2)}`
              : currentN == 2
              ? `-CH${sub(2)}`
              : "") +
            (currentN > 1 ? `-CH${sub(3)}` : "");
        } else if (currentSeries === "alkene") {
          struct =
            `CH${sub(2)}=CH` +
            (currentN > 2
              ? `-(CH${sub(2)})${sub(currentN - 3)}-CH${sub(3)}`
              : ""); // very rough appx for 1-ene
        } else {
          struct =
            `CH${sub(3)}` +
            (currentN > 1 ? `-(CH${sub(2)})${sub(currentN - 1)}` : "") +
            "-OH";
        }
        // For simple visualization, let's just use the condensed structural formula text
        // Or generate a stick string
        document.getElementById("structure-area").innerHTML =
          generateStickString(currentN, currentSeries);

        // Update Chart
        updateChartData(data);
      }

      function createSubscriptHTML(str) {
        return str.replace(/\d+/g, (match) => `<sub>${match}</sub>`);
      }
      function sub(n) {
        return `<sub>${n}</sub>`;
      }

      function generateStickString(n, type) {
        n = parseInt(n);
        // A simple ASCII-like art for the structure, now with HTML subscripts
        if (type === "alkane") {
          if (n === 1) return "H<br>|<br>H-C-H<br>|<br>H";
          let chain = `CH${sub(3)}`;
          for (let i = 0; i < n - 2; i++) chain += `-CH${sub(2)}`;
          chain += `-CH${sub(3)}`;
          return chain;
        }
        if (type === "alkene") {
          if (n === 2) return `CH${sub(2)}=CH${sub(2)}`;
          // For n > 2: Starts with CH2=CH-, then (n-3) CH2 groups, ends with -CH3
          let chain = `CH${sub(2)}=CH`;
          for (let i = 0; i < n - 3; i++) chain += `-CH${sub(2)}`;
          chain += `-CH${sub(3)}`;
          return chain;
        }
        if (type === "alkanol") {
          let chain = `CH${sub(3)}`;
          for (let i = 0; i < n - 1; i++) chain += `-CH${sub(2)}`;
          chain += `-OH`;
          return chain;
        }
        return "";
      }

      function updateChartData(seriesData) {
        // Generate data points
        const points = [];
        const min = seriesData.min_n || 1;
        for (let i = 1; i <= 10; i++) {
          if (i < min) {
            points.push(null);
            continue;
          }

          // Approximate Logarithmic/Linear trend logic
          // BP increases with molar mass (dispersion forces)
          // Alkanes: Meth (-161), Eth (-89), Prop (-42), But (-0.5), Pent (36)...
          // Not linear.
          let val = 0;
          if (seriesData.name === "Alkanes") {
            // Rough data approx
            const bps = [-161, -89, -42, -0.5, 36, 69, 98, 126, 151, 174];
            val = bps[i - 1];
          } else if (seriesData.name === "Alkenes") {
            // Similar to alkanes but slightly lower mp/bp usually
            const bps = [null, -104, -47, -6, 30, 63, 94, 121, 147, 170];
            val = bps[i - 1];
          } else {
            // Alkanols (H-bond -> much higher)
            // Meth (65), Eth (78), Prop (97), But (118)...
            const bps = [65, 78, 97, 118, 138, 157, 176, 195, 213, 231];
            val = bps[i - 1];
          }
          points.push(val);
        }

        chartInstance.data.datasets[0].data = points;

        // Update color based on selection
        let color = "#3b82f6";
        if (currentSeries === "alkanol") color = "#ef4444"; // Red for OH
        if (currentSeries === "alkene") color = "#eab308"; // Yellow for double bond

        chartInstance.data.datasets[0].borderColor = color;
        chartInstance.data.datasets[0].pointBackgroundColor = color;
        chartInstance.data.datasets[0].backgroundColor = color + "20"; // hex alpha

        // Highlight current point
        const pointRadii = points.map((_, idx) =>
          idx + 1 === parseInt(currentN) ? 8 : 4
        );
        chartInstance.data.datasets[0].pointRadius = pointRadii;

        chartInstance.update();
      }

      // Event Listeners
      window.setSeries = (s) => {
        currentSeries = s;
        ["alkane", "alkene", "alkanol"].forEach((id) => {
          const btn = document.getElementById(`btn-${id}`);
          const colorClass =
            id === "alkane"
              ? "bg-blue-600"
              : id === "alkanol"
              ? "bg-red-600"
              : "bg-yellow-600";

          if (s === id) {
            btn.className = `px-4 py-2 rounded-lg ${colorClass} text-white text-sm font-medium transition-all shadow-lg`;
          } else {
            btn.className = `px-4 py-2 rounded-lg bg-gray-800 text-gray-400 hover:text-white text-sm font-medium transition-all`;
          }
        });
        updateApp();
      };

      document.getElementById("n-slider").addEventListener("input", (e) => {
        currentN = e.target.value;
        updateApp();
      });

      // Start
      initChart();
      updateApp();
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
