<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Acid Rain City | S2 Science</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Outfit", sans-serif;
        background: #f8fafc;
      }
      .rain {
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0),
          rgba(255, 255, 255, 0.5)
        );
        width: 2px;
        height: 10px;
        position: absolute;
        animation: fall 0.5s linear infinite;
      }
      @keyframes fall {
        from {
          transform: translateY(-100px);
        }
        to {
          transform: translateY(500px);
        }
      }
      .smoke {
        animation: smoke 3s infinite;
        opacity: 0;
      }
      @keyframes smoke {
        0% {
          transform: translateY(0) scale(1);
          opacity: 0.8;
        }
        100% {
          transform: translateY(-50px) scale(2);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body class="bg-slate-50 text-slate-800 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      const App = () => {
        const [factories, setFactories] = useState(true); // Emitter
        const [cars, setCars] = useState(true); // Emitter
        const [scrubbers, setScrubbers] = useState(false); // Solution
        const [converters, setConverters] = useState(false); // Solution

        const [rainPh, setRainPh] = useState(5.6); // Normal rain
        const [health, setHealth] = useState(100); // Environment health

        // Logic
        useEffect(() => {
          const interval = setInterval(() => {
            let pollution = 0;
            if (factories && !scrubbers) pollution += 2;
            if (cars && !converters) pollution += 1;

            // Scrubbers/Converters reduce pollution but don't eliminate completely perhaps?
            // Let's say Scrubbers fix Factories, Converters fix Cars.
            if (factories && scrubbers) pollution += 0.2;
            if (cars && converters) pollution += 0.2;

            // Update pH
            // Base pH 6.0 in perfect world.
            // Pollution lowers it.
            const targetPh = Math.max(3.0, 6.0 - pollution);
            setRainPh((prev) => prev + (targetPh - prev) * 0.1);

            // Update Health
            setHealth((prev) => {
              if (rainPh < 4.5) return Math.max(0, prev - 1);
              if (rainPh > 5.5) return Math.min(100, prev + 1);
              return prev;
            });
          }, 500);
          return () => clearInterval(interval);
        }, [factories, cars, scrubbers, converters, rainPh]);

        // Visuals based on Health
        const treeColor =
          health > 60
            ? "text-green-600"
            : health > 30
            ? "text-yellow-600"
            : "text-stone-500";
        const statueOpacity = health / 100;
        const fishCount = Math.floor(health / 20);

        return (
          <div className="p-8 max-w-6xl mx-auto min-h-screen flex flex-col items-center">
            <header className="text-center mb-10 w-full">
              <span className="text-slate-500 font-bold uppercase text-xs tracking-widest">
                Form 2 Science • Unit 9
              </span>
              <h1 className="text-4xl font-extrabold text-slate-800 mb-2">
                Acid Rain Simulator
              </h1>
              <p className="text-slate-500">
                Managing Pollution: Balancing Industry and Environment.
              </p>
            </header>

            <div className="flex flex-col lg:flex-row gap-8 w-full">
              {/* Simulation Scene */}
              <div className="w-full lg:w-2/3 aspect-video bg-slate-300 rounded-3xl shadow-xl overflow-hidden relative border-4 border-slate-400">
                {/* Sky */}
                <div
                  className={`absolute inset-0 transition-colors duration-1000 ${
                    rainPh < 4.5 ? "bg-yellow-900/30" : "bg-sky-300"
                  }`}
                ></div>

                {/* Rain Overlay */}
                <div className="absolute inset-0 pointer-events-none opacity-50">
                  {Array.from({ length: 20 }).map((_, i) => (
                    <div
                      key={i}
                      className={`rain bg-white`}
                      style={{
                        left: `${i * 5}%`,
                        animationDuration: `${0.5 + Math.random()}s`,
                        animationDelay: `${Math.random()}s`,
                      }}
                    ></div>
                  ))}
                </div>

                {/* Factory */}
                <div className="absolute bottom-20 left-10 text-9xl text-slate-700">
                  <i className="fa-solid fa-industry"></i>
                  {factories && (
                    <div className="absolute top-0 right-4">
                      <div
                        className={`text-4xl ${
                          scrubbers ? "text-white/50" : "text-stone-800"
                        } smoke`}
                      >
                        <i className="fa-solid fa-smog"></i>
                      </div>
                    </div>
                  )}
                </div>

                {/* Cars */}
                <div className="absolute bottom-10 inset-x-0 h-10 bg-slate-600 flex items-center overflow-hidden">
                  {cars && (
                    <div className="absolute animate-slide-right text-3xl text-red-500 left-0">
                      <i className="fa-solid fa-car-side"></i>
                      {!converters && (
                        <span className="absolute -right-4 top-0 text-sm text-stone-600 animate-pulse">
                          <i className="fa-solid fa-smog"></i>
                        </span>
                      )}
                    </div>
                  )}
                  <style>{`@keyframes slide-right { from { left: -10%; } to { left: 110%; } } .animate-slide-right { animation: slide-right 5s linear infinite; }`}</style>
                </div>

                {/* Nature - Trees */}
                <div
                  className={`absolute bottom-20 right-10 text-8xl ${treeColor} transition-colors duration-1000`}
                >
                  <i className="fa-solid fa-tree"></i>
                </div>
                <div
                  className={`absolute bottom-24 right-32 text-6xl ${treeColor} transition-colors duration-1000`}
                >
                  <i className="fa-solid fa-tree"></i>
                </div>

                {/* Nature - Statue */}
                <div
                  className="absolute bottom-20 left-1/3 text-6xl text-stone-400 transition-opacity duration-1000"
                  style={{ opacity: 0.3 + statueOpacity * 0.7 }}
                >
                  <i className="fa-solid fa-monument"></i>
                </div>

                {/* Nature - Lake */}
                <div className="absolute bottom-0 right-0 w-1/3 h-20 bg-blue-400 opacity-80 rounded-tl-full overflow-hidden">
                  {Array.from({ length: fishCount }).map((_, i) => (
                    <div
                      key={i}
                      className="absolute text-orange-400 text-xl animate-pulse"
                      style={{
                        top: `${Math.random() * 80}%`,
                        left: `${Math.random() * 80}%`,
                      }}
                    >
                      <i className="fa-solid fa-fish"></i>
                    </div>
                  ))}
                </div>
              </div>

              {/* Dashboard */}
              <div className="w-full lg:w-1/3 space-y-6">
                {/* Stats */}
                <div className="bg-white p-6 rounded-3xl shadow-md border border-slate-100 grid grid-cols-2 gap-4">
                  <div>
                    <h3 className="font-bold text-slate-400 uppercase text-xs tracking-widest">
                      Rain pH
                    </h3>
                    <div
                      className={`text-4xl font-extrabold ${
                        rainPh < 5 ? "text-red-500" : "text-green-500"
                      }`}
                    >
                      {rainPh.toFixed(1)}
                    </div>
                  </div>
                  <div>
                    <h3 className="font-bold text-slate-400 uppercase text-xs tracking-widest">
                      Eco Health
                    </h3>
                    <div
                      className={`text-4xl font-extrabold ${
                        health < 50 ? "text-red-500" : "text-green-500"
                      }`}
                    >
                      {Math.round(health)}%
                    </div>
                  </div>
                </div>

                {/* Controls */}
                <div className="bg-white p-6 rounded-3xl shadow-md border border-slate-100 space-y-4">
                  <h3 className="font-bold text-slate-700">
                    Pollution Sources
                  </h3>
                  <div className="flex justify-between items-center p-3 bg-slate-50 rounded-xl">
                    <span className="font-bold">
                      <i className="fa-solid fa-industry mr-2"></i> Factories
                      (SO₂)
                    </span>
                    <button
                      onClick={() => setFactories(!factories)}
                      className={`w-12 h-6 rounded-full transition-colors relative ${
                        factories ? "bg-red-500" : "bg-slate-300"
                      }`}
                    >
                      <div
                        className={`absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-all ${
                          factories ? "right-1" : "left-1"
                        }`}
                      ></div>
                    </button>
                  </div>
                  <div className="flex justify-between items-center p-3 bg-slate-50 rounded-xl">
                    <span className="font-bold">
                      <i className="fa-solid fa-car mr-2"></i> Cars (NOₓ)
                    </span>
                    <button
                      onClick={() => setCars(!cars)}
                      className={`w-12 h-6 rounded-full transition-colors relative ${
                        cars ? "bg-red-500" : "bg-slate-300"
                      }`}
                    >
                      <div
                        className={`absolute top-1 w-4 h-4 rounded-full bg-white shadow transition-all ${
                          cars ? "right-1" : "left-1"
                        }`}
                      ></div>
                    </button>
                  </div>
                </div>

                <div className="bg-white p-6 rounded-3xl shadow-md border border-blue-100 space-y-4">
                  <h3 className="font-bold text-slate-700">Solutions</h3>
                  <div
                    className={`flex justify-between items-center p-3 rounded-xl border ${
                      scrubbers
                        ? "bg-green-50 border-green-200"
                        : "bg-slate-50 border-transparent"
                    }`}
                  >
                    <span className="font-bold text-sm">
                      Install Scrubbers (Factories)
                    </span>
                    <button
                      onClick={() => setScrubbers(!scrubbers)}
                      className={`px-3 py-1 rounded text-xs font-bold ${
                        scrubbers
                          ? "bg-green-500 text-white"
                          : "bg-slate-200 text-slate-500"
                      }`}
                    >
                      {scrubbers ? "INSTALLED" : "OFF"}
                    </button>
                  </div>
                  <div
                    className={`flex justify-between items-center p-3 rounded-xl border ${
                      converters
                        ? "bg-green-50 border-green-200"
                        : "bg-slate-50 border-transparent"
                    }`}
                  >
                    <span className="font-bold text-sm">
                      Catalytic Converters (Cars)
                    </span>
                    <button
                      onClick={() => setConverters(!converters)}
                      className={`px-3 py-1 rounded text-xs font-bold ${
                        converters
                          ? "bg-green-500 text-white"
                          : "bg-slate-200 text-slate-500"
                      }`}
                    >
                      {converters ? "INSTALLED" : "OFF"}
                    </button>
                  </div>
                </div>

                <div className="text-xs text-slate-400 p-2">
                  * Sulphur Dioxide (SO2) and Nitrogen Oxides (NOx) dissolve in
                  rainwater to form Acid Rain.
                </div>
              </div>
            </div>

            
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
