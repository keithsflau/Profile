<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Volume of Prisms 柱體體積 | S2 Math</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
      }
    </style>
  </head>
  <body class="bg-blue-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;

      const App = () => {
        const [lang, setLang] = useState("en");
        const [shape, setShape] = useState("rect"); // rect, tri, trap
        const [baseW, setBaseW] = useState(4);
        const [baseH, setBaseH] = useState(3);
        const [length, setLength] = useState(5);

        const t = {
          title: { en: "Volume of Prisms", zh: "柱體體積" },
          shape: { en: "Base Shape", zh: "底形狀" },
          rect: { en: "Rectangular Prism", zh: "長方柱" },
          tri: { en: "Triangular Prism", zh: "三角柱" },
          w: { en: "Base Width", zh: "底闊" },
          h: { en: "Base Height", zh: "底高" }, // Or length/breath
          l: { en: "Prism Height (Length)", zh: "柱高" },
          baseArea: { en: "Base Area", zh: "底面積" },
          volume: { en: "Volume", zh: "體積" },
          back: { en: "Back to Dashboard", zh: "返回主頁" },
        };

        let area = 0;
        if (shape === "rect") area = baseW * baseH;
        else if (shape === "tri") area = 0.5 * baseW * baseH;

        const volume = area * length;

        // Simplified CSS 3D Visualization
        // Or SVG 2.5D

        const drawPrism = () => {
          const scaling = 20;
          const ox = 150,
            oy = 250;

          // Front Face
          // Rect: (0,0) -> (w, 0) -> (w, h) -> (0, h)
          // Tri: (0,0) -> (w, 0) -> (w/2, h)

          // SVG Y is up-side down
          const hPx = baseH * scaling;
          const wPx = baseW * scaling;
          const lPx = length * scaling * 0.7; // depth
          const dx = lPx * 0.5,
            dy = -lPx * 0.5; // cavalier projection

          let pointsFront = [];
          if (shape === "rect") {
            pointsFront = [
              { x: ox, y: oy },
              { x: ox + wPx, y: oy },
              { x: ox + wPx, y: oy - hPx },
              { x: ox, y: oy - hPx },
            ];
          } else {
            pointsFront = [
              { x: ox, y: oy },
              { x: ox + wPx, y: oy },
              { x: ox + wPx / 2, y: oy - hPx },
            ];
          }

          const pointsBack = pointsFront.map((p) => ({
            x: p.x + dx,
            y: p.y + dy,
          }));

          const pathFront =
            pointsFront
              .map((p, i) => (i === 0 ? "M" : "L") + `${p.x} ${p.y}`)
              .join(" ") + "Z";
          const pathBack =
            pointsBack
              .map((p, i) => (i === 0 ? "M" : "L") + `${p.x} ${p.y}`)
              .join(" ") + "Z";

          // Connecting Lines
          const lines = pointsFront.map((p, i) => (
            <line
              key={i}
              x1={p.x}
              y1={p.y}
              x2={pointsBack[i].x}
              y2={pointsBack[i].y}
              stroke="#3b82f6"
              strokeWidth="2"
            />
          ));

          return (
            <svg viewBox="0 0 400 350" className="w-full h-full">
              {/* Back Face (dashed) */}
              <path
                d={pathBack}
                fill="none"
                stroke="#93c5fd"
                strokeWidth="2"
                strokeDasharray="4"
              />

              {/* Connectors */}
              {lines}

              {/* Front Face */}
              <path
                d={pathFront}
                fill="rgba(59, 130, 246, 0.2)"
                stroke="#1d4ed8"
                strokeWidth="3"
              />

              {/* Dimensions Labels */}
              <text
                x={ox + wPx / 2}
                y={oy + 20}
                className="text-xs font-bold fill-blue-700"
                textAnchor="middle"
              >
                {baseW}
              </text>
              {shape === "rect" && (
                <text
                  x={ox - 15}
                  y={oy - hPx / 2}
                  className="text-xs font-bold fill-blue-700"
                  textAnchor="middle"
                >
                  {baseH}
                </text>
              )}
              {shape === "tri" && (
                <text
                  x={ox - 10}
                  y={oy - hPx / 2}
                  className="text-xs font-bold fill-blue-700"
                  textAnchor="middle"
                >
                  h={baseH}
                </text>
              )}
              <text
                x={ox + wPx + dx / 2 + 5}
                y={oy - hPx / 2 + dy / 2}
                className="text-xs font-bold fill-blue-700"
              >
                L={length}
              </text>
            </svg>
          );
        };

        return (
          <div className="p-6 max-w-4xl mx-auto min-h-screen flex flex-col">
            <header className="mb-6 flex justify-between items-center">
              <div>
                <div className="text-blue-600 font-bold uppercase text-xs tracking-widest mb-1">
                  S2 Math
                </div>
                <h1 className="text-3xl font-extrabold text-slate-900">
                  {t.title[lang]}
                </h1>
              </div>
              <button
                onClick={() => setLang(lang === "en" ? "zh" : "en")}
                className="px-3 py-1 bg-white border border-blue-200 rounded-lg text-sm font-bold hover:bg-blue-100"
              >
                {lang === "en" ? "中文" : "ENG"}
              </button>
            </header>

            <div className="flex justify-center gap-4 mb-6">
              <button
                onClick={() => setShape("rect")}
                className={`px-4 py-2 rounded-xl font-bold ${
                  shape === "rect"
                    ? "bg-blue-600 text-white"
                    : "bg-white text-blue-600"
                }`}
              >
                {t.rect[lang]}
              </button>
              <button
                onClick={() => setShape("tri")}
                className={`px-4 py-2 rounded-xl font-bold ${
                  shape === "tri"
                    ? "bg-blue-600 text-white"
                    : "bg-white text-blue-600"
                }`}
              >
                {t.tri[lang]}
              </button>
            </div>

            <div className="grid md:grid-cols-2 gap-8 mb-6">
              <div
                className="bg-white rounded-2xl border border-blue-100 shadow-sm relative"
                style={{ height: "350px" }}
              >
                {drawPrism()}
                <div className="absolute top-4 left-4 bg-white/80 p-2 rounded backdrop-blur-sm">
                  <div className="text-xs font-bold text-slate-400">
                    Formula
                  </div>
                  <div className="font-serif italic text-blue-800">
                    V = Base Area × Height
                  </div>
                </div>
              </div>

              <div className="space-y-6">
                <div className="bg-white p-6 rounded-2xl border border-blue-100 shadow-sm">
                  <div className="space-y-4">
                    <div>
                      <label className="text-xs font-bold text-blue-600 block mb-1">
                        {t.w[lang]}
                      </label>
                      <input
                        type="range"
                        min="2"
                        max="10"
                        step="0.5"
                        value={baseW}
                        onChange={(e) => setBaseW(Number(e.target.value))}
                        className="w-full accent-blue-500"
                      />
                    </div>
                    <div>
                      <label className="text-xs font-bold text-blue-600 block mb-1">
                        {t.h[lang]}
                      </label>
                      <input
                        type="range"
                        min="2"
                        max="10"
                        step="0.5"
                        value={baseH}
                        onChange={(e) => setBaseH(Number(e.target.value))}
                        className="w-full accent-blue-500"
                      />
                    </div>
                    <div>
                      <label className="text-xs font-bold text-indigo-600 block mb-1">
                        {t.l[lang]}
                      </label>
                      <input
                        type="range"
                        min="2"
                        max="15"
                        step="0.5"
                        value={length}
                        onChange={(e) => setLength(Number(e.target.value))}
                        className="w-full accent-indigo-500"
                      />
                    </div>
                  </div>
                </div>

                <div className="grid grid-cols-2 gap-4">
                  <div className="bg-blue-50 p-4 rounded-xl border border-blue-100 text-center">
                    <div className="text-xs uppercase text-slate-500">
                      {t.baseArea[lang]}
                    </div>
                    <div className="text-xl font-bold text-blue-800">
                      {area.toFixed(2)}
                    </div>
                  </div>
                  <div className="bg-indigo-600 text-white p-4 rounded-xl shadow-lg text-center transform scale-105">
                    <div className="text-xs uppercase opacity-80">
                      {t.volume[lang]}
                    </div>
                    <div className="text-3xl font-extrabold">
                      {volume.toFixed(2)}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <footer className="mt-auto pt-8">
              <a
                href="../index.html"
                className="text-blue-600 hover:text-blue-700 font-bold"
              >
                <i className="fa-solid fa-arrow-left mr-2"></i>
                {t.back[lang]}
              </a>
            </footer>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
