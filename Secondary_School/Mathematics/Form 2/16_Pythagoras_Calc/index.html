<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ladder Problem | S2 Math</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
      }
    </style>
  </head>
  <body class="bg-orange-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;

      const App = () => {
        const [ladderLen, setLadderLen] = useState(5.0); // Meters
        const [baseDist, setBaseDist] = useState(1.5); // Meters

        // Calculations
        // h^2 + b^2 = L^2
        // h = sqrt(L^2 - b^2)
        let height = 0;
        let isValid = true;

        if (baseDist >= ladderLen) {
          isValid = false;
          height = 0;
        } else {
          height = Math.sqrt(ladderLen * ladderLen - baseDist * baseDist);
        }

        // Safety check: Angle
        // cos(theta) = b / L => theta = acos(b/L)
        const angleRad = Math.acos(baseDist / ladderLen);
        const angleDeg = angleRad * (180 / Math.PI);

        let status = "Safe";
        let statusColor = "bg-emerald-500";

        if (!isValid) {
          status = "Broken!";
          statusColor = "bg-slate-500";
        } else if (angleDeg > 75) {
          status = "Danger: Too Steep!";
          statusColor = "bg-red-500";
        } else if (angleDeg < 50) {
          // Usually 1:4 rule -> ~75 deg is ideal. < 50 is slippery.
          status = "Danger: Too Skeew-whiff!"; // Slipping risk
          statusColor = "bg-red-500"; // Or orange
        } else {
          status = "Safe Angle";
          statusColor = "bg-emerald-500";
        }

        // Visual Scaling (1m = 50px)
        const scale = 50;

        return (
          <div className="p-8 max-w-4xl mx-auto min-h-screen flex flex-col items-center">
            <header className="mb-8 text-center">
              <div className="text-orange-600 font-bold uppercase text-xs tracking-widest mb-2">
                Unit 5: Geometry
              </div>
              <h1 className="text-4xl font-extrabold text-slate-900">
                Ladder & Wall
              </h1>
              <p className="text-slate-500">
                Apply Pythagoras Theorem in real life.
              </p>
            </header>

            <div className="flex flex-col md:flex-row gap-8 w-full">
              {/* Simulation View */}
              <div className="flex-1 bg-white rounded-3xl shadow-xl overflow-hidden border border-orange-100 min-h-[400px] relative">
                {/* Sky/Ground */}
                <div className="absolute inset-x-0 top-0 h-[80%] bg-blue-50"></div>
                <div className="absolute inset-x-0 bottom-0 h-[20%] bg-green-50 border-t border-green-200"></div>

                {/* Wall */}
                <div className="absolute left-10 bottom-[20%] w-4 bg-slate-300 h-[350px] border-r border-slate-400"></div>
                <div className="absolute left-0 bottom-[20%] w-10 h-[350px] bg-slate-200 flex flex-col gap-8 py-4 items-center opacity-50">
                  {/* Bricks pattern */}
                  {Array.from({ length: 10 }).map((_, i) => (
                    <div key={i} className="w-full h-px bg-slate-300"></div>
                  ))}
                </div>

                {/* Elements */}
                <div
                  className="absolute left-14 bottom-[20%] transition-all duration-300 origin-bottom-left"
                  style={{ width: baseDist * scale, height: height * scale }}
                >
                  {/* Triangle Lines (Invisible helper) */}

                  {/* Ladder */}
                  {isValid && (
                    <div
                      className="absolute w-2 bg-amber-700 rounded-full shadow-lg origin-bottom-left"
                      style={{
                        height: ladderLen * scale,
                        left: baseDist * scale, // Start at base
                        bottom: 0,
                        transform: `rotate(${90 + angleDeg}deg)`, // Rotate to lean
                        transformOrigin: "bottom center", // Wait.
                        // Easier logic: SVG line
                      }}
                    ></div>
                  )}

                  {/* Using SVG for simplicity in positioning ladder */}
                </div>

                <svg className="absolute inset-0 w-full h-full pointer-events-none">
                  {/* Origin is Wall base: x=54, y=bottom-[20%] = 80% */}
                  {/* Let's coordinate strictly */}
                  {(() => {
                    const wallX = 54;
                    const groundY = 320; // 400 * 0.8
                    const footX = wallX + baseDist * scale;
                    const headY = groundY - height * scale;

                    return isValid ? (
                      <>
                        {/* Ladder */}
                        <line
                          x1={footX}
                          y1={groundY}
                          x2={wallX}
                          y2={headY}
                          stroke="#b45309"
                          strokeWidth="8"
                          strokeLinecap="round"
                        />
                        {/* Rungs */}
                        {/* Simple line for now */}

                        {/* Measurements */}
                        {/* Height */}
                        <line
                          x1={wallX - 20}
                          y1={groundY}
                          x2={wallX - 20}
                          y2={headY}
                          stroke="#64748b"
                          strokeWidth="1"
                          markerEnd="url(#arrow)"
                          markerStart="url(#arrow)"
                        />
                        <text
                          x={wallX - 30}
                          y={(groundY + headY) / 2}
                          textAnchor="end"
                          className="text-xs font-bold text-slate-500 fill-current"
                        >
                          {height.toFixed(2)}m
                        </text>

                        {/* Base */}
                        <text
                          x={(wallX + footX) / 2}
                          y={groundY + 20}
                          textAnchor="middle"
                          className="text-xs font-bold text-slate-500 fill-current"
                        >
                          {baseDist}m
                        </text>
                      </>
                    ) : null;
                  })()}
                </svg>
              </div>

              {/* Controls */}
              <div className="w-full md:w-80 flex flex-col gap-6">
                <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                  <label className="block text-xs font-bold text-slate-400 uppercase mb-2">
                    Ladder Length
                  </label>
                  <input
                    type="range"
                    min="2"
                    max="6"
                    step="0.1"
                    value={ladderLen}
                    onChange={(e) => setLadderLen(Number(e.target.value))}
                    className="w-full accent-orange-500 h-2 bg-slate-200 rounded"
                  />
                  <div className="text-right font-bold text-orange-600">
                    {ladderLen}m
                  </div>
                </div>

                <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                  <label className="block text-xs font-bold text-slate-400 uppercase mb-2">
                    Distance from Wall
                  </label>
                  <input
                    type="range"
                    min="0.5"
                    max={ladderLen - 0.1}
                    step="0.1"
                    value={baseDist}
                    onChange={(e) => setBaseDist(Number(e.target.value))}
                    className="w-full accent-blue-500 h-2 bg-slate-200 rounded"
                  />
                  <div className="text-right font-bold text-blue-600">
                    {baseDist}m
                  </div>
                </div>

                <div
                  className={`p-6 rounded-2xl shadow-lg text-white text-center transition-colors ${statusColor}`}
                >
                  <div className="text-xs uppercase font-bold opacity-80 mb-1">
                    Height Reached
                  </div>
                  <div className="text-4xl font-mono font-extrabold mb-2">
                    {isValid ? height.toFixed(2) : "0.00"}m
                  </div>
                  <div className="inline-block bg-white/20 px-3 py-1 rounded-full text-xs font-bold">
                    <i className="fa-solid fa-triangle-exclamation mr-1"></i>{" "}
                    {status}
                  </div>
                </div>

                <div className="bg-slate-50 p-4 rounded-xl text-xs text-slate-500 leading-relaxed">
                  <span className="font-bold text-slate-700">
                    Pythagoras Check:
                  </span>
                  <br />
                  {height.toFixed(2)}² + {baseDist}² ≈ {ladderLen}²
                </div>
              </div>
            </div>

            <footer className="mt-8">
              <a
                href="../index.html"
                className="text-orange-600 hover:text-orange-700 font-bold"
              >
                <i className="fa-solid fa-arrow-left mr-2"></i> Back to
                Dashboard
              </a>
            </footer>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
