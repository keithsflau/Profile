<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Standard Deviation | S6 Math</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script
      type="text/javascript"
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
      }
    </style>
  </head>
  <body class="bg-slate-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const App = () => {
          const [inputText, setInputText] = useState("10, 20, 30, 40, 50");
          const [data, setData] = useState([10, 20, 30, 40, 50]);

          useEffect(() => {
              const nums = inputText.split(/[,\s]+/)
                          .map(Number)
                          .filter(n => !isNaN(n));
              if (nums.length > 0) setData(nums);
          }, [inputText]);

          useEffect(() => {
               if(window.MathJax) window.MathJax.typesetPromise();
          }, [data]);

          // Stats Logic
          const N = data.length;
          const sum = data.reduce((a, b) => a + b, 0);
          const mean = N > 0 ? sum / N : 0;
          const variance = N > 0 ? data.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / N : 0;
          const sd = Math.sqrt(variance);

          // Visual Logic
          const min = Math.min(...data);
          const max = Math.max(...data);
          const range = max - min || 10;
          const padding = range * 0.2;
          const domainMin = min - padding;
          const domainMax = max + padding;
          const domainWidth = domainMax - domainMin || 1;

          const w = 600;
          const h = 200;
          const toX = (val) => ((val - domainMin) / domainWidth) * w;

          return (
              <div className="p-8 max-w-4xl mx-auto min-h-screen flex flex-col items-center">
                  <header className="mb-8 text-center">
                      <div className="text-slate-500 font-bold uppercase text-xs tracking-widest mb-2">Unit 1: Statistics</div>
                      <h1 className="text-4xl font-extrabold text-slate-900">Standard Deviation Visualizer</h1>
                      <p className="text-slate-500">Inputs &rarr; Spread Analysis</p>
                  </header>

                  <div className="bg-white p-6 rounded-3xl shadow-xl border border-slate-200 w-full mb-8">
                       <div className="mb-6">
                          <label className="font-bold text-slate-700 block mb-2">Data Set (comma separated)</label>
                          <textarea
                              value={inputText}
                              onChange={(e)=>setInputText(e.target.value)}
                              className="w-full p-4 bg-slate-50 rounded-xl border border-slate-200 font-mono text-slate-700 focus:ring-2 focus:ring-blue-400 outline-none h-24"
                          ></textarea>
                       </div>

                       <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                           <div className="bg-blue-50 p-4 rounded-xl text-center">
                               <div className="text-xs font-bold text-blue-400 uppercase">Count (N)</div>
                               <div className="text-2xl font-bold text-blue-700">{N}</div>
                           </div>
                           <div className="bg-emerald-50 p-4 rounded-xl text-center">
                               <div className="text-xs font-bold text-emerald-400 uppercase">Mean ($\mu$)</div>
                               <div className="text-2xl font-bold text-emerald-700">{mean.toFixed(2)}</div>
                           </div>
                           <div className="bg-purple-50 p-4 rounded-xl text-center">
                               <div className="text-xs font-bold text-purple-400 uppercase">Variance ($\sigma^2$)</div>
                               <div className="text-2xl font-bold text-purple-700">{variance.toFixed(2)}</div>
                           </div>
                           <div className="bg-rose-50 p-4 rounded-xl text-center">
                               <div className="text-xs font-bold text-rose-400 uppercase">SD ($\sigma$)</div>
                               <div className="text-2xl font-bold text-rose-700">{sd.toFixed(2)}</div>
                           </div>
                       </div>

                       {/* Visualization */}
                       <div className="relative border border-slate-100 rounded-xl bg-slate-50 overflow-hidden h-64">
                           <svg width="100%" height="100%" viewBox={`0 0 ${w} ${h}`} preserveAspectRatio="none">
                              {/* Mean Line */}
                              <line x1={toX(mean)} y1="0" x2={toX(mean)} y2={h} stroke="#10b981" strokeWidth="2" strokeDasharray="5" />

                              {/* SD Range Area */}
                              <rect x={toX(mean - sd)} y="0" width={toX(mean + sd) - toX(mean - sd)} height={h} fill="rgba(244, 63, 94, 0.1)" />

                              {/* Data Points */}
                              {data.map((val, i) => (
                                  <circle key={i} cx={toX(val)} cy={h/2} r="6" fill="#6366f1" stroke="white" strokeWidth="2" className="transition-all duration-500" />
                              ))}

                              {/* Axis Line */}
                              <line x1="0" y1={h/2} x2={w} y2={h/2} stroke="#cbd5e1" strokeWidth="1" opacity="0.5" />
                           </svg>

                           <div className="absolute top-2 right-2 flex flex-col gap-1 text-xs font-bold bg-white/80 p-2 rounded">
                              <span className="text-emerald-600">--- Mean</span>
                              <span className="text-rose-500">■ SD Range</span>
                              <span className="text-indigo-500">● Data</span>
                           </div>
                       </div>
                       <div className="flex justify-between text-xs text-slate-400 font-mono mt-2 px-2">
                          <span>{domainMin.toFixed(1)}</span>
                          <span>{domainMax.toFixed(1)}</span>
                       </div>
                  </div>

                  <div className="bg-white p-6 rounded-2xl shadow border border-slate-100 max-w-lg text-center">
                      <div className="text-lg font-mono">
                          \[ \sigma = \sqrt{\frac{\sum(x - \mu)^2}{N}} \]
                      </div>
                      <p className="text-sm text-slate-400 mt-2">Population Standard Deviation Formula</p>
                  </div>

                  
              </div>
          );
      };
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
