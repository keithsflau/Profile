<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Conditional Probability | S4 Math 條件概率</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script
      type="text/javascript"
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
      }
    </style>
  </head>
  <body class="bg-indigo-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;

      const translations = {
          en: {
              unit: "Unit 8: Probability",
              title: "Conditional Probability",
              desc: "Calculate P(A|B) - the probability of A given B occurred.",
              eventA: "P(A)",
              eventB: "P(B)",
              intersection: "P(A ∩ B)",
              conditional: "P(A|B)",
              formula: "Formula",
              meaning: "Given B occurred, the probability of A is..."
          },
          zh: {
              unit: "單元八：概率論",
              title: "條件概率",
              desc: "計算 P(A|B) - 在 B 發生的情況下 A 發生的概率。",
              eventA: "P(A)",
              eventB: "P(B)",
              intersection: "P(A ∩ B)",
              conditional: "P(A|B)",
              formula: "公式",
              meaning: "假設 B 已發生，A 發生的概率是..."
          }
      };

      const App = () => {
          const [lang, setLang] = useState("en");
          const t = translations[lang];

          const [pB, setPB] = useState(0.5);
          const [pIntersect, setPIntersect] = useState(0.2);

          // Ensure intersection <= P(B)
          const validIntersect = Math.min(pIntersect, pB);

          // P(A|B) = P(A ∩ B) / P(B)
          const pConditional = pB > 0 ? validIntersect / pB : 0;

          // Visual: Simple Venn area model
          const w = 400, h = 250;

          useEffect(() => {
              if(window.MathJax) window.MathJax.typesetPromise();
          }, [pB, pIntersect, lang]);

          return (
              <div className="p-8 max-w-4xl mx-auto min-h-screen flex flex-col items-center select-none">
                  <header className="mb-8 text-center w-full relative">
                      <button
                          onClick={() => setLang(lang === 'en' ? 'zh' : 'en')}
                          className="absolute right-0 top-0 px-4 py-2 bg-white rounded-full shadow border border-indigo-200 text-sm font-bold text-indigo-600 hover:bg-indigo-50 transition"
                      >
                          <i className="fa-solid fa-globe mr-2"></i>
                          {lang === 'en' ? '中文' : 'ENG'}
                      </button>
                      <div className="text-indigo-600 font-bold uppercase text-xs tracking-widest mb-2">{t.unit}</div>
                      <h1 className="text-4xl font-extrabold text-slate-900 mb-2">{t.title}</h1>
                      <p className="text-slate-500">{t.desc}</p>
                  </header>

                  <div className="bg-white p-6 rounded-3xl shadow-xl border border-indigo-100 w-full mb-8">
                      {/* Reduced Sample Space Visual */}
                      <div className="bg-slate-50 p-6 rounded-xl mb-6">
                          <svg width={w} height={h} className="mx-auto">
                              {/* Original Sample Space */}
                              <rect x="20" y="20" width="160" height={h-40} fill="rgba(148, 163, 184, 0.2)" stroke="#94a3b8" strokeWidth="2" rx="8" />
                              <text x="100" y={h - 5} textAnchor="middle" className="text-xs fill-slate-400">Sample Space (before)</text>

                              {/* Event B (New Sample Space) */}
                              <rect x="220" y="20" width="160" height={h-40} fill="rgba(99, 102, 241, 0.2)" stroke="#6366f1" strokeWidth="3" rx="8" />
                              <text x="300" y="40" textAnchor="middle" className="text-sm fill-indigo-600 font-bold">B (New Sample Space)</text>

                              {/* A ∩ B within B */}
                              <rect x="230" y="60" width={140 * pConditional} height={h - 100} fill="rgba(34, 197, 94, 0.5)" stroke="#22c55a" strokeWidth="2" rx="4" />
                              <text x={230 + 70 * pConditional} y={(h)/2 + 10} textAnchor="middle" className="text-sm fill-green-700 font-bold">A ∩ B</text>

                              {/* Arrow */}
                              <path d="M 190 125 L 210 125" stroke="#64748b" strokeWidth="2" markerEnd="url(#arrow)" />
                              <defs>
                                  <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
                                  </marker>
                              </defs>
                              <text x="200" y="110" textAnchor="middle" className="text-[10px] fill-slate-400">Given B</text>
                          </svg>
                      </div>

                      {/* Controls */}
                      <div className="grid md:grid-cols-2 gap-6 mb-6">
                          <div>
                              <label className="text-sm font-bold text-indigo-500 block mb-2">{t.eventB}</label>
                              <input type="range" min="0.1" max="1" step="0.05" value={pB} onChange={e => setPB(Number(e.target.value))} className="w-full accent-indigo-500" />
                              <div className="text-right font-mono text-indigo-600 font-bold">{pB.toFixed(2)}</div>
                          </div>
                          <div>
                              <label className="text-sm font-bold text-green-500 block mb-2">{t.intersection}</label>
                              <input type="range" min="0" max={pB} step="0.05" value={validIntersect} onChange={e => setPIntersect(Number(e.target.value))} className="w-full accent-green-500" />
                              <div className="text-right font-mono text-green-600 font-bold">{validIntersect.toFixed(2)}</div>
                          </div>
                      </div>

                      {/* Formula */}
                      <div className="bg-indigo-50 p-4 rounded-xl mb-6 text-center border border-indigo-100">
                          <div className="text-sm font-bold text-indigo-400 uppercase mb-2">{t.formula}</div>
                          <div className="text-xl font-mono">\[ P(A|B) = \frac{P(A \cap B)}{P(B)} = \frac{ {validIntersect.toFixed(2)} }{ {pB.toFixed(2)} } \]</div>
                      </div>

                      {/* Result */}
                      <div className="bg-emerald-50 p-6 rounded-2xl text-center border border-emerald-100">
                          <div className="text-sm font-bold text-emerald-500 uppercase mb-2">{t.conditional}</div>
                          <div className="text-5xl font-extrabold text-emerald-700 font-mono mb-2">{(pConditional * 100).toFixed(1)}%</div>
                          <p className="text-slate-500 text-sm">{t.meaning}</p>
                      </div>
                  </div>

                  
              </div>
          );
      };
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
