<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Similar Triangles | S4 Math 相似三角形</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script
      type="text/javascript"
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
      }
    </style>
  </head>
  <body class="bg-amber-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;

      const translations = {
          en: {
              unit: "Unit 9: Geometry",
              title: "Similar Triangles",
              desc: "Explore the ratio of corresponding sides in similar triangles.",
              scaleFactor: "Scale Factor (k)",
              originalTriangle: "Original Triangle (ABC)",
              similarTriangle: "Similar Triangle (A'B'C')",
              ratio: "Side Ratio"
          },
          zh: {
              unit: "單元九：幾何",
              title: "相似三角形",
              desc: "探索相似三角形對應邊的比例。",
              scaleFactor: "縮放因子 (k)",
              originalTriangle: "原三角形 (ABC)",
              similarTriangle: "相似三角形 (A'B'C')",
              ratio: "邊比"
          }
      };

      const App = () => {
          const [lang, setLang] = useState("en");
          const t = translations[lang];

          const [k, setK] = useState(1.5);

          // Original triangle vertices
          const A = { x: 50, y: 220 };
          const B = { x: 150, y: 220 };
          const C = { x: 100, y: 120 };

          // Similar triangle (scaled)
          const A2 = { x: 250, y: 220 };
          const B2 = { x: 250 + (B.x - A.x) * k, y: 220 };
          const C2 = { x: 250 + (C.x - A.x) * k, y: 220 - (A.y - C.y) * k };

          // Side lengths
          const AB = Math.sqrt(Math.pow(B.x - A.x, 2) + Math.pow(B.y - A.y, 2));
          const BC = Math.sqrt(Math.pow(C.x - B.x, 2) + Math.pow(C.y - B.y, 2));
          const CA = Math.sqrt(Math.pow(A.x - C.x, 2) + Math.pow(A.y - C.y, 2));

          const AB2 = AB * k;
          const BC2 = BC * k;
          const CA2 = CA * k;

          useEffect(() => {
              if(window.MathJax) window.MathJax.typesetPromise();
          }, [k, lang]);

          return (
              <div className="p-8 max-w-5xl mx-auto min-h-screen flex flex-col items-center select-none">
                  <header className="mb-8 text-center w-full relative">
                      <button
                          onClick={() => setLang(lang === 'en' ? 'zh' : 'en')}
                          className="absolute right-0 top-0 px-4 py-2 bg-white rounded-full shadow border border-amber-200 text-sm font-bold text-amber-600 hover:bg-amber-50 transition"
                      >
                          <i className="fa-solid fa-globe mr-2"></i>
                          {lang === 'en' ? '中文' : 'ENG'}
                      </button>
                      <div className="text-amber-600 font-bold uppercase text-xs tracking-widest mb-2">{t.unit}</div>
                      <h1 className="text-4xl font-extrabold text-slate-900 mb-2">{t.title}</h1>
                      <p className="text-slate-500">{t.desc}</p>
                  </header>

                  <div className="bg-white p-6 rounded-3xl shadow-xl border border-amber-100 w-full mb-8">
                      {/* Triangles */}
                      <div className="bg-slate-50 p-4 rounded-xl mb-6 overflow-x-auto">
                          <svg width="550" height="250" className="mx-auto">
                              {/* Original Triangle */}
                              <polygon
                                  points={`${A.x},${A.y} ${B.x},${B.y} ${C.x},${C.y}`}
                                  fill="rgba(245, 158, 11, 0.2)"
                                  stroke="#f59e0b"
                                  strokeWidth="3"
                              />
                              <circle cx={A.x} cy={A.y} r="4" fill="#f59e0b" />
                              <circle cx={B.x} cy={B.y} r="4" fill="#f59e0b" />
                              <circle cx={C.x} cy={C.y} r="4" fill="#f59e0b" />
                              <text x={A.x - 15} y={A.y + 15} className="text-xs fill-amber-600 font-bold">A</text>
                              <text x={B.x + 5} y={B.y + 15} className="text-xs fill-amber-600 font-bold">B</text>
                              <text x={C.x} y={C.y - 10} textAnchor="middle" className="text-xs fill-amber-600 font-bold">C</text>

                              {/* Side labels */}
                              <text x={(A.x + B.x)/2} y={A.y + 25} textAnchor="middle" className="text-[10px] fill-amber-500 font-mono">{AB.toFixed(0)}</text>

                              {/* Similar Triangle */}
                              <polygon
                                  points={`${A2.x},${A2.y} ${B2.x},${B2.y} ${C2.x},${C2.y}`}
                                  fill="rgba(59, 130, 246, 0.2)"
                                  stroke="#3b82f6"
                                  strokeWidth="3"
                              />
                              <circle cx={A2.x} cy={A2.y} r="4" fill="#3b82f6" />
                              <circle cx={B2.x} cy={B2.y} r="4" fill="#3b82f6" />
                              <circle cx={C2.x} cy={C2.y} r="4" fill="#3b82f6" />
                              <text x={A2.x - 15} y={A2.y + 15} className="text-xs fill-blue-600 font-bold">A'</text>
                              <text x={B2.x + 5} y={B2.y + 15} className="text-xs fill-blue-600 font-bold">B'</text>
                              <text x={C2.x} y={C2.y - 10} textAnchor="middle" className="text-xs fill-blue-600 font-bold">C'</text>

                              {/* Side labels */}
                              <text x={(A2.x + B2.x)/2} y={A2.y + 25} textAnchor="middle" className="text-[10px] fill-blue-500 font-mono">{AB2.toFixed(0)}</text>
                          </svg>
                      </div>

                      {/* Control */}
                      <div className="mb-6">
                          <label className="text-sm font-bold text-slate-500 block mb-2">{t.scaleFactor}</label>
                          <input type="range" min="0.5" max="2" step="0.1" value={k} onChange={e => setK(Number(e.target.value))} className="w-full accent-amber-500" />
                          <div className="text-right font-mono text-amber-600 font-bold text-2xl">k = {k.toFixed(1)}</div>
                      </div>

                      {/* Ratios */}
                      <div className="grid md:grid-cols-2 gap-6">
                          <div className="bg-amber-50 p-4 rounded-xl border border-amber-100">
                              <div className="text-sm font-bold text-amber-500 uppercase mb-3">{t.originalTriangle}</div>
                              <div className="space-y-1 font-mono text-sm">
                                  <div>AB = {AB.toFixed(1)}</div>
                                  <div>BC = {BC.toFixed(1)}</div>
                                  <div>CA = {CA.toFixed(1)}</div>
                              </div>
                          </div>
                          <div className="bg-blue-50 p-4 rounded-xl border border-blue-100">
                              <div className="text-sm font-bold text-blue-500 uppercase mb-3">{t.similarTriangle}</div>
                              <div className="space-y-1 font-mono text-sm">
                                  <div>A'B' = {AB2.toFixed(1)}</div>
                                  <div>B'C' = {BC2.toFixed(1)}</div>
                                  <div>C'A' = {CA2.toFixed(1)}</div>
                              </div>
                          </div>
                      </div>

                      {/* Ratio Display */}
                      <div className="bg-emerald-50 p-6 rounded-xl mt-6 text-center border border-emerald-100">
                          <div className="text-sm font-bold text-emerald-500 uppercase mb-2">{t.ratio}</div>
                          <div className="text-2xl font-mono">
                              \[ \frac{A'B'}{AB} = \frac{B'C'}{BC} = \frac{C'A'}{CA} = k = {k.toFixed(1)} \]
                          </div>
                      </div>
                  </div>

                  
              </div>
          );
      };
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
