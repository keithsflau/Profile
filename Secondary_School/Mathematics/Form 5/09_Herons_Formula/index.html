<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heron's Formula | S5 Math 海倫公式</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script
      type="text/javascript"
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
      }
    </style>
  </head>
  <body class="bg-orange-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect, useMemo } = React;

      const translations = {
        en: {
          unit: "Unit 3: Trigonometry",
          title: "Heron's Formula",
          desc: "Calculate triangle area using only side lengths.",
          sideA: "Side a",
          sideB: "Side b",
          sideC: "Side c",
          semiPerimeter: "Semi-perimeter (s)",
          area: "Area",
          valid: "Valid Triangle",
          invalid: "Invalid Triangle",
          formula: "Formula",
        },
        zh: {
          unit: "單元三：三角學",
          title: "海倫公式",
          desc: "僅使用邊長計算三角形面積。",
          sideA: "邊長 a",
          sideB: "邊長 b",
          sideC: "邊長 c",
          semiPerimeter: "半周長 (s)",
          area: "面積",
          valid: "有效三角形",
          invalid: "無效三角形",
          formula: "公式",
        },
      };

      const App = () => {
        const [lang, setLang] = useState("en");
        const t = translations[lang];

        const [a, setA] = useState(5);
        const [b, setB] = useState(6);
        const [c, setC] = useState(7);

        const isValid = a + b > c && a + c > b && b + c > a;
        const s = (a + b + c) / 2;
        const area = isValid ? Math.sqrt(s * (s - a) * (s - b) * (s - c)) : 0;

        // Simple Triangle Drawing
        const w = 400,
          h = 300;
        const scale = 20;

        // Place A at origin, B at (c, 0), C computed
        const Ax = 0,
          Ay = 0;
        const Bx = c,
          By = 0;
        // Using law of cosines to find C
        const cosA = (b * b + c * c - a * a) / (2 * b * c);
        const Cx = b * cosA;
        const Cy = b * Math.sqrt(1 - cosA * cosA);

        const toScreen = (x, y) => ({
          x: 80 + x * scale,
          y: h - 50 - y * scale,
        });

        const pA = toScreen(Ax, Ay);
        const pB = toScreen(Bx, By);
        const pC = toScreen(Cx, Cy);

        useEffect(() => {
          if (window.MathJax) window.MathJax.typesetPromise();
        }, [a, b, c, lang]);

        return (
          <div className="p-8 max-w-4xl mx-auto min-h-screen flex flex-col items-center select-none">
            <header className="mb-8 text-center w-full relative">
              <button
                onClick={() => setLang(lang === "en" ? "zh" : "en")}
                className="absolute right-0 top-0 px-4 py-2 bg-white rounded-full shadow border border-orange-200 text-sm font-bold text-orange-600 hover:bg-orange-50 transition"
              >
                <i className="fa-solid fa-globe mr-2"></i>
                {lang === "en" ? "中文" : "ENG"}
              </button>
              <div className="text-orange-600 font-bold uppercase text-xs tracking-widest mb-2">
                {t.unit}
              </div>
              <h1 className="text-4xl font-extrabold text-slate-900 mb-2">
                {t.title}
              </h1>
              <p className="text-slate-500">{t.desc}</p>
            </header>

            <div className="bg-white p-6 rounded-3xl shadow-xl border border-orange-100 w-full mb-8">
              {/* Triangle Visual */}
              <div className="bg-slate-50 p-4 rounded-xl mb-6">
                <svg width={w} height={h} className="mx-auto">
                  {isValid ? (
                    <>
                      <polygon
                        points={`${pA.x},${pA.y} ${pB.x},${pB.y} ${pC.x},${pC.y}`}
                        fill="rgba(249, 115, 22, 0.15)"
                        stroke="#f97316"
                        strokeWidth="3"
                        strokeLinejoin="round"
                      />
                      {/* Side Labels */}
                      <text
                        x={(pB.x + pC.x) / 2 + 10}
                        y={(pB.y + pC.y) / 2}
                        className="text-sm fill-orange-600 font-bold"
                      >
                        a = {a}
                      </text>
                      <text
                        x={(pA.x + pC.x) / 2 - 25}
                        y={(pA.y + pC.y) / 2}
                        className="text-sm fill-orange-600 font-bold"
                      >
                        b = {b}
                      </text>
                      <text
                        x={(pA.x + pB.x) / 2}
                        y={pA.y + 20}
                        textAnchor="middle"
                        className="text-sm fill-orange-600 font-bold"
                      >
                        c = {c}
                      </text>

                      {/* Vertices */}
                      <circle cx={pA.x} cy={pA.y} r="4" fill="#f97316" />
                      <circle cx={pB.x} cy={pB.y} r="4" fill="#f97316" />
                      <circle cx={pC.x} cy={pC.y} r="4" fill="#f97316" />
                    </>
                  ) : (
                    <text
                      x={w / 2}
                      y={h / 2}
                      textAnchor="middle"
                      className="text-xl fill-red-500 font-bold"
                    >
                      {t.invalid}
                    </text>
                  )}
                </svg>
              </div>

              {/* Controls */}
              <div className="grid md:grid-cols-3 gap-6 mb-6">
                <div>
                  <label className="text-sm font-bold text-slate-500 block mb-2">
                    {t.sideA}
                  </label>
                  <input
                    type="range"
                    min="1"
                    max="15"
                    step="0.5"
                    value={a}
                    onChange={(e) => setA(Number(e.target.value))}
                    className="w-full accent-orange-500"
                  />
                  <div className="text-right font-mono text-orange-600 font-bold">
                    {a}
                  </div>
                </div>
                <div>
                  <label className="text-sm font-bold text-slate-500 block mb-2">
                    {t.sideB}
                  </label>
                  <input
                    type="range"
                    min="1"
                    max="15"
                    step="0.5"
                    value={b}
                    onChange={(e) => setB(Number(e.target.value))}
                    className="w-full accent-orange-500"
                  />
                  <div className="text-right font-mono text-orange-600 font-bold">
                    {b}
                  </div>
                </div>
                <div>
                  <label className="text-sm font-bold text-slate-500 block mb-2">
                    {t.sideC}
                  </label>
                  <input
                    type="range"
                    min="1"
                    max="15"
                    step="0.5"
                    value={c}
                    onChange={(e) => setC(Number(e.target.value))}
                    className="w-full accent-orange-500"
                  />
                  <div className="text-right font-mono text-orange-600 font-bold">
                    {c}
                  </div>
                </div>
              </div>

              {/* Formula */}
              <div className="bg-orange-50 p-4 rounded-xl mb-6 text-center border border-orange-100">
                <div className="text-sm font-bold text-orange-400 uppercase mb-2">
                  {t.formula}
                </div>
                <div className="text-lg font-mono">
                  \[ s = \frac{a + b + c}
                  {2}, \quad A = \sqrt{s(s - a)(s - b)(s - c)} \]
                </div>
              </div>

              {/* Results */}
              <div className="grid md:grid-cols-2 gap-4">
                <div className="bg-blue-50 p-4 rounded-xl text-center border border-blue-100">
                  <div className="text-sm font-bold text-blue-500 uppercase mb-2">
                    {t.semiPerimeter}
                  </div>
                  <div className="text-3xl font-bold text-blue-700 font-mono">
                    {s.toFixed(2)}
                  </div>
                </div>
                <div
                  className={`p-4 rounded-xl text-center border ${
                    isValid
                      ? "bg-emerald-50 border-emerald-100"
                      : "bg-red-50 border-red-100"
                  }`}
                >
                  <div
                    className={`text-sm font-bold uppercase mb-2 ${
                      isValid ? "text-emerald-500" : "text-red-500"
                    }`}
                  >
                    {t.area}
                  </div>
                  <div
                    className={`text-3xl font-bold font-mono ${
                      isValid ? "text-emerald-700" : "text-red-500"
                    }`}
                  >
                    {isValid ? area.toFixed(2) : "—"}
                  </div>
                </div>
              </div>
            </div>

            
          </div>
        );
      };
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
