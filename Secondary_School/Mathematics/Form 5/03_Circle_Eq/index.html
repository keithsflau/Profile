<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Equation of Circle | S5 Math</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script
      type="text/javascript"
      id="MathJax-script"
      async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
      }
    </style>
  </head>
  <body class="bg-rose-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect, useMemo } = React;
      const App = () => {
        const [h, setH] = useState(2);
        const [k, setK] = useState(3);
        const [r, setR] = useState(4);

        // Grid config
        const range = 10;
        const size = 400;
        const scale = size / (range * 2); // 20px per unit
        const centerX = size / 2;
        const centerY = size / 2;

        // Map math coord to screen
        const toScreen = (x, y) => ({
          x: centerX + x * scale,
          y: centerY - y * scale,
        });

        // Math Logic
        const D = -2 * h;
        const E = -2 * k;
        const F = h * h + k * k - r * r;

        const formatTerm = (val, variable) => {
          if (val === 0) return "";
          const sign = val >= 0 ? "+ " : "- ";
          const abs = Math.abs(val);
          const num = abs === 1 ? "" : abs;
          return `${sign}${num}${variable} `;
        };

        const generalFormArray = [
          "x^2 + y^2",
          formatTerm(D, "x"),
          formatTerm(E, "y"),
          formatTerm(F, ""),
        ];
        const generalFormValues = generalFormArray
          .filter((t) => t !== "")
          .join("")
          .replace(/^\+ /, ""); // remove leading +
        const generalForm = generalFormValues + "= 0";

        const standardForm = `(x ${h >= 0 ? "-" : "+"} ${Math.abs(h)})^2 + (y ${
          k >= 0 ? "-" : "+"
        } ${Math.abs(k)})^2 = ${r * r}`;

        useEffect(() => {
          if (window.MathJax) {
            window.MathJax.typesetPromise();
          }
        }, [h, k, r]);

        const centerScreen = toScreen(h, k);
        const rPx = r * scale;

        return (
          <div className="p-8 max-w-4xl mx-auto min-h-screen flex flex-col items-center select-none">
            <header className="mb-8 text-center">
              <div className="text-rose-600 font-bold uppercase text-xs tracking-widest mb-2">
                Unit 2: Circle Geometry
              </div>
              <h1 className="text-4xl font-extrabold text-slate-900">
                Equation of Circle
              </h1>
            </header>

            <div className="bg-white p-6 rounded-3xl shadow-xl border border-rose-100 w-full flex flex-col md:flex-row gap-8 items-center">
              {/* Visual */}
              <div
                className="relative border border-slate-200 rounded-xl overflow-hidden bg-slate-50 shrink-0"
                style={{ width: size, height: size }}
              >
                <svg width={size} height={size}>
                  {/* Grid Lines */}
                  {Array.from({ length: range * 2 + 1 }).map((_, i) => {
                    const val = i - range;
                    const pos = (i / (range * 2)) * size;
                    const isAxis = val === 0;
                    return (
                      <React.Fragment key={i}>
                        <line
                          x1={pos}
                          y1="0"
                          x2={pos}
                          y2={size}
                          stroke={isAxis ? "#94a3b8" : "#e2e8f0"}
                          strokeWidth={isAxis ? 2 : 1}
                        />
                        <line
                          x1="0"
                          y1={pos}
                          x2={size}
                          y2={pos}
                          stroke={isAxis ? "#94a3b8" : "#e2e8f0"}
                          strokeWidth={isAxis ? 2 : 1}
                        />
                      </React.Fragment>
                    );
                  })}

                  {/* Circle */}
                  <circle
                    cx={centerScreen.x}
                    cy={centerScreen.y}
                    r={rPx}
                    fill="rgba(244, 63, 94, 0.1)"
                    stroke="#f43f5e"
                    strokeWidth="3"
                  />
                  {/* Center Point */}
                  <circle
                    cx={centerScreen.x}
                    cy={centerScreen.y}
                    r="4"
                    fill="#881337"
                  />
                  {/* Radius Line helper */}
                  <line
                    x1={centerScreen.x}
                    y1={centerScreen.y}
                    x2={centerScreen.x + rPx}
                    y2={centerScreen.y}
                    stroke="#881337"
                    strokeDasharray="4"
                    opacity="0.5"
                  />
                  <text
                    x={centerScreen.x + rPx / 2}
                    y={centerScreen.y - 5}
                    fontSize="10"
                    fill="#881337"
                    textAnchor="middle"
                  >
                    r={r}
                  </text>
                </svg>
                <div className="absolute top-2 right-2 bg-white/80 px-2 py-1 rounded text-xs text-slate-500 font-mono">
                  1 grid = 1 unit
                </div>
              </div>

              {/* Controls & Equations */}
              <div className="flex-1 w-full relative">
                <div className="mb-8">
                  <h3 className="font-bold text-slate-800 mb-4 border-b pb-2">
                    Properties
                  </h3>
                  <div className="space-y-6">
                    <div>
                      <div className="flex justify-between mb-1">
                        <label className="text-sm font-bold text-slate-500">
                          Center X (h)
                        </label>
                        <span className="font-mono bg-rose-50 text-rose-600 px-2 rounded">
                          {h}
                        </span>
                      </div>
                      <input
                        type="range"
                        min="-8"
                        max="8"
                        step="1"
                        value={h}
                        onChange={(e) => setH(Number(e.target.value))}
                        className="w-full accent-rose-500"
                      />
                    </div>
                    <div>
                      <div className="flex justify-between mb-1">
                        <label className="text-sm font-bold text-slate-500">
                          Center Y (k)
                        </label>
                        <span className="font-mono bg-rose-50 text-rose-600 px-2 rounded">
                          {k}
                        </span>
                      </div>
                      <input
                        type="range"
                        min="-8"
                        max="8"
                        step="1"
                        value={k}
                        onChange={(e) => setK(Number(e.target.value))}
                        className="w-full accent-rose-500"
                      />
                    </div>
                    <div>
                      <div className="flex justify-between mb-1">
                        <label className="text-sm font-bold text-slate-500">
                          Radius (r)
                        </label>
                        <span className="font-mono bg-rose-50 text-rose-600 px-2 rounded">
                          {r}
                        </span>
                      </div>
                      <input
                        type="range"
                        min="1"
                        max="9"
                        step="1"
                        value={r}
                        onChange={(e) => setR(Number(e.target.value))}
                        className="w-full accent-rose-500"
                      />
                    </div>
                  </div>
                </div>

                <div className="bg-slate-50 p-4 rounded-xl border border-slate-200">
                  <div className="mb-4">
                    <div className="text-xs font-bold text-slate-400 uppercase mb-1">
                      Standard Form
                    </div>
                    <div className="text-xl font-mono text-slate-800">
                      \[ {standardForm} \]
                    </div>
                  </div>
                  <div>
                    <div className="text-xs font-bold text-slate-400 uppercase mb-1">
                      General Form
                    </div>
                    <div className="text-lg font-mono text-rose-600 font-bold">
                      \[ {generalForm} \]
                    </div>
                  </div>
                </div>
              </div>
            </div>

            
          </div>
        );
      };
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
