<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sequence Generator | S1 Math</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
      }
    </style>
  </head>
  <body class="bg-cyan-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const App = () => {
        const [firstTerm, setFirstTerm] = useState(2);
        const [diff, setDiff] = useState(3);
        const [type, setType] = useState("arithmetic"); // or 'geometric'
        const chartRef = useRef(null);
        const [chartInstance, setChartInstance] = useState(null);

        // Generate Sequence
        const sequence = [];
        for (let n = 1; n <= 10; n++) {
          if (type === "arithmetic") sequence.push(firstTerm + (n - 1) * diff);
          else sequence.push(firstTerm * Math.pow(diff, n - 1));
        }

        // Chart Logic
        useEffect(() => {
          if (chartRef.current) {
            const ctx = chartRef.current.getContext("2d");
            if (chartInstance) chartInstance.destroy();

            const newChart = new Chart(ctx, {
              type: "line",
              data: {
                labels: Array.from({ length: 10 }, (_, i) => i + 1),
                datasets: [
                  {
                    label: "Sequence Value T(n)",
                    data: sequence,
                    borderColor: "#0891b2",
                    backgroundColor: "rgba(8, 145, 178, 0.2)",
                    borderWidth: 3,
                    pointBackgroundColor: "#fff",
                    pointBorderColor: "#0891b2",
                    pointRadius: 6,
                    fill: true,
                    tension: type === "geometric" ? 0.3 : 0,
                  },
                ],
              },
              options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: {
                  y: { beginAtZero: true },
                },
              },
            });
            setChartInstance(newChart);
          }
        }, [firstTerm, diff, type]);

        return (
          <div className="p-8 max-w-5xl mx-auto min-h-screen flex flex-col items-center">
            <header className="mb-8 text-center">
              <div className="text-cyan-600 font-bold uppercase text-xs tracking-widest mb-2">
                Unit 1: Algebra
              </div>
              <h1 className="text-4xl font-extrabold text-slate-900">
                Sequence Generator
              </h1>
              <p className="text-slate-500">
                Explore Arithmetic (+) and Geometric (×) patterns.
              </p>
            </header>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 w-full">
              <div className="bg-white p-6 rounded-3xl shadow-lg border border-cyan-100 h-fit">
                <div className="flex bg-slate-100 p-1 rounded-xl mb-6">
                  <button
                    onClick={() => {
                      setType("arithmetic");
                      setDiff(3);
                    }}
                    className={`flex-1 py-2 rounded-lg font-bold text-sm transition ${
                      type === "arithmetic"
                        ? "bg-white shadow text-cyan-600"
                        : "text-slate-500 hover:text-slate-700"
                    }`}
                  >
                    Arithmetic
                  </button>
                  <button
                    onClick={() => {
                      setType("geometric");
                      setDiff(2);
                    }}
                    className={`flex-1 py-2 rounded-lg font-bold text-sm transition ${
                      type === "geometric"
                        ? "bg-white shadow text-cyan-600"
                        : "text-slate-500 hover:text-slate-700"
                    }`}
                  >
                    Geometric
                  </button>
                </div>

                <label className="block text-sm font-bold text-slate-500 mb-2">
                  First Term (a)
                </label>
                <input
                  type="number"
                  value={firstTerm}
                  onChange={(e) => setFirstTerm(Number(e.target.value))}
                  className="w-full p-3 bg-slate-50 rounded-xl border border-slate-200 font-bold mb-4 focus:outline-none focus:border-cyan-500"
                />

                <label className="block text-sm font-bold text-slate-500 mb-2">
                  {type === "arithmetic"
                    ? "Common Difference (d)"
                    : "Common Ratio (r)"}
                </label>
                <input
                  type="number"
                  value={diff}
                  onChange={(e) => setDiff(Number(e.target.value))}
                  className="w-full p-3 bg-slate-50 rounded-xl border border-slate-200 font-bold mb-6 focus:outline-none focus:border-cyan-500"
                />

                <div className="bg-cyan-50 p-4 rounded-xl border border-cyan-100">
                  <span className="text-xs uppercase font-bold text-cyan-600 tracking-widest">
                    General Term
                  </span>
                  <div className="text-xl font-mono mt-1 text-slate-700">
                    {type === "arithmetic"
                      ? `T(n) = ${firstTerm} + (n-1)${
                          diff < 0 ? `(${diff})` : diff
                        }`
                      : `T(n) = ${firstTerm} × ${diff}^(n-1)`}
                  </div>
                </div>
              </div>

              <div className="lg:col-span-2 flex flex-col gap-6">
                <div className="bg-white p-6 rounded-3xl shadow-lg border border-cyan-100 overflow-x-auto">
                  <div className="flex gap-4 min-w-max">
                    {sequence.map((num, i) => (
                      <div
                        key={i}
                        className="flex flex-col items-center gap-2 group"
                      >
                        <div className="text-xs text-slate-400 font-bold">
                          n={i + 1}
                        </div>
                        <div className="w-12 h-12 rounded-xl bg-cyan-500 text-white flex items-center justify-center font-bold text-lg shadow-lg group-hover:scale-110 transition">
                          {num}
                        </div>
                        {i < 9 && (
                          <div className="text-xs text-slate-300 absolute mt-8 ml-16 transform translate-x-2">
                            {type === "arithmetic"
                              ? diff >= 0
                                ? `+${diff}`
                                : diff
                              : `×${diff}`}{" "}
                            <i className="fa-solid fa-arrow-right"></i>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>

                <div className="bg-white p-6 rounded-3xl shadow-lg border border-cyan-100 h-64">
                  <canvas ref={chartRef}></canvas>
                </div>
              </div>
            </div>

            
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
