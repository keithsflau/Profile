<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Estimation Jar | S1 Math</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
      }
    </style>
  </head>
  <body class="bg-amber-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;

      const App = () => {
        const [count, setCount] = useState(0);
        const [guess, setGuess] = useState("");
        const [submitted, setSubmitted] = useState(false);
        const [candies, setCandies] = useState([]);

        const colors = [
          "bg-red-500",
          "bg-green-500",
          "bg-blue-500",
          "bg-yellow-500",
          "bg-purple-500",
          "bg-pink-500",
        ];

        const generate = () => {
          const n = Math.floor(Math.random() * 80) + 20; // 20 to 100
          setCount(n);
          setSubmitted(false);
          setGuess("");

          // Generate candy positions
          // Simple random scatter. Should allow some overlap for realism but contained.
          const newCandies = Array.from({ length: n }).map((_, i) => ({
            id: i,
            x: Math.random() * 80 + 10,
            y: Math.random() * 80 + 10 + Math.random() * 5, // Fall towards bottom slightly? Just pure random for now.
            color: colors[Math.floor(Math.random() * colors.length)],
            rot: Math.random() * 360,
          }));
          setCandies(newCandies);
        };

        useEffect(() => {
          generate();
        }, []);

        const check = (e) => {
          e.preventDefault();
          setSubmitted(true);
        };

        const diff = Math.abs(count - Number(guess));
        const error = ((diff / count) * 100).toFixed(1);

        return (
          <div className="p-8 max-w-4xl mx-auto min-h-screen flex flex-col items-center">
            <header className="mb-8 text-center">
              <div className="text-amber-600 font-bold uppercase text-xs tracking-widest mb-2">
                Unit 3: Data
              </div>
              <h1 className="text-4xl font-extrabold text-slate-900">
                Estimation Jar
              </h1>
              <p className="text-slate-500">
                How good are your estimation skills?
              </p>
            </header>

            <div className="flex flex-col md:flex-row items-center gap-12 w-full max-w-4xl">
              {/* The Jar */}
              <div className="relative w-64 h-80 bg-white/40 backdrop-blur-sm border-4 border-slate-300 rounded-b-3xl rounded-t-lg shadow-2xl overflow-hidden">
                {/* Lid */}
                <div className="absolute -top-4 left-[-4px] right-[-4px] h-4 bg-slate-400 border border-slate-500"></div>

                {/* Candies */}
                <div className="absolute inset-0 p-4">
                  {candies.map((c) => (
                    <div
                      key={c.id}
                      className={`absolute w-6 h-6 rounded-full ${c.color} shadow border border-black/10`}
                      style={{
                        left: `${c.x}%`,
                        top: `${c.y}%`,
                        transform: `rotate(${c.rot}deg)`,
                      }}
                    ></div>
                  ))}
                </div>

                {/* Glass Reflection */}
                <div className="absolute inset-0 bg-gradient-to-tr from-white/20 to-transparent pointer-events-none rounded-b-3xl"></div>
              </div>

              {/* Controls */}
              <div className="bg-white p-8 rounded-3xl shadow-xl w-full md:w-96 text-center border border-amber-100 h-80 flex flex-col justify-center">
                {!submitted ? (
                  <form onSubmit={check} className="space-y-6">
                    <h2 className="text-xl font-bold text-slate-700">
                      How many candies?
                    </h2>

                    <input
                      type="number"
                      value={guess}
                      onChange={(e) => setGuess(e.target.value)}
                      className="w-full text-center text-4xl font-extrabold text-slate-800 bg-slate-50 rounded-xl p-4 outline-none focus:ring-2 focus:ring-amber-400"
                      placeholder="?"
                      autoFocus
                    />

                    <button
                      type="submit"
                      className="w-full py-4 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl shadow-lg transition text-xl"
                    >
                      Check Guess
                    </button>
                  </form>
                ) : (
                  <div className="space-y-6 animate-fade-in-up">
                    <div>
                      <div className="text-xs uppercase font-bold text-slate-400">
                        Actual Count
                      </div>
                      <div className="text-6xl font-extrabold text-amber-600">
                        {count}
                      </div>
                    </div>

                    <div className="bg-slate-50 p-4 rounded-xl">
                      <div className="text-sm font-bold text-slate-600">
                        Your Guess: {guess}
                      </div>
                      <div
                        className={`text-lg font-bold ${
                          diff < 5 ? "text-green-500" : "text-red-500"
                        }`}
                      >
                        Off by {diff} ({error}%)
                      </div>
                    </div>

                    <button
                      onClick={generate}
                      className="w-full py-4 bg-slate-800 hover:bg-slate-900 text-white font-bold rounded-xl shadow-lg transition"
                    >
                      Try Another Jar
                    </button>
                  </div>
                )}
              </div>
            </div>

            
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
