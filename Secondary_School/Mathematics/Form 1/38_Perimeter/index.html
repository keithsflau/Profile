<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perimeter Explorer 周界探索 | S1 Math</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", sans-serif;
      }
    </style>
  </head>
  <body class="bg-lime-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;

      const App = () => {
        const [lang, setLang] = useState("en");
        const [shape, setShape] = useState("rectangle");
        const [a, setA] = useState(8);
        const [b, setB] = useState(5);

        const t = {
          title: { en: "Perimeter Explorer", zh: "周界探索" },
          shape: { en: "Shape", zh: "形狀" },
          rectangle: { en: "Rectangle", zh: "長方形" },
          square: { en: "Square", zh: "正方形" },
          triangle: { en: "Triangle", zh: "三角形" },
          circle: { en: "Circle", zh: "圓形" },
          perimeter: { en: "Perimeter", zh: "周界" },
          back: { en: "Back to Dashboard", zh: "返回主頁" },
        };

        let perimeter = 0;
        let formula = "";

        if (shape === "rectangle") {
          perimeter = 2 * (a + b);
          formula = `2 × (${a} + ${b}) = ${perimeter}`;
        } else if (shape === "square") {
          perimeter = 4 * a;
          formula = `4 × ${a} = ${perimeter}`;
        } else if (shape === "triangle") {
          perimeter = a + b + Math.sqrt(a * a + b * b);
          formula = `${a} + ${b} + √(${a}² + ${b}²) = ${perimeter.toFixed(2)}`;
        } else if (shape === "circle") {
          perimeter = 2 * Math.PI * a;
          formula = `2 × π × ${a} = ${perimeter.toFixed(2)}`;
        }

        return (
          <div className="p-6 max-w-4xl mx-auto min-h-screen flex flex-col">
            <header className="mb-6 flex justify-between items-center">
              <div>
                <div className="text-lime-600 font-bold uppercase text-xs tracking-widest mb-1">
                  S1 Math
                </div>
                <h1 className="text-3xl font-extrabold text-slate-900">
                  {t.title[lang]}
                </h1>
              </div>
              <button
                onClick={() => setLang(lang === "en" ? "zh" : "en")}
                className="px-3 py-1 bg-white border border-lime-200 rounded-lg text-sm font-bold hover:bg-lime-100"
              >
                {lang === "en" ? "中文" : "ENG"}
              </button>
            </header>

            {/* Shape Selector */}
            <div className="flex gap-2 mb-6 flex-wrap">
              {["rectangle", "square", "triangle", "circle"].map((s) => (
                <button
                  key={s}
                  onClick={() => setShape(s)}
                  className={`px-4 py-2 rounded-lg font-bold transition ${
                    shape === s
                      ? "bg-lime-500 text-white"
                      : "bg-white text-lime-600 border border-lime-200"
                  }`}
                >
                  {t[s][lang]}
                </button>
              ))}
            </div>

            {/* Inputs */}
            <div className="grid grid-cols-2 gap-4 mb-6">
              <div className="bg-white p-4 rounded-xl shadow-sm border border-lime-100">
                <label className="block text-xs font-bold text-slate-400 uppercase mb-2">
                  {shape === "circle"
                    ? lang === "en"
                      ? "Radius"
                      : "半徑"
                    : lang === "en"
                    ? "Side a"
                    : "邊長 a"}
                </label>
                <input
                  type="number"
                  min="1"
                  value={a}
                  onChange={(e) => setA(Number(e.target.value))}
                  className="w-full text-3xl font-bold text-center p-2 border-2 border-lime-200 rounded-lg"
                />
              </div>
              {(shape === "rectangle" || shape === "triangle") && (
                <div className="bg-white p-4 rounded-xl shadow-sm border border-lime-100">
                  <label className="block text-xs font-bold text-slate-400 uppercase mb-2">
                    {lang === "en" ? "Side b" : "邊長 b"}
                  </label>
                  <input
                    type="number"
                    min="1"
                    value={b}
                    onChange={(e) => setB(Number(e.target.value))}
                    className="w-full text-3xl font-bold text-center p-2 border-2 border-lime-200 rounded-lg"
                  />
                </div>
              )}
            </div>

            {/* Visual */}
            <div
              className="bg-white p-8 rounded-2xl border border-lime-100 flex items-center justify-center mb-6"
              style={{ minHeight: "200px" }}
            >
              <svg width="200" height="150" className="overflow-visible">
                {shape === "rectangle" && (
                  <rect
                    x="20"
                    y="20"
                    width="160"
                    height="110"
                    fill="rgba(132, 204, 22, 0.2)"
                    stroke="#84cc16"
                    strokeWidth="3"
                  />
                )}
                {shape === "square" && (
                  <rect
                    x="35"
                    y="10"
                    width="130"
                    height="130"
                    fill="rgba(132, 204, 22, 0.2)"
                    stroke="#84cc16"
                    strokeWidth="3"
                  />
                )}
                {shape === "triangle" && (
                  <polygon
                    points="100,10 20,140 180,140"
                    fill="rgba(132, 204, 22, 0.2)"
                    stroke="#84cc16"
                    strokeWidth="3"
                  />
                )}
                {shape === "circle" && (
                  <circle
                    cx="100"
                    cy="75"
                    r="60"
                    fill="rgba(132, 204, 22, 0.2)"
                    stroke="#84cc16"
                    strokeWidth="3"
                  />
                )}
              </svg>
            </div>

            {/* Result */}
            <div className="bg-lime-500 text-white p-8 rounded-2xl shadow-xl text-center">
              <div className="text-xs uppercase font-bold opacity-80 mb-2">
                {t.perimeter[lang]}
              </div>
              <div className="text-4xl font-extrabold mb-2">
                {perimeter.toFixed(2)} {lang === "en" ? "units" : "單位"}
              </div>
              <div className="text-lg opacity-90 font-mono">{formula}</div>
            </div>

            <footer className="mt-auto pt-8">
              <a
                href="../index.html"
                className="text-lime-600 hover:text-lime-700 font-bold"
              >
                <i className="fa-solid fa-arrow-left mr-2"></i>
                {t.back[lang]}
              </a>
            </footer>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
