<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Triangle Centers | S6 Math 幾何</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
      }
    </style>
  </head>
  <body class="bg-teal-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const translations = {
        en: {
          unit: "Unit 3: Geometry (Review)",
          title: "Triangle Centers",
          desc: "Explore Centroid, Incenter, Circumcenter, Orthocenter.",
          center: "Center Type",
          centroid: "Centroid (Medians)",
          incenter: "Incenter (Angle Bisectors)",
          circumcenter: "Circumcenter (Perp. Bisectors)",
          orthocenter: "Orthocenter (Altitudes)",
          drag: "Drag vertices A, B, C",
        },
        zh: {
          unit: "單元三：幾何 (重溫)",
          title: "三角形四心",
          desc: "探索形心、內心、外心、垂心。",
          center: "中心類型",
          centroid: "形心 (中線)",
          incenter: "內心 (角平分線)",
          circumcenter: "外心 (垂直平分線)",
          orthocenter: "垂心 (高線)",
          drag: "拖動頂點 A, B, C",
        },
      };

      const App = () => {
        const [lang, setLang] = useState("en");
        const t = translations[lang];

        const [type, setType] = useState("centroid");

        // Triangle Vertices
        const [pA, setPA] = useState({ x: 200, y: 50 });
        const [pB, setPB] = useState({ x: 50, y: 350 });
        const [pC, setPC] = useState({ x: 350, y: 350 });

        // Calculations
        // Midpoints
        const midAB = { x: (pA.x + pB.x) / 2, y: (pA.y + pB.y) / 2 };
        const midBC = { x: (pB.x + pC.x) / 2, y: (pB.y + pC.y) / 2 };
        const midAC = { x: (pA.x + pC.x) / 2, y: (pA.y + pC.y) / 2 };

        // Centroid (Average)
        const centroid = {
          x: (pA.x + pB.x + pC.x) / 3,
          y: (pA.y + pB.y + pC.y) / 3,
        };

        // Helper: distance
        const dist = (p1, p2) =>
          Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);
        const aLen = dist(pB, pC);
        const bLen = dist(pA, pC);
        const cLen = dist(pA, pB);

        // Incenter
        const incenter = {
          x: (aLen * pA.x + bLen * pB.x + cLen * pC.x) / (aLen + bLen + cLen),
          y: (aLen * pA.y + bLen * pB.y + cLen * pC.y) / (aLen + bLen + cLen),
        };
        // Inradius s = (a+b+c)/2, Area = sqrt(s(s-a)(s-b)(s-c)), r = Area/s
        const s = (aLen + bLen + cLen) / 2;
        const area = Math.sqrt(s * (s - aLen) * (s - bLen) * (s - cLen));
        const inRadius = area / s;

        // Circumcenter (Solve Perp Bisectors)
        // Too complex for quick code? simplified formula:
        const D =
          2 *
          (pA.x * (pB.y - pC.y) + pB.x * (pC.y - pA.y) + pC.x * (pA.y - pB.y));
        const circumcenter = {
          x:
            (1 / D) *
            ((pA.x ** 2 + pA.y ** 2) * (pB.y - pC.y) +
              (pB.x ** 2 + pB.y ** 2) * (pC.y - pA.y) +
              (pC.x ** 2 + pC.y ** 2) * (pA.y - pB.y)),
          y:
            (1 / D) *
            ((pA.x ** 2 + pA.y ** 2) * (pC.x - pB.x) +
              (pB.x ** 2 + pB.y ** 2) * (pA.x - pC.x) +
              (pC.x ** 2 + pC.y ** 2) * (pB.x - pA.x)),
        };
        const circumRadius = (aLen * bLen * cLen) / (4 * area);

        // Orthocenter
        // H = 3G - 2O (Euler Line property helps, or manual calc)
        // Actually H + 2O = 3G => H = 3G - 2O
        const orthocenter = {
          x: 3 * centroid.x - 2 * circumcenter.x,
          y: 3 * centroid.y - 2 * circumcenter.y,
        };

        // Dragging Logic
        const svgRef = useRef(null);
        const [draggingPoint, setDraggingPoint] = useState(null);

        const handlePointerDown = (ptName, e) => {
          setDraggingPoint(ptName);
          e.target.setPointerCapture(e.pointerId);
        };
        const handlePointerMove = (e) => {
          if (!draggingPoint) return;
          const rect = svgRef.current.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          // Constraints
          const nx = Math.max(10, Math.min(x, 390));
          const ny = Math.max(10, Math.min(y, 390));

          if (draggingPoint === "A") setPA({ x: nx, y: ny });
          if (draggingPoint === "B") setPB({ x: nx, y: ny });
          if (draggingPoint === "C") setPC({ x: nx, y: ny });
        };
        const handlePointerUp = () => setDraggingPoint(null);

        return (
          <div className="p-8 max-w-5xl mx-auto min-h-screen flex flex-col items-center select-none">
            <header className="mb-8 text-center w-full relative">
              <button
                onClick={() => setLang(lang === "en" ? "zh" : "en")}
                className="absolute right-0 top-0 px-4 py-2 bg-white rounded-full shadow border border-teal-200 text-sm font-bold text-teal-600 hover:bg-teal-50 transition"
              >
                <i className="fa-solid fa-globe mr-2"></i>
                {lang === "en" ? "中文" : "ENG"}
              </button>
              <div className="text-teal-600 font-bold uppercase text-xs tracking-widest mb-2">
                {t.unit}
              </div>
              <h1 className="text-4xl font-extrabold text-slate-900 mb-2">
                {t.title}
              </h1>
              <p className="text-slate-500">{t.desc}</p>
            </header>

            <div className="flex flex-col lg:flex-row gap-8 w-full">
              {/* Interactive Graph */}
              <div className="bg-white p-4 rounded-3xl shadow-lg border border-teal-100 flex-1 flex flex-col justify-center items-center">
                <svg
                  ref={svgRef}
                  width="400"
                  height="400"
                  className="bg-slate-50 rounded-xl touch-none shadow-inner cursor-move"
                  onPointerMove={handlePointerMove}
                  onPointerUp={handlePointerUp}
                >
                  {/* Triangle */}
                  <polygon
                    points={`${pA.x},${pA.y} ${pB.x},${pB.y} ${pC.x},${pC.y}`}
                    fill="white"
                    stroke="#0f172a"
                    strokeWidth="2"
                  />

                  {/* Construction Lines */}
                  {type === "centroid" && (
                    <>
                      <line
                        x1={pA.x}
                        y1={pA.y}
                        x2={midBC.x}
                        y2={midBC.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <line
                        x1={pB.x}
                        y1={pB.y}
                        x2={midAC.x}
                        y2={midAC.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <line
                        x1={pC.x}
                        y1={pC.y}
                        x2={midAB.x}
                        y2={midAB.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <circle
                        cx={centroid.x}
                        cy={centroid.y}
                        r="6"
                        fill="#0d9488"
                      />
                    </>
                  )}
                  {type === "incenter" && (
                    <>
                      <circle
                        cx={incenter.x}
                        cy={incenter.y}
                        r={inRadius}
                        fill="rgba(20, 184, 166, 0.2)"
                        stroke="#14b8a6"
                      />
                      <line
                        x1={pA.x}
                        y1={pA.y}
                        x2={incenter.x}
                        y2={incenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <line
                        x1={pB.x}
                        y1={pB.y}
                        x2={incenter.x}
                        y2={incenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <line
                        x1={pC.x}
                        y1={pC.y}
                        x2={incenter.x}
                        y2={incenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <circle
                        cx={incenter.x}
                        cy={incenter.y}
                        r="6"
                        fill="#0d9488"
                      />
                    </>
                  )}
                  {type === "circumcenter" && (
                    <>
                      <circle
                        cx={circumcenter.x}
                        cy={circumcenter.y}
                        r={circumRadius}
                        fill="none"
                        stroke="#64748b"
                        strokeDasharray="2"
                        opacity="0.5"
                      />
                      {/* Perp Bisector of AB */}
                      <line
                        x1={midAB.x}
                        y1={midAB.y}
                        x2={circumcenter.x}
                        y2={circumcenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                      />
                      <line
                        x1={midBC.x}
                        y1={midBC.y}
                        x2={circumcenter.x}
                        y2={circumcenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                      />
                      <circle
                        cx={circumcenter.x}
                        cy={circumcenter.y}
                        r="6"
                        fill="#0d9488"
                      />
                    </>
                  )}
                  {type === "orthocenter" && (
                    <>
                      {/* Altitudes: Line from vertex to (proj vertex on opp side) */}
                      {/* Visual only: line from vertex to orthocenter and extend? */}
                      <line
                        x1={pA.x}
                        y1={pA.y}
                        x2={orthocenter.x}
                        y2={orthocenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <line
                        x1={pB.x}
                        y1={pB.y}
                        x2={orthocenter.x}
                        y2={orthocenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      <line
                        x1={pC.x}
                        y1={pC.y}
                        x2={orthocenter.x}
                        y2={orthocenter.y}
                        stroke="#14b8a6"
                        strokeWidth="1"
                        strokeDasharray="4"
                      />
                      {/* Extended altitudes needed to look right but orthocenter is intersection */}
                      <circle
                        cx={orthocenter.x}
                        cy={orthocenter.y}
                        r="6"
                        fill="#0d9488"
                      />
                    </>
                  )}

                  {/* Vertices */}
                  <circle
                    cx={pA.x}
                    cy={pA.y}
                    r="10"
                    fill="#f43f5e"
                    onPointerDown={(e) => handlePointerDown("A", e)}
                    className="cursor-pointer hover:stroke-4 hover:stroke-rose-200"
                  />
                  <text
                    x={pA.x + 12}
                    y={pA.y}
                    pointerEvents="none"
                    className="font-bold fill-rose-600"
                  >
                    A
                  </text>

                  <circle
                    cx={pB.x}
                    cy={pB.y}
                    r="10"
                    fill="#f43f5e"
                    onPointerDown={(e) => handlePointerDown("B", e)}
                    className="cursor-pointer hover:stroke-4 hover:stroke-rose-200"
                  />
                  <text
                    x={pB.x - 20}
                    y={pB.y}
                    pointerEvents="none"
                    className="font-bold fill-rose-600"
                  >
                    B
                  </text>

                  <circle
                    cx={pC.x}
                    cy={pC.y}
                    r="10"
                    fill="#f43f5e"
                    onPointerDown={(e) => handlePointerDown("C", e)}
                    className="cursor-pointer hover:stroke-4 hover:stroke-rose-200"
                  />
                  <text
                    x={pC.x + 12}
                    y={pC.y}
                    pointerEvents="none"
                    className="font-bold fill-rose-600"
                  >
                    C
                  </text>
                </svg>
                <div className="text-slate-400 text-xs mt-2">{t.drag}</div>
              </div>

              {/* Controls */}
              <div className="bg-white p-6 rounded-3xl shadow-lg border border-teal-100 flex-1 space-y-4">
                <h3 className="font-bold text-slate-500 uppercase text-sm mb-2">
                  {t.center}
                </h3>
                <button
                  onClick={() => setType("centroid")}
                  className={`w-full text-left p-4 rounded-xl font-bold transition flex items-center gap-3 ${
                    type === "centroid"
                      ? "bg-teal-600 text-white shadow-lg"
                      : "bg-slate-50 text-slate-600 hover:bg-slate-100"
                  }`}
                >
                  <div className="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm">
                    G
                  </div>
                  {t.centroid}
                </button>

                <button
                  onClick={() => setType("incenter")}
                  className={`w-full text-left p-4 rounded-xl font-bold transition flex items-center gap-3 ${
                    type === "incenter"
                      ? "bg-teal-600 text-white shadow-lg"
                      : "bg-slate-50 text-slate-600 hover:bg-slate-100"
                  }`}
                >
                  <div className="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm">
                    I
                  </div>
                  {t.incenter}
                </button>

                <button
                  onClick={() => setType("circumcenter")}
                  className={`w-full text-left p-4 rounded-xl font-bold transition flex items-center gap-3 ${
                    type === "circumcenter"
                      ? "bg-teal-600 text-white shadow-lg"
                      : "bg-slate-50 text-slate-600 hover:bg-slate-100"
                  }`}
                >
                  <div className="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm">
                    C
                  </div>
                  {t.circumcenter}
                </button>

                <button
                  onClick={() => setType("orthocenter")}
                  className={`w-full text-left p-4 rounded-xl font-bold transition flex items-center gap-3 ${
                    type === "orthocenter"
                      ? "bg-teal-600 text-white shadow-lg"
                      : "bg-slate-50 text-slate-600 hover:bg-slate-100"
                  }`}
                >
                  <div className="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm">
                    H
                  </div>
                  {t.orthocenter}
                </button>
              </div>
            </div>

            
          </div>
        );
      };
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
