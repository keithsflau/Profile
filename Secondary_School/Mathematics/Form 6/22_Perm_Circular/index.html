<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Circular Permutation | S6 Math 圓形排列</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Sans+TC:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
      }
    </style>
  </head>
  <body class="bg-indigo-50 text-slate-800 min-h-screen">
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;

      const translations = {
        en: {
          unit: "Unit 1: Statistics & Prob",
          title: "Circular Permutation",
          desc: "Arranging n distinct items in a circle: (n-1)!",
          n: "Number of items n",
          linear: "Linear Arrangement: n!",
          circular: "Circular Arrangement: (n-1)!",
          rotation: "Rotation Equivalent?",
        },
        zh: {
          unit: "第一單元：統計與概率",
          title: "圓形排列",
          desc: "將 n 個不同物件排成圓形：(n-1)!",
          n: "物件數量 n",
          linear: "直線排列：n!",
          circular: "圓形排列：(n-1)!",
          rotation: "旋轉是否等價？",
        },
      };

      const App = () => {
        const [lang, setLang] = useState("en");
        const t = translations[lang];

        const [n, setN] = useState(4);
        const [angleOffset, setAngleOffset] = useState(0);

        // Factorial helper
        const fact = (num) => (num <= 1 ? 1 : num * fact(num - 1));

        const colors = [
          "#f43f5e",
          "#3b82f6",
          "#10b981",
          "#f59e0b",
          "#8b5cf6",
          "#ec4899",
        ];
        const labels = ["A", "B", "C", "D", "E", "F"];

        // Render n items in circle
        const r = 120;
        const cx = 200,
          cy = 200;

        return (
          <div className="p-8 max-w-4xl mx-auto min-h-screen flex flex-col items-center select-none">
            <header className="mb-8 text-center w-full relative">
              <button
                onClick={() => setLang(lang === "en" ? "zh" : "en")}
                className="absolute right-0 top-0 px-4 py-2 bg-white rounded-full shadow border border-indigo-200 text-sm font-bold text-indigo-600 hover:bg-indigo-50 transition"
              >
                <i className="fa-solid fa-globe mr-2"></i>
                {lang === "en" ? "中文" : "ENG"}
              </button>
              <div className="text-indigo-600 font-bold uppercase text-xs tracking-widest mb-2">
                {t.unit}
              </div>
              <h1 className="text-4xl font-extrabold text-slate-900 mb-2">
                {t.title}
              </h1>
              <p className="text-slate-500">{t.desc}</p>
            </header>

            <div className="flex flex-col md:flex-row gap-8 w-full items-center">
              <div className="bg-white p-6 rounded-3xl shadow-xl border border-indigo-100 flex-1 flex justify-center items-center relative overflow-hidden">
                <div className="absolute top-4 left-4 text-xs font-bold text-slate-300 uppercase">
                  Table View
                </div>
                <svg
                  width="400"
                  height="400"
                  className="bg-slate-50 rounded-full"
                >
                  <circle
                    cx={cx}
                    cy={cy}
                    r={r + 40}
                    fill="white"
                    stroke="#e2e8f0"
                    strokeWidth="2"
                  />
                  <circle
                    cx={cx}
                    cy={cy}
                    r={r - 40}
                    fill="#f8fafc"
                    stroke="#e2e8f0"
                    strokeWidth="1"
                  />

                  <g transform={`rotate(${angleOffset} ${cx} ${cy})`}>
                    {Array.from({ length: n }).map((_, i) => {
                      const ang = (((i * 360) / n) * Math.PI) / 180;
                      const px = cx + r * Math.cos(ang - Math.PI / 2);
                      const py = cy + r * Math.sin(ang - Math.PI / 2);
                      return (
                        <g key={i}>
                          <line
                            x1={cx}
                            y1={cy}
                            x2={px}
                            y2={py}
                            stroke="#e2e8f0"
                            strokeWidth="2"
                          />
                          <circle
                            cx={px}
                            cy={py}
                            r="20"
                            fill={colors[i]}
                            stroke="white"
                            strokeWidth="3"
                            shadow="true"
                          />
                          <text
                            x={px}
                            y={py + 5}
                            textAnchor="middle"
                            fill="white"
                            fontWeight="bold"
                            fontSize="16"
                          >
                            {labels[i]}
                          </text>
                        </g>
                      );
                    })}
                  </g>

                  <circle cx={cx} cy={cy} r="5" fill="#cbd5e1" />
                </svg>

                <div className="absolute bottom-4 w-full flex justify-center">
                  <button
                    onClick={() => setAngleOffset((prev) => prev + 360 / n)}
                    className="px-4 py-2 bg-indigo-600 text-white rounded-full text-sm font-bold shadow-lg hover:bg-indigo-700 transition"
                  >
                    <i className="fa-solid fa-rotate-right mr-2"></i> Rotate
                  </button>
                </div>
              </div>

              <div className="flex-1 space-y-6 w-full">
                <div className="p-4 bg-white rounded-2xl shadow-sm border border-slate-100">
                  <label className="text-sm font-bold text-slate-500 block mb-2">
                    {t.n} = {n}
                  </label>
                  <div className="flex gap-2 justify-center">
                    {[3, 4, 5, 6].map((val) => (
                      <button
                        key={val}
                        onClick={() => {
                          setN(val);
                          setAngleOffset(0);
                        }}
                        className={`w-12 h-12 rounded-xl font-bold text-lg transition ${
                          n === val
                            ? "bg-indigo-600 text-white shadow-lg shadow-indigo-200"
                            : "bg-slate-100 text-slate-400 hover:bg-slate-200"
                        }`}
                      >
                        {val}
                      </button>
                    ))}
                  </div>
                </div>

                <div className="space-y-4">
                  <div className="bg-slate-50 p-4 rounded-xl border border-slate-200 opacity-60">
                    <div className="text-xs font-bold text-slate-400 uppercase mb-1">
                      {t.linear}
                    </div>
                    <div className="font-mono text-xl text-slate-600">
                      {n}! = {fact(n)}
                    </div>
                  </div>

                  <div className="bg-indigo-50 p-6 rounded-2xl border border-indigo-200 transform scale-105 shadow-lg relative">
                    <div className="absolute -top-3 -right-3 bg-indigo-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shadow-md">
                      / n
                    </div>
                    <div className="text-xs font-bold text-indigo-500 uppercase mb-1">
                      {t.circular}
                    </div>
                    <div className="font-mono text-3xl font-bold text-indigo-700">
                      ({n}-1)! = {fact(n - 1)}
                    </div>
                    <div className="text-xs text-indigo-400 mt-2">
                      Since rotation doesn't change relative order.
                    </div>
                  </div>
                </div>
              </div>
            </div>

            
          </div>
        );
      };
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
