<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Solar Energy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #0c4a6e;
        color: white;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Solar Power Station",
          zh: "å¤ªé™½èƒ½ç™¼é›»ç«™",
          ja: "å¤ªé™½å…‰ç™ºé›»æ‰€",
          ko: "íƒœì–‘ê´‘ ë°œì „ì†Œ",
          es: "EstaciÃ³n de energÃ­a solar",
          de: "Solarkraftwerk",
          fi: "Aurinkovoimala",
          fr: "Centrale solaire",
          ar: "Ù…Ø­Ø·Ø© Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©",
          it: "Centrale Solare",
        },
        instruction: {
          en: "Angle the panels to catch the sun!",
          zh: "èª¿æ•´é¢æ¿è§’åº¦ä»¥å¸æ”¶é™½å…‰ï¼",
          ja: "ãƒ‘ãƒãƒ«ã‚’å¤ªé™½ã«å‘ã‘ã¦è§’åº¦ã‚’èª¿æ•´ã—ã‚ˆã†ï¼",
          ko: "íƒœì–‘ì„ ì¡ê¸° ìœ„í•´ íŒ¨ë„ ê°ë„ë¥¼ ì¡°ì ˆí•˜ì„¸ìš”!",
          es: "Â¡Orienta los paneles para captar el sol!",
          de: "Richte die Paneele aus, um die Sonne einzufangen!",
          fi: "Suuntaa paneelit saadaksesi aurinkoa!",
          fr: "Inclinez les panneaux pour capter le soleil !",
          ar: "ÙˆØ¬Ù‡ Ø§Ù„Ø£Ù„ÙˆØ§Ø­ Ù„Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ø´Ù…Ø³!",
          it: "Inclina i pannelli per catturare il sole!",
        },
        energy: {
          en: "Energy Output",
          zh: "èƒ½é‡è¼¸å‡º",
          ja: "ã‚¨ãƒãƒ«ã‚®ãƒ¼å‡ºåŠ›",
          ko: "ì—ë„ˆì§€ ì¶œë ¥",
          es: "Salida de energÃ­a",
          de: "Energieoutput",
          fi: "Energiantuotanto",
          fr: "Production d'Ã©nergie",
          ar: "Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø·Ø§Ù‚Ø©",
          it: "Produzione Energia",
        },
        optimal: {
          en: "Optimal!",
          zh: "æœ€ä½³ï¼",
          ja: "æœ€é©ï¼",
          ko: "ìµœì !",
          es: "Â¡Ã“ptimo!",
          de: "Optimal!",
          fi: "Optimaalinen!",
          fr: "Optimal !",
          ar: "Ø§Ù„Ø£Ù…Ø«Ù„!",
          it: "Ottimale!",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [sunAngle, setSunAngle] = useState(45); // Sun moves
        const [panelAngle, setPanelAngle] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        // Simulation of Sun Movement
        useEffect(() => {
          const interval = setInterval(() => {
            setSunAngle((prev) => (prev + 0.5) % 180);
          }, 100);
          return () => clearInterval(interval);
        }, []);

        // Calculate efficiency based on alignment
        // Perfect alignment is when panel normal checks sun vector
        // Simplified: Panel angle should match Sun angle

        const diff = Math.abs(sunAngle - panelAngle);
        // Efficiency: 100 - diff. If diff > 90, 0.
        let efficiency = Math.max(0, 100 - diff * 1.5);
        efficiency = Math.min(100, efficiency);

        return (
          <div className="min-h-screen flex flex-col items-center p-4 overflow-hidden relative">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-4 text-yellow-300 drop-shadow-md z-10">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-sky-200 z-10">
              {getText("instruction")}
            </p>

            {/* Sky */}
            <div className="absolute inset-0 bg-gradient-to-b from-sky-900 to-sky-600 z-0"></div>

            {/* Sun */}
            <div
              className="absolute bottom-0 left-1/2 w-[800px] h-[800px] pointer-events-none"
              style={{
                transform: `translateX(-50%) rotate(${sunAngle - 90}deg)`,
              }} // Rotate around bottom center
            >
              <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2">
                <div className="w-24 h-24 bg-yellow-400 rounded-full shadow-[0_0_80px_rgba(255,223,0,1)]"></div>
              </div>
            </div>

            <div className="z-10 w-full flex flex-col items-center mt-20">
              {/* Solar Panel Assembly */}
              <div className="relative w-40 h-40 flex flex-col justify-end items-center mb-8">
                {/* Panel */}
                <div
                  className="w-48 h-4 bg-blue-600 border-2 border-slate-300 shadow-xl origin-center"
                  style={{ transform: `rotate(${-90 + panelAngle}deg)` }} // Base 0 is flat? Let's say 0 is flat (90 to vertical).
                  // Sun 0 is left horizon. 90 is top. 180 is right.
                  // Panel needs to face it.
                >
                  <div className="w-full h-full grid grid-cols-4 divide-x divide-white/20">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                  </div>
                </div>
                {/* Stand */}
                <div className="w-2 h-20 bg-gray-500"></div>
                <div className="w-20 h-2 bg-gray-500 rounded-full"></div>
              </div>

              {/* Controls */}
              <div className="bg-slate-800/80 p-8 rounded-3xl backdrop-blur-md border border-slate-600 w-full max-w-md">
                <div className="flex justify-between items-center mb-4">
                  <span className="font-bold">{getText("energy")}</span>
                  <span
                    className={`text-2xl font-mono font-bold ${
                      efficiency > 80 ? "text-green-400" : "text-yellow-400"
                    }`}
                  >
                    {Math.round(efficiency)}%
                  </span>
                </div>

                {/* Efficiency Bar */}
                <div className="w-full h-6 bg-slate-700 rounded-full overflow-hidden mb-8 border border-slate-500">
                  <div
                    className={`h-full transition-all duration-100 ${
                      efficiency > 80 ? "bg-green-500" : "bg-yellow-500"
                    }`}
                    style={{ width: `${efficiency}%` }}
                  ></div>
                </div>

                <div className="flex items-center gap-4">
                  <span className="text-2xl">ğŸ”„</span>
                  <input
                    type="range"
                    min="0"
                    max="180"
                    value={panelAngle}
                    onChange={(e) => setPanelAngle(Number(e.target.value))}
                    className="w-full h-8 bg-slate-600 rounded-lg appearance-none cursor-pointer"
                  />
                </div>
              </div>

              {/* House Light */}
              <div className="mt-10 flex flex-col items-center">
                <div
                  className={`text-6xl transition-all duration-500 ${
                    efficiency > 50
                      ? "opacity-100 drop-shadow-[0_0_30px_yellow]"
                      : "opacity-30"
                  }`}
                >
                  ğŸ ğŸ’¡
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
