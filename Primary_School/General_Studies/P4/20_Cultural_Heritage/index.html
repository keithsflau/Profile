<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Cultural Heritage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fff7ed;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Cultural Heritage Match",
          zh: "æ–‡åŒ–éºç”¢é…å°",
          ja: "æ–‡åŒ–éºç”£ãƒãƒƒãƒ",
          ko: "ë¬¸í™” ìœ ì‚° ì—°ê²°",
          es: "Emparejamiento de patrimonio cultural",
          de: "Kulturerbe-Match",
          fi: "KulttuuriperintÃ¶jen yhdistÃ¤minen",
          fr: "Match de patrimoine culturel",
          ar: "Ù…Ø¨Ø§Ø±Ø§Ø© Ø§Ù„ØªØ±Ø§Ø« Ø§Ù„Ø«Ù‚Ø§ÙÙŠ",
          it: "Abbinamento Patrimonio Culturale",
        },
        instruction: {
          en: "Match the festival to the item!",
          zh: "å°‡ç¯€æ—¥èˆ‡ç›¸é—œç‰©å“é…å°ï¼",
          ja: "ç¥­ã‚Šã¨ã‚¢ã‚¤ãƒ†ãƒ ã‚’åˆã‚ã›ã¦ãã ã•ã„ï¼",
          ko: "ì¶•ì œì™€ ë¬¼ê±´ì„ ì—°ê²°í•˜ì„¸ìš”!",
          es: "Â¡Combina el festival con el artÃ­culo!",
          de: "Ordne das Fest dem Gegenstand zu!",
          fi: "YhdistÃ¤ juhla esineeseen!",
          fr: "Associez le festival Ã  l'objet !",
          ar: "Ø·Ø§Ø¨Ù‚ Ø§Ù„Ù…Ù‡Ø±Ø¬Ø§Ù† Ø¨Ø§Ù„Ø¹Ù†ØµØ±!",
          it: "Abbina il festival all'articolo!",
        },
        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µ!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        cny: {
          en: "Lunar New Year",
          zh: "è¾²æ›†æ–°å¹´",
          ja: "æ—§æ­£æœˆ",
          ko: "ì„¤ë‚ ",
          es: "AÃ±o Nuevo Lunar",
          de: "Mondneujahr",
          fi: "Kuun uusi vuosi",
          fr: "Nouvel An lunaire",
          ar: "Ø±Ø£Ø³ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù‚Ù…Ø±ÙŠØ©",
          it: "Capodanno Lunare",
        },
        mid_autumn: {
          en: "Mid-Autumn Festival",
          zh: "ä¸­ç§‹ç¯€",
          ja: "ä¸­ç§‹ç¯€",
          ko: "ì¶”ì„",
          es: "Festival del Medio OtoÃ±o",
          de: "Mittherbstfest",
          fi: "Keskisyksyn juhla",
          fr: "FÃªte de la mi-automne",
          ar: "Ù…Ù‡Ø±Ø¬Ø§Ù† Ù…Ù†ØªØµÙ Ø§Ù„Ø®Ø±ÙŠÙ",
          it: "Festa di MetÃ  Autunno",
        },
        dragon_boat: {
          en: "Dragon Boat Festival",
          zh: "ç«¯åˆç¯€",
          ja: "ç«¯åˆã®ç¯€å¥",
          ko: "ë‹¨ì˜¤ì ˆ",
          es: "Festival del Bote del DragÃ³n",
          de: "Drachenbootfest",
          fi: "LohikÃ¤Ã¤rmevenejuhla",
          fr: "FÃªte des bateaux-dragons",
          ar: "Ù…Ù‡Ø±Ø¬Ø§Ù† Ù‚ÙˆØ§Ø±Ø¨ Ø§Ù„ØªÙ†ÙŠÙ†",
          it: "Festa delle Barche Drago",
        },
        bun_fest: {
          en: "Cheung Chau Bun Festival",
          zh: "é•·æ´²å¤ªå¹³æ¸…é†®",
          ja: "é•·æ´²é¥…é ­ç¯€",
          ko: "ì²­ì°¨ìš° ë²ˆ ì¶•ì œ",
          es: "Festival del Bollo de Cheung Chau",
          de: "Cheung Chau BrÃ¶tchenfest",
          fi: "Cheung Chau Bun -juhla",
          fr: "Festival des petits pains de Cheung Chau",
          ar: "Ù…Ù‡Ø±Ø¬Ø§Ù† ÙƒØ¹ÙƒØ© ØªØ´ÙŠÙˆÙ†Øº ØªØ´Ø§Ùˆ",
          it: "Festival del Panino di Cheung Chau",
        },

        red_packet: {
          en: "Red Packet",
          zh: "åˆ©æ˜¯ (ç´…åŒ…)",
          ja: "ãŠå¹´ç‰",
          ko: "ì„¸ë±ƒëˆ",
          es: "Sobre rojo",
          de: "Roter Umschlag",
          fi: "Punainen kirjekuori",
          fr: "Enveloppe rouge",
          ar: "Ø¸Ø±Ù Ø£Ø­Ù…Ø±",
          it: "Busta Rossa",
        },
        lantern: {
          en: "Lantern",
          zh: "ç‡ˆç± ",
          ja: "æç¯",
          ko: "ë“±ë¡±",
          es: "Linterna",
          de: "Laterne",
          fi: "Lyhty",
          fr: "Lanterne",
          ar: "ÙØ§Ù†ÙˆØ³",
          it: "Lanterna",
        },
        rice_dumpling: {
          en: "Rice Dumpling",
          zh: "ç²½å­",
          ja: "ã¡ã¾ã",
          ko: "ç²½å­ (ì«‘ì¯”)",
          es: "Bola de arroz",
          de: "ReiskloÃŸ",
          fi: "Riisimyky",
          fr: "Boulette de riz",
          ar: "Ø²ongzi",
          it: "Gnocco di Riso",
        },
        bun_tower: {
          en: "Run Tower",
          zh: "åŒ…å±±",
          ja: "åŒ…å±±",
          ko: "ë²ˆ íƒ€ì›Œ",
          es: "Torre de bollos",
          de: "BrÃ¶tchenturm",
          fi: "Pullatorni",
          fr: "Tour de petits pains",
          ar: "Ø¨Ø±Ø¬ Ø§Ù„ÙƒØ¹Ùƒ",
          it: "Torre di Panini",
        },
      };

      const festivals = [
        { id: "cny", item: "red_packet", icon: "ğŸ§§" },
        { id: "mid_autumn", item: "lantern", icon: "ğŸ®" },
        { id: "dragon_boat", item: "rice_dumpling", icon: "ğŸ²" }, // using dragon for festival
        { id: "bun_fest", item: "bun_tower", icon: "â›°ï¸" }, // Mountain/Tower proxy
      ];

      const items = [
        { id: "red_packet", icon: "ğŸ§§" },
        { id: "lantern", icon: "ğŸ®" },
        { id: "rice_dumpling", icon: "ğŸ™" }, // Rice ball proxy
        { id: "bun_tower", icon: "ğŸ¥¯" }, // Bagel/Bun proxy
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [festQueue, setFestQueue] = useState([]);
        const [currentFest, setCurrentFest] = useState(null);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          restart();
        }, []);

        const restart = () => {
          const s = [...festivals].sort(() => Math.random() - 0.5);
          setFestQueue(s);
          setCurrentFest(s[0]);
          setFeedback(null);
        };

        const handleMatch = (itemId) => {
          if (feedback) return;
          if (currentFest.item === itemId) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              const nextIndex = festQueue.indexOf(currentFest) + 1;
              if (nextIndex < festQueue.length) {
                setCurrentFest(festQueue[nextIndex]);
              } else {
                setCurrentFest(null); // End
              }
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 500);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center justify-center p-4 bg-[url('https://www.transparenttextures.com/patterns/chinese-new-year.png')]">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-black mb-8 text-red-700 bg-white/80 px-8 py-2 rounded-full shadow-lg">
              {getText("title")}
            </h1>

            <div className="w-full max-w-4xl flex flex-col items-center gap-8">
              {/* Current Festival Card */}
              <div className="w-full max-w-md bg-red-600 text-white p-8 rounded-3xl shadow-2xl text-center border-4 border-yellow-400 relative">
                {currentFest ? (
                  <>
                    <div className="text-8xl mb-4 filter drop-shadow-md">
                      {currentFest.icon}
                    </div>
                    <div className="text-3xl font-bold">
                      {getText(currentFest.id)}
                    </div>
                  </>
                ) : (
                  <div className="py-10">
                    <div className="text-6xl mb-4">ğŸ‰</div>
                    <button
                      onClick={restart}
                      className="bg-yellow-400 text-red-900 px-8 py-3 rounded-full font-black hover:bg-yellow-300"
                    >
                      Play Again
                    </button>
                  </div>
                )}

                {feedback && (
                  <div
                    className={`absolute inset-0 flex items-center justify-center rounded-2xl bg-black/50 z-10`}
                  >
                    <div
                      className={`text-4xl font-bold px-8 py-4 rounded-xl ${
                        feedback === "correct" ? "bg-green-500" : "bg-red-500"
                      }`}
                    >
                      {getText(feedback)}
                    </div>
                  </div>
                )}
              </div>

              {/* Items Grid */}
              {currentFest && (
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 w-full">
                  {items.map((item) => (
                    <button
                      key={item.id}
                      onClick={() => handleMatch(item.id)}
                      className="bg-white hover:bg-red-50 p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center border-2 border-red-100 transition-transform active:scale-95 group"
                    >
                      <div className="text-5xl mb-2 group-hover:scale-110 transition-transform">
                        {item.icon}
                      </div>
                      <div className="font-bold text-slate-700 text-sm md:text-base text-center">
                        {getText(item.id)}
                      </div>
                    </button>
                  ))}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
