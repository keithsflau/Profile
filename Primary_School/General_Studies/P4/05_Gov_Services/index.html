<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Gov Services</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f3f4f6;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Government Services",
          zh: "ÊîøÂ∫úÊúçÂãô",
          ja: "ÊîøÂ∫ú„Çµ„Éº„Éì„Çπ",
          ko: "Ï†ïÎ∂Ä ÏÑúÎπÑÏä§",
          es: "Servicios gubernamentales",
          de: "Regierungsdienste",
          fi: "Hallituksen palvelut",
          fr: "Services gouvernementaux",
          ar: "ÿÆÿØŸÖÿßÿ™ ÿ≠ŸÉŸàŸÖŸäÿ©",
          it: "Servizi Governativi",
        },
        instruction: {
          en: "Match the service to the department!",
          zh: "Â∞áÊúçÂãôÈÖçÂ∞çÂà∞Ê≠£Á¢∫ÁöÑÈÉ®ÈñÄÔºÅ",
          ja: "„Çµ„Éº„Éì„Çπ„ÇíÊ≠£„Åó„ÅÑÈÉ®ÈñÄ„Å´Âêà„Çè„Åõ„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",
          ko: "ÏÑúÎπÑÏä§Î•º Ïò¨Î∞îÎ•∏ Î∂ÄÏÑúÏóê ÎßûÏ∂îÏÑ∏Ïöî!",
          es: "¬°Relaciona el servicio con el departamento!",
          de: "Ordne den Dienst der Abteilung zu!",
          fi: "Yhdist√§ palvelu osastoon!",
          fr: "Associez le service au d√©partement !",
          ar: "ÿ∑ÿßÿ®ŸÇ ÿßŸÑÿÆÿØŸÖÿ© ÿ®ÿßŸÑŸÇÿ≥ŸÖ!",
          it: "Abbina il servizio al dipartimento!",
        },
        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµ!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        police: {
          en: "Police Force",
          zh: "Ë≠¶ÂãôËôï",
          ja: "Ë≠¶ÂØü",
          ko: "Í≤ΩÏ∞∞",
          es: "Fuerza policial",
          de: "Polizei",
          fi: "Poliisi",
          fr: "Force de police",
          ar: "ŸÇŸàÿ© ÿßŸÑÿ¥ÿ±ÿ∑ÿ©",
          it: "Polizia",
        },
        fire: {
          en: "Fire Services",
          zh: "Ê∂àÈò≤Ëôï",
          ja: "Ê∂àÈò≤ÁΩ≤",
          ko: "ÏÜåÎ∞©ÏÑú",
          es: "Bomberos",
          de: "Feuerwehr",
          fi: "Palokunta",
          fr: "Services d'incendie",
          ar: "ÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ•ÿ∑ŸÅÿßÿ°",
          it: "Vigili del Fuoco",
        },
        library: {
          en: "Public Library",
          zh: "ÂÖ¨ÂÖ±ÂúñÊõ∏È§®",
          ja: "ÂÖ¨ÂÖ±Âõ≥Êõ∏È§®",
          ko: "Í≥µÍ≥µ ÎèÑÏÑúÍ¥Ä",
          es: "Biblioteca p√∫blica",
          de: "√ñffentliche Bibliothek",
          fi: "Yleinen kirjasto",
          fr: "Biblioth√®que publique",
          ar: "ŸÖŸÉÿ™ÿ®ÿ© ÿπÿßŸÖÿ©",
          it: "Biblioteca Pubblica",
        },
        park: {
          en: "Leisure & Cultural Services",
          zh: "Â∫∑Ê®ÇÂèäÊñáÂåñ‰∫ãÂãôÁΩ≤",
          ja: "Â∫∑Ê•ΩÂèäÊñáÂåñ‰∫ãÂãôÁΩ≤",
          ko: "Î†àÏ†Ä Î∞è Î¨∏Ìôî ÏÑúÎπÑÏä§",
          es: "Servicios culturales y de ocio",
          de: "Freizeit- & Kulturdienste",
          fi: "Vapaa-ajan ja kulttuuripalvelut",
          fr: "Services de loisirs et culturels",
          ar: "ÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ™ÿ±ŸÅŸäŸá ŸàÿßŸÑÿ´ŸÇÿßŸÅÿ©",
          it: "Servizi Culturali e Ricreativi",
        },
        post: {
          en: "Post Office",
          zh: "ÈÉµÊîøÂ±Ä",
          ja: "ÈÉµ‰æøÂ±Ä",
          ko: "Ïö∞Ï≤¥Íµ≠",
          es: "Oficina de correos",
          de: "Postamt",
          fi: "Posti",
          fr: "Bureau de poste",
          ar: "ŸÖŸÉÿ™ÿ® ÿßŸÑÿ®ÿ±ŸäÿØ",
          it: "Ufficio Postale",
        },
        desc_police: {
          en: "Catch thieves, Keep safe",
          zh: "ÊçâË≥äÔºåÁ∂≠ÊåÅÊ≤ªÂÆâ",
          ja: "Ê≥•Ê£í„ÇíÊçï„Åæ„Åà„Çã„ÄÅÂÆâÂÖ®„ÇíÂÆà„Çã",
          ko: "ÎèÑÎëë Ïû°Í∏∞, ÏïàÏ†Ñ Ïú†ÏßÄ",
          es: "Atrapar ladrones, mantener la seguridad",
          de: "Diebe fangen, Sicherheit wahren",
          fi: "Ota varkaat kiinni, pid√§ turvassa",
          fr: "Attraper les voleurs, Assurer la s√©curit√©",
          ar: "ÿßŸÑŸÇÿ®ÿ∂ ÿπŸÑŸâ ÿßŸÑŸÑÿµŸàÿµÿå ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ≥ŸÑÿßŸÖÿ©",
          it: "Catturare ladri, Mantenere la sicurezza",
        },
        desc_fire: {
          en: "Put out fires, Ambulance",
          zh: "ÊªÖÁÅ´ÔºåÊïëË≠∑ÊúçÂãô",
          ja: "Ê∂àÁÅ´„ÄÅÊïëÊÄ•Ëªä",
          ko: "ÌôîÏû¨ ÏßÑÏïï, Íµ¨Í∏âÏ∞®",
          es: "Apagar incendios, Ambulancia",
          de: "Feuer l√∂schen, Krankenwagen",
          fi: "Sammuta tulipalot, ambulanssi",
          fr: "√âteindre les incendies, Ambulance",
          ar: "ÿ•ÿÆŸÖÿßÿØ ÿßŸÑÿ≠ÿ±ÿßÿ¶ŸÇÿå ÿßŸÑÿ•ÿ≥ÿπÿßŸÅ",
          it: "Spegnere incendi, Ambulanza",
        },
        desc_library: {
          en: "Borrow books, Read",
          zh: "ÂÄüÊõ∏ÔºåÈñ±ËÆÄ",
          ja: "Êú¨„ÇíÂÄü„Çä„Çã„ÄÅË™≠„ÇÄ",
          ko: "Ï±Ö ÎåÄÏ∂ú, ÏùΩÍ∏∞",
          es: "Pedir libros prestados, leer",
          de: "B√ºcher ausleihen, lesen",
          fi: "Lainaa kirjoja, lue",
          fr: "Emprunter des livres, Lire",
          ar: "ÿßÿ≥ÿ™ÿπÿßÿ±ÿ© ÿßŸÑŸÉÿ™ÿ®ÿå ÿßŸÑŸÇÿ±ÿßÿ°ÿ©",
          it: "Prendere in prestito libri, Leggere",
        },
        desc_park: {
          en: "Parks, Museums, Sports",
          zh: "ÂÖ¨ÂúíÔºåÂçöÁâ©È§®ÔºåÈ´îËÇ≤È§®",
          ja: "ÂÖ¨Âúí„ÄÅÂçöÁâ©È§®„ÄÅ„Çπ„Éù„Éº„ÉÑ",
          ko: "Í≥µÏõê, Î∞ïÎ¨ºÍ¥Ä, Ïä§Ìè¨Ï∏†",
          es: "Parques, Museos, Deportes",
          de: "Parks, Museen, Sport",
          fi: "Puistot, museot, urheilu",
          fr: "Parcs, Mus√©es, Sports",
          ar: "ÿßŸÑÿ≠ÿØÿßÿ¶ŸÇÿå ÿßŸÑŸÖÿ™ÿßÿ≠ŸÅÿå ÿßŸÑÿ±Ÿäÿßÿ∂ÿ©",
          it: "Parchi, Musei, Sport",
        },
        desc_post: {
          en: "Send letters, Parcels",
          zh: "ÂØÑ‰ø°ÔºåÂåÖË£π",
          ja: "ÊâãÁ¥ô„ÄÅÂ∞èÂåÖ„ÇíÈÄÅ„Çã",
          ko: "Ìé∏ÏßÄ, ÏÜåÌè¨ Î≥¥ÎÇ¥Í∏∞",
          es: "Enviar cartas, paquetes",
          de: "Briefe, Pakete senden",
          fi: "L√§het√§ kirjeit√§, paketteja",
          fr: "Envoyer des lettres, Colis",
          ar: "ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑÿå ÿßŸÑÿ∑ÿ±ŸàÿØ",
          it: "Inviare lettere, Pacchi",
        },
      };

      const pairs = [
        { id: "police", icon: "üëÆ‚Äç‚ôÇÔ∏è", desc: "desc_police", color: "bg-blue-200" },
        { id: "fire", icon: "üë®‚Äçüöí", desc: "desc_fire", color: "bg-red-200" },
        {
          id: "library",
          icon: "üìö",
          desc: "desc_library",
          color: "bg-yellow-200",
        },
        { id: "park", icon: "üå≥", desc: "desc_park", color: "bg-green-200" },
        { id: "post", icon: "üìÆ", desc: "desc_post", color: "bg-purple-200" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [leftSide, setLeftSide] = useState([]);
        const [rightSide, setRightSide] = useState([]);
        const [selectedLeft, setSelectedLeft] = useState(null);
        const [matched, setMatched] = useState([]);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          // Randomize sides
          setLeftSide([...pairs].sort(() => Math.random() - 0.5));
          setRightSide([...pairs].sort(() => Math.random() - 0.5));
        }, []);

        const handleSelect = (item) => {
          if (matched.includes(item.id)) return;

          if (!selectedLeft) {
            setSelectedLeft(item);
          } else {
            if (selectedLeft.id === item.id) {
              setMatched([...matched, item.id]);
              setSelectedLeft(null);
            } else {
              // Try to check if user clicked another left item?
              // Here assumes left column is strictly sources.
              // Let's implement "Select Left, Click Right" mode.
              setSelectedLeft(item); // Change selection
            }
          }
        };

        const handleRightClick = (item) => {
          if (matched.includes(item.id)) return;
          if (selectedLeft && selectedLeft.id === item.id) {
            setMatched([...matched, item.id]);
            setSelectedLeft(null);
          } else {
            // Wrong
            // Visual feedback could be added here
            setSelectedLeft(null);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-8 font-sans">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-slate-800">
              {getText("title")}
            </h1>

            <p className="mb-8 font-bold text-xl text-slate-500">
              {getText("instruction")}
            </p>

            <div className="flex w-full max-w-5xl justify-between gap-12">
              {/* Services (Left) */}
              <div className="flex flex-col gap-4 w-1/2">
                {leftSide.map((item) => (
                  <motion.div
                    key={item.id}
                    layout
                    onClick={() => handleSelect(item)}
                    className={`p-6 rounded-2xl shadow-md cursor-pointer border-4 flex items-center gap-4 transition-colors
                           ${
                             matched.includes(item.id)
                               ? "bg-gray-200 border-gray-300 opacity-50"
                               : selectedLeft?.id === item.id
                               ? "bg-sky-100 border-sky-500"
                               : "bg-white border-white hover:bg-slate-50"
                           }
                        `}
                  >
                    <div className="text-4xl">{item.icon}</div>
                    <div className="font-bold text-lg text-slate-700">
                      {getText(item.desc)}
                    </div>
                  </motion.div>
                ))}
              </div>

              {/* Departments (Right) */}
              <div className="flex flex-col gap-4 w-1/2">
                {rightSide.map((item) => (
                  <motion.div
                    key={item.id}
                    layout
                    onClick={() => handleRightClick(item)}
                    className={`p-6 rounded-2xl shadow-md cursor-pointer border-4 flex items-center justify-end gap-4 transition-colors
                           ${
                             matched.includes(item.id)
                               ? "bg-green-100 border-green-500"
                               : "bg-white border-white hover:bg-slate-50"
                           }
                        `}
                  >
                    <div className="font-bold text-lg text-slate-700 text-right">
                      {getText(item.id)}
                    </div>
                    <div
                      className={`w-12 h-12 rounded-full ${item.color} flex items-center justify-center font-bold text-xl`}
                    >
                      {/* Simplified Logo placeholder */}
                      {item.id[0].toUpperCase()}
                    </div>
                  </motion.div>
                ))}
              </div>
            </div>

            {matched.length === pairs.length && (
              <div className="mt-12 p-8 bg-green-500 text-white rounded-3xl shadow-2xl text-center">
                <div className="text-6xl mb-4">üèÜ</div>
                <h2 className="text-3xl font-black">{getText("correct")}</h2>
              </div>
            )}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
