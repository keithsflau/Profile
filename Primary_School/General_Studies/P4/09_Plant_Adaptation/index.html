<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Plant Adaptation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fef3c7;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Plant Adaptation",
          zh: "æ¤ç‰©çš„é©æ‡‰",
          ja: "æ¤ç‰©ã®é©å¿œ",
          ko: "ì‹ë¬¼ì˜ ì ì‘",
          es: "AdaptaciÃ³n de las plantas",
          de: "Pflanzenanpassung",
          fi: "Kasvien sopeutuminen",
          fr: "Adaptation des plantes",
          ar: "ØªÙƒÙŠÙ Ø§Ù„Ù†Ø¨Ø§Øª",
          it: "Adattamento delle Piante",
        },
        instruction: {
          en: "Match the feature to the environment!",
          zh: "å°‡ç‰¹å¾µé…å°åˆ°æ­£ç¢ºçš„ç’°å¢ƒï¼",
          ja: "ç‰¹å¾´ã‚’ç’°å¢ƒã«åˆã‚ã›ã¦ãã ã•ã„ï¼",
          ko: "íŠ¹ì§•ì„ í™˜ê²½ì— ë§ì¶”ì„¸ìš”!",
          es: "Â¡Combina la caracterÃ­stica con el entorno!",
          de: "Ordne das Merkmal der Umgebung zu!",
          fi: "YhdistÃ¤ ominaisuus ympÃ¤ristÃ¶Ã¶n!",
          fr: "Associez la caractÃ©ristique Ã  l'environnement !",
          ar: "Ø·Ø§Ø¨Ù‚ Ø§Ù„Ù…ÙŠØ²Ø© Ø¨Ø§Ù„Ø¨ÙŠØ¦Ø©!",
          it: "Abbina la caratteristica all'ambiente!",
        },
        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µ!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        desert: {
          en: "Desert (Dry)",
          zh: "æ²™æ¼  (ä¹¾ç‡¥)",
          ja: "ç ‚æ¼  (ä¹¾ç‡¥)",
          ko: "ì‚¬ë§‰ (ê±´ì¡°)",
          es: "Desierto (Seco)",
          de: "WÃ¼ste (Trocken)",
          fi: "Aavikko (Kuiva)",
          fr: "DÃ©sert (Sec)",
          ar: "ØµØ­Ø±Ø§Ø¡ (Ø¬Ø§Ù)",
          it: "Deserto (Secco)",
        },
        rainforest: {
          en: "Rainforest (Wet)",
          zh: "é›¨æ— (æ½®æ¿•)",
          ja: "ç†±å¸¯é›¨æ— (æ¹¿æ½¤)",
          ko: "ì—´ëŒ€ìš°ë¦¼ (ìŠµí•¨)",
          es: "Selva tropical (HÃºmedo)",
          de: "Regenwald (Nass)",
          fi: "SademetsÃ¤ (MÃ¤rkÃ¤)",
          fr: "ForÃªt tropicale (Humide)",
          ar: "ØºØ§Ø¨Ø© Ù…Ø·ÙŠØ±Ø© (Ø±Ø·Ø¨)",
          it: "Foresta Pluviale (Umido)",
        },
        cactus: {
          en: "Cactus",
          zh: "ä»™äººæŒ",
          ja: "ã‚µãƒœãƒ†ãƒ³",
          ko: "ì„ ì¸ì¥",
          es: "Cactus",
          de: "Kaktus",
          fi: "Kaktus",
          fr: "Cactus",
          ar: "ØµØ¨Ø§Ø±",
          it: "Cactus",
        },
        fern: {
          en: "Fern",
          zh: "è•¨é¡",
          ja: "ã‚·ãƒ€",
          ko: "ê³ ì‚¬ë¦¬",
          es: "Helecho",
          de: "Farn",
          fi: "Saniainen",
          fr: "FougÃ¨re",
          ar: "Ø³Ø±Ø®Ø³",
          it: "Felce",
        },
        feature_needles: {
          en: "Needle leaves (Save water)",
          zh: "é‡ç‹€è‘‰ (ä¿æ°´)",
          ja: "é‡çŠ¶è‘‰ (ç¯€æ°´)",
          ko: "ë°”ëŠ˜ì (ë¬¼ ì ˆì•½)",
          es: "Hojas de aguja (Ahorrar agua)",
          de: "NadelblÃ¤tter (Wasser sparen)",
          fi: "Neulaslehdet (SÃ¤Ã¤stÃ¤Ã¤ vettÃ¤)",
          fr: "Feuilles en aiguilles (Ã‰conomiser l'eau)",
          ar: "Ø£ÙˆØ±Ø§Ù‚ Ø¥Ø¨Ø±ÙŠØ© (ØªÙˆÙÙŠØ± Ø§Ù„Ù…Ø§Ø¡)",
          it: "Foglie ad ago (Risparmia acqua)",
        },
        feature_stem: {
          en: "Thick stem (Store water)",
          zh: "è‚¥åšè– (å„²æ°´)",
          ja: "å¤ªã„èŒ (è²¯æ°´)",
          ko: "ë‘êº¼ìš´ ì¤„ê¸° (ë¬¼ ì €ì¥)",
          es: "Tallo grueso (Almacenar agua)",
          de: "Dicker Stamm (Wasser speichern)",
          fi: "Paksu varsi (Varastoi vettÃ¤)",
          fr: "Tige Ã©paisse (Stocker l'eau)",
          ar: "Ø¬Ø°Ø¹ Ø³Ù…ÙŠÙƒ (ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø§Ø¡)",
          it: "Gambo spesso (Immagazzina acqua)",
        },
        feature_broad: {
          en: "Broad leaves (Catch sun)",
          zh: "é—Šå¤§è‘‰ç‰‡ (å¸æ”¶é™½å…‰)",
          ja: "åºƒã„è‘‰ (æ—¥å…‰ã‚’æµ´ã³ã‚‹)",
          ko: "ë„“ì€ ì (í–‡ë¹› í¬ì°©)",
          es: "Hojas anchas (Captar sol)",
          de: "Breite BlÃ¤tter (Sonne einfangen)",
          fi: "LeveÃ¤t lehdet (KerÃ¤Ã¤ auringonvaloa)",
          fr: "Feuilles larges (Capter le soleil)",
          ar: "Ø£ÙˆØ±Ø§Ù‚ Ø¹Ø±ÙŠØ¶Ø© (Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ø´Ù…Ø³)",
          it: "Foglie larghe (Cattura sole)",
        },
        feature_drip: {
          en: "Drip tips (Drain water)",
          zh: "æ»´æ°´è‘‰å°– (æ’æ°´)",
          ja: "ãƒ‰ãƒªãƒƒãƒ—ãƒãƒƒãƒ— (æ’æ°´)",
          ko: "ë“œë¦½ íŒ (ë°°ìˆ˜)",
          es: "Puntas de goteo (Drenar agua)",
          de: "Tropfspitzen (Wasser ableiten)",
          fi: "TippukÃ¤rjet (Valuttaa vettÃ¤)",
          fr: "Pointes d'Ã©gouttement (Drainer l'eau)",
          ar: "Ø±Ø¤ÙˆØ³ ØªÙ‚Ø§Ø·Ø± (ØµØ±Ù Ø§Ù„Ù…Ø§Ø¡)",
          it: "Punte a goccia (Drenare acqua)",
        },
      };

      const traits = [
        { id: "feature_needles", target: "desert", icon: "ğŸŒµ" },
        { id: "feature_stem", target: "desert", icon: "ğŸ¥’" },
        { id: "feature_broad", target: "rainforest", icon: "ğŸƒ" },
        { id: "feature_drip", target: "rainforest", icon: "ğŸ’§" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [currentTrait, setCurrentTrait] = useState(null);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          resetGame();
        }, []);

        const resetGame = () => {
          const shuf = [...traits].sort(() => Math.random() - 0.5);
          setQueue(shuf);
          setCurrentTrait(shuf[0]);
          setFeedback(null);
        };

        const handleChoice = (envId) => {
          if (feedback) return;

          if (currentTrait.target === envId) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              const nextIdx = queue.indexOf(currentTrait) + 1;
              if (nextIdx < queue.length) {
                setCurrentTrait(queue[nextIdx]);
              } else {
                setCurrentTrait(null); // GameOver
              }
            }, 1000);
          } else {
            setFeedback("wrong"); // reuse from i18n if possible, but simplest is state
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-amber-800">
              {getText("title")}
            </h1>

            <div className="flex w-full max-w-5xl h-[600px] border-4 border-amber-900 rounded-3xl overflow-hidden relative shadow-2xl">
              {/* Desert Side */}
              <div
                onClick={() => handleChoice("desert")}
                className="flex-1 bg-gradient-to-b from-blue-200 to-amber-200 relative cursor-pointer hover:opacity-90 transition-opacity border-r-4 border-white"
              >
                <div className="absolute top-4 left-1/2 -translate-x-1/2 font-bold text-2xl text-amber-900 bg-white/60 px-4 py-1 rounded-full">
                  {getText("desert")}
                </div>
                <div className="absolute bottom-10 left-10 text-9xl">ğŸŒµ</div>
                <div className="absolute top-10 right-10 text-6xl animate-pulse">
                  â˜€ï¸
                </div>
              </div>

              {/* Rainforest Side */}
              <div
                onClick={() => handleChoice("rainforest")}
                className="flex-1 bg-gradient-to-b from-blue-800 to-green-900 relative cursor-pointer hover:opacity-90 transition-opacity"
              >
                <div className="absolute top-4 left-1/2 -translate-x-1/2 font-bold text-2xl text-white bg-black/40 px-4 py-1 rounded-full">
                  {getText("rainforest")}
                </div>
                <div className="absolute bottom-10 right-10 text-9xl">ğŸŒ¿</div>
                <div className="absolute top-10 left-10 text-6xl animate-bounce">
                  ğŸŒ§ï¸
                </div>
              </div>

              {/* Draggable/Selectable Trait Card */}
              {currentTrait ? (
                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-8 rounded-3xl shadow-2xl flex flex-col items-center">
                  <div className="text-8xl mb-4">{currentTrait.icon}</div>
                  <div className="font-bold text-2xl text-slate-800 text-center">
                    {getText(currentTrait.id)}
                  </div>
                  <div className="text-slate-500 mt-2">
                    {getText("instruction")}
                  </div>

                  {feedback && (
                    <div
                      className={`absolute inset-0 flex items-center justify-center rounded-3xl 
                           ${
                             feedback === "correct"
                               ? "bg-green-500/90 text-white"
                               : "bg-red-500/90 text-white"
                           }
                        `}
                    >
                      <div className="text-4xl font-black">
                        {getText("correct")}
                      </div>
                    </div>
                  )}
                </div>
              ) : (
                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-8 rounded-3xl shadow-2xl text-center">
                  <div className="text-6xl mb-4">ğŸ‰</div>
                  <button
                    onClick={resetGame}
                    className="bg-amber-600 text-white px-8 py-3 rounded-full font-bold shadow-lg hover:bg-amber-700"
                  >
                    Play Again
                  </button>
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
