<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Smart Shopper</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fffbeb;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Smart Shopper",
          zh: "ç²¾æ˜æ¶ˆè²»è€…",
          ja: "è³¢ã„è²·ã„ç‰©å®¢",
          ko: "í˜„ëª…í•œ ì‡¼í•‘ê°",
          es: "Comprador inteligente",
          de: "Kluger KÃ¤ufer",
          fi: "Fiksu shoppailija",
          fr: "Acheteur malin",
          ar: "Ø§Ù„Ù…ØªØ³ÙˆÙ‚ Ø§Ù„Ø°ÙƒÙŠ",
          it: "Acquirente Intelligente",
        },
        instruction: {
          en: "Buy all items within budget!",
          zh: "åœ¨é ç®—å…§è³¼è²·æ‰€æœ‰ç‰©å“ï¼",
          ja: "äºˆç®—å†…ã§ã™ã¹ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’è³¼å…¥ã—ã¦ãã ã•ã„ï¼",
          ko: "ì˜ˆì‚° ë‚´ì—ì„œ ëª¨ë“  ë¬¼ê±´ì„ êµ¬ë§¤í•˜ì„¸ìš”!",
          es: "Â¡Compra todos los artÃ­culos dentro del presupuesto!",
          de: "Kaufe alle Artikel innerhalb des Budgets!",
          fi: "Osta kaikki tuotteet budjetin rajoissa!",
          fr: "Achetez tous les articles dans le budget !",
          ar: "Ø´Ø±Ø§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©!",
          it: "Compra tutti gli articoli nel budget!",
        },
        budget: {
          en: "Budget",
          zh: "é ç®—",
          ja: "äºˆç®—",
          ko: "ì˜ˆì‚°",
          es: "Presupuesto",
          de: "Budget",
          fi: "Budjetti",
          fr: "Budget",
          ar: "Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
          it: "Budget",
        },
        total: {
          en: "Total",
          zh: "ç¸½è¨ˆ",
          ja: "åˆè¨ˆ",
          ko: "í•©ê³„",
          es: "Total",
          de: "Gesamt",
          fi: "YhteensÃ¤",
          fr: "Total",
          ar: "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹",
          it: "Totale",
        },
        cheap: {
          en: "Cheaper Option",
          zh: "è¼ƒä¾¿å®œçš„é¸æ“‡",
          ja: "å®‰ã„æ–¹",
          ko: "ë” ì €ë ´í•œ ì˜µì…˜",
          es: "OpciÃ³n mÃ¡s barata",
          de: "GÃ¼nstigere Option",
          fi: "Halvempi vaihtoehto",
          fr: "Option moins chÃ¨re",
          ar: "Ø®ÙŠØ§Ø± Ø£Ø±Ø®Øµ",
          it: "Opzione piÃ¹ economica",
        },
        expensive: {
          en: "Premium Option",
          zh: "é«˜ç´šé¸æ“‡",
          ja: "é«˜ç´šãªæ–¹",
          ko: "í”„ë¦¬ë¯¸ì—„ ì˜µì…˜",
          es: "OpciÃ³n premium",
          de: "Premium-Option",
          fi: "Premium-vaihtoehto",
          fr: "Option premium",
          ar: "Ø®ÙŠØ§Ø± Ù…Ù…ØªØ§Ø²",
          it: "Opzione Premium",
        },
        success: {
          en: "Success!",
          zh: "æˆåŠŸï¼",
          ja: "æˆåŠŸï¼",
          ko: "ì„±ê³µ!",
          es: "Â¡Ã‰xito!",
          de: "Erfolg!",
          fi: "Onnistui!",
          fr: "SuccÃ¨s !",
          ar: "Ù†Ø¬Ø§Ø­!",
          it: "Successo!",
        },
        fail: {
          en: "Over Budget!",
          zh: "è¶…å‡ºé ç®—ï¼",
          ja: "äºˆç®—ã‚ªãƒ¼ãƒãƒ¼ï¼",
          ko: "ì˜ˆì‚° ì´ˆê³¼!",
          es: "Â¡Presupuesto excedido!",
          de: "Ãœber dem Budget!",
          fi: "Budjetti ylitetty!",
          fr: "Budget dÃ©passÃ© !",
          ar: "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© ØªØ¬Ø§ÙˆØ²Øª!",
          it: "Fuori Budget!",
        },
        reset: {
          en: "Try Again",
          zh: "é‡è©¦",
          ja: "ã‚„ã‚Šç›´ã™",
          ko: "ë‹¤ì‹œ ì‹œë„",
          es: "Intentar de nuevo",
          de: "Nochmal versuchen",
          fi: "YritÃ¤ uudelleen",
          fr: "RÃ©essayer",
          ar: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Riprova",
        },
      };

      const shops = [
        {
          id: 1,
          name: "Supermarket A",
          items: [
            { name: "Apple", price: 5 },
            { name: "Milk", price: 20 },
          ],
        },
        {
          id: 2,
          name: "Supermarket B",
          items: [
            { name: "Apple", price: 3 },
            { name: "Milk", price: 25 },
          ],
        },
      ];

      const shoppingList = [
        {
          id: "apple",
          icon: "ğŸ",
          name: { en: "Apple", zh: "è˜‹æœ" },
          opts: [
            { price: 5, shop: "A" },
            { price: 3, shop: "B" },
          ],
        },
        {
          id: "milk",
          icon: "ğŸ¥›",
          name: { en: "Milk", zh: "ç‰›å¥¶" },
          opts: [
            { price: 22, shop: "A" },
            { price: 18, shop: "B" },
          ],
        },
        {
          id: "bread",
          icon: "ğŸ",
          name: { en: "Bread", zh: "éºµåŒ…" },
          opts: [
            { price: 12, shop: "A" },
            { price: 15, shop: "B" },
          ],
        },
      ];

      // Target Budget: Need to pick cheaper options mostly
      const BUDGET = 35;

      function App() {
        const [lang, setLang] = useState("zh");
        const [cart, setCart] = useState({}); // { id: price }
        const [finished, setFinished] = useState(false);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const totalCost = Object.values(cart).reduce((a, b) => a + b, 0);
        const remaining = BUDGET - totalCost;

        const selectItem = (itemId, price) => {
          setCart((prev) => ({ ...prev, [itemId]: price }));
        };

        const checkResult = () => {
          setFinished(true);
        };

        const reset = () => {
          setCart({});
          setFinished(false);
        };

        const allSelected = shoppingList.every(
          (item) => cart[item.id] !== undefined
        );

        return (
          <div className="min-h-screen flex flex-col items-center p-6 font-sans text-slate-800">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-4 text-amber-600">
              ğŸ›’ {getText("title")}
            </h1>

            <div className="bg-white p-6 rounded-2xl shadow-xl w-full max-w-2xl text-center mb-8 border-4 border-amber-200">
              <div className="text-2xl font-bold mb-2">
                {getText("budget")}: ${BUDGET}
              </div>
              <div
                className={`text-4xl font-black ${
                  remaining < 0 ? "text-red-500" : "text-green-500"
                }`}
              >
                ${remaining}
              </div>
              <div className="text-sm text-slate-500 mt-2">
                {getText("total")}: ${totalCost}
              </div>
            </div>

            <div className="flex flex-col gap-6 w-full max-w-3xl">
              {shoppingList.map((item) => (
                <div
                  key={item.id}
                  className="bg-white p-4 rounded-xl shadow border border-slate-200 flex flex-col md:flex-row items-center gap-4"
                >
                  <div className="text-6xl">{item.icon}</div>
                  <div className="flex-1 text-center md:text-left font-bold text-xl">
                    {item.name[lang] || item.name["en"]}
                  </div>

                  <div className="flex gap-4">
                    {item.opts.map((opt, idx) => (
                      <button
                        key={idx}
                        onClick={() =>
                          !finished && selectItem(item.id, opt.price)
                        }
                        className={`px-6 py-4 rounded-xl border-2 font-bold text-lg transition-all
                                 ${
                                   cart[item.id] === opt.price
                                     ? "bg-amber-100 border-amber-500 ring-2 ring-amber-300"
                                     : "bg-slate-50 border-slate-200 hover:bg-slate-100"
                                 }
                              `}
                        disabled={finished}
                      >
                        <div className="text-xs text-slate-500">
                          Shop {opt.shop}
                        </div>
                        ${opt.price}
                      </button>
                    ))}
                  </div>
                </div>
              ))}
            </div>

            {!finished && allSelected && (
              <button
                onClick={checkResult}
                className="mt-8 bg-green-500 text-white px-12 py-4 rounded-full font-black text-2xl shadow-xl hover:bg-green-600 animate-bounce"
              >
                {getText("total")} ğŸ§¾
              </button>
            )}

            {finished && (
              <div className="fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50">
                <div className="bg-white p-12 rounded-3xl text-center shadow-2xl animate-pop-in">
                  <div className="text-8xl mb-4">
                    {remaining >= 0 ? "ğŸ‰" : "ğŸ’¸"}
                  </div>
                  <h2
                    className={`text-4xl font-black mb-4 ${
                      remaining >= 0 ? "text-green-600" : "text-red-600"
                    }`}
                  >
                    {remaining >= 0 ? getText("success") : getText("fail")}
                  </h2>
                  <p className="text-xl text-slate-600 mb-8">
                    {getText("budget")}: ${BUDGET} <br />
                    {getText("total")}: ${totalCost}
                  </p>
                  <button
                    onClick={reset}
                    className="bg-amber-500 text-white px-8 py-3 rounded-full font-bold text-xl hover:bg-amber-600"
                  >
                    {getText("reset")}
                  </button>
                </div>
              </div>
            )}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
