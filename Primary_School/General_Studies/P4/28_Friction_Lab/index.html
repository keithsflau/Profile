<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Friction Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f3f4f6;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Friction Lab",
          zh: "æ‘©æ“¦åŠ›å¯¦é©—å®¤",
          ja: "æ‘©æ“¦å®Ÿé¨“å®¤",
          ko: "ë§ˆì°° ì‹¤í—˜ì‹¤",
          es: "Laboratorio de fricciÃ³n",
          de: "Reibungslabor",
          fi: "Kitkalaboratorio",
          fr: "Laboratoire de friction",
          ar: "Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø§Ø­ØªÙƒØ§Ùƒ",
          it: "Laboratorio di Attrito",
        },
        instruction: {
          en: "Choose a surface and slide the car!",
          zh: "é¸æ“‡ä¸€å€‹è¡¨é¢ä¸¦æ»‘å‹•æ±½è»Šï¼",
          ja: "è¡¨é¢ã‚’é¸ã‚“ã§è»Šã‚’ã‚¹ãƒ©ã‚¤ãƒ‰ã•ã›ã¦ãã ã•ã„ï¼",
          ko: "í‘œë©´ì„ ì„ íƒí•˜ê³  ì°¨ë¥¼ ë¯¸ë„ëŸ¬ëœ¨ë¦¬ì„¸ìš”!",
          es: "Â¡Elige una superficie y desliza el coche!",
          de: "WÃ¤hle eine OberflÃ¤che und lass das Auto rutschen!",
          fi: "Valitse pinta ja liu'uta autoa!",
          fr: "Choisissez une surface et faites glisser la voiture !",
          ar: "Ø§Ø®ØªØ± Ø³Ø·Ø­Ø§ ÙˆØ­Ø±Ùƒ Ø§Ù„Ø³ÙŠØ§Ø±Ø©!",
          it: "Scegli una superficie e fai scorrere l'auto!",
        },
        ice: {
          en: "Ice (Low Friction)",
          zh: "å†°é¢ (ä½æ‘©æ“¦åŠ›)",
          ja: "æ°· (ä½æ‘©æ“¦)",
          ko: "ì–¼ìŒ (ë‚®ì€ ë§ˆì°°)",
          es: "Hielo (Baja fricciÃ³n)",
          de: "Eis (Geringe Reibung)",
          fi: "JÃ¤Ã¤ (Pieni kitka)",
          fr: "Glace (Faible friction)",
          ar: "Ø¬Ù„ÙŠØ¯ (Ø§Ø­ØªÙƒØ§Ùƒ Ù…Ù†Ø®ÙØ¶)",
          it: "Ghiaccio (Basso attrito)",
        },
        wood: {
          en: "Wood (Medium Friction)",
          zh: "æœ¨æ¿ (ä¸­æ‘©æ“¦åŠ›)",
          ja: "æœ¨ (ä¸­æ‘©æ“¦)",
          ko: "ë‚˜ë¬´ (ì¤‘ê°„ ë§ˆì°°)",
          es: "Madera (FricciÃ³n media)",
          de: "Holz (Mittlere Reibung)",
          fi: "Puu (Keskitason kitka)",
          fr: "Bois (Friction moyenne)",
          ar: "Ø®Ø´Ø¨ (Ø§Ø­ØªÙƒØ§Ùƒ Ù…ØªÙˆØ³Ø·)",
          it: "Legno (Medio attrito)",
        },
        carpet: {
          en: "Carpet (High Friction)",
          zh: "åœ°æ¯¯ (é«˜æ‘©æ“¦åŠ›)",
          ja: "ã‚«ãƒ¼ãƒšãƒƒãƒˆ (é«˜æ‘©æ“¦)",
          ko: "ì¹´í« (ë†’ì€ ë§ˆì°°)",
          es: "Alfombra (Alta fricciÃ³n)",
          de: "Teppich (Hohe Reibung)",
          fi: "Matto (Korkea kitka)",
          fr: "Tapis (Friction Ã©levÃ©e)",
          ar: "Ø³Ø¬Ø§Ø¯ (Ø§Ø­ØªÙƒØ§Ùƒ Ø¹Ø§Ù„ÙŠ)",
          it: "Tappeto (Alto attrito)",
        },
        push: {
          en: "Push!",
          zh: "æ¨ï¼",
          ja: "æŠ¼ã™ï¼",
          ko: "ë°€ê¸°!",
          es: "Â¡Empujar!",
          de: "DrÃ¼cken!",
          fi: "TyÃ¶nnÃ¤!",
          fr: "Pousser !",
          ar: "Ø§Ø¯ÙØ¹!",
          it: "Spingi!",
        },
        reset: {
          en: "Reset",
          zh: "é‡ç½®",
          ja: "ãƒªã‚»ãƒƒãƒˆ",
          ko: "ì´ˆê¸°í™”",
          es: "Reiniciar",
          de: "ZurÃ¼cksetzen",
          fi: "Nollaa",
          fr: "RÃ©initialiser",
          ar: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†",
          it: "Ripristina",
        },
      };

      const surfaces = [
        { id: "ice", friction: 0.1, color: "bg-cyan-200" },
        { id: "wood", friction: 0.5, color: "bg-amber-700" },
        { id: "carpet", friction: 0.9, color: "bg-red-800" }, // carpet visual
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [surface, setSurface] = useState(surfaces[0]);
        const [carPos, setCarPos] = useState(0); // 0 to 100
        const [animating, setAnimating] = useState(false);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const handlePush = () => {
          setAnimating(true);
          // Simple physics sim: Distance = Force / Friction
          // Assume Force constant 100.
          // Distance = 100 * (1 - friction) ... simplified

          let distance = 0;
          if (surface.id === "ice") distance = 95;
          if (surface.id === "wood") distance = 60;
          if (surface.id === "carpet") distance = 30;

          setCarPos(distance);
        };

        const reset = () => {
          setAnimating(false);
          setCarPos(0);
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-slate-700">
              {getText("title")}
            </h1>

            <div className="w-full max-w-4xl bg-white p-8 rounded-3xl shadow-xl">
              {/* Scene */}
              <div className="relative w-full h-64 bg-sky-200 rounded-xl overflow-hidden mb-8 border-4 border-slate-300">
                {/* Track Surface */}
                <div
                  className={`absolute bottom-0 w-full h-24 ${surface.color} transition-colors duration-500`}
                >
                  {surface.id === "wood" && (
                    <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')]"></div>
                  )}
                  {surface.id === "carpet" && (
                    <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')]"></div>
                  )}
                </div>

                {/* Car */}
                <motion.div
                  className="absolute bottom-24 left-10 text-8xl"
                  animate={{ x: animating ? `${carPos}%` : "0%" }}
                  transition={{
                    type: "spring",
                    stiffness: 50,
                    damping: surface.friction * 40, // Higher friction = faster stop/damping
                  }}
                >
                  ğŸï¸
                </motion.div>
              </div>

              {/* Controls */}
              <div className="flex flex-col gap-6">
                <div className="flex gap-4 justify-center">
                  {surfaces.map((s) => (
                    <button
                      key={s.id}
                      onClick={() => {
                        setSurface(s);
                        reset();
                      }}
                      className={`px-6 py-3 rounded-xl font-bold border-4 transition-transform active:scale-95
                              ${
                                surface.id === s.id
                                  ? "border-blue-500 scale-110"
                                  : "border-transparent bg-slate-100 text-slate-500"
                              }
                           `}
                    >
                      {getText(s.id)}
                    </button>
                  ))}
                </div>

                <div className="flex justify-center gap-4">
                  <button
                    onClick={handlePush}
                    disabled={animating}
                    className="bg-green-500 text-white px-12 py-4 rounded-full font-black text-2xl shadow-lg hover:bg-green-600 disabled:opacity-50"
                  >
                    {getText("push")}
                  </button>
                  <button
                    onClick={reset}
                    className="bg-slate-500 text-white px-8 py-4 rounded-full font-bold text-xl hover:bg-slate-600"
                  >
                    {getText("reset")}
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
