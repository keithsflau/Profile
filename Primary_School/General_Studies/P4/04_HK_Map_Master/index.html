<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - HK Map Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: skyblue;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Hong Kong Map Master",
          zh: "é¦™æ¸¯åœ°åœ–å¤§å¸«",
          ja: "é¦™æ¸¯åœ°å›³ãƒã‚¹ã‚¿ãƒ¼",
          ko: "í™ì½© ì§€ë„ ë§ˆìŠ¤í„°",
          es: "Maestro del Mapa de Hong Kong",
          de: "Hongkong-Kartenmeister",
          fi: "Hongkongin karttamestari",
          fr: "MaÃ®tre de la carte de Hong Kong",
          ar: "Ø®Ø¨ÙŠØ± Ø®Ø±ÙŠØ·Ø© Ù‡ÙˆÙ†Øº ÙƒÙˆÙ†Øº",
          it: "Maestro della Mappa di Hong Kong",
        },
        instruction: {
          en: "Identify the districts!",
          zh: "è¾¨èªé€™äº›åœ°å€ï¼",
          ja: "åœ°åŒºã‚’ç‰¹å®šã—ã¦ãã ã•ã„ï¼",
          ko: "ì§€ì—­ì„ ì‹ë³„í•˜ì„¸ìš”!",
          es: "Â¡Identifica los distritos!",
          de: "Erkenne die Bezirke!",
          fi: "Tunnista alueet!",
          fr: "Identifiez les quartiers !",
          ar: "Ø­Ø¯Ø¯ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚!",
          it: "Identifica i distretti!",
        },
        hk_island: {
          en: "Hong Kong Island",
          zh: "é¦™æ¸¯å³¶",
          ja: "é¦™æ¸¯å³¶",
          ko: "í™ì½© ì„¬",
          es: "Isla de Hong Kong",
          de: "Hongkong-Insel",
          fi: "Hongkongin saari",
          fr: "Ãle de Hong Kong",
          ar: "Ø¬Ø²ÙŠØ±Ø© Ù‡ÙˆÙ†Øº ÙƒÙˆÙ†Øº",
          it: "Isola di Hong Kong",
        },
        kowloon: {
          en: "Kowloon",
          zh: "ä¹é¾",
          ja: "ä¹é¾",
          ko: "êµ¬ë£¡",
          es: "Kowloon",
          de: "Kowloon",
          fi: "Kowloon",
          fr: "Kowloon",
          ar: "ÙƒÙˆÙ„ÙˆÙ†",
          it: "Kowloon",
        },
        nt: {
          en: "New Territories",
          zh: "æ–°ç•Œ",
          ja: "æ–°ç•Œ",
          ko: "ì‹ ê³„",
          es: "Nuevos Territorios",
          de: "Neue Territorien",
          fi: "Uudet alueet",
          fr: "Nouveaux Territoires",
          ar: "Ø§Ù„Ø£Ù‚Ø§Ù„ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©",
          it: "Nuovi Territori",
        },
        lantau: {
          en: "Lantau Island",
          zh: "å¤§å¶¼å±±",
          ja: "ãƒ©ãƒ³ã‚¿ã‚ªå³¶",
          ko: "ë€íƒ€ìš° ì„¬",
          es: "Isla Lantau",
          de: "Lantau-Insel",
          fi: "Lantaun saari",
          fr: "Ãle de Lantau",
          ar: "Ø¬Ø²ÙŠØ±Ø© Ù„Ø§Ù†ØªØ§Ùˆ",
          it: "Isola di Lantau",
        },
        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µ!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "å†è©¦ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦",
          ko: "ë‹¤ì‹œ ì‹œë„",
          es: "Intentar de nuevo",
          de: "Versuch es nochmal",
          fi: "YritÃ¤ uudelleen",
          fr: "RÃ©essayez",
          ar: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Riprova",
        },
      };

      const districts = [
        { id: "hk_island", x: 60, y: 70, w: 20, h: 10, color: "bg-red-400" },
        { id: "kowloon", x: 60, y: 55, w: 15, h: 10, color: "bg-orange-400" },
        { id: "nt", x: 50, y: 30, w: 40, h: 25, color: "bg-green-400" },
        { id: "lantau", x: 25, y: 65, w: 20, h: 15, color: "bg-purple-400" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [selectedId, setSelectedId] = useState(null);
        const [feedback, setFeedback] = useState(null);
        const [completed, setCompleted] = useState({});

        const getText = (key) => t[key][lang] || t[key]["en"];

        const handleSelect = (id) => {
          if (completed[id]) return;

          if (!selectedId) {
            return;
          }

          if (selectedId === id) {
            setCompleted((prev) => ({ ...prev, [id]: true }));
            setFeedback("correct");
            setSelectedId(null);
            setTimeout(() => setFeedback(null), 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 500);
          }
        };

        const startSelection = (id) => {
          setSelectedId(id);
        };

        return (
          <div className="min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden bg-blue-300">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-3xl font-black text-white drop-shadow-md mb-4 absolute top-8">
              {getText("title")}
            </h1>

            <div className="bg-white/90 p-6 rounded-xl shadow-lg z-10 w-full max-w-4xl h-[600px] relative mt-16 flex flex-col items-center">
              {/* Map Container */}
              <div className="relative w-full flex-grow bg-blue-100 rounded-xl overflow-hidden mb-4">
                {/* Simplified Map Areas created with absolute divs for now. SVG preferred in production */}
                {districts.map((d) => (
                  <motion.div
                    key={d.id}
                    initial={{ opacity: 0.8 }}
                    whileHover={{ opacity: 1, scale: 1.05 }}
                    className={`absolute rounded-2xl cursor-pointer flex items-center justify-center text-center shadow-lg border-2 border-white
                           ${d.color} ${completed[d.id] ? "brightness-110" : ""}
                        `}
                    style={{
                      left: d.x + "%",
                      top: d.y + "%",
                      width: d.w + "%",
                      height: d.h + "%",
                    }}
                    onClick={() => handleSelect(d.id)}
                  >
                    {completed[d.id] && (
                      <span className="font-bold text-white drop-shadow-md text-sm md:text-xl">
                        {getText(d.id)}
                      </span>
                    )}
                  </motion.div>
                ))}
              </div>

              {/* Labels to drag/click */}
              <div className="flex flex-wrap gap-2 justify-center">
                <div className="w-full text-center font-bold text-slate-700 bg-white/80 p-2 rounded mb-2">
                  {feedback ? getText(feedback) : getText("instruction")}
                </div>
                {districts.map(
                  (d) =>
                    !completed[d.id] && (
                      <button
                        key={d.id}
                        onClick={() => startSelection(d.id)}
                        className={`px-4 py-2 rounded-lg font-bold shadow-md transition-all text-left
                              ${
                                selectedId === d.id
                                  ? "bg-yellow-400 text-slate-900 border-2 border-slate-900 scale-105"
                                  : "bg-white text-slate-700 hover:bg-slate-100"
                              }
                           `}
                      >
                        ğŸ“ {getText(d.id)}
                      </button>
                    )
                )}
                {Object.keys(completed).length === districts.length && (
                  <div className="bg-green-500 text-white font-bold p-4 rounded-xl text-center animate-bounce">
                    {getText("correct")}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
