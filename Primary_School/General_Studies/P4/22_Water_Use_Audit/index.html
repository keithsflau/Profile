<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Water Use Audit</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f0f9ff;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Water Usage Calculator",
          zh: "ç”¨æ°´é‡è¨ˆç®—æ©Ÿ",
          ja: "ä½¿ç”¨æ°´é‡è¨ˆç®—æ©Ÿ",
          ko: "ë¬¼ ì‚¬ìš©ëŸ‰ ê³„ì‚°ê¸°",
          es: "Calculadora de uso de agua",
          de: "Wasserverbrauchsrechner",
          fi: "Vedenkulutuslaskuri",
          fr: "Calculateur de consommation d'eau",
          ar: "Ø­Ø§Ø³Ø¨Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙŠØ§Ù‡",
          it: "Calcolatore Uso Acqua",
        },
        instruction: {
          en: "Calculate your daily water usage.",
          zh: "è¨ˆç®—ä½ çš„æ¯æ—¥ç”¨æ°´é‡ã€‚",
          ja: "1æ—¥ã®æ°´ä½¿ç”¨é‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚",
          ko: "ì¼ì¼ ë¬¼ ì‚¬ìš©ëŸ‰ì„ ê³„ì‚°í•˜ì„¸ìš”.",
          es: "Calcula tu uso diario de agua.",
          de: "Berechne deinen tÃ¤glichen Wasserverbrauch.",
          fi: "Laske pÃ¤ivittÃ¤inen vedenkulutuksesi.",
          fr: "Calculez votre consommation d'eau quotidienne.",
          ar: "Ø§Ø­Ø³Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù„Ù…ÙŠØ§Ù‡.",
          it: "Calcola il tuo uso giornaliero di acqua.",
        },
        shower: {
          en: "Showing (mins)",
          zh: "æ·‹æµ´ (åˆ†é˜)",
          ja: "ã‚·ãƒ£ãƒ¯ãƒ¼ (åˆ†)",
          ko: "ìƒ¤ì›Œ (ë¶„)",
          es: "Ducha (min)",
          de: "Duschen (Min)",
          fi: "Suihku (min)",
          fr: "Douche (min)",
          ar: "Ø§Ù„Ø§Ø³ØªØ­Ù…Ø§Ù… (Ø¯Ù‚ÙŠÙ‚Ø©)",
          it: "Doccia (min)",
        },
        toilet: {
          en: "Toilet flush (times)",
          zh: "æ²–å» (æ¬¡æ•¸)",
          ja: "ãƒˆã‚¤ãƒ¬æµã— (å›ž)",
          ko: "ë³€ê¸° ë¬¼ë‚´ë¦¼ (íšŒ)",
          es: "Descarga inodoro (veces)",
          de: "ToilettenspÃ¼lung (Mal)",
          fi: "WC-huuhtelu (kerrat)",
          fr: "Chasse d'eau (fois)",
          ar: "ØºØ³Ù„ Ø§Ù„Ù…Ø±Ø­Ø§Ø¶ (Ù…Ø±Ø§Øª)",
          it: "Sciacquone (volte)",
        },
        brush: {
          en: "Brushing (Tap on)",
          zh: "åˆ·ç‰™ (é–‹è‘—æ°´é¾é ­)",
          ja: "æ­¯ç£¨ã (å‡ºã—ã£æ”¾ã—)",
          ko: "ì–‘ì¹˜ì§ˆ (ìˆ˜ë„ê¼­ì§€ ì¼¬)",
          es: "Cepillado (Grifo abierto)",
          de: "ZÃ¤hneputzen (Wasserhahn an)",
          fi: "Hampaiden harjaus (hana auki)",
          fr: "Brossage (Robinet ouvert)",
          ar: "ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø³Ù†Ø§Ù† (Ø§Ù„ØµÙ†Ø¨ÙˆØ± Ù…ÙØªÙˆØ­)",
          it: "Lavare i denti (Rubinetto aperto)",
        },
        total: {
          en: "Total Liters:",
          zh: "ç¸½å‡æ•¸ï¼š",
          ja: "ç·ãƒªãƒƒãƒˆãƒ«ï¼š",
          ko: "ì´ ë¦¬í„°:",
          es: "Litros totales:",
          de: "Gesamtliter:",
          fi: "Litraa yhteensÃ¤:",
          fr: "Total litres :",
          ar: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù„ØªØ±Ø§Øª:",
          it: "Litri Totali:",
        },
        tip: {
          en: "Tip: A 5-min shower uses ~40L.",
          zh: "æç¤ºï¼š5åˆ†é˜æ·‹æµ´ç´„ç”¨40å…¬å‡ã€‚",
          ja: "ãƒ’ãƒ³ãƒˆï¼š5åˆ†é–“ã®ã‚·ãƒ£ãƒ¯ãƒ¼ã§ç´„40Lã€‚",
          ko: "íŒ: 5ë¶„ ìƒ¤ì›ŒëŠ” ì•½ 40Lë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.",
          es: "Consejo: Una ducha de 5 minutos usa ~40L.",
          de: "Tipp: 5 Min Duschen verbraucht ~40L.",
          fi: "Vinkki: 5 min suihku vie ~40L.",
          fr: "Conseil : Une douche de 5 min utilise ~40L.",
          ar: "Ù†ØµÙŠØ­Ø©: Ø§Ù„Ø§Ø³ØªØ­Ù…Ø§Ù… Ù„Ù…Ø¯Ø© 5 Ø¯Ù‚Ø§Ø¦Ù‚ ÙŠØ³ØªÙ‡Ù„Ùƒ Ø­ÙˆØ§Ù„ÙŠ 40 Ù„ØªØ±Ø§Ù‹.",
          it: "Consiglio: Una doccia di 5 min usa ~40L.",
        },
        grade: {
          good: {
            en: "Great job! Saving water.",
            zh: "åšå¾—å¥½ï¼ä½ åœ¨ç¯€ç´„ç”¨æ°´ã€‚",
            ja: "ç´ æ™´ã‚‰ã—ã„ï¼ç¯€æ°´ã—ã¦ã„ã¾ã™ã€‚",
            ko: "ìž˜í–ˆì–´ìš”! ë¬¼ì„ ì ˆì•½í•˜ê³  ìžˆìŠµë‹ˆë‹¤.",
            es: "Â¡Buen trabajo! Ahorrando agua.",
            de: "Gut gemacht! Wasser sparen.",
            fi: "Hienoa! SÃ¤Ã¤stÃ¤t vettÃ¤.",
            fr: "Bien jouÃ© ! Ã‰conomie d'eau.",
            ar: "Ø¹Ù…Ù„ Ø±Ø§Ø¦Ø¹! ØªÙˆÙÙŠØ± Ø§Ù„Ù…ÙŠØ§Ù‡.",
            it: "Ottimo lavoro! Risparmio acqua.",
          },
          bad: {
            en: "Try to use less water.",
            zh: "å˜—è©¦å°‘ç”¨ä¸€é»žæ°´ã€‚",
            ja: "æ°´ã®ä½¿ç”¨é‡ã‚’æ¸›ã‚‰ã—ã¦ã¿ã¦ãã ã•ã„ã€‚",
            ko: "ë¬¼ì„ ëœ ì‚¬ìš©í•˜ë„ë¡ ë…¸ë ¥í•˜ì„¸ìš”.",
            es: "Intenta usar menos agua.",
            de: "Versuche, weniger Wasser zu verbrauchen.",
            fi: "YritÃ¤ kÃ¤yttÃ¤Ã¤ vÃ¤hemmÃ¤n vettÃ¤.",
            fr: "Essayez d'utiliser moins d'eau.",
            ar: "Ø­Ø§ÙˆÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ…ÙŠØ© Ø£Ù‚Ù„ Ù…Ù† Ø§Ù„Ù…Ø§Ø¡.",
            it: "Cerca di usare meno acqua.",
          },
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [showerTime, setShowerTime] = useState(10);
        const [flushes, setFlushes] = useState(5);
        const [brushingOn, setBrushingOn] = useState(false);

        const getText = (key) => t[key][lang] || t[key]["en"];

        // Rates
        const RATE_SHOWER = 8; // L/min
        const RATE_FLUSH = 7; // L/flush
        const RATE_BRUSH = 5; // L/min (approx if tapping on) - assume 2 mins

        const total =
          showerTime * RATE_SHOWER +
          flushes * RATE_FLUSH +
          (brushingOn ? 2 * RATE_BRUSH : 0);

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-blue-600">
              ðŸš° {getText("title")}
            </h1>

            <div className="bg-white p-8 rounded-3xl shadow-xl w-full max-w-lg border border-blue-100">
              {/* Shower */}
              <div className="mb-6">
                <div className="flex justify-between font-bold text-slate-700 mb-2">
                  <span>ðŸš¿ {getText("shower")}</span>
                  <span className="text-blue-500">{showerTime} min</span>
                </div>
                <input
                  type="range"
                  min="1"
                  max="30"
                  value={showerTime}
                  onChange={(e) => setShowerTime(Number(e.target.value))}
                  className="w-full accent-blue-500"
                />
              </div>

              {/* Toilet */}
              <div className="mb-6">
                <div className="flex justify-between font-bold text-slate-700 mb-2">
                  <span>ðŸš½ {getText("toilet")}</span>
                  <span className="text-blue-500">{flushes}</span>
                </div>
                <input
                  type="range"
                  min="1"
                  max="20"
                  value={flushes}
                  onChange={(e) => setFlushes(Number(e.target.value))}
                  className="w-full accent-blue-500"
                />
              </div>

              {/* Brushing */}
              <div className="mb-8 flex items-center justify-between">
                <span className="font-bold text-slate-700">
                  ðŸª¥ {getText("brush")}
                </span>
                <div
                  onClick={() => setBrushingOn(!brushingOn)}
                  className={`w-16 h-8 rounded-full p-1 cursor-pointer transition-colors ${
                    brushingOn ? "bg-red-400" : "bg-green-400"
                  }`}
                >
                  <div
                    className={`w-6 h-6 bg-white rounded-full shadow-md transition-transform transform ${
                      brushingOn ? "translate-x-8" : ""
                    }`}
                  ></div>
                </div>
              </div>

              <div className="border-t pt-6 text-center">
                <div className="text-slate-500 mb-1">{getText("total")}</div>
                <motion.div
                  key={total}
                  initial={{ scale: 0.8 }}
                  animate={{ scale: 1 }}
                  className="text-6xl font-black text-blue-600 mb-4"
                >
                  {total} L
                </motion.div>

                <div
                  className={`font-bold text-lg px-4 py-2 rounded-lg inline-block ${
                    total < 150
                      ? "bg-green-100 text-green-700"
                      : "bg-orange-100 text-orange-700"
                  }`}
                >
                  {total < 150
                    ? t.grade.good[lang] || t.grade.good["en"]
                    : t.grade.bad[lang] || t.grade.bad["en"]}
                </div>
              </div>

              <div className="mt-6 text-sm text-slate-400 text-center italic">
                {getText("tip")}
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
