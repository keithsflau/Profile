<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Plant Parts Micro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #ecfccb;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Microscope Lab",
          zh: "é¡¯å¾®é¡å¯¦é©—å®¤",
          ja: "é¡•å¾®é¡ãƒ©ãƒœ",
          ko: "í˜„ë¯¸ê²½ ì‹¤í—˜ì‹¤",
          es: "Laboratorio de Microscopio",
          de: "Mikroskop-Labor",
          fi: "Mikroskooppilaboratorio",
          fr: "Laboratoire de microscope",
          ar: "Ù…Ø®ØªØ¨Ø± Ø§Ù„Ù…Ø¬Ù‡Ø±",
          it: "Laboratorio Microscopio",
        },
        instruction: {
          en: "Identify what you see under the microscope!",
          zh: "è¾¨èªä½ åœ¨é¡¯å¾®é¡ä¸‹çœ‹åˆ°çš„æ±è¥¿ï¼",
          ja: "é¡•å¾®é¡ã®ä¸‹ã«è¦‹ãˆã‚‹ã‚‚ã®ã‚’ç‰¹å®šã—ã¦ãã ã•ã„ï¼",
          ko: "í˜„ë¯¸ê²½ìœ¼ë¡œ ë³´ì´ëŠ” ê²ƒì„ ì‹ë³„í•˜ì„¸ìš”!",
          es: "Â¡Identifica lo que ves bajo el microscopio!",
          de: "Identifiziere, was du unter dem Mikroskop siehst!",
          fi: "Tunnista mitÃ¤ nÃ¤et mikroskoopissa!",
          fr: "Identifiez ce que vous voyez au microscope !",
          ar: "Ø­Ø¯Ø¯ Ù…Ø§ ØªØ±Ø§Ù‡ ØªØ­Øª Ø§Ù„Ù…Ø¬Ù‡Ø±!",
          it: "Identifica cosa vedi al microscopio!",
        },
        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µ!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        cell_wall: {
          en: "Cell Wall",
          zh: "ç´°èƒå£",
          ja: "ç´°èƒå£",
          ko: "ì„¸í¬ë²½",
          es: "Pared celular",
          de: "Zellwand",
          fi: "SoluseinÃ¤",
          fr: "Paroi cellulaire",
          ar: "Ø§Ù„Ø¬Ø¯Ø§Ø± Ø§Ù„Ø®Ù„ÙˆÙŠ",
          it: "Parete Cellulare",
        },
        chloroplast: {
          en: "Chloroplast",
          zh: "è‘‰ç¶ é«”",
          ja: "è‘‰ç·‘ä½“",
          ko: "ì—½ë¡ì²´",
          es: "Cloroplasto",
          de: "Chloroplast",
          fi: "Viherhiukkanen",
          fr: "Chloroplaste",
          ar: "Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠØ¯Ø§Øª Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡",
          it: "Cloroplasto",
        },
        stomata: {
          en: "Stomata",
          zh: "æ°£å­”",
          ja: "æ°—å­”",
          ko: "ê¸°ê³µ",
          es: "Estomas",
          de: "SpaltÃ¶ffnungen",
          fi: "Ilmaraot",
          fr: "Stomates",
          ar: "Ø§Ù„Ø«ØºÙˆØ±",
          it: "Stomi",
        },
        nucleus: {
          en: "Nucleus",
          zh: "ç´°èƒæ ¸",
          ja: "ç´°èƒæ ¸",
          ko: "ì„¸í¬í•µ",
          es: "NÃºcleo",
          de: "Zellkern",
          fi: "Tuma",
          fr: "Noyau",
          ar: "Ù†ÙˆØ§Ø©",
          it: "Nucleo",
        },
      };

      const slides = [
        {
          id: 1,
          name: "leaf_cell",
          target: "chloroplast",
          // Simplified generative art for SVG
          view: (
            <svg
              viewBox="0 0 100 100"
              className="w-full h-full bg-green-100 rounded-full overflow-hidden"
            >
              <path
                d="M10,10 h80 v80 h-80 z"
                fill="none"
                stroke="#22c55e"
                strokeWidth="2"
              />
              {/* Grid of cells */}
              <path
                d="M30,10 v80 M50,10 v80 M70,10 v80 M10,30 h80 M10,50 h80 M10,70 h80"
                stroke="#22c55e"
                strokeWidth="1"
                opacity="0.5"
              />
              {/* Chloroplasts - green dots */}
              {[...Array(20)].map((_, i) => (
                <circle
                  key={i}
                  cx={Math.random() * 80 + 10}
                  cy={Math.random() * 80 + 10}
                  r="2"
                  fill="green"
                />
              ))}
            </svg>
          ),
          hint: "Green dots that make food",
        },
        {
          id: 2,
          name: "onion_cell",
          target: "cell_wall",
          view: (
            <svg
              viewBox="0 0 100 100"
              className="w-full h-full bg-yellow-50 rounded-full overflow-hidden"
            >
              {/* Brick usage */}
              <path
                d="M10,20 h80 M10,40 h80 M10,60 h80"
                stroke="#a3a3a3"
                strokeWidth="2"
              />
              <path
                d="M30,20 v20 M70,20 v20 M50,40 v20 M30,60 v20"
                stroke="#a3a3a3"
                strokeWidth="2"
              />
              <rect
                x="0"
                y="0"
                width="100"
                height="100"
                fill="none"
                stroke="#a3a3a3"
                strokeWidth="10"
                opacity="0.3"
              />
            </svg>
          ),
          hint: "The hard outer layer",
        },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [slideIndex, setSlideIndex] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const currentSlide = slides[slideIndex];

        const checkAnswer = (ans) => {
          if (ans === currentSlide.target) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setSlideIndex((slideIndex + 1) % slides.length);
            }, 1000);
          } else {
            setFeedback("wrong"); // Using existing logic implicitly? No, need explicit state.
            // Let's add simple visual for wrong
            setTimeout(() => setFeedback(null), 500);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4 font-sans bg-lime-50">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-4 text-lime-800">
              ğŸ”¬ {getText("title")}
            </h1>

            <div className="flex flex-col items-center gap-8 w-full max-w-2xl">
              {/* Microscope View */}
              <div className="relative w-80 h-80 rounded-full border-[16px] border-slate-700 shadow-2xl bg-white overflow-hidden group">
                <div className="absolute inset-0 z-10 pointer-events-none rounded-full shadow-[inset_0_0_40px_rgba(0,0,0,0.5)]"></div>
                {/* Viewport content */}
                <div className="w-[150%] h-[150%] -ml-[25%] -mt-[25%] transition-transform duration-1000 group-hover:scale-110">
                  {currentSlide.view}
                </div>

                {feedback && (
                  <div
                    className={`absolute inset-0 flex items-center justify-center z-20 bg-black/50`}
                  >
                    <div
                      className={`text-3xl font-bold px-4 py-2 rounded ${
                        feedback === "correct"
                          ? "text-green-400"
                          : "text-red-400"
                      }`}
                    >
                      {getText(
                        feedback === "correct" ? "correct" : "instruction"
                      )}
                    </div>
                  </div>
                )}
              </div>

              <p className="font-bold text-slate-600 text-lg">
                {getText("instruction")}
              </p>

              {/* Options */}
              <div className="grid grid-cols-2 gap-4 w-full">
                {["cell_wall", "chloroplast", "stomata", "nucleus"].map(
                  (opt) => (
                    <button
                      key={opt}
                      onClick={() => checkAnswer(opt)}
                      className="bg-white hover:bg-lime-100 text-lime-900 border-2 border-lime-200 py-4 rounded-xl font-bold shadow-sm transition-all active:scale-95"
                    >
                      {getText(opt)}
                    </button>
                  )
                )}
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
