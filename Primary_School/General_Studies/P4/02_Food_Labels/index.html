<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Food Labels</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: radial-gradient(circle, #f0fdf4 0%, #dcfce7 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Food Label Detective",
          zh: "é£Ÿç‰©æ¨™ç±¤åµæ¢",
          ja: "é£Ÿå“ãƒ©ãƒ™ãƒ«æ¢åµ",
          ko: "ì‹í’ˆ ë¼ë²¨ íƒì •",
          es: "Detective de Etiquetas de Alimentos",
          de: "Lebensmitteletiketten-Detektiv",
          fi: "RuokaetikettietsivÃ¤",
          fr: "DÃ©tective d'Ã©tiquettes alimentaires",
          ar: "Ù…Ø®Ø¨Ø± Ù…Ù„ØµÙ‚Ø§Øª Ø§Ù„ØºØ°Ø§Ø¡",
          it: "Investigatore di Etichette Alimentari",
        },
        instruction: {
          en: "Read the label and answer the question.",
          zh: "é–±è®€æ¨™ç±¤ä¸¦å›ç­”å•é¡Œã€‚",
          ja: "ãƒ©ãƒ™ãƒ«ã‚’èª­ã‚“ã§è³ªå•ã«ç­”ãˆã¦ãã ã•ã„ã€‚",
          ko: "ë¼ë²¨ì„ ì½ê³  ì§ˆë¬¸ì— ë‹µí•˜ì„¸ìš”.",
          es: "Lee la etiqueta y responde la pregunta.",
          de: "Lies das Etikett und antworte auf die Frage.",
          fi: "Lue etiketti ja vastaa kysymykseen.",
          fr: "Lisez l'Ã©tiquette et rÃ©pondez Ã  la question.",
          ar: "Ø§Ù‚Ø±Ø£ Ø§Ù„Ù…Ù„ØµÙ‚ ÙˆØ£Ø¬Ø¨ Ø¹Ù† Ø§Ù„Ø³Ø¤Ø§Ù„.",
          it: "Leggi l'etichetta e rispondi alla domanda.",
        },
        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µ!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "å†è©¦ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦",
          ko: "ë‹¤ì‹œ ì‹œë„",
          es: "IntÃ©ntalo de nuevo",
          de: "Versuch es nochmal",
          fi: "YritÃ¤ uudelleen",
          fr: "RÃ©essayez",
          ar: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Riprova",
        },
        expiry: {
          en: "Expiry Date",
          zh: "åˆ°æœŸæ—¥",
          ja: "æœ‰åŠ¹æœŸé™",
          ko: "ìœ í†µê¸°í•œ",
          es: "Fecha de caducidad",
          de: "Verfallsdatum",
          fi: "Viimeinen kÃ¤yttÃ¶pÃ¤ivÃ¤",
          fr: "Date d'expiration",
          ar: "ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©",
          it: "Data di Scadenza",
        },
        sugar: {
          en: "Sugar",
          zh: "ç³–",
          ja: "ç ‚ç³–",
          ko: "ì„¤íƒ•",
          es: "AzÃºcar",
          de: "Zucker",
          fi: "Sokeri",
          fr: "Sucre",
          ar: "Ø³ÙƒØ±",
          it: "Zucchero",
        },
        protein: {
          en: "Protein",
          zh: "è›‹ç™½è³ª",
          ja: "ã‚¿ãƒ³ãƒ‘ã‚¯è³ª",
          ko: "ë‹¨ë°±ì§ˆ",
          es: "ProteÃ­na",
          de: "Protein",
          fi: "Proteiini",
          fr: "ProtÃ©ines",
          ar: "Ø¨Ø±ÙˆØªÙŠÙ†",
          it: "Proteine",
        },
        energy: {
          en: "Energy",
          zh: "èƒ½é‡",
          ja: "ã‚¨ãƒãƒ«ã‚®ãƒ¼",
          ko: "ì—ë„ˆì§€",
          es: "EnergÃ­a",
          de: "Energie",
          fi: "Energia",
          fr: "Ã‰nergie",
          ar: "Ø·Ø§Ù‚Ø©",
          it: "Energia",
        },
        q_sugar: {
          en: "How much sugar is in this?",
          zh: "é€™è£¡å«æœ‰å¤šå°‘ç³–ï¼Ÿ",
          ja: "ç ‚ç³–ã¯ã©ã‚Œãã‚‰ã„å«ã¾ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
          ko: "ì„¤íƒ•ì€ ì–¼ë§ˆë‚˜ ë“¤ì–´ ìˆìŠµë‹ˆê¹Œ?",
          es: "Â¿CuÃ¡nta azÃºcar hay en esto?",
          de: "Wie viel Zucker ist darin enthalten?",
          fi: "Kuinka paljon sokeria tÃ¤ssÃ¤ on?",
          fr: "Combien de sucre y a-t-il ?",
          ar: "ÙƒÙ… ÙƒÙ…ÙŠØ© Ø§Ù„Ø³ÙƒØ± Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù‡Ø°Ø§ØŸ",
          it: "Quanto zucchero c'Ã¨?",
        },
        q_expiry: {
          en: "When does this expire?",
          zh: "é€™ä»€éº¼æ™‚å€™éæœŸï¼Ÿ",
          ja: "ã“ã‚Œã¯ã„ã¤æœŸé™åˆ‡ã‚Œã«ãªã‚Šã¾ã™ã‹ï¼Ÿ",
          ko: "ì–¸ì œ ë§Œë£Œë©ë‹ˆê¹Œ?",
          es: "Â¿CuÃ¡ndo caduca esto?",
          de: "Wann lÃ¤uft das ab?",
          fi: "Milloin tÃ¤mÃ¤ vanhenee?",
          fr: "Quand cela expire-t-il ?",
          ar: "Ù…ØªÙ‰ ØªÙ†ØªÙ‡ÙŠ ØµÙ„Ø§Ø­ÙŠØ© Ù‡Ø°Ø§ØŸ",
          it: "Quando scade?",
        },
      };

      const foods = [
        {
          id: 1,
          name: "Juice Box",
          color: "bg-orange-100",
          label: {
            energy: "120 kcal",
            protein: "0 g",
            sugar: "25 g",
            expiry: "2025-12-31",
          },
          questions: [
            {
              type: "q_sugar",
              correct: "25 g",
              options: ["10 g", "25 g", "0 g", "100 g"],
            },
            {
              type: "q_expiry",
              correct: "2025-12-31",
              options: ["2024-01-01", "2025-12-31", "2026-06-01"],
            },
          ],
        },
        {
          id: 2,
          name: "Yogurt",
          color: "bg-blue-100",
          label: {
            energy: "90 kcal",
            protein: "5 g",
            sugar: "12 g",
            expiry: "2024-05-20",
          },
          questions: [
            {
              type: "q_sugar",
              correct: "12 g",
              options: ["5 g", "12 g", "20 g"],
            },
            {
              type: "q_expiry",
              correct: "2024-05-20",
              options: ["2024-05-20", "2025-12-01", "2023-10-10"],
            },
          ],
        },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [level, setLevel] = useState(0);
        const [qIndex, setQIndex] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const currentItem = foods[level];
        const currentQ = currentItem?.questions[qIndex];

        const checkAnswer = (ans) => {
          if (feedback) return;
          if (ans === currentQ.correct) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              if (qIndex < currentItem.questions.length - 1) {
                setQIndex(qIndex + 1);
              } else {
                if (level < foods.length - 1) {
                  setLevel(level + 1);
                  setQIndex(0);
                } else {
                  setLevel(0); // Loop
                  setQIndex(0);
                }
              }
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 1000);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center justify-center p-6">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-3xl font-black text-green-700 mb-6 bg-white/50 px-6 py-2 rounded-full">
              ğŸ” {getText("title")}
            </h1>

            <div className="flex flex-col md:flex-row gap-8 items-center bg-white p-8 rounded-3xl shadow-xl border-4 border-green-200">
              {/* Product Packaging View */}
              <div
                className={`w-64 h-80 ${currentItem.color} rounded-2xl flex flex-col items-center justify-center border-4 border-slate-300 relative`}
              >
                <div className="text-6xl mb-4">ğŸ§ƒ</div>
                <div className="font-bold text-2xl text-slate-700">
                  {currentItem.name}
                </div>

                {/* Label on Back */}
                <div className="absolute top-2 right-2 cursor-pointer group">
                  <div className="bg-white p-2 rounded-full shadow-md text-2xl">
                    ğŸ“‹
                  </div>
                  <div className="absolute top-10 right-0 w-48 bg-white border border-slate-300 p-4 rounded-xl shadow-xl hidden group-hover:block z-10 text-left text-sm">
                    <div className="font-bold border-b mb-2">
                      Nutrition Facts
                    </div>
                    <div className="flex justify-between">
                      <span>{getText("energy")}</span>{" "}
                      <span>{currentItem.label.energy}</span>
                    </div>
                    <div className="flex justify-between">
                      <span>{getText("protein")}</span>{" "}
                      <span>{currentItem.label.protein}</span>
                    </div>
                    <div className="flex justify-between font-bold text-red-500">
                      <span>{getText("sugar")}</span>{" "}
                      <span>{currentItem.label.sugar}</span>
                    </div>
                    <div className="mt-2 text-xs text-slate-500 border-t pt-1">
                      {getText("expiry")}: {currentItem.label.expiry}
                    </div>
                  </div>
                </div>

                {/* Simplified label visible always for ease */}
                <div className="bg-white/90 p-4 rounded-xl mt-4 text-left text-sm w-5/6 shadow-inner border border-slate-200">
                  <div className="flex justify-between">
                    <span>âš¡ {getText("energy")}</span>{" "}
                    <span>{currentItem.label.energy}</span>
                  </div>
                  <div className="flex justify-between">
                    <span>ğŸ’ª {getText("protein")}</span>{" "}
                    <span>{currentItem.label.protein}</span>
                  </div>
                  <div className="flex justify-between font-bold text-red-600">
                    <span>ğŸ¬ {getText("sugar")}</span>{" "}
                    <span>{currentItem.label.sugar}</span>
                  </div>
                  <div className="mt-2 text-xs text-slate-500 border-t pt-1 flex justify-between">
                    <span>ğŸ“… {getText("expiry")}</span>{" "}
                    <span>{currentItem.label.expiry}</span>
                  </div>
                </div>
              </div>

              {/* Question Panel */}
              <div className="flex flex-col gap-4 w-full md:w-80">
                <div className="font-bold text-xl text-slate-800">
                  {getText(currentQ.type)}
                </div>
                <div className="grid grid-cols-1 gap-3">
                  {currentQ.options.map((opt) => (
                    <button
                      key={opt}
                      onClick={() => checkAnswer(opt)}
                      className="bg-green-100 hover:bg-green-200 text-green-900 font-bold py-3 px-6 rounded-xl border-2 border-green-300 transition-colors"
                    >
                      {opt}
                    </button>
                  ))}
                </div>
                {feedback && (
                  <div
                    className={`text-center font-bold text-xl p-3 rounded-xl ${
                      feedback === "correct"
                        ? "bg-green-500 text-white"
                        : "bg-red-500 text-white"
                    }`}
                  >
                    {getText(feedback)}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
