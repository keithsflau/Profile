<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - History Detective</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fdf2f8;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "History Detective",
          zh: "Ê≠∑Âè≤ÂÅµÊé¢",
          ja: "Ê≠¥Âè≤Êé¢ÂÅµ",
          ko: "Ïó≠ÏÇ¨ ÌÉêÏ†ï",
          es: "Detective de historia",
          de: "Geschichtsdetektiv",
          fi: "Historiaetsiv√§",
          fr: "D√©tective d'histoire",
          ar: "ŸÖÿ≠ŸÇŸÇ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ",
          it: "Detective di Storia",
        },
        instruction: {
          en: "Is this item OLD (Past) or NEW (Modern)?",
          zh: "ÈÄôÊòØËàäÊôÇ (ÈÅéÂéª) ÈÇÑÊòØÊñ∞Âºè (Áèæ‰ª£) ÁöÑÁâ©ÂìÅÔºü",
          ja: "„Åì„Çå„ÅØÂè§„ÅÑÔºàÈÅéÂéªÔºâ„Ç¢„Ç§„ÉÜ„É†„Åß„Åô„Åã„ÄÅ„Åù„Çå„Å®„ÇÇÊñ∞„Åó„ÅÑÔºàÁèæ‰ª£Ôºâ„Ç¢„Ç§„ÉÜ„É†„Åß„Åô„ÅãÔºü",
          ko: "Ïù¥Í≤ÉÏùÄ Ïò§ÎûòÎêú(Í≥ºÍ±∞) Î¨ºÍ±¥Ïù∏Í∞ÄÏöî, ÏïÑÎãàÎ©¥ ÏÉàÎ°úÏö¥(ÌòÑÎåÄ) Î¨ºÍ±¥Ïù∏Í∞ÄÏöî?",
          es: "¬øEste art√≠culo es ANTIGUO (pasado) o NUEVO (moderno)?",
          de: "Ist dieser Gegenstand ALT (Vergangenheit) oder NEU (Modern)?",
          fi: "Onko t√§m√§ esine VANHA (menneisyys) vai UUSI (nykyaika)?",
          fr: "Cet article est-il VIEUX (pass√©) ou NOUVEAU (moderne) ?",
          ar: "ŸáŸÑ Ÿáÿ∞ÿß ÿßŸÑÿπŸÜÿµÿ± ŸÇÿØŸäŸÖ (ŸÖÿßÿ∂Ÿä) ÿ£ŸÖ ÿ¨ÿØŸäÿØ (ÿ≠ÿØŸäÿ´)ÿü",
          it: "Questo oggetto √® VECCHIO (Passato) o NUOVO (Moderno)?",
        },
        old: {
          en: "Old / Past",
          zh: "ËàäÊôÇ / ÈÅéÂéª",
          ja: "Âè§„ÅÑ / ÈÅéÂéª",
          ko: "Ïò§ÎûòÎêú / Í≥ºÍ±∞",
          es: "Antiguo / Pasado",
          de: "Alt / Vergangenheit",
          fi: "Vanha / Mennyt",
          fr: "Vieux / Pass√©",
          ar: "ŸÇÿØŸäŸÖ / ŸÖÿßÿ∂Ÿä",
          it: "Vecchio / Passato",
        },
        new: {
          en: "New / Modern",
          zh: "Êñ∞Âºè / Áèæ‰ª£",
          ja: "Êñ∞„Åó„ÅÑ / Áèæ‰ª£",
          ko: "ÏÉàÎ°úÏö¥ / ÌòÑÎåÄ",
          es: "Nuevo / Moderno",
          de: "Neu / Modern",
          fi: "Uusi / Nykyaika",
          fr: "Nouveau / Moderne",
          ar: "ÿ¨ÿØŸäÿØ / ÿ≠ÿØŸäÿ´",
          it: "Nuovo / Moderno",
        },
        rickshaw: {
          en: "Rickshaw",
          zh: "‰∫∫ÂäõËªä",
          ja: "‰∫∫ÂäõËªä",
          ko: "Ïù∏Î†•Í±∞",
          es: "Rickshaw",
          de: "Rikscha",
          fi: "Riksakuljetus",
          fr: "Pousse-pousse",
          ar: "ÿπÿ±ÿ®ÿ© ŸäÿØ",
          it: "Risci√≤",
        },
        mrt: {
          en: "MTR Train",
          zh: "Ê∏ØÈêµÂàóËªä",
          ja: "MTRÂàóËªä",
          ko: "MTR Í∏∞Ï∞®",
          es: "Tren MTR",
          de: "MTR-Zug",
          fi: "MTR-juna",
          fr: "Train MTR",
          ar: "ŸÇÿ∑ÿßÿ± MTR",
          it: "Treno MTR",
        },
        abacus: {
          en: "Abacus",
          zh: "ÁÆóÁõ§",
          ja: "„Åù„Çç„Å∞„Çì",
          ko: "Ï£ºÌåê",
          es: "√Åbaco",
          de: "Abakus",
          fi: "Helmikone",
          fr: "Abaque",
          ar: "ÿπÿØÿßÿØ",
          it: "Abaco",
        },
        tablet: {
          en: "Tablet Computer",
          zh: "Âπ≥ÊùøÈõªËÖ¶",
          ja: "„Çø„Éñ„É¨„ÉÉ„Éà",
          ko: "ÌÉúÎ∏îÎ¶ø Ïª¥Ìì®ÌÑ∞",
          es: "Tableta",
          de: "Tablet-Computer",
          fi: "Tabletti",
          fr: "Tablette",
          ar: "ŸÉŸÖÿ®ŸäŸàÿ™ÿ± ŸÑŸàÿ≠Ÿä",
          it: "Tablet",
        },
        letter: {
          en: "Handwritten Letter",
          zh: "ÊâãÂØ´‰ø°",
          ja: "ÊâãÊõ∏„Åç„ÅÆÊâãÁ¥ô",
          ko: "ÏÜêÏúºÎ°ú Ïì¥ Ìé∏ÏßÄ",
          es: "Carta manuscrita",
          de: "Handgeschriebener Brief",
          fi: "K√§sin kirjoitettu kirje",
          fr: "Lettre manuscrite",
          ar: "ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÉÿ™Ÿàÿ®ÿ© ÿ®ÿÆÿ∑ ÿßŸÑŸäÿØ",
          it: "Lettera manoscritta",
        },
        email: {
          en: "Email",
          zh: "ÈõªÂ≠êÈÉµ‰ª∂",
          ja: "E„É°„Éº„É´",
          ko: "Ïù¥Î©îÏùº",
          es: "Correo electr√≥nico",
          de: "E-Mail",
          fi: "S√§hk√∂posti",
          fr: "E-mail",
          ar: "ÿ®ÿ±ŸäÿØ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
          it: "Email",
        },
        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµ!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "ÂÜçË©¶‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶",
          ko: "Îã§Ïãú ÏãúÎèÑ",
          es: "Intentar de nuevo",
          de: "Versuch es nochmal",
          fi: "Yrit√§ uudelleen",
          fr: "R√©essayez",
          ar: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Riprova",
        },
      };

      const items = [
        { id: "rickshaw", type: "old", icon: "üõ∫" }, // Using auto rickshaw emoji as proxy
        { id: "mrt", type: "new", icon: "üöÑ" },
        { id: "abacus", type: "old", icon: "üßÆ" },
        { id: "tablet", type: "new", icon: "üì±" },
        { id: "letter", type: "old", icon: "‚úâÔ∏è" },
        { id: "email", type: "new", icon: "üìß" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [index, setIndex] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const currentItem = items[index];

        const handleChoice = (type) => {
          if (feedback) return;
          if (currentItem.type === type) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setIndex((index + 1) % items.length);
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 500);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center justify-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-amber-800">
              {getText("title")}
            </h1>

            <div className="w-full max-w-lg bg-orange-50 p-8 rounded-[40px] shadow-xl border-8 border-orange-200 text-center relative">
              {/* Photo Frame Look */}

              <div className="bg-white rounded-3xl p-10 mb-8 shadow-inner border-2 border-slate-100 min-h-[250px] flex flex-col items-center justify-center">
                <div className="text-9xl mb-4 filter drop-shadow-md select-none transform hover:scale-110 transition-transform">
                  {currentItem.icon}
                </div>
                <div className="text-2xl font-bold text-slate-700">
                  {getText(currentItem.id)}
                </div>
              </div>

              <p className="mb-6 font-bold text-slate-500">
                {getText("instruction")}
              </p>

              <div className="flex gap-4">
                <button
                  onClick={() => handleChoice("old")}
                  className="flex-1 bg-amber-200 hover:bg-amber-300 text-amber-900 py-4 rounded-xl font-bold text-xl border-b-4 border-amber-400 active:border-b-0 active:translate-y-1 transition-all"
                >
                  üï∞Ô∏è {getText("old")}
                </button>
                <button
                  onClick={() => handleChoice("new")}
                  className="flex-1 bg-blue-200 hover:bg-blue-300 text-blue-900 py-4 rounded-xl font-bold text-xl border-b-4 border-blue-400 active:border-b-0 active:translate-y-1 transition-all"
                >
                  üöÄ {getText("new")}
                </button>
              </div>

              {feedback && (
                <div
                  className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 px-8 py-4 rounded-xl text-3xl font-black text-white shadow-2xl rotate-[-10deg]
                     ${feedback === "correct" ? "bg-green-500" : "bg-red-500"}
                  `}
                >
                  {getText(feedback)}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
