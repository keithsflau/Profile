<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Conductors Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #0f172a;
        color: white;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Conductors Test",
          zh: "å°Žé›»é«”æ¸¬è©¦",
          ja: "å°Žä½“ãƒ†ã‚¹ãƒˆ",
          ko: "ë„ì²´ í…ŒìŠ¤íŠ¸",
          es: "Prueba de conductores",
          de: "Leitertest",
          fi: "Johtavuustesti",
          fr: "Test de conducteurs",
          ar: "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙˆØµÙ„Ø§Øª",
          it: "Test Conduttori",
        },
        instruction: {
          en: "Drag items to the gap to test!",
          zh: "å°‡ç‰©ä»¶æ‹–åˆ°ç¼ºå£è™•é€²è¡Œæ¸¬è©¦ï¼",
          ja: "ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚®ãƒ£ãƒƒãƒ—ã«ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„ï¼",
          ko: "ë¬¼ê±´ì„ í‹ˆìœ¼ë¡œ ë“œëž˜ê·¸í•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”!",
          es: "Â¡Arrastra los objetos al hueco para probar!",
          de: "Ziehe GegenstÃ¤nde in die LÃ¼cke zum Testen!",
          fi: "VedÃ¤ esineitÃ¤ aukkoon testattavaksi!",
          fr: "Faites glisser les objets dans l'espace pour tester !",
          ar: "Ø§Ø³Ø­Ø¨ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¥Ù„Ù‰ Ø§Ù„ÙØ¬ÙˆØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±!",
          it: "Trascina gli oggetti nel vuoto per testare!",
        },
        conductor: {
          en: "Conductor",
          zh: "å°Žé›»é«”",
          ja: "å°Žä½“",
          ko: "ë„ì²´",
          es: "Conductor",
          de: "Leiter",
          fi: "Johdin",
          fr: "Conducteur",
          ar: "Ù…ÙˆØµÙ„",
          it: "Conduttore",
        },
        insulator: {
          en: "Insulator",
          zh: "çµ•ç·£é«”",
          ja: "çµ¶ç¸ä½“",
          ko: "ë¶€ë„ì²´",
          es: "Aislante",
          de: "Isolator",
          fi: "Eriste",
          fr: "Isolant",
          ar: "Ø¹Ø§Ø²Ù„",
          it: "Isolante",
        },
        coin: {
          en: "Coin",
          zh: "ç¡¬å¹£",
          ja: "ã‚³ã‚¤ãƒ³",
          ko: "ë™ì „",
          es: "Moneda",
          de: "MÃ¼nze",
          fi: "Kolikko",
          fr: "PiÃ¨ce",
          ar: "Ø¹Ù…Ù„Ø©",
          it: "Moneta",
        },
        eraser: {
          en: "Eraser",
          zh: "æ©¡çš®æ“¦",
          ja: "æ¶ˆã—ã‚´ãƒ ",
          ko: "ì§€ìš°ê°œ",
          es: "Borrador",
          de: "Radiergummi",
          fi: "Pyyhekumi",
          fr: "Gomme",
          ar: "Ù…Ù…Ø­Ø§Ø©",
          it: "Gomma",
        },
        key: {
          en: "Key",
          zh: "é‘°åŒ™",
          ja: "éµ",
          ko: "ì—´ì‡ ",
          es: "Llave",
          de: "SchlÃ¼ssel",
          fi: "Avain",
          fr: "ClÃ©",
          ar: "Ù…ÙØªØ§Ø­",
          it: "Chiave",
        },
        spoon: {
          en: "Plastic Spoon",
          zh: "è† åŒ™",
          ja: "ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯ã‚¹ãƒ—ãƒ¼ãƒ³",
          ko: "í”Œë¼ìŠ¤í‹± ìˆŸê°€ë½",
          es: "Cuchara de plÃ¡stico",
          de: "PlastiklÃ¶ffel",
          fi: "Muovilusikka",
          fr: "CuillÃ¨re en plastique",
          ar: "Ù…Ù„Ø¹Ù‚Ø© Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ©",
          it: "Cucchiaio di plastica",
        },
        paperclip: {
          en: "Paper Clip",
          zh: "è¬å­—å¤¾",
          ja: "ã‚¯ãƒªãƒƒãƒ—",
          ko: "ì¢…ì´ í´ë¦½",
          es: "Clip de papel",
          de: "BÃ¼roklammer",
          fi: "Paperiliitin",
          fr: "Trombone",
          ar: "Ù…Ø´Ø¨Ùƒ ÙˆØ±Ù‚",
          it: "Fermaglio",
        },
        pencil: {
          en: "Pencil (Wood)",
          zh: "é‰›ç­† (æœ¨)",
          ja: "é‰›ç­† (æœ¨)",
          ko: "ì—°í•„ (ë‚˜ë¬´)",
          es: "LÃ¡piz (Madera)",
          de: "Bleistift (Holz)",
          fi: "LyijykynÃ¤ (Puu)",
          fr: "Crayon (Bois)",
          ar: "Ù‚Ù„Ù… Ø±ØµØ§Øµ (Ø®Ø´Ø¨)",
          it: "Matita (Legno)",
        },
      };

      const items = [
        { id: "coin", type: "conductor", icon: "ðŸª™", color: "bg-yellow-200" },
        { id: "eraser", type: "insulator", icon: "ðŸ§¼", color: "bg-pink-200" },
        { id: "key", type: "conductor", icon: "ðŸ”‘", color: "bg-orange-200" },
        { id: "spoon", type: "insulator", icon: "ðŸ¥„", color: "bg-blue-100" }, // plastic implied icon
        {
          id: "paperclip",
          type: "conductor",
          icon: "ðŸ“Ž",
          color: "bg-gray-200",
        },
        { id: "pencil", type: "insulator", icon: "âœï¸", color: "bg-yellow-100" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [currentItem, setCurrentItem] = useState(null);
        const [result, setResult] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const handleDrop = (item) => {
          setCurrentItem(item);
          setResult(item.type === "conductor" ? "on" : "off");
        };

        const reset = () => {
          setCurrentItem(null);
          setResult(null);
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-cyan-400">
              {getText("title")}
            </h1>

            <div className="relative w-full max-w-3xl h-[400px] bg-slate-900 rounded-3xl border-4 border-slate-700 shadow-2xl flex items-center justify-center overflow-hidden">
              {/* Circuit */}
              <svg className="absolute inset-0 z-0" viewBox="0 0 800 400">
                {/* Battery to Gap Left */}
                <path
                  d="M100,200 V100 H300 V150"
                  stroke="#fbbf24"
                  strokeWidth="8"
                  fill="none"
                />
                {/* Gap Right to Bulb */}
                <path
                  d="M500,150 V100 H700 V200"
                  stroke="#fbbf24"
                  strokeWidth="8"
                  fill="none"
                />
                {/* Bulb to Battery */}
                <path
                  d="M700,300 V350 H100 V300"
                  stroke="#fbbf24"
                  strokeWidth="8"
                  fill="none"
                />

                {/* Terminals at Gap */}
                <circle cx="300" cy="150" r="10" fill="#94a3b8" />
                <circle cx="500" cy="150" r="10" fill="#94a3b8" />
              </svg>

              {/* Battery */}
              <div className="absolute left-10 top-[200px] text-6xl">ðŸ”‹</div>

              {/* Bulb */}
              <div className="absolute right-10 top-[200px] flex flex-col items-center">
                <div
                  className={`text-8xl transition-all duration-300 ${
                    result === "on"
                      ? "drop-shadow-[0_0_50px_rgba(250,204,21,1)] scale-110"
                      : "opacity-30 grayscale"
                  }`}
                >
                  ðŸ’¡
                </div>
              </div>

              {/* Gap Zone (Drop Target) */}
              <div className="absolute top-[120px] left-[300px] w-[200px] h-[100px] border-4 border-dashed border-white/30 rounded-xl flex items-center justify-center z-10">
                {currentItem ? (
                  <motion.div
                    initial={{ scale: 0 }}
                    animate={{ scale: 1 }}
                    className={`text-6xl p-4 rounded-xl ${currentItem.color} cursor-pointer`}
                    onClick={reset}
                  >
                    {currentItem.icon}
                  </motion.div>
                ) : (
                  <div className="text-white/50 animate-pulse text-sm font-bold">
                    {getText("instruction")}
                  </div>
                )}
              </div>

              {/* Result Label */}
              {currentItem && (
                <div
                  className={`absolute bottom-10 font-bold text-3xl px-8 py-2 rounded-full 
                     ${
                       result === "on"
                         ? "bg-yellow-500 text-black"
                         : "bg-slate-700 text-slate-400"
                     }`}
                >
                  {result === "on"
                    ? getText("conductor")
                    : getText("insulator")}
                </div>
              )}
            </div>

            {/* Inventory */}
            <div className="flex flex-wrap gap-4 mt-8 justify-center">
              {items.map((item) => (
                <button
                  key={item.id}
                  onClick={() => handleDrop(item)}
                  disabled={!!currentItem}
                  className={`p-4 rounded-xl text-4xl shadow-lg border-2 border-white/20 hover:scale-110 transition-transform ${item.color} disabled:opacity-50 disabled:scale-100`}
                >
                  {item.icon}
                  <div className="text-xs font-bold text-slate-900 mt-1">
                    {getText(item.id)}
                  </div>
                </button>
              ))}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
