<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - World Map Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f0f9ff;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Geo Master",
          zh: "地理大師",
          ja: "ジオマスター",
          ko: "지오 마스터",
          es: "Maestro de Geografía",
          de: "Geo-Meister",
          fi: "Geo mestari",
          fr: "Maître géo",
          ar: "سيد الجغرافيا",
          it: "Maestro di Geografia",
        },
        instruction: {
          en: "Where is this place?",
          zh: "這是哪裡？",
          ja: "ここはどこですか？",
          ko: "이곳은 어디일까요?",
          es: "¿Dónde está este lugar?",
          de: "Wo ist dieser Ort?",
          fi: "Missä tämä paikka on?",
          fr: "Où est cet endroit ?",
          ar: "أين هذا المكان؟",
          it: "Dov'è questo posto?",
        },
        correct: { en: "Correct!", zh: "正確！", ja: "正解！", ko: "정답!" },

        usa: { en: "USA", zh: "美國", ja: "アメリカ", ko: "미국" },
        china: { en: "China", zh: "中國", ja: "中国", ko: "중국" },
        brazil: { en: "Brazil", zh: "巴西", ja: "ブラジル", ko: "브라질" },
        australia: {
          en: "Australia",
          zh: "澳洲",
          ja: "オーストラリア",
          ko: "호주",
        },
        uk: { en: "UK", zh: "英國", ja: "イギリス", ko: "영국" },
        egypt: { en: "Egypt", zh: "埃及", ja: "エジプト", ko: "이집트" },
      };

      const locations = [
        { id: "usa", x: 20, y: 35 },
        { id: "china", x: 75, y: 35 },
        { id: "brazil", x: 30, y: 70 },
        { id: "australia", x: 85, y: 75 },
        { id: "uk", x: 48, y: 25 },
        { id: "egypt", x: 55, y: 40 },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [idx, setIdx] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const target = locations[idx];

        const check = (id) => {
          if (feedback) return;
          if (id === target.id) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setIdx((idx + 1) % locations.length);
            }, 1500);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-4 text-sky-700">
              {getText("title")}
            </h1>

            <div className="bg-white p-4 rounded-xl shadow mb-4 text-center border border-sky-200">
              <div className="text-sm font-bold text-slate-400">
                {getText("instruction")}
              </div>
              <div className="text-3xl font-black text-sky-800">
                {getText(target.id)}
              </div>
            </div>

            <div className="relative w-full max-w-5xl aspect-[2/1] bg-sky-100 rounded-2xl border-4 border-sky-300 shadow-2xl overflow-hidden">
              {/* Simplified Continents SVG background */}
              <svg
                viewBox="0 0 100 50"
                className="absolute inset-0 w-full h-full opacity-50 pointer-events-none"
              >
                {/* Americas */}
                <path d="M10,5 L30,5 L40,40 L20,45 Z" fill="#bae6fd" />
                {/* Eurasia/Africa */}
                <path d="M45,5 L90,5 L90,25 L65,45 L45,30 Z" fill="#bae6fd" />
                {/* Aus */}
                <circle cx="85" cy="40" r="5" fill="#bae6fd" />
              </svg>

              {locations.map((loc) => (
                <button
                  key={loc.id}
                  onClick={() => check(loc.id)}
                  className={`absolute w-8 h-8 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow hover:scale-150 transition-all ${
                    feedback === "correct" && loc.id === target.id
                      ? "bg-green-500 scale-150 ring-4 ring-green-300"
                      : "bg-sky-500"
                  }`}
                  style={{ left: `${loc.x}%`, top: `${loc.y}%` }}
                ></button>
              ))}

              {feedback && (
                <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                  <div className="bg-white/90 px-8 py-4 rounded-xl shadow-2xl text-4xl font-black text-green-600 animate-bounce">
                    {getText("correct")}
                  </div>
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
