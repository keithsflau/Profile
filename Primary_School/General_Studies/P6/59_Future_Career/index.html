<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Future Career</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fafafa;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Career Matcher",
          zh: "è·æ¥­é…å°",
          ja: "ã‚­ãƒ£ãƒªã‚¢ãƒžãƒƒãƒãƒ£ãƒ¼",
          ko: "ì§ì—… ë§¤ì¹­",
          es: "Buscador de carreras",
          de: "Berufe-Finder",
          fi: "Urahaku",
          fr: "Chercheur de carriÃ¨re",
          ar: "Ù…ÙƒØªØ´Ù Ø§Ù„ÙˆØ¸Ø§Ø¦Ù",
          it: "Abbinamento Carriera",
        },
        instruction: {
          en: "Match the interest to the job.",
          zh: "å°‡èˆˆè¶£èˆ‡å·¥ä½œé…å°ã€‚",
          ja: "èˆˆå‘³ã‚’ä»•äº‹ã«åˆã‚ã›ã¦ãã ã•ã„ã€‚",
          ko: "í¥ë¯¸ë¥¼ ì§ì—…ê³¼ ì—°ê²°í•˜ì„¸ìš”.",
          es: "Empareja el interÃ©s con el trabajo.",
          de: "Ordne das Interesse dem Job zu.",
          fi: "YhdistÃ¤ kiinnostus tyÃ¶hÃ¶n.",
          fr: "Associez l'intÃ©rÃªt au travail.",
          ar: "Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø§Ù„ÙˆØ¸ÙŠÙØ©.",
          it: "Abbina l'interesse al lavoro.",
        },
        art: {
          en: "Likes Drawing",
          zh: "å–œæ­¡ç•«ç•«",
          ja: "çµµã‚’æãã®ãŒå¥½ã",
          ko: "ê·¸ë¦¼ ê·¸ë¦¬ê¸° ì¢‹ì•„í•¨",
        },
        math: {
          en: "Likes Numbers",
          zh: "å–œæ­¡æ•¸å­—",
          ja: "æ•°å­—ãŒå¥½ã",
          ko: "ìˆ«ìž ì¢‹ì•„í•¨",
        },
        science: {
          en: "Likes Experiments",
          zh: "å–œæ­¡å¯¦é©—",
          ja: "å®Ÿé¨“ãŒå¥½ã",
          ko: "ì‹¤í—˜ ì¢‹ì•„í•¨",
        },
        care: {
          en: "Likes Helping People",
          zh: "å–œæ­¡å¹«åŠ©äºº",
          ja: "äººã‚’åŠ©ã‘ã‚‹ã®ãŒå¥½ã",
          ko: "ì‚¬ëžŒ ë•ëŠ” ê²ƒ ì¢‹ì•„í•¨",
        },

        designer: {
          en: "Designer",
          zh: "è¨­è¨ˆå¸«",
          ja: "ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼",
          ko: "ë””ìžì´ë„ˆ",
        },
        accountant: {
          en: "Accountant",
          zh: "æœƒè¨ˆå¸«",
          ja: "ä¼šè¨ˆå£«",
          ko: "íšŒê³„ì‚¬",
        },
        scientist: {
          en: "Scientist",
          zh: "ç§‘å­¸å®¶",
          ja: "ç§‘å­¦è€…",
          ko: "ê³¼í•™ìž",
        },
        doctor: { en: "Doctor", zh: "é†«ç”Ÿ", ja: "åŒ»è€…", ko: "ì˜ì‚¬" },

        correct: { en: "Correct!", zh: "æ­£ç¢ºï¼", ja: "æ­£è§£ï¼", ko: "ì •ë‹µ!" },
      };

      const pairs = [
        { id: 1, interest: "art", job: "designer", icon: "ðŸŽ¨" },
        { id: 2, interest: "math", job: "accountant", icon: "ðŸ“Š" },
        { id: 3, interest: "science", job: "scientist", icon: "ðŸ”¬" },
        { id: 4, interest: "care", job: "doctor", icon: "ðŸ©º" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [idx, setIdx] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const current = pairs[idx];

        const check = (job) => {
          if (feedback) return;
          if (job === current.job) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setIdx((idx + 1) % pairs.length);
            }, 1000);
          }
        };

        const options = [...pairs].sort(() => Math.random() - 0.5);

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-indigo-800">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <motion.div
              key={current.id}
              initial={{ rotate: -10, opacity: 0 }}
              animate={{ rotate: 0, opacity: 1 }}
              className="w-full max-w-md bg-white p-8 rounded-3xl shadow-xl flex flex-col items-center border-2 border-indigo-100 mb-8"
            >
              <div className="text-8xl mb-4">{current.icon}</div>
              <div className="font-bold text-2xl text-slate-700">
                {getText(current.interest)}
              </div>
            </motion.div>

            <div className="grid grid-cols-2 gap-4 w-full max-w-lg">
              {options.map((opt) => (
                <button
                  key={opt.id}
                  onClick={() => check(opt.job)}
                  className="p-4 bg-indigo-50 hover:bg-indigo-100 text-indigo-900 rounded-xl font-bold text-lg shadow-sm"
                >
                  {getText(opt.job)}
                </button>
              ))}
            </div>

            {feedback && (
              <div className="mt-8 text-3xl font-black text-green-600 animate-bounce">
                {getText("correct")}
              </div>
            )}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
