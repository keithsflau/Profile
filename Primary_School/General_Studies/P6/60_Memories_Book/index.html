<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Memories Book</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fdf4f0;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Primary School Memories",
          zh: "Â∞èÂ≠∏ÂõûÊÜ∂ÈåÑ",
          ja: "Â∞èÂ≠¶Ê†°„ÅÆÊÄù„ÅÑÂá∫",
          ko: "Ï¥àÎì±ÌïôÍµê Ï∂îÏñµ",
          es: "Recuerdos de la escuela primaria",
          de: "Erinnerungen an die Grundschule",
          fi: "Alakoulumuistoja",
          fr: "Souvenirs de l'√©cole primaire",
          ar: "ÿ∞ŸÉÿ±Ÿäÿßÿ™ ÿßŸÑÿßÿ®ÿ™ÿØÿßÿ¶Ÿäÿ©",
          it: "Ricordi della Scuola Primaria",
        },
        instruction: {
          en: "Arrange the photos in the album.",
          zh: "Â∞áÁÖßÁâáÊï¥ÁêÜÂà∞Áõ∏ÂÜä‰∏≠„ÄÇ",
          ja: "„Ç¢„É´„Éê„É†„Å´ÂÜôÁúü„ÇíÊï¥ÁêÜ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
          ko: "Ïï®Î≤îÏóê ÏÇ¨ÏßÑÏùÑ Ï†ïÎ¶¨ÌïòÏÑ∏Ïöî.",
          es: "Organiza las fotos en el √°lbum.",
          de: "Ordne die Fotos im Album an.",
          fi: "J√§rjest√§ valokuvat albumiin.",
          fr: "Organisez les photos dans l'album.",
          ar: "ÿ±ÿ™ÿ® ÿßŸÑÿµŸàÿ± ŸÅŸä ÿßŸÑÿ£ŸÑÿ®ŸàŸÖ.",
          it: "Organizza le foto nell'album.",
        },
        trip: { en: "Field Trip", zh: "ÂØ¶Âú∞ËÄÉÂØü", ja: "ÈÅ†Ë∂≥", ko: "Í≤¨Ìïô" },
        sports: {
          en: "Sports Day",
          zh: "ÈÅãÂãïÊúÉ",
          ja: "ÈÅãÂãï‰ºö",
          ko: "Ï≤¥Ïú° ÎåÄÌöå",
        },
        exam: {
          en: "First Exam",
          zh: "Á¨¨‰∏ÄÊ¨°ËÄÉË©¶",
          ja: "ÊúÄÂàù„ÅÆË©¶È®ì",
          ko: "Ï≤´ ÏãúÌóò",
        },
        grad: { en: "Graduation", zh: "Áï¢Ê•≠Á¶Æ", ja: "ÂçíÊ•≠Âºè", ko: "Ï°∏ÏóÖÏãù" },

        complete: {
          en: "What a journey!",
          zh: "Â§öÈ∫ºÁæéÂ•ΩÁöÑÊóÖÁ®ãÔºÅ",
          ja: "Á¥†Êô¥„Çâ„Åó„ÅÑÊóÖ„Åß„Åó„ÅüÔºÅ",
          ko: "Ï†ïÎßê Î©ãÏßÑ Ïó¨Ï†ïÏù¥ÏóàÏñ¥Ïöî!",
        },
      };

      const photos = [
        { id: "trip", icon: "üöå", color: "bg-green-200" },
        { id: "sports", icon: "üèÉ", color: "bg-blue-200" },
        { id: "exam", icon: "üìù", color: "bg-slate-200" },
        { id: "grad", icon: "üéì", color: "bg-yellow-200" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [placed, setPlaced] = useState([]);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const add = (id) => {
          if (!placed.includes(id)) setPlaced([...placed, id]);
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-orange-900">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="flex flex-col md:flex-row gap-8 w-full max-w-5xl">
              {/* Photo Stack */}
              <div className="w-full md:w-1/4 grid grid-cols-2 gap-4 h-fit">
                {photos.map((p) => (
                  <button
                    key={p.id}
                    onClick={() => add(p.id)}
                    disabled={placed.includes(p.id)}
                    className={`aspect-square rounded-xl shadow border-4 border-white flex flex-col items-center justify-center transition-all ${
                      placed.includes(p.id)
                        ? "opacity-20 translate-x-10"
                        : "hover:scale-110 rotate-3 hover:rotate-0"
                    } ${p.color}`}
                  >
                    <div className="text-4xl">{p.icon}</div>
                    <div className="text-xs font-bold mt-2">
                      {getText(p.id)}
                    </div>
                  </button>
                ))}
              </div>

              {/* Album */}
              <div className="flex-1 bg-amber-100 rounded-lg shadow-2xl p-8 min-h-[400px] border-l-[12px] border-amber-800 relative perspective-1000">
                <div className="absolute top-0 right-0 w-8 h-full bg-gradient-to-l from-black/10 to-transparent pointer-events-none"></div>{" "}
                {/* Page curve effect */}
                <div className="grid grid-cols-2 gap-8 h-full">
                  {placed.map((id, i) => {
                    const p = photos.find((ph) => ph.id === id);
                    return (
                      <motion.div
                        key={id}
                        initial={{ scale: 0, rotate: -10 }}
                        animate={{ scale: 1, rotate: i % 2 === 0 ? -3 : 3 }}
                        className={`bg-white p-2 pb-8 shadow-md flex flex-col items-center transform`}
                      >
                        <div
                          className={`w-full aspect-video ${p.color} flex items-center justify-center text-6xl`}
                        >
                          {p.icon}
                        </div>
                        <div className="mt-4 font-handwriting font-bold text-slate-600">
                          {getText(p.id)}
                        </div>
                      </motion.div>
                    );
                  })}
                </div>
                {placed.length === photos.length && (
                  <div className="absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg">
                    <div className="bg-white px-8 py-4 rounded-xl text-3xl font-black text-orange-600 animate-bounce">
                      {getText("complete")} ‚ù§Ô∏è
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
