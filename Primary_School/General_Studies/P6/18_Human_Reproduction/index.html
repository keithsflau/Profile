<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - New Life Journey</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fff1f2;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Journey of Life",
          zh: "ÁîüÂëΩÁöÑÊóÖÁ®ã",
          ja: "ÁîüÂëΩ„ÅÆÊóÖ",
          ko: "ÏÉùÎ™ÖÏùò Ïó¨Ï†ï",
          es: "El viaje de la vida",
          de: "Reise des Lebens",
          fi: "El√§m√§n matka",
          fr: "Le voyage de la vie",
          ar: "ÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ≠Ÿäÿßÿ©",
          it: "Viaggio della Vita",
        },
        step1: {
          en: "1. Fertilization",
          zh: "1. ÂèóÁ≤æ",
          ja: "1. ÂèóÁ≤æ",
          ko: "1. ÏàòÏ†ï",
        },
        step2: { en: "2. Embryo", zh: "2. ËÉöËÉé", ja: "2. ËÉö", ko: "2. Î∞∞ÏïÑ" },
        step3: {
          en: "3. Fetus (Growing)",
          zh: "3. ËÉéÂÖí (ÊàêÈï∑‰∏≠)",
          ja: "3. ËÉéÂÖê (ÊàêÈï∑‰∏≠)",
          ko: "3. ÌÉúÏïÑ (ÏÑ±Ïû• Ï§ë)",
        },
        step4: { en: "4. Birth", zh: "4. Âá∫Áîü", ja: "4. Ë™ïÁîü", ko: "4. ÌÉÑÏÉù" },

        desc1: {
          en: "Sperm cell meets Egg cell.",
          zh: "Á≤æÂ≠êËàáÂçµÂ≠êÁµêÂêà„ÄÇ",
          ja: "Á≤æÂ≠ê„Å®ÂçµÂ≠ê„ÅåÂá∫‰ºö„ÅÜ„ÄÇ",
          ko: "Ï†ïÏûêÏôÄ ÎÇúÏûêÍ∞Ä ÎßåÎÇ©ÎãàÎã§.",
        },
        desc2: {
          en: "Cells divide and form a tiny ball.",
          zh: "Á¥∞ËÉûÂàÜË£Ç‰∏¶ÂΩ¢Êàê‰∏ÄÂÄãÂ∞èÁêÉ„ÄÇ",
          ja: "Á¥∞ËÉû„ÅåÂàÜË£Ç„Åó„ÄÅÂ∞è„Åï„Å™„Éú„Éº„É´„ÇíÂΩ¢Êàê„ÄÇ",
          ko: "ÏÑ∏Ìè¨Í∞Ä Î∂ÑÏó¥ÌïòÏó¨ ÏûëÏùÄ Í≥µ Î™®ÏñëÏùÑ ÌòïÏÑ±Ìï©ÎãàÎã§.",
        },
        desc3: {
          en: "Baby grows inside the mother's womb.",
          zh: "ÂØ∂ÂØ∂Âú®ÊØçË¶™Â≠êÂÆÆÂÖßÊàêÈï∑„ÄÇ",
          ja: "Ëµ§„Å°„ÇÉ„Çì„ÅØ„ÅäÊØç„Åï„Çì„ÅÆÂ≠êÂÆÆ„ÅÆ‰∏≠„ÅßËÇ≤„Å§„ÄÇ",
          ko: "ÏïÑÍ∏∞Í∞Ä ÏóÑÎßàÏùò ÏûêÍ∂Å ÏïàÏóêÏÑú ÏûêÎûçÎãàÎã§.",
        },
        desc4: {
          en: "The baby enters the world!",
          zh: "ÂØ∂ÂØ∂‰æÜÂà∞ÈÄôÂÄã‰∏ñÁïåÔºÅ",
          ja: "Ëµ§„Å°„ÇÉ„Çì„Åå‰∏ñÁïå„Å´ÁôªÂ†¥ÔºÅ",
          ko: "ÏïÑÍ∏∞Í∞Ä ÏÑ∏ÏÉÅÏóê ÎÇòÏòµÎãàÎã§!",
        },

        next: {
          en: "Next Stage",
          zh: "‰∏ã‰∏ÄÈöéÊÆµ",
          ja: "Ê¨°„ÅÆÊÆµÈöé",
          ko: "Îã§Ïùå Îã®Í≥Ñ",
        },
        reset: { en: "Replay", zh: "ÈáçÊí≠", ja: "„É™„Éó„É¨„Ç§", ko: "Îã§Ïãú Î≥¥Í∏∞" },
      };

      const stages = [
        { id: "step1", desc: "desc1", visual: "sperm_egg" },
        { id: "step2", desc: "desc2", visual: "cell_ball" },
        { id: "step3", desc: "desc3", visual: "fetus" },
        { id: "step4", desc: "desc4", visual: "baby" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [stageIdx, setStageIdx] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const current = stages[stageIdx];

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-rose-500">
              {getText("title")}
            </h1>

            <div className="w-full max-w-lg bg-white p-8 rounded-3xl shadow-xl flex flex-col items-center min-h-[500px]">
              {/* Visual Area */}
              <div className="w-64 h-64 bg-rose-50 rounded-full mb-8 relative flex items-center justify-center border-4 border-rose-100 overflow-hidden">
                {current.visual === "sperm_egg" && (
                  <div className="relative w-full h-full flex items-center justify-center">
                    <motion.div
                      initial={{ scale: 0 }}
                      animate={{ scale: 1 }}
                      className="w-24 h-24 bg-yellow-200 rounded-full border-4 border-yellow-400 z-10"
                    ></motion.div>
                    <motion.div
                      initial={{ x: -150 }}
                      animate={{ x: -30 }}
                      transition={{ duration: 2 }}
                      className="absolute w-8 h-2 bg-blue-400 rounded-full"
                    ></motion.div>
                  </div>
                )}

                {current.visual === "cell_ball" && (
                  <motion.div
                    className="grid grid-cols-2 gap-1"
                    initial={{ rotate: 0 }}
                    animate={{ rotate: 360 }}
                    transition={{
                      duration: 10,
                      repeat: Infinity,
                      ease: "linear",
                    }}
                  >
                    <div className="w-8 h-8 rounded-full bg-rose-300"></div>
                    <div className="w-8 h-8 rounded-full bg-rose-300"></div>
                    <div className="w-8 h-8 rounded-full bg-rose-300"></div>
                    <div className="w-8 h-8 rounded-full bg-rose-300"></div>
                  </motion.div>
                )}

                {current.visual === "fetus" && (
                  <div className="text-6xl animate-pulse">üë∂</div>
                )}

                {current.visual === "baby" && (
                  <div className="text-8xl animate-bounce">üçº</div>
                )}
              </div>

              <div className="text-center mb-8">
                <h2 className="text-2xl font-bold text-slate-800 mb-2">
                  {getText(current.id)}
                </h2>
                <p className="text-slate-500 font-medium">
                  {getText(current.desc)}
                </p>
              </div>

              <button
                onClick={() => setStageIdx((stageIdx + 1) % stages.length)}
                className="bg-rose-500 hover:bg-rose-600 text-white px-8 py-3 rounded-full font-bold shadow-lg transition-transform active:scale-95"
              >
                {stageIdx === stages.length - 1
                  ? getText("reset")
                  : getText("next")}
              </button>
            </div>

            {/* Progress Dots */}
            <div className="flex gap-2 mt-8">
              {stages.map((_, i) => (
                <div
                  key={i}
                  className={`w-3 h-3 rounded-full transition-colors ${
                    i === stageIdx ? "bg-rose-500" : "bg-rose-200"
                  }`}
                ></div>
              ))}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
