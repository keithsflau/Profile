<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Disease Vectors</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fdf4f4;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Disease Transmission",
          zh: "ÁñæÁóÖÂÇ≥Êí≠",
          ja: "ÁóÖÊ∞ó„ÅÆ‰ºùÊüì",
          ko: "ÏßàÎ≥ë Ï†ÑÌåå",
          es: "Transmisi√≥n de enfermedades",
          de: "Krankheits√ºbertragung",
          fi: "Taudin levi√§minen",
          fr: "Transmission des maladies",
          ar: "ÿßŸÜÿ™ŸÇÿßŸÑ ÿßŸÑÿ£ŸÖÿ±ÿßÿ∂",
          it: "Trasmissione Malattie",
        },
        instruction: {
          en: "How is this disease spread?",
          zh: "ÈÄôÁ®ÆÁñæÁóÖÊòØÂ¶Ç‰ΩïÂÇ≥Êí≠ÁöÑÔºü",
          ja: "„Åì„ÅÆÁóÖÊ∞ó„ÅØ„Å©„ÅÆ„Çà„ÅÜ„Å´Â∫É„Åæ„Çä„Åæ„Åô„ÅãÔºü",
          ko: "Ïù¥ ÏßàÎ≥ëÏùÄ Ïñ¥ÎñªÍ≤å Ï†ÑÌååÎêòÎÇòÏöî?",
          es: "¬øC√≥mo se propaga esta enfermedad?",
          de: "Wie wird diese Krankheit verbreitet?",
          fi: "Miten t√§m√§ tauti levi√§√§?",
          fr: "Comment cette maladie se propage-t-elle ?",
          ar: "ŸÉŸäŸÅ ŸäŸÜÿ™ÿ¥ÿ± Ÿáÿ∞ÿß ÿßŸÑŸÖÿ±ÿ∂ÿü",
          it: "Come si diffonde questa malattia?",
        },
        mosquito: { en: "Mosquito", zh: "ËöäÂ≠ê", ja: "Ëöä", ko: "Î™®Í∏∞" },
        rat: {
          en: "Rat / Flea",
          zh: "ËÄÅÈº† / Ë∑≥Ëö§",
          ja: "„Éç„Ç∫„Éü / „Éé„Éü",
          ko: "Ï•ê / Î≤ºÎ£©",
        },
        droplet: {
          en: "Air / Droplets",
          zh: "Á©∫Ê∞£ / È£õÊ≤´",
          ja: "Á©∫Ê∞ó / È£õÊ≤´",
          ko: "Í≥µÍ∏∞ / ÎπÑÎßê",
        },
        food: {
          en: "Contaminated Food",
          zh: "ÂèóÊ±°ÊüìÈ£üÁâ©",
          ja: "Ê±öÊüì„Åï„Çå„ÅüÈ£üÂìÅ",
          ko: "Ïò§ÏóºÎêú ÏùåÏãù",
        },
        contact: {
          en: "Direct Contact",
          zh: "Áõ¥Êé•Êé•Ëß∏",
          ja: "Áõ¥Êé•Êé•Ëß¶",
          ko: "ÏßÅÏ†ë Ï†ëÏ¥â",
        },

        dengue: {
          en: "Dengue Fever",
          zh: "ÁôªÈù©ÁÜ±",
          ja: "„Éá„É≥„Ç∞ÁÜ±",
          ko: "ÎéÖÍ∏∞Ïó¥",
        },
        malaria: { en: "Malaria", zh: "ÁòßÁñæ", ja: "„Éû„É©„É™„Ç¢", ko: "ÎßêÎùºÎ¶¨ÏïÑ" },
        plague: {
          en: "Plague",
          zh: "Èº†Áñ´ (ÈªëÊ≠ªÁóÖ)",
          ja: "„Éö„Çπ„Éà",
          ko: "ÌùëÏÇ¨Î≥ë",
        },
        flu: {
          en: "Influenza / Flu",
          zh: "ÊµÅË°åÊÄßÊÑüÂÜí",
          ja: "„Ç§„É≥„Éï„É´„Ç®„É≥„Ç∂",
          ko: "ÎèÖÍ∞ê",
        },
        cholera: { en: "Cholera", zh: "Èúç‰∫Ç", ja: "„Ç≥„É¨„É©", ko: "ÏΩúÎ†àÎùº" },
        chickenpox: { en: "Chickenpox", zh: "Ê∞¥Áóò", ja: "Ê∞¥Áñ±Áò°", ko: "ÏàòÎëê" },

        correct: { en: "Correct!", zh: "Ê≠£Á¢∫ÔºÅ", ja: "Ê≠£Ëß£ÔºÅ", ko: "Ï†ïÎãµ!" },
        wrong: {
          en: "Wrong vector.",
          zh: "ÂÇ≥Êí≠Â™í‰ªãÈåØË™§„ÄÇ",
          ja: "ÈñìÈÅï„Å£„ÅüÂ™í‰ªã„ÄÇ",
          ko: "ÏûòÎ™ªÎêú Îß§Í∞úÏ≤¥ÏûÖÎãàÎã§.",
        },
      };

      const pairs = [
        { id: "dengue", vector: "mosquito", icon: "ü¶ü" },
        { id: "malaria", vector: "mosquito", icon: "ü¶ü" },
        { id: "plague", vector: "rat", icon: "üêÄ" },
        { id: "flu", vector: "droplet", icon: "üó£Ô∏è" },
        { id: "cholera", vector: "food", icon: "ü•ò" }, // Food/Water
        { id: "chickenpox", vector: "contact", icon: "ü§ù" }, // Contact/Air
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [index, setIndex] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const current = pairs[index];
        const vectors = ["mosquito", "rat", "droplet", "food", "contact"];

        const handleAnswer = (v) => {
          if (feedback) return;
          if (current.vector === v) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setIndex((index + 1) % pairs.length);
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 1000);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center justify-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-rose-800">
              {getText("title")}
            </h1>

            <div className="w-full max-w-2xl bg-white p-8 rounded-3xl shadow-xl flex flex-col items-center">
              <div className="text-center font-bold text-slate-500 mb-6">
                {getText("instruction")}
              </div>

              <div className="bg-rose-50 p-12 rounded-full mb-8 text-2xl font-bold text-rose-800 border-4 border-rose-200">
                {getText(current.id)}
              </div>

              <div className="grid grid-cols-2 md:grid-cols-3 gap-4 w-full">
                {vectors.map((v) => (
                  <button
                    key={v}
                    onClick={() => handleAnswer(v)}
                    className="p-6 bg-slate-100 hover:bg-slate-200 rounded-xl font-bold flex flex-col items-center transition-all active:scale-95"
                  >
                    <span className="text-3xl mb-2">
                      {v === "mosquito"
                        ? "ü¶ü"
                        : v === "rat"
                        ? "üêÄ"
                        : v === "droplet"
                        ? "üó£Ô∏è"
                        : v === "food"
                        ? "ü•ò"
                        : "ü§ù"}
                    </span>
                    {getText(v)}
                  </button>
                ))}
              </div>

              {feedback && (
                <div
                  className={`mt-8 text-3xl font-black ${
                    feedback === "correct" ? "text-green-600" : "text-red-500"
                  } animate-pulse`}
                >
                  {getText(feedback)}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
