<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Lever Logic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f0fdf4;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Seesaw Balance",
          zh: "è¹ºè¹ºæ¿å¹³è¡¡",
          ja: "ã‚·ãƒ¼ã‚½ãƒ¼ãƒãƒ©ãƒ³ã‚¹",
          ko: "ì‹œì†Œ ê· í˜•",
          es: "Equilibrio del balancÃ­n",
          de: "Wippen-Balance",
          fi: "Keinumisen tasapaino",
          fr: "Ã‰quilibre de la bascule",
          ar: "ØªÙˆØ§Ø²Ù† Ø§Ù„Ø£Ø±Ø¬ÙˆØ­Ø©",
          it: "Equilibrio dell'Altalena",
        },
        instruction: {
          en: "Move the big kid to balance the seesaw!",
          zh: "ç§»å‹•å¤§å€‹å­ä¾†å¹³è¡¡è¹ºè¹ºæ¿ï¼",
          ja: "å¤§ããªå­ä¾›ã‚’å‹•ã‹ã—ã¦ã‚·ãƒ¼ã‚½ãƒ¼ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã£ã¦ãã ã•ã„ï¼",
          ko: "í° ì•„ì´ë¥¼ ì›€ì§ì—¬ ì‹œì†Œì˜ ê· í˜•ì„ ë§žì¶”ì„¸ìš”!",
          es: "Â¡Mueve al niÃ±o grande para equilibrar el balancÃ­n!",
          de: "Bewege das groÃŸe Kind, um die Wippe auszubalancieren!",
          fi: "SiirrÃ¤ isoa lasta tasapainottamaan keinu!",
          fr: "DÃ©placez le grand enfant pour Ã©quilibrer la bascule !",
          ar: "Ø­Ø±Ùƒ Ø§Ù„Ø·ÙÙ„ Ø§Ù„ÙƒØ¨ÙŠØ± Ù„Ù…ÙˆØ§Ø²Ù†Ø© Ø§Ù„Ø£Ø±Ø¬ÙˆØ­Ø©!",
          it: "Sposta il bambino grande per bilanciare l'altalena!",
        },
        balanced: {
          en: "Balanced!",
          zh: "å¹³è¡¡äº†ï¼",
          ja: "ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¾ã—ãŸï¼",
          ko: "ê· í˜•ì´ ë§žì•˜ìŠµë‹ˆë‹¤!",
        },
        reset: { en: "Reset", zh: "é‡ç½®", ja: "ãƒªã‚»ãƒƒãƒˆ", ko: "ìž¬ì„¤ì •" },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [pos, setPos] = useState(2); // 1, 2, 3 notches on right

        // Left side: Small Kid (Weight 1) at Distance 4
        // Torque Left = 1 * 4 = 4

        // Right side: Big Kid (Weight 2) at Distance ?
        // Needs Torque Right = 4
        // 2 * d = 4 => d = 2

        const torqueL = 1 * 4;
        const torqueR = 2 * pos;

        const tilt = torqueL > torqueR ? -15 : torqueL < torqueR ? 15 : 0;
        const isBalanced = tilt === 0;

        const getText = (key) => t[key][lang] || t[key]["en"];

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-green-700">
              {getText("title")}
            </h1>
            <p className="mb-12 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="relative w-full max-w-2xl h-64 flex flex-col items-center justify-end mb-12">
              {/* Visual Beam */}
              <div
                className="w-full h-4 bg-orange-400 rounded relative transition-transform duration-500 ease-out"
                style={{ transform: `rotate(${tilt}deg)` }}
              >
                {/* Left Kid (Fixed) */}
                <div className="absolute bottom-4 left-[5%] -ml-4 text-6xl transform -scale-x-100">
                  ðŸ‘¶
                </div>

                {/* Right Kid (Movable) */}
                {/* Positions: 1 at 25% from center, 2 at 50%, 3 at 75%, 4 at 100% */}
                {/* Center is 50%. Right side range 50% to 100%. */}
                {/* pos 1 = 60%, pos 2 = 70%, pos 3 = 80%, pos 4 = 90% */}
                <div
                  className="absolute bottom-4 text-8xl transition-all duration-300"
                  style={{ left: `${50 + pos * 10}%`, marginLeft: "-2rem" }}
                >
                  ðŸ§’
                </div>

                {/* Notches for visual aid */}
                {[1, 2, 3, 4].map((n) => (
                  <div
                    key={n}
                    className="absolute top-0 w-1 h-2 bg-black/20"
                    style={{ left: `${50 + n * 10}%` }}
                  ></div>
                ))}
              </div>

              {/* Fulcrum */}
              <div className="w-0 h-0 border-l-[20px] border-l-transparent border-r-[20px] border-r-transparent border-b-[40px] border-b-green-700"></div>
            </div>

            <div className="flex gap-4 mb-8">
              {[1, 2, 3, 4].map((d) => (
                <button
                  key={d}
                  onClick={() => setPos(d)}
                  className={`w-12 h-12 rounded-full font-bold text-xl border-2 ${
                    pos === d
                      ? "bg-green-600 text-white border-green-800"
                      : "bg-white border-slate-300 text-slate-500"
                  }`}
                >
                  {d}
                </button>
              ))}
            </div>

            {isBalanced && (
              <div className="text-4xl font-black text-green-600 animate-bounce">
                {getText("balanced")}
              </div>
            )}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
