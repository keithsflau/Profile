<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Pulley Power</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fff7ed;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Construction Crane",
          zh: "建築起重機",
          ja: "建設クレーン",
          ko: "건설 크레인",
          es: "Grúa de construcción",
          de: "Baukran",
          fi: "Rakennusnosturi",
          fr: "Grue de construction",
          ar: "رافعة البناء",
          it: "Gru da Costruzione",
        },
        instruction: {
          en: "Use the pulleys to lift the load.",
          zh: "使用滑輪提起重物。",
          ja: "滑車を使って荷物を持ち上げてください。",
          ko: "도르래를 사용하여 짐을 들어 올리세요.",
          es: "Usa las poleas para levantar la carga.",
          de: "Benutze die Riemenscheiben, um die Last zu heben.",
          fi: "Käytä hihnapyöriä kuorman nostamiseen.",
          fr: "Utilisez les poulies pour soulever la charge.",
          ar: "استخدم البكرات لرفع الحمل.",
          it: "Usa le carrucole per sollevare il carico.",
        },
        fixed: {
          en: "Single Pulley (Hard)",
          zh: "單滑輪 (困難)",
          ja: "単滑車 (難しい)",
          ko: "단일 도르래 (어려움)",
        },
        compound: {
          en: "Compound Pulley (Easy)",
          zh: "複合滑輪 (容易)",
          ja: "複合滑車 (簡単)",
          ko: "복합 도르래 (쉬움)",
        },
        lift: {
          en: "LIFT!",
          zh: "升起！",
          ja: "持ち上げる！",
          ko: "들어 올리다!",
        },
        reset: { en: "Reset", zh: "重置", ja: "リセット", ko: "재설정" },
        force: {
          en: "Force Required:",
          zh: "所需力量：",
          ja: "必要な力：",
          ko: "필요한 힘:",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [type, setType] = useState("fixed"); // fixed, compound
        const [lifting, setLifting] = useState(false);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const lift = () => {
          setLifting(true);
        };

        const reset = () => {
          setLifting(false);
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-orange-700">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="flex gap-4 mb-4">
              <button
                onClick={() => setType("fixed")}
                className={`px-4 py-2 rounded-lg font-bold ${
                  type === "fixed"
                    ? "bg-orange-500 text-white"
                    : "bg-white text-orange-500 border border-orange-300"
                }`}
              >
                {getText("fixed")}
              </button>
              <button
                onClick={() => setType("compound")}
                className={`px-4 py-2 rounded-lg font-bold ${
                  type === "compound"
                    ? "bg-orange-500 text-white"
                    : "bg-white text-orange-500 border border-orange-300"
                }`}
              >
                {getText("compound")}
              </button>
            </div>

            <div className="mb-8 font-bold text-slate-600">
              {getText("force")} {type === "fixed" ? "100N" : "50N"}
            </div>

            <div className="relative w-full max-w-lg h-[400px] bg-sky-100 rounded-xl border-b-8 border-gray-600 overflow-hidden shadow-lg">
              {/* Crane Arm */}
              <div className="absolute top-0 right-0 w-1/2 h-4 bg-yellow-500"></div>

              {/* Rope & Pulleys */}
              {/* Simplified Visuals */}
              {type === "fixed" ? (
                <>
                  <div className="absolute top-4 left-1/2 w-1 h-[200px] bg-black"></div>{" "}
                  {/* Rope Down */}
                  <div className="absolute top-2 left-1/2 w-8 h-8 rounded-full border-4 border-gray-600 bg-white -ml-4"></div>{" "}
                  {/* Pulley */}
                </>
              ) : (
                <>
                  <div className="absolute top-4 left-1/2 w-1 h-[200px] bg-black"></div>
                  <div className="absolute top-4 left-[55%] w-1 h-[200px] bg-black"></div>
                  <div className="absolute top-2 left-1/2 w-8 h-8 rounded-full border-4 border-gray-600 bg-white -ml-4"></div>
                  {/* Movable Pulley below, moves with load */}
                  <motion.div
                    className="absolute w-8 h-8 rounded-full border-4 border-gray-600 bg-white -ml-4 left-1/2"
                    animate={{ top: lifting ? 100 : 300 }}
                    transition={{ duration: 2 }}
                  ></motion.div>
                </>
              )}

              {/* Load */}
              <motion.div
                className="absolute left-1/2 -ml-12 w-24 h-24 bg-red-600 border-4 border-red-800 rounded flex items-center justify-center text-white font-bold"
                animate={{ top: lifting ? 150 : 350 }} // Same height for both visually, but conceptually easier
                transition={{ duration: type === "fixed" ? 4 : 2 }} // Compound is 'easier' so maybe faster lifting speed? Or logic says same work, less force, more distance. Let's just animate.
              >
                100kg
              </motion.div>
            </div>

            <div className="flex gap-4 mt-8">
              <button
                onClick={lift}
                disabled={lifting}
                className="px-8 py-3 bg-green-500 text-white font-bold rounded-xl shadow-lg disabled:opacity-50 hover:scale-105 transition-transform"
              >
                {getText("lift")}
              </button>
              <button
                onClick={reset}
                className="px-8 py-3 bg-gray-400 text-white font-bold rounded-xl shadow-lg hover:scale-105 transition-transform"
              >
                {getText("reset")}
              </button>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
