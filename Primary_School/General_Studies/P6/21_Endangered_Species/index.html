<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Endangered Species</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f0fdf4;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Endangered Species",
          zh: "ÁÄïÂç±Áâ©Á®Æ",
          ja: "Áµ∂ÊªÖÂç±ÊÉßÁ®Æ",
          ko: "Î©∏Ï¢Ö ÏúÑÍ∏∞ Ï¢Ö",
          es: "Especies en peligro de extinci√≥n",
          de: "Bedrohte Arten",
          fi: "Uhanalaiset lajit",
          fr: "Esp√®ces en voie de disparition",
          ar: "ÿßŸÑÿ£ŸÜŸàÿßÿπ ÿßŸÑŸÖŸáÿØÿØÿ© ÿ®ÿßŸÑÿßŸÜŸÇÿ±ÿßÿ∂",
          it: "Specie in Via di Estinzione",
        },
        instruction: {
          en: "Click on the animal to learn why it's endangered.",
          zh: "ÈªûÊìäÂãïÁâ©‰ª•‰∫ÜËß£Áâ†ÂÄëÁÇ∫‰ΩïÁÄïÂç±„ÄÇ",
          ja: "ÂãïÁâ©„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„ÄÅ„Å™„ÅúÁµ∂ÊªÖ„ÅÆÂç±Ê©ü„Å´ÁÄï„Åó„Å¶„ÅÑ„Çã„ÅÆ„Åã„ÇíÂ≠¶„Å≥„Åæ„Åó„Çá„ÅÜ„ÄÇ",
          ko: "ÎèôÎ¨ºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ Î©∏Ï¢Ö ÏúÑÍ∏∞Ïóê Ï≤òÌïú Ïù¥Ïú†Î•º ÏïåÏïÑÎ≥¥ÏÑ∏Ïöî.",
          es: "Haz clic en el animal para saber por qu√© est√° en peligro.",
          de: "Klicke auf das Tier, um zu erfahren, warum es bedroht ist.",
          fi: "Klikkaa el√§int√§ oppiaksesi miksi se on uhanalainen.",
          fr: "Cliquez sur l'animal pour savoir pourquoi il est en danger.",
          ar: "ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑÿ≠ŸäŸàÿßŸÜ ŸÑŸÖÿπÿ±ŸÅÿ© ÿ≥ÿ®ÿ® ÿ™ÿπÿ±ÿ∂Ÿá ŸÑŸÑÿÆÿ∑ÿ±.",
          it: "Clicca sull'animale per capire perch√© √® in pericolo.",
        },
        panda: {
          en: "Giant Panda",
          zh: "Â§ßÁÜäË≤ì",
          ja: "„Ç∏„É£„Ç§„Ç¢„É≥„Éà„Éë„É≥„ÉÄ",
          ko: "ÏûêÏù¥Ïñ∏Ìä∏ ÌåêÎã§",
        },
        polarbear: {
          en: "Polar Bear",
          zh: "ÂåóÊ•µÁÜä",
          ja: "„Éõ„ÉÉ„Ç≠„Éß„ÇØ„Ç∞„Éû",
          ko: "Î∂ÅÍ∑πÍ≥∞",
        },
        rhino: {
          en: "Black Rhino",
          zh: "ÈªëÁäÄÁâõ",
          ja: "„ÇØ„É≠„Çµ„Ç§",
          ko: "Í≤ÄÏùÄ ÏΩîÎøîÏÜå",
        },
        tiger: { en: "Tiger", zh: "ËÄÅËôé", ja: "„Éà„É©", ko: "Ìò∏ÎûëÏù¥" },

        reason_habitat: {
          en: "Habitat Loss (Bamboo forests)",
          zh: "Ê£≤ÊÅØÂú∞Âñ™Â§± (Á´πÊûó)",
          ja: "ÁîüÊÅØÂú∞„ÅÆÂñ™Â§± (Á´πÊûó)",
          ko: "ÏÑúÏãùÏßÄ ÏÜêÏã§ (ÎåÄÎÇòÎ¨¥ Ïà≤)",
        },
        reason_climate: {
          en: "Climate Change (Melting ice)",
          zh: "Ê∞£ÂÄôËÆäÂåñ (ÂÜ∞Â±§ËûçÂåñ)",
          ja: "Ê∞óÂÄôÂ§âÂãï (Ê∞∑„ÅÆËûçËß£)",
          ko: "Í∏∞ÌõÑ Î≥ÄÌôî (ÏñºÏùå ÎÖπÏùå)",
        },
        reason_poach: {
          en: "Poaching (Horns/Fur)",
          zh: "ÈùûÊ≥ïÂÅ∑Áçµ (Ëßí/ÁöÆÊØõ)",
          ja: "ÂØÜÁåü (Ëßí/ÊØõÁöÆ)",
          ko: "Î∞ÄÎ†µ (Îøî/Í∞ÄÏ£Ω)",
        },

        status: {
          en: "Status: Vulnerable/Endangered",
          zh: "ÁãÄÊÖãÔºöÊòìÂç±/ÁÄïÂç±",
          ja: "„Çπ„ÉÜ„Éº„Çø„ÇπÔºöÁµ∂ÊªÖÂç±ÊÉß",
          ko: "ÏÉÅÌÉú: Ï∑®ÏïΩ/Î©∏Ï¢Ö ÏúÑÍ∏∞",
        },
      };

      const animals = [
        {
          id: "panda",
          x: 75,
          y: 35,
          reason: "reason_habitat",
          icon: "üêº",
          bg: "bg-green-100",
        },
        {
          id: "polarbear",
          x: 50,
          y: 10,
          reason: "reason_climate",
          icon: "üêª‚Äç‚ùÑÔ∏è",
          bg: "bg-blue-100",
        },
        {
          id: "rhino",
          x: 55,
          y: 60,
          reason: "reason_poach",
          icon: "ü¶è",
          bg: "bg-orange-100",
        },
        {
          id: "tiger",
          x: 70,
          y: 45,
          reason: "reason_poach",
          icon: "üêÖ",
          bg: "bg-orange-100",
        },
        // Approximate map locations: Panda (China), Polar Bear (Arctic), Rhino (Africa), Tiger (Asia)
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [selected, setSelected] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-green-800">
              {getText("title")}
            </h1>

            <div className="w-full max-w-5xl aspect-video bg-blue-50 rounded-3xl overflow-hidden shadow-2xl relative border-4 border-blue-200">
              {/* Simplified World Map SVG Background */}
              <svg
                viewBox="0 0 100 50"
                className="absolute inset-0 w-full h-full pointer-events-none opacity-30"
              >
                <path d="M5,10 L35,10 L30,45 L15,40 Z" fill="#d1fae5" />{" "}
                {/* Americas */}
                <path d="M40,15 L65,15 L60,45 L45,40 Z" fill="#d1fae5" />{" "}
                {/* EU/Africa */}
                <path d="M70,10 L95,10 L90,45 L80,35 Z" fill="#d1fae5" />{" "}
                {/* Asia/Aus */}
              </svg>

              {animals.map((a) => (
                <button
                  key={a.id}
                  onClick={() => setSelected(a)}
                  className={`absolute w-16 h-16 rounded-full border-4 border-white shadow-lg flex items-center justify-center text-4xl hover:scale-125 transition-transform z-10 ${
                    a.bg
                  }
                         ${
                           selected && selected.id === a.id
                             ? "scale-125 ring-4 ring-yellow-400"
                             : ""
                         }
                      `}
                  style={{ left: `${a.x}%`, top: `${a.y}%` }}
                >
                  {a.icon}
                </button>
              ))}

              {/* Info Card Overlay */}
              {selected && (
                <motion.div
                  key={selected.id}
                  initial={{ y: 50, opacity: 0 }}
                  animate={{ y: 0, opacity: 1 }}
                  className="absolute bottom-4 left-4 right-4 bg-white/90 backdrop-blur-md p-6 rounded-2xl shadow-xl flex items-center gap-6"
                >
                  <div className="text-6xl">{selected.icon}</div>
                  <div>
                    <h2 className="text-3xl font-black text-slate-800">
                      {getText(selected.id)}
                    </h2>
                    <div className="text-lg font-bold text-red-500 mb-1">
                      {getText("status")}
                    </div>
                    <p className="text-xl text-slate-600">
                      ‚ö†Ô∏è {getText(selected.reason)}
                    </p>
                  </div>
                  <button
                    onClick={() => setSelected(null)}
                    className="ml-auto w-10 h-10 rounded-full bg-slate-200 hover:bg-slate-300 font-bold"
                  >
                    ‚úï
                  </button>
                </motion.div>
              )}

              {!selected && (
                <div className="absolute top-4 left-1/2 -translate-x-1/2 bg-white/80 px-6 py-2 rounded-full font-bold text-slate-500">
                  {getText("instruction")}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
