<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Puberty Hygiene</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fafafa;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Puberty Hygiene Guide",
          zh: "é’æ˜¥æœŸè¡›ç”ŸæŒ‡å—",
          ja: "æ€æ˜¥æœŸã®è¡›ç”Ÿã‚¬ã‚¤ãƒ‰",
          ko: "ì‚¬ì¶˜ê¸° ìœ„ìƒ ê°€ì´ë“œ",
          es: "GuÃ­a de higiene de la pubertad",
          de: "Hygiene-Leitfaden fÃ¼r die PubertÃ¤t",
          fi: "MurrosiÃ¤n hygieniaopas",
          fr: "Guide d'hygiÃ¨ne de la pubertÃ©",
          ar: "Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§ÙØ© ÙÙŠ Ø³Ù† Ø§Ù„Ø¨Ù„ÙˆØº",
          it: "Guida Igiene PubertÃ ",
        },
        instruction: {
          en: "Choose the correct tool for the hygiene issue.",
          zh: "é¸æ“‡æ­£ç¢ºçš„å·¥å…·è§£æ±ºè¡›ç”Ÿå•é¡Œã€‚",
          ja: "è¡›ç”Ÿå•é¡Œã«é©ã—ãŸé“å…·ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚",
          ko: "ìœ„ìƒ ë¬¸ì œì— ë§žëŠ” ì˜¬ë°”ë¥¸ ë„êµ¬ë¥¼ ì„ íƒí•˜ì„¸ìš”.",
          es: "Elige la herramienta correcta para el problema de higiene.",
          de: "WÃ¤hle das richtige Werkzeug fÃ¼r das Hygieneproblem.",
          fi: "Valitse oikea vÃ¤line hygieniaongelmaan.",
          fr: "Choisissez le bon outil pour le problÃ¨me d'hygiÃ¨ne.",
          ar: "Ø§Ø®ØªØ± Ø§Ù„Ø£Ø¯Ø§Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù†Ø¸Ø§ÙØ©.",
          it: "Scegli lo strumento corretto per il problema di igiene.",
        },
        acne: {
          en: "Oily Face / Pimples",
          zh: "é¢æ²¹ / æš—ç˜¡",
          ja: "è„‚æ€§è‚Œ / ãƒ‹ã‚­ãƒ“",
          ko: "ì§€ì„± í”¼ë¶€ / ì—¬ë“œë¦„",
        },
        sweat: {
          en: "Body Odor / Sweat",
          zh: "é«”è‡­ / æ±—æ°´",
          ja: "ä½“è‡­ / æ±—",
          ko: "ì²´ì·¨ / ë•€",
        },
        shower: {
          en: "Dirty Body",
          zh: "èº«é«”éª¯é«’",
          ja: "æ±šã‚ŒãŸä½“",
          ko: "ë”ëŸ¬ìš´ ëª¸",
        },

        facewash: {
          en: "Face Wash",
          zh: "æ´—é¢ä¹³",
          ja: "æ´—é¡”æ–™",
          ko: "í´ë Œì§• í¼",
        },
        deo: {
          en: "Deodorant",
          zh: "æ­¢æ±—åŠ‘",
          ja: "ãƒ‡ã‚ªãƒ‰ãƒ©ãƒ³ãƒˆ",
          ko: "ë°ì˜¤ë„ëž€íŠ¸",
        },
        soap: {
          en: "Body Soap",
          zh: "æ²æµ´éœ²",
          ja: "ãƒœãƒ‡ã‚£ã‚½ãƒ¼ãƒ—",
          ko: "ë°”ë”” ì›Œì‹œ",
        },

        correct: {
          en: "Fresh & Clean!",
          zh: "æ¸…æ–°ä¹¾æ·¨ï¼",
          ja: "ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ï¼†ã‚¯ãƒªãƒ¼ãƒ³ï¼",
          ko: "ìƒì¾Œí•˜ê³  ê¹¨ë—í•¨!",
        },
        wrong: {
          en: "Try another tool.",
          zh: "è©¦è©¦å…¶ä»–å·¥å…·ã€‚",
          ja: "åˆ¥ã®é“å…·ã‚’è©¦ã—ã¦ã€‚",
          ko: "ë‹¤ë¥¸ ë„êµ¬ë¥¼ ì‹œë„í•´ ë³´ì„¸ìš”.",
        },
      };

      const problems = [
        { id: "acne", tool: "facewash", visual: "ðŸ¥´" },
        { id: "sweat", tool: "deo", visual: "ðŸ¥µ" },
        { id: "shower", tool: "soap", visual: "ðŸ§Ÿ" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [index, setIndex] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const current = problems[index];

        const handleTool = (toolId) => {
          if (feedback) return;
          if (toolId === current.tool) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setIndex((index + 1) % problems.length);
            }, 1500);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 1000);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center justify-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-teal-600">
              {getText("title")}
            </h1>

            <div className="w-full max-w-lg bg-white p-8 rounded-3xl shadow-xl border-4 border-teal-100 flex flex-col items-center">
              <p className="mb-8 font-bold text-slate-400 text-center">
                {getText("instruction")}
              </p>

              {/* Character */}
              <div className="w-48 h-48 bg-teal-50 rounded-full flex items-center justify-center text-8xl mb-4 relative overflow-hidden">
                {feedback === "correct" ? "âœ¨" : current.visual}
                {feedback === "correct" && (
                  <div className="absolute inset-0 bg-white/50 flex items-center justify-center text-sm font-bold text-teal-600">
                    {getText("correct")}
                  </div>
                )}
              </div>
              <div className="text-2xl font-black text-slate-800 mb-8">
                {getText(current.id)}
              </div>

              {/* Tools */}
              <div className="flex gap-4 w-full">
                <button
                  onClick={() => handleTool("facewash")}
                  className="flex-1 p-4 bg-sky-100 hover:bg-sky-200 rounded-xl flex flex-col items-center gap-2 transition-transform active:scale-95"
                >
                  <span className="text-3xl">ðŸ§´</span>
                  <span className="font-bold text-xs">
                    {getText("facewash")}
                  </span>
                </button>
                <button
                  onClick={() => handleTool("deo")}
                  className="flex-1 p-4 bg-purple-100 hover:bg-purple-200 rounded-xl flex flex-col items-center gap-2 transition-transform active:scale-95"
                >
                  <span className="text-3xl">ðŸ§Š</span>
                  <span className="font-bold text-xs">{getText("deo")}</span>
                </button>
                <button
                  onClick={() => handleTool("soap")}
                  className="flex-1 p-4 bg-yellow-100 hover:bg-yellow-200 rounded-xl flex flex-col items-center gap-2 transition-transform active:scale-95"
                >
                  <span className="text-3xl">ðŸ§¼</span>
                  <span className="font-bold text-xs">{getText("soap")}</span>
                </button>
              </div>

              {feedback === "wrong" && (
                <div className="mt-4 text-red-500 font-bold animate-shake">
                  {getText("wrong")}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
