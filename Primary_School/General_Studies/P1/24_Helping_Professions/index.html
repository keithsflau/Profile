<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏ÄÂ∏∏Ë≠òÔºöÁÇ∫Ë™∞ÊúçÂãô | Helping Professions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #cbd5e1 0%, #64748b 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Who Uses This?",
          zh: "ÈÄôÊòØË™∞ÁöÑÂ∑•ÂÖ∑Ôºü",
          ja: "Ë™∞„ÅÆÈÅìÂÖ∑„Åß„Åô„ÅãÔºü",
          ko: "Ïù¥Í≤ÉÏùÄ ÎàÑÍ∞Ä ÏÇ¨Ïö©Ìï©ÎãàÍπå?",
          es: "¬øQui√©n usa esto?",
          de: "Wer benutzt das?",
          fi: "Kuka k√§ytt√§√§ t√§t√§?",
          fr: "Qui utilise √ßa ?",
          ar: "ŸÖŸÜ Ÿäÿ≥ÿ™ÿÆÿØŸÖ Ÿáÿ∞ÿßÿü",
          it: "Chi usa questo?",
        },
        instruction: {
          en: "Match the tool to the correct job!",
          zh: "ÊääÂ∑•ÂÖ∑ÈÖçÂ∞çÂà∞Ê≠£Á¢∫ÁöÑËÅ∑Ê•≠ÔºÅ",
          ja: "ÈÅìÂÖ∑„ÇíÊ≠£„Åó„ÅÑËÅ∑Ê•≠„Å´Âêà„Çè„Åõ„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",
          ko: "ÎèÑÍµ¨Î•º Ïò¨Î∞îÎ•∏ ÏßÅÏóÖÏóê ÎßûÏ∂îÏÑ∏Ïöî!",
          es: "¬°Une la herramienta con el trabajo correcto!",
          de: "Ordne das Werkzeug dem richtigen Job zu!",
          fi: "Yhdist√§ ty√∂kalu oikeaan ty√∂h√∂n!",
          fr: "Associez l'outil au bon travail !",
          ar: "ÿ∑ÿßÿ®ŸÇ ÿßŸÑÿ£ÿØÿßÿ© ÿ®ÿßŸÑŸàÿ∏ŸäŸÅÿ© ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©!",
          it: "Abbina lo strumento al lavoro corretto!",
        },
        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "ÂÜçË©¶‰∏ÄÊ¨°",
          es: "Int√©ntalo de nuevo",
          de: "Versuch es noch einmal",
          fi: "Yrit√§ uudelleen",
          fr: "R√©essayez",
          ar: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Riprova",
        },
        next: {
          en: "Next Tool",
          zh: "‰∏ã‰∏ÄÂÄãÂ∑•ÂÖ∑",
          es: "Siguiente herramienta",
          de: "N√§chstes Werkzeug",
          fi: "Seuraava ty√∂kalu",
          fr: "Outil suivant",
          ar: "ÿßŸÑÿ£ÿØÿßÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ©",
          it: "Strumento successivo",
        },
        score: {
          en: "Score",
          zh: "ÂàÜÊï∏",
          es: "Puntuaci√≥n",
          de: "Punktzahl",
          fi: "Pisteet",
          fr: "Score",
          ar: "ŸÜÿ™Ÿäÿ¨ÿ©",
          it: "Punteggio",
        },
        completed: {
          en: "Job Master!",
          zh: "ËÅ∑Ê•≠Â§ßÂ∏´ÔºÅ",
          es: "¬°Maestro de trabajos!",
          de: "Berufsmeister!",
          fi: "Ty√∂mestari!",
          fr: "Ma√Ætre des m√©tiers !",
          ar: "ÿ≥ŸäÿØ ÿßŸÑŸàÿ∏ŸäŸÅÿ©!",
          it: "Maestro del lavoro!",
        },
        restart: {
          en: "Play Again",
          zh: "ÂÜçÁé©‰∏ÄÊ¨°",
          es: "Jugar de nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "ÿßŸÑÿπÿ® ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Gioca di nuovo",
        },
        doctor: {
          en: "Doctor",
          zh: "ÈÜ´Áîü",
          es: "Doctor",
          de: "Arzt",
          fi: "L√§√§k√§ri",
          fr: "M√©decin",
          ar: "ÿ∑ÿ®Ÿäÿ®",
          it: "Dottore",
        },
        firefighter: {
          en: "Firefighter",
          zh: "Ê∂àÈò≤Âì°",
          es: "Bombero",
          de: "Feuerwehrmann",
          fi: "Palomies",
          fr: "Pompier",
          ar: "ÿ±ÿ¨ŸÑ ÿ•ÿ∑ŸÅÿßÿ°",
          it: "Vigile del fuoco",
        },
        police: {
          en: "Police Officer",
          zh: "Ë≠¶ÂØü",
          es: "Oficial de polic√≠a",
          de: "Polizist",
          fi: "Poliisi",
          fr: "Policier",
          ar: "ÿ∂ÿßÿ®ÿ∑ ÿ¥ÿ±ÿ∑ÿ©",
          it: "Agente di polizia",
        },
        chef: {
          en: "Chef",
          zh: "ÂªöÂ∏´",
          es: "Chef",
          de: "Koch",
          fi: "Kokki",
          fr: "Chef",
          ar: "ÿ∑ÿßŸá",
          it: "Cuoco",
        },
        teacher: {
          en: "Teacher",
          zh: "ËÄÅÂ∏´",
          es: "Maestro",
          de: "Lehrer",
          fi: "Opettaja",
          fr: "Enseignant",
          ar: "ŸÖÿπŸÑŸÖ",
          it: "Insegnante",
        },
        worker: {
          en: "Builder",
          zh: "Âª∫ÁØâÂ∑•‰∫∫",
          es: "Constructor",
          de: "Bauarbeiter",
          fi: "Rakentaja",
          fr: "Constructeur",
          ar: "ÿ®ŸÜÿßÿ°",
          it: "Costruttore",
        },
        postman: {
          en: "Postman",
          zh: "ÈÉµÂ∑Æ",
          es: "Cartero",
          de: "Postbote",
          fi: "Postinkantaja",
          fr: "Facteur",
          ar: "ÿ≥ÿßÿπŸä ÿßŸÑÿ®ÿ±ŸäÿØ",
          it: "Postino",
        },
        tool_stethoscope: {
          en: "Stethoscope",
          zh: "ËÅΩË®∫Âô®",
          es: "Estetoscopio",
          de: "Stethoskop",
          fi: "Stetoskooppi",
          fr: "St√©thoscope",
          ar: "ÿ≥ŸÖÿßÿπÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ®",
          it: "Stetoscopio",
        },
        tool_hose: {
          en: "Fire Hose",
          zh: "Ê∂àÈò≤Âñâ",
          es: "Manguera de incendios",
          de: "Feuerl√∂schschlauch",
          fi: "Paloletku",
          fr: "Tuyau d'incendie",
          ar: "ÿÆÿ±ÿ∑ŸàŸÖ ÿ≠ÿ±ŸäŸÇ",
          it: "Manichetta antincendio",
        },
        tool_badge: {
          en: "Badge",
          zh: "Ë≠¶ÂæΩ",
          es: "Placa",
          de: "Abzeichen",
          fi: "Merkki",
          fr: "Insigne",
          ar: "ÿ¥ÿßÿ±ÿ©",
          it: "Distintivo",
        },
        tool_hat: {
          en: "Chef Hat",
          zh: "ÂªöÂ∏´Â∏Ω",
          es: "Gorro de chef",
          de: "Kochm√ºtze",
          fi: "Kokin hattu",
          fr: "Toque de chef",
          ar: "ŸÇÿ®ÿπÿ© ÿßŸÑÿ¥ŸäŸÅ",
          it: "Cappello da cuoco",
        },
        tool_board: {
          en: "Blackboard",
          zh: "ÈªëÊùø",
          es: "Pizarra",
          de: "Tafel",
          fi: "Liitutaulu",
          fr: "Tableau noir",
          ar: "ÿ≥ÿ®Ÿàÿ±ÿ© ÿ≥ŸàÿØÿßÿ°",
          it: "Lavagna",
        },
        tool_helmet: {
          en: "Safety Helmet",
          zh: "ÂÆâÂÖ®Â∏Ω",
          es: "Casco de seguridad",
          de: "Schutzhelm",
          fi: "Suojakyp√§r√§",
          fr: "Casque de s√©curit√©",
          ar: "ÿÆŸàÿ∞ÿ© ÿßŸÑÿ£ŸÖÿßŸÜ",
          it: "Elmetto di sicurezza",
        },
        tool_mail: {
          en: "Mail Bag",
          zh: "ÈÉµË¢ã",
          es: "Saca de correos",
          de: "Postsack",
          fi: "Postis√§kki",
          fr: "Sac postal",
          ar: "ÿ≠ŸÇŸäÿ®ÿ© ÿ®ÿ±ŸäÿØ",
          it: "Sacco postale",
        },
      };

      const professions = [
        { id: "doctor", icon: "üë®‚Äç‚öïÔ∏è", color: "bg-white" },
        { id: "firefighter", icon: "üë®‚Äçüöí", color: "bg-red-200" },
        { id: "police", icon: "üëÆ", color: "bg-blue-200" },
        { id: "chef", icon: "üë®‚Äçüç≥", color: "bg-yellow-100" },
        { id: "teacher", icon: "üë©‚Äçüè´", color: "bg-green-100" },
        { id: "worker", icon: "üë∑", color: "bg-orange-200" },
        { id: "postman", icon: "üìÆ", color: "bg-green-200" }, // Using postbox emoji for postman slightly inaccurate but recognizable context
      ];

      const questions = [
        {
          id: "q1",
          toolIcon: "ü©∫",
          toolName: "tool_stethoscope",
          answer: "doctor",
        },
        {
          id: "q2",
          toolIcon: "üöí",
          toolName: "tool_hose",
          answer: "firefighter",
        },
        { id: "q3", toolIcon: "üöì", toolName: "tool_badge", answer: "police" }, // Using Car for visual simplicity
        { id: "q4", toolIcon: "üç≥", toolName: "tool_hat", answer: "chef" },
        { id: "q5", toolIcon: "üè´", toolName: "tool_board", answer: "teacher" },
        { id: "q6", toolIcon: "‚õëÔ∏è", toolName: "tool_helmet", answer: "worker" },
        { id: "q7", toolIcon: "‚úâÔ∏è", toolName: "tool_mail", answer: "postman" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [qIdx, setQIdx] = useState(0);
        const [options, setOptions] = useState([]);
        const [score, setScore] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const currentQ = qIdx < questions.length ? questions[qIdx] : null;

        useEffect(() => {
          if (currentQ) generateOptions();
        }, [qIdx]);

        const generateOptions = () => {
          const ans = currentQ.answer;
          // Select distractors
          const distractors = professions
            .filter((p) => p.id !== ans)
            .sort(() => Math.random() - 0.5)
            .slice(0, 2);

          const correct = professions.find((p) => p.id === ans);
          setOptions([correct, ...distractors].sort(() => Math.random() - 0.5));
          setFeedback(null);
        };

        const handleAnswer = (profId) => {
          if (feedback) return;
          if (profId === currentQ.answer) {
            setFeedback("correct");
            setScore((s) => s + 10);
            setTimeout(() => {
              setFeedback(null);
              setQIdx(qIdx + 1);
            }, 1000);
          } else {
            setFeedback("wrong");
            setScore((s) => Math.max(0, s - 5));
            setTimeout(() => setFeedback(null), 1000);
          }
        };

        const restart = () => {
          setQIdx(0);
          setScore(0);
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-white mb-4 mt-8 drop-shadow-md">
              üõ†Ô∏è {getText("title")}
            </h1>
            <div className="bg-white/90 px-6 py-2 rounded-full shadow mb-6 font-bold text-slate-600">
              {getText("score")}: {score}
            </div>

            {currentQ ? (
              <div className="w-full max-w-2xl bg-white rounded-3xl p-8 shadow-2xl flex flex-col items-center">
                <p className="font-bold text-slate-500 mb-6">
                  {getText("instruction")}
                </p>

                <motion.div
                  key={currentQ.id}
                  initial={{ scale: 0.8, opacity: 0 }}
                  animate={{ scale: 1, opacity: 1 }}
                  className="w-48 h-48 bg-slate-100 rounded-full flex items-center justify-center text-8xl mb-4 border-4 border-slate-200"
                >
                  {currentQ.toolIcon}
                </motion.div>
                <div className="text-2xl font-black text-slate-800 mb-8">
                  {getText(currentQ.toolName)}
                </div>

                {feedback && (
                  <div
                    className={`text-4xl font-black mb-6 ${
                      feedback === "correct" ? "text-green-500" : "text-red-500"
                    }`}
                  >
                    {getText(feedback)}
                  </div>
                )}

                <div className="grid grid-cols-3 gap-4 w-full">
                  {options.map((opt) => (
                    <button
                      key={opt.id}
                      onClick={() => handleAnswer(opt.id)}
                      className={`${opt.color} p-4 rounded-xl flex flex-col items-center justify-center shadow-md hover:scale-105 active:scale-95 transition-transform h-32 md:h-40 border-b-4 border-black/10`}
                    >
                      <span className="text-5xl mb-2">{opt.icon}</span>
                      <span className="font-bold text-sm md:text-base leading-tight">
                        {getText(opt.id)}
                      </span>
                    </button>
                  ))}
                </div>
              </div>
            ) : (
              <div className="mt-12 text-center bg-white/90 p-12 rounded-3xl shadow-xl">
                <div className="text-8xl mb-4">üåü</div>
                <h2 className="text-3xl font-black text-slate-800 mb-6">
                  {getText("completed")}
                </h2>
                <button
                  onClick={restart}
                  className="bg-blue-500 text-white px-10 py-4 rounded-full font-black text-xl hover:bg-blue-600 shadow-xl"
                >
                  {getText("restart")} üîÑ
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
