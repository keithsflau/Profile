<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏ÄÂ∏∏Ë≠òÔºöËπ∫Ëπ∫ÊùøÂ§ßÊØîÊãº | Simple Machine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #f0abfc 0%, #c084fc 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Seesaw Balance",
          zh: "Ëπ∫Ëπ∫ÊùøÂ§ßÊØîÊãº",
          ja: "„Ç∑„Éº„ÇΩ„Éº„Éê„É©„É≥„Çπ",
          ko: "ÏãúÏÜå Í∑†Ìòï",
          es: "Equilibrio del balanc√≠n",
          de: "Wippen-Gleichgewicht",
          fi: "Keinulauta",
          fr: "√âquilibre de la bascule",
          ar: "ÿ™Ÿàÿßÿ≤ŸÜ ÿßŸÑÿ£ÿ±ÿ¨Ÿàÿ≠ÿ©",
          it: "Equilibrio dell'altalena",
        },
        instruction: {
          en: "Who is heavier? Put an animal to test!",
          zh: "Ë™∞ÊØîËºÉÈáçÔºüÊîæ‰∏ÄÈöªÂãïÁâ©Ë©¶Ë©¶ÁúãÔºÅ",
          ja: "Ë™∞„ÅåÈáç„ÅÑÔºüÂãïÁâ©„ÇíÁΩÆ„ÅÑ„Å¶„Åø„Çà„ÅÜÔºÅ",
          ko: "ÎàÑÍ∞Ä Îçî Î¨¥Í±∞Ïö∏ÍπåÏöî? ÎèôÎ¨ºÏùÑ Ïò¨Î†§Î≥¥ÏÑ∏Ïöî!",
          es: "¬øQui√©n es m√°s pesado? ¬°Pon un animal a prueba!",
          de: "Wer ist schwerer? Teste es mit einem Tier!",
          fi: "Kuka on painavampi? Laita el√§in testiin!",
          fr: "Qui est plus lourd ? Mettez un animal pour tester !",
          ar: "ŸÖŸÜ ŸáŸà ÿßŸÑÿ£ÿ´ŸÇŸÑÿü ÿ∂ÿπ ÿ≠ŸäŸàÿßŸÜŸãÿß ŸÑŸÑÿßÿÆÿ™ÿ®ÿßÿ±!",
          it: "Chi √® pi√π pesante? Metti un animale alla prova!",
        },
        heavier: {
          en: "Heavier",
          zh: "ËºÉÈáç",
          es: "M√°s pesado",
          de: "Schwerer",
          fi: "Painavampi",
          fr: "Plus lourd",
          ar: "ÿ£ÿ´ŸÇŸÑ",
          it: "Pi√π pesante",
        },
        lighter: {
          en: "Lighter",
          zh: "ËºÉËºï",
          es: "M√°s ligero",
          de: "Leichter",
          fi: "Kevyempi",
          fr: "Plus l√©ger",
          ar: "ÿ£ÿÆŸÅ Ÿàÿ≤ŸÜÿß",
          it: "Pi√π leggero",
        },
        equal: {
          en: "Same Weight",
          zh: "‰∏ÄÊ®£Èáç",
          es: "Mismo peso",
          de: "Gleiches Gewicht",
          fi: "Sama paino",
          fr: "M√™me poids",
          ar: "ŸÜŸÅÿ≥ ÿßŸÑŸàÿ≤ŸÜ",
          it: "Stesso peso",
        },
        reset: {
          en: "Reset",
          zh: "ÈáçÁΩÆ",
          es: "Reiniciar",
          de: "Zur√ºcksetzen",
          fi: "Nollaa",
          fr: "R√©initialiser",
          ar: "ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ",
          it: "Reimposta",
        },
        mouse: {
          en: "Mouse",
          zh: "ËÄÅÈº†",
          es: "Rat√≥n",
          de: "Maus",
          fi: "Hiiri",
          fr: "Souris",
          ar: "ŸÅÿ£ÿ±",
          it: "Topo",
        },
        cat: {
          en: "Cat",
          zh: "Ë≤ì",
          es: "Gato",
          de: "Katze",
          fi: "Kissa",
          fr: "Chat",
          ar: "ŸÇÿ∑ÿ©",
          it: "Gatto",
        },
        dog: {
          en: "Dog",
          zh: "Áãó",
          es: "Perro",
          de: "Hund",
          fi: "Koira",
          fr: "Chien",
          ar: "ŸÉŸÑÿ®",
          it: "Cane",
        },
        elephant: {
          en: "Elephant",
          zh: "Â§ßË±°",
          es: "Elefante",
          de: "Elefant",
          fi: "Norsu",
          fr: "√âl√©phant",
          ar: "ŸÅŸäŸÑ",
          it: "Elefante",
        },
      };

      // Weights: 1 to 10
      const animals = [
        { id: "mouse", icon: "üê≠", weight: 1 },
        { id: "cat", icon: "üê±", weight: 3 },
        { id: "dog", icon: "üê∂", weight: 5 },
        { id: "elephant", icon: "üêò", weight: 10 },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [leftAnimal, setLeftAnimal] = useState(animals[2]); // Dog default
        const [rightAnimal, setRightAnimal] = useState(null);

        const [angle, setAngle] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          // Calculate angle based on weights
          if (!rightAnimal) {
            // If only left, it tips left (positive angle? let's say -20 deg = Left Down)
            setAngle(-20);
          } else {
            if (leftAnimal.weight > rightAnimal.weight) setAngle(-20);
            else if (leftAnimal.weight < rightAnimal.weight) setAngle(20);
            else setAngle(0);
          }
        }, [rightAnimal, leftAnimal]);

        const handleSelect = (animal) => {
          setRightAnimal(animal);
        };

        const reset = () => {
          setRightAnimal(null);
          // Maybe randomize left?
          const others = animals;
          setLeftAnimal(others[Math.floor(Math.random() * others.length)]);
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-white mb-4 mt-8 drop-shadow-md">
              ‚öñÔ∏è {getText("title")}
            </h1>

            <p className="font-bold text-white mb-8 bg-purple-500/50 px-4 py-1 rounded">
              {getText("instruction")}
            </p>

            {/* Seesaw Scene */}
            <div className="relative w-full max-w-2xl h-[400px] flex justify-center items-end pb-12 mb-8">
              {/* Fulcrum */}
              <div className="w-0 h-0 border-l-[30px] border-l-transparent border-r-[30px] border-r-transparent border-b-[60px] border-b-slate-700 absolute bottom-12 left-1/2 -ml-[30px] z-10"></div>

              {/* Plank */}
              <motion.div
                className="w-[90%] h-4 bg-amber-700 rounded-full relative bottom-[70px] z-20 flex justify-between px-4 md:px-12 items-end origin-center"
                animate={{ rotate: angle }}
                transition={{ type: "spring", stiffness: 60, damping: 10 }}
              >
                {/* Left Seat */}
                <div className="relative -top-4 flex flex-col items-center">
                  <div className="text-8xl filter drop-shadow-xl transform -scale-x-100">
                    {leftAnimal.icon}
                  </div>
                </div>

                {/* Right Seat */}
                <div className="relative -top-4 flex flex-col items-center">
                  {rightAnimal ? (
                    <motion.div
                      initial={{ scale: 0, y: -50 }}
                      animate={{ scale: 1, y: 0 }}
                      className="text-8xl filter drop-shadow-xl"
                    >
                      {rightAnimal.icon}
                    </motion.div>
                  ) : (
                    <div className="w-24 h-24 border-4 border-dashed border-white/50 rounded-full flex items-center justify-center text-white/50 font-bold">
                      ?
                    </div>
                  )}
                </div>
              </motion.div>

              {/* Ground */}
              <div className="absolute bottom-0 w-full h-12 bg-green-500 rounded-lg"></div>
            </div>

            {/* Result Text */}
            <div className="h-16 mb-4">
              {rightAnimal && (
                <motion.div
                  initial={{ opacity: 0, y: 10 }}
                  animate={{ opacity: 1, y: 0 }}
                  className="bg-white px-6 py-2 rounded-xl shadow-lg"
                >
                  <span className="font-black text-xl text-purple-900">
                    {rightAnimal.icon} {getText(rightAnimal.id)}
                  </span>
                  <span className="mx-2 text-slate-400">is</span>
                  <span className="font-black text-xl text-purple-600">
                    {angle === 0
                      ? getText("equal")
                      : angle === 20
                      ? getText("heavier")
                      : getText("lighter")}
                  </span>
                  <span className="mx-2 text-slate-400">than</span>
                  <span className="font-black text-xl text-purple-900">
                    {leftAnimal.icon} {getText(leftAnimal.id)}
                  </span>
                </motion.div>
              )}
            </div>

            {/* Selector */}
            <div className="flex gap-4 items-center bg-white/40 p-6 rounded-3xl backdrop-blur">
              {animals.map((a) => (
                <button
                  key={a.id}
                  onClick={() => handleSelect(a)}
                  className="bg-white w-20 h-20 rounded-2xl shadow-lg flex flex-col items-center justify-center hover:scale-110 active:scale-95 transition-transform"
                >
                  <span className="text-4xl mb-1">{a.icon}</span>
                </button>
              ))}
            </div>

            <button
              onClick={reset}
              className="mt-8 bg-purple-700 text-white px-8 py-2 rounded-full font-bold shadow hover:bg-purple-800"
            >
              {getText("reset")} üîÑ
            </button>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
