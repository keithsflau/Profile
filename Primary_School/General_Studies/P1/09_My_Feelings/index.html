<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸€å¸¸è­˜ï¼šå¿ƒæƒ…è®Šè®Šè®Š | My Feelings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "My Feelings",
          zh: "å¿ƒæƒ…è®Šè®Šè®Š",
          ja: "ç§ã®æ°—æŒã¡",
          ko: "ë‚˜ì˜ ê°ì •",
          es: "Mis sentimientos",
          de: "Meine GefÃ¼hle",
          fi: "Tunneeni",
          fr: "Mes sentiments",
          ar: "Ù…Ø´Ø§Ø¹Ø±ÙŠ",
          it: "I miei sentimenti",
        },
        instruction: {
          en: "How do they feel?",
          zh: "ä»–å€‘è¦ºå¾—æ€æ¨£ï¼Ÿ",
          ja: "å½¼ã‚‰ã¯ã©ã†æ„Ÿã˜ã¦ã„ã¾ã™ã‹ï¼Ÿ",
          ko: "ê·¸ë“¤ì€ ì–´ë–»ê²Œ ëŠë‚„ê¹Œìš”?",
          es: "Â¿CÃ³mo se sienten?",
          de: "Wie fÃ¼hlen sie sich?",
          fi: "MiltÃ¤ heistÃ¤ tuntuu?",
          fr: "Comment se sentent-ils ?",
          ar: "ÙƒÙŠÙ ÙŠØ´Ø¹Ø±ÙˆÙ†ØŸ",
          it: "Come si sentono?",
        },
        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "å†è©¦ä¸€æ¬¡",
          es: "IntÃ©ntalo de nuevo",
          de: "Versuch es noch einmal",
          fi: "YritÃ¤ uudelleen",
          fr: "RÃ©essayez",
          ar: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Riprova",
        },
        happy: {
          en: "Happy",
          zh: "é–‹å¿ƒ",
          es: "Feliz",
          de: "GlÃ¼cklich",
          fi: "Iloinen",
          fr: "Heureux",
          ar: "Ø³Ø¹ÙŠØ¯",
          it: "Felice",
        },
        sad: {
          en: "Sad",
          zh: "å‚·å¿ƒ",
          es: "Triste",
          de: "Traurig",
          fi: "Surullinen",
          fr: "Triste",
          ar: "Ø­Ø²ÙŠÙ†",
          it: "Triste",
        },
        angry: {
          en: "Angry",
          zh: "ç”Ÿæ°£",
          es: "Enojado",
          de: "WÃ¼tend",
          fi: "Vihainen",
          fr: "En colÃ¨re",
          ar: "ØºØ§Ø¶Ø¨",
          it: "Arrabbiato",
        },
        scared: {
          en: "Scared",
          zh: "å®³æ€•",
          es: "Asustado",
          de: "Ã„ngstlich",
          fi: "Pelokas",
          fr: "EffrayÃ©",
          ar: "Ø®Ø§Ø¦Ù",
          it: "Spaventato",
        },
        surprised: {
          en: "Surprised",
          zh: "é©šè¨",
          es: "Sorprendido",
          de: "Ãœberrascht",
          fi: "YllÃ¤ttynyt",
          fr: "Surpris",
          ar: "Ù…Ù†Ø¯Ù‡Ø´",
          it: "Sorpreso",
        },
        q1: {
          en: "I got a birthday present!",
          zh: "æˆ‘æ”¶åˆ°äº†ç”Ÿæ—¥ç¦®ç‰©ï¼",
          es: "Â¡RecibÃ­ un regalo de cumpleaÃ±os!",
          de: "Ich habe ein Geburtstagsgeschenk bekommen!",
          fi: "Sain syntymÃ¤pÃ¤ivÃ¤lahjan!",
          fr: "J'ai reÃ§u un cadeau d'anniversaire !",
          ar: "Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ù‡Ø¯ÙŠØ© Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯!",
          it: "Ho ricevuto un regalo di compleanno!",
        },
        q2: {
          en: "I lost my favorite toy.",
          zh: "æˆ‘ä¸è¦‹äº†æœ€å¿ƒæ„›çš„ç©å…·ã€‚",
          es: "PerdÃ­ mi juguete favorito.",
          de: "Ich habe mein Lieblingsspielzeug verloren.",
          fi: "Kadotin lempileluni.",
          fr: "J'ai perdu mon jouet prÃ©fÃ©rÃ©.",
          ar: "ÙÙ‚Ø¯Øª Ù„Ø¹Ø¨ØªÙŠ Ø§Ù„Ù…ÙØ¶Ù„Ø©.",
          it: "Ho perso il mio giocattolo preferito.",
        },
        q3: {
          en: "Someone pushed me.",
          zh: "æœ‰äººæ¨æ’æˆ‘ã€‚",
          es: "Alguien me empujÃ³.",
          de: "Jemand hat mich geschubst.",
          fi: "Joku tÃ¶nÃ¤isi minua.",
          fr: "Quelqu'un m'a poussÃ©.",
          ar: "Ø´Ø®Øµ Ù…Ø§ Ø¯ÙØ¹Ù†ÙŠ.",
          it: "Qualcuno mi ha spinto.",
        },
        q4: {
          en: "I saw a big spider!",
          zh: "æˆ‘çœ‹è¦‹ä¸€éš»å¤§èœ˜è››ï¼",
          es: "Â¡Vi una araÃ±a grande!",
          de: "Ich habe eine groÃŸe Spinne gesehen!",
          fi: "NÃ¤in ison hÃ¤mÃ¤hÃ¤kin!",
          fr: "J'ai vu une grosse araignÃ©e !",
          ar: "Ø±Ø£ÙŠØª Ø¹Ù†ÙƒØ¨ÙˆØª ÙƒØ¨ÙŠØ±!",
          it: "Ho visto un grosso ragno!",
        },
        q5: {
          en: "Wow! A double rainbow!",
          zh: "å“‡ï¼æ˜¯é›™å½©è™¹ï¼",
          es: "Â¡Guau! Â¡Un arcoÃ­ris doble!",
          de: "Wow! Ein doppelter Regenbogen!",
          fi: "Vau! Kaksoissateenkaari!",
          fr: "Waouh ! Un double arc-en-ciel !",
          ar: "ÙˆØ§Ùˆ! Ù‚ÙˆØ³ Ù‚Ø²Ø­ Ù…Ø²Ø¯ÙˆØ¬!",
          it: "Wow! Un doppio arcobaleno!",
        },
        completed: {
          en: "You know feelings well!",
          zh: "ä½ å¾ˆäº†è§£æƒ…ç·’ï¼",
          es: "Â¡Conoces bien los sentimientos!",
          de: "Du kennst GefÃ¼hle gut!",
          fi: "Tunnet tunteet hyvin!",
          fr: "Vous connaissez bien les sentiments !",
          ar: "Ø£Ù†Øª ØªØ¹Ø±Ù Ø§Ù„Ù…Ø´Ø§Ø¹Ø± Ø¬ÙŠØ¯Ù‹Ø§!",
          it: "Conosci bene i sentimenti!",
        },
        restart: {
          en: "Play Again",
          zh: "å†ç©ä¸€æ¬¡",
          es: "Jugar de nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Gioca di nuovo",
        },
      };

      const questions = [
        { id: "q1", answer: "happy", emo: "ğŸ˜Š" },
        { id: "q2", answer: "sad", emo: "ğŸ˜¢" },
        { id: "q3", answer: "angry", emo: "ğŸ˜¡" },
        { id: "q4", answer: "scared", emo: "ğŸ˜±" },
        { id: "q5", answer: "surprised", emo: "ğŸ˜²" },
      ];

      const options = [
        { id: "happy", emo: "ğŸ˜Š" },
        { id: "sad", emo: "ğŸ˜¢" },
        { id: "angry", emo: "ğŸ˜¡" },
        { id: "scared", emo: "ğŸ˜±" },
        { id: "surprised", emo: "ğŸ˜²" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [idx, setIdx] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const currentQ = questions[idx];

        const handleAnswer = (optId) => {
          if (feedback === "correct") return;
          if (optId === currentQ.answer) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              if (idx < questions.length - 1) setIdx(idx + 1);
              else setIdx(-1);
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 1000);
          }
        };

        const restart = () => {
          setIdx(0);
          setFeedback(null);
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-orange-900 mb-8 mt-8 drop-shadow-sm">
              ğŸ­ {getText("title")}
            </h1>

            {idx !== -1 ? (
              <div className="w-full max-w-2xl flex flex-col items-center">
                {/* Scenario Card */}
                <motion.div
                  key={currentQ.id}
                  initial={{ scale: 0.9, opacity: 0 }}
                  animate={{ scale: 1, opacity: 1 }}
                  className="bg-white rounded-3xl p-8 shadow-xl text-center border-4 border-orange-200 mb-8 w-full min-h-[200px] flex flex-col justify-center"
                >
                  <p className="text-3xl font-bold text-slate-800">
                    {getText(currentQ.id)}
                  </p>
                </motion.div>

                {/* Feedback */}
                <div className="h-12 mb-4">
                  {feedback && (
                    <motion.div
                      initial={{ y: 20, opacity: 0 }}
                      animate={{ y: 0, opacity: 1 }}
                      className={`text-3xl font-black ${
                        feedback === "correct"
                          ? "text-green-500"
                          : "text-red-500"
                      }`}
                    >
                      {getText(feedback)}
                    </motion.div>
                  )}
                </div>

                <p className="text-slate-500 font-bold mb-4">
                  {getText("instruction")}
                </p>

                {/* Options Grid */}
                <div className="grid grid-cols-3 md:grid-cols-5 gap-4 w-full">
                  {options.map((opt) => (
                    <motion.button
                      key={opt.id}
                      onClick={() => handleAnswer(opt.id)}
                      whileHover={{ scale: 1.1 }}
                      whileTap={{ scale: 0.9 }}
                      className="bg-white rounded-2xl p-4 shadow-md border-2 border-slate-100 flex flex-col items-center aspect-square justify-center hover:border-orange-300 transition-colors"
                    >
                      <span className="text-5xl mb-2">{opt.emo}</span>
                      <span className="text-xs md:text-sm font-bold text-slate-600">
                        {getText(opt.id)}
                      </span>
                    </motion.button>
                  ))}
                </div>
              </div>
            ) : (
              <div className="text-center mt-20">
                <div className="text-9xl mb-6">ğŸ’–</div>
                <h2 className="text-4xl font-black text-orange-800 mb-8">
                  {getText("completed")}
                </h2>
                <button
                  onClick={restart}
                  className="bg-orange-500 text-white px-10 py-4 rounded-full font-black text-2xl hover:bg-orange-600 shadow-xl"
                >
                  {getText("restart")} ğŸ”„
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
