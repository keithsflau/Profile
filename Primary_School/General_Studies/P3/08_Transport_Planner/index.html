<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸‰å¸¸è­˜ï¼šäº¤é€šè¦åŠƒå¸« | Transport Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Transport Planner",
          zh: "äº¤é€šè¦åŠƒå¸«",
          ja: "äº¤é€šãƒ—ãƒ©ãƒ³ãƒŠãƒ¼",
          ko: "êµí†µ í”Œë˜ë„ˆ",
          es: "Planificador de Transporte",
          de: "Verkehrsplaner",
          fi: "Liikennesuunnittelija",
          fr: "Planificateur de transport",
          ar: "Ù…Ø®Ø·Ø· Ø§Ù„Ù†Ù‚Ù„",
          it: "Pianificatore di Trasporti",
        },
        instruction: {
          en: "Choose the best transport!",
          zh: "é¸æ“‡æœ€åˆé©çš„äº¤é€šå·¥å…·ï¼",
          ja: "æœ€é©ãªäº¤é€šæ‰‹æ®µã‚’é¸ã¼ã†ï¼",
          ko: "ê°€ì¥ ì¢‹ì€ êµí†µìˆ˜ë‹¨ì„ ì„ íƒí•˜ì„¸ìš”!",
          es: "Â¡Elige el mejor transporte!",
          de: "WÃ¤hle das beste Transportmittel!",
          fi: "Valitse paras kulkuneuvo!",
          fr: "Choisissez le meilleur transport !",
          ar: "Ø§Ø®ØªØ± Ø£ÙØ¶Ù„ ÙˆØ³ÙŠÙ„Ø© Ù†Ù‚Ù„!",
          it: "Scegli il miglior trasporto!",
        },

        mtr: {
          en: "MTR",
          zh: "æ¸¯éµ",
          ja: "MTR",
          ko: "MTR",
          es: "MTR",
          de: "MTR",
          fi: "MTR",
          fr: "MTR",
          ar: "Ù…ØªØ±Ùˆ",
          it: "MTR",
        },
        bus: {
          en: "Bus",
          zh: "å·´å£«",
          ja: "ãƒã‚¹",
          ko: "ë²„ìŠ¤",
          es: "AutobÃºs",
          de: "Bus",
          fi: "Bussi",
          fr: "Bus",
          ar: "Ø­Ø§ÙÙ„Ø©",
          it: "Autobus",
        },
        ferry: {
          en: "Ferry",
          zh: "æ¸¡è¼ª",
          ja: "ãƒ•ã‚§ãƒªãƒ¼",
          ko: "í˜ë¦¬",
          es: "Ferry",
          de: "FÃ¤hre",
          fi: "Lautta",
          fr: "Ferry",
          ar: "Ø¹Ø¨Ø§Ø±Ø©",
          it: "Traghetto",
        },
        taxi: {
          en: "Taxi",
          zh: "çš„å£«",
          ja: "ã‚¿ã‚¯ã‚·ãƒ¼",
          ko: "íƒì‹œ",
          es: "Taxi",
          de: "Taxi",
          fi: "Taksi",
          fr: "Taxi",
          ar: "ØªØ§ÙƒØ³ÙŠ",
          it: "Taxi",
        },
        plane: {
          en: "Plane",
          zh: "é£›æ©Ÿ",
          ja: "é£›è¡Œæ©Ÿ",
          ko: "ë¹„í–‰ê¸°",
          es: "AviÃ³n",
          de: "Flugzeug",
          fi: "Lentokone",
          fr: "Avion",
          ar: "Ø·Ø§Ø¦Ø±Ø©",
          it: "Aereo",
        },
        walk: {
          en: "Walk",
          zh: "æ­¥è¡Œ",
          ja: "å¾’æ­©",
          ko: "ê±·ê¸°",
          es: "Caminar",
          de: "Gehen",
          fi: "KÃ¤vellÃ¤",
          fr: "Marcher",
          ar: "Ù…Ø´Ù‰",
          it: "Camminare",
        },

        q1: {
          en: "Central to Tsim Sha Tsui (Fastest & Cheap)",
          zh: "ä¸­ç’° å» å°–æ²™å’€ (æœ€å¿«ä¸”ä¾¿å®œ)",
          ja: "ã‚»ãƒ³ãƒˆãƒ©ãƒ«ã‹ã‚‰ãƒãƒ ã‚µãƒ¼ãƒãƒ§ã‚¤ (é€Ÿãã¦å®‰ã„)",
          ko: "ì„¼íŠ¸ëŸ´ì—ì„œ ì¹¨ì‚¬ì¶”ì´ê¹Œì§€ (ê°€ì¥ ë¹ ë¥´ê³  ì €ë ´í•¨)",
          es: "De Central a Tsim Sha Tsui (MÃ¡s rÃ¡pido y barato)",
          de: "Von Central nach Tsim Sha Tsui (Schnell & GÃ¼nstig)",
          fi: "Centralista Tsim Sha Tsuihin (Nopein & Halpa)",
          fr: "De Central Ã  Tsim Sha Tsui (Le plus rapide et le moins cher)",
          ar: "Ù…Ù† Ø³Ù†ØªØ±Ø§Ù„ Ø¥Ù„Ù‰ Øªsim Sha Tsui (Ø§Ù„Ø£Ø³Ø±Ø¹ ÙˆØ§Ù„Ø£Ø±Ø®Øµ)",
          it: "Da Central a Tsim Sha Tsui (PiÃ¹ Veloce ed Economico)",
        },
        q2: {
          en: "Central to Cheung Chau",
          zh: "ä¸­ç’° å» é•·æ´²",
          ja: "ã‚»ãƒ³ãƒˆãƒ©ãƒ«ã‹ã‚‰é•·æ´²",
          ko: "ì„¼íŠ¸ëŸ´ì—ì„œ ì²­ì°¨ìš°ê¹Œì§€",
          es: "De Central a Cheung Chau",
          de: "Von Central nach Cheung Chau",
          fi: "Centralista Cheung Chauhun",
          fr: "De Central Ã  Cheung Chau",
          ar: "Ù…Ù† Ø³Ù†ØªØ±Ø§Ù„ Ø¥Ù„Ù‰ ØªØ´Ø§Ù†Øº ØªØ´Ø§Ùˆ",
          it: "Da Central a Cheung Chau",
        },
        q3: {
          en: "Home to Park nearby (Healthy)",
          zh: "å®¶ å» é™„è¿‘çš„å…¬åœ’ (å¥åº·)",
          ja: "å®¶ã‹ã‚‰è¿‘ãã®å…¬åœ’ (å¥åº·)",
          ko: "ì§‘ì—ì„œ ê°€ê¹Œìš´ ê³µì› (ê±´ê°•)",
          es: "De casa al parque cercano (Saludable)",
          de: "Von zu Hause zum nahegelegenen Park (Gesund)",
          fi: "Kotoa lÃ¤hipuistoon (Terveellinen)",
          fr: "De la maison au parc voisin (Sain)",
          ar: "Ù…Ù† Ø§Ù„Ù…Ù†Ø²Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© (ØµØ­ÙŠ)",
          it: "Da Casa al Parco vicino (Salutare)",
        },
        q4: {
          en: "Hong Kong to Japan",
          zh: "é¦™æ¸¯ å» æ—¥æœ¬",
          ja: "é¦™æ¸¯ã‹ã‚‰æ—¥æœ¬",
          ko: "í™ì½©ì—ì„œ ì¼ë³¸ê¹Œì§€",
          es: "De Hong Kong a JapÃ³n",
          de: "Von Hongkong nach Japan",
          fi: "Hongkongista Japaniin",
          fr: "De Hong Kong au Japon",
          ar: "Ù…Ù† Ù‡ÙˆÙ†Øº ÙƒÙˆÙ†Øº Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†",
          it: "Da Hong Kong al Giappone",
        },
        q5: {
          en: "Rush to Hospital (Emergency)",
          zh: "è¶•å»é†«é™¢ (ç·Šæ€¥)",
          ja: "ç—…é™¢ã¸æ€¥ã (ç·Šæ€¥)",
          ko: "ë³‘ì›ìœ¼ë¡œ ê¸‰íˆ ê°€ê¸° (ì‘ê¸‰)",
          es: "Ir corriendo al hospital (Emergencia)",
          de: "Eile ins Krankenhaus (Notfall)",
          fi: "Kiirehdi sairaalaan (HÃ¤tÃ¤tilanne)",
          fr: "Urgence Ã  l'hÃ´pital (Urgence)",
          ar: "Ø§Ù„Ø§Ø³Ø±Ø§Ø¹ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ (Ø·ÙˆØ§Ø±Ø¦)",
          it: "Corsa all'Ospedale (Emergenza)",
        },

        correct: {
          en: "Great Choice!",
          zh: "å¾ˆå¥½çš„é¸æ“‡ï¼",
          ja: "ç´ æ™´ã‚‰ã—ã„é¸æŠï¼",
          ko: "íƒì›”í•œ ì„ íƒ!",
          es: "Â¡Gran ElecciÃ³n!",
          de: "Gute Wahl!",
          fi: "Harvinaisen hyvÃ¤ valinta!",
          fr: "Excellent choix !",
          ar: "Ø§Ø®ØªÙŠØ§Ø± Ø±Ø§Ø¦Ø¹!",
          it: "Ottima Scelta!",
        },
        wrong: {
          en: "Not the best option.",
          zh: "é€™ä¸æ˜¯æœ€å¥½çš„é¸æ“‡ã€‚",
          ja: "æœ€è‰¯ã®é¸æŠã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",
          ko: "ìµœì„ ì˜ ì„ íƒì´ ì•„ë‹™ë‹ˆë‹¤.",
          es: "No es la mejor opciÃ³n.",
          de: "Nicht die beste Option.",
          fi: "Ei paras vaihtoehto.",
          fr: "Pas la meilleure option.",
          ar: "Ù„ÙŠØ³ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø£ÙØ¶Ù„.",
          it: "Non l'opzione migliore.",
        },
        completed: {
          en: "Route Master!",
          zh: "è·¯ç·šå¤§å¸«ï¼",
          ja: "ãƒ«ãƒ¼ãƒˆãƒã‚¹ã‚¿ãƒ¼ï¼",
          ko: "ê²½ë¡œ ë§ˆìŠ¤í„°!",
          es: "Â¡Maestro de Rutas!",
          de: "Routenmeister!",
          fi: "Reittimestari!",
          fr: "MaÃ®tre des itinÃ©raires !",
          ar: "Ø®Ø¨ÙŠØ± Ø§Ù„Ø·Ø±Ù‚!",
          it: "Maestro dei Percorsi!",
        },
        reset: {
          en: "Play Again",
          zh: "å†ç©ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          ko: "ë‹¤ì‹œ í•˜ê¸°",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Gioca di Nuovo",
        },
      };

      const tasks = [
        { id: 1, q: "q1", best: ["mtr", "ferry"], icon: "ğŸ™ï¸" }, // Ferry is also good but MTR is standard answer for fast
        { id: 2, q: "q2", best: ["ferry"], icon: "ğŸï¸" },
        { id: 3, q: "q3", best: ["walk"], icon: "ğŸŒ³" },
        { id: 4, q: "q4", best: ["plane"], icon: "ğŸ¯" },
        { id: 5, q: "q5", best: ["taxi"], icon: "ğŸ¥" },
      ];

      const options = [
        { id: "mtr", icon: "ğŸš‡", color: "bg-red-100 border-red-400" },
        { id: "bus", icon: "ğŸšŒ", color: "bg-yellow-100 border-yellow-400" },
        { id: "ferry", icon: "ğŸ›³ï¸", color: "bg-green-100 border-green-400" },
        { id: "taxi", icon: "ğŸš•", color: "bg-red-50 border-red-500" },
        { id: "plane", icon: "âœˆï¸", color: "bg-blue-100 border-blue-400" },
        { id: "walk", icon: "ğŸš¶", color: "bg-emerald-100 border-emerald-400" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [qIdx, setQIdx] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const currentTask = tasks[qIdx];

        const handleChoice = (optId) => {
          if (feedback) return;

          // Allow acceptable answers logic if needed, simplify for P3
          // For Q1: MTR is strictly fastest usually. Ferry is scenic. Let's accept both for "Cross harbour" context if vague, but question says "Fastest". MTR wins.
          // Actually let's make it strict based on common sense taught in P3.

          if (currentTask.best.includes(optId)) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              if (qIdx < tasks.length - 1) setQIdx(qIdx + 1);
              else setQIdx(-1);
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 800);
          }
        };

        const reset = () => {
          setQIdx(0);
          setFeedback(null);
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-slate-700 mb-4 mt-8 drop-shadow-sm bg-white/50 px-6 py-2 rounded-full">
              ğŸš¦ {getText("title")}
            </h1>

            {qIdx !== -1 ? (
              <div className="w-full max-w-2xl flex flex-col items-center flex-1 justify-center">
                {/* Question Card */}
                <div className="bg-white p-8 rounded-3xl shadow-xl w-full border-b-8 border-slate-200 text-center mb-8 relative">
                  <div className="text-6xl mb-4">{currentTask.icon}</div>
                  <h2 className="text-2xl font-black text-slate-800">
                    {getText(currentTask.q)}
                  </h2>
                  {feedback && (
                    <div
                      className={`absolute top-0 left-0 w-full h-full rounded-2xl flex items-center justify-center bg-white/90 z-10 font-black text-3xl ${
                        feedback === "correct"
                          ? "text-green-600"
                          : "text-red-500"
                      }`}
                    >
                      {getText(feedback)}
                    </div>
                  )}
                </div>

                <p className="font-bold text-slate-500 mb-6 bg-white/60 px-6 py-1 rounded-full">
                  {getText("instruction")}
                </p>

                {/* Options Grid */}
                <div className="grid grid-cols-2 md:grid-cols-3 gap-4 w-full">
                  {options.map((opt) => (
                    <button
                      key={opt.id}
                      onClick={() => handleChoice(opt.id)}
                      disabled={feedback}
                      className={`${opt.color} border-b-4 rounded-xl p-4 flex flex-col items-center shadow-md transition-transform active:scale-95 hover:-translate-y-1`}
                    >
                      <div className="text-5xl mb-1">{opt.icon}</div>
                      <div className="font-bold text-slate-800 leading-tight">
                        {getText(opt.id)}
                      </div>
                    </button>
                  ))}
                </div>

                <div className="mt-8 flex gap-2">
                  {tasks.map((_, i) => (
                    <div
                      key={i}
                      className={`w-3 h-3 rounded-full ${
                        i === qIdx
                          ? "bg-blue-500 scale-125"
                          : i < qIdx
                          ? "bg-green-400"
                          : "bg-slate-300"
                      }`}
                    ></div>
                  ))}
                </div>
              </div>
            ) : (
              <div className="bg-white/90 p-12 rounded-3xl shadow-xl text-center mt-20">
                <div className="text-8xl mb-4">ğŸ†</div>
                <h2 className="text-3xl font-black text-slate-800 mb-6">
                  {getText("completed")}
                </h2>
                <button
                  onClick={reset}
                  className="bg-slate-700 text-white px-10 py-4 rounded-full font-black text-xl hover:bg-slate-800 shadow-xl"
                >
                  {getText("reset")} ğŸ”„
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
