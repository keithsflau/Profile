<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏âÂ∏∏Ë≠òÔºöÂ•ΩÂÖ¨Ê∞ë | Smart Citizen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #ddd6fe 0%, #c4b5fd 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Smart Citizen",
          zh: "Â•ΩÂÖ¨Ê∞ë",
          ja: "„Çπ„Éû„Éº„ÉàÂ∏ÇÊ∞ë",
          ko: "Ïä§ÎßàÌä∏ ÏãúÎØº",
          es: "Ciudadano Inteligente",
          de: "Smarter B√ºrger",
          fi: "Fiksu kansalainen",
          fr: "Citoyen intelligent",
          ar: "ŸÖŸàÿßÿ∑ŸÜ ÿ∞ŸÉŸä",
          it: "Cittadino Intelligente",
        },
        instruction: {
          en: "Is this behavior good?",
          zh: "ÈÄôÁ®ÆË°åÁÇ∫Ê≠£Á¢∫ÂóéÔºü",
          ja: "„Åì„ÅÆË°åÂãï„ÅØÊ≠£„Åó„ÅÑ„Åß„Åô„ÅãÔºü",
          ko: "Ïù¥ ÌñâÎèôÏùÄ Ïò¨Î∞îÎ•∏Í∞ÄÏöî?",
          es: "¬øEs este comportamiento bueno?",
          de: "Ist dieses Verhalten gut?",
          fi: "Onko t√§m√§ k√§yt√∂s hyv√§√§?",
          fr: "Ce comportement est-il bon ?",
          ar: "ŸáŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ≥ŸÑŸàŸÉ ÿ¨ŸäÿØÿü",
          it: "Questo comportamento √® buono?",
        },

        good: {
          en: "Good",
          zh: "Ê≠£Á¢∫",
          ja: "ËâØ„ÅÑ",
          ko: "Ï¢ãÏùå",
          es: "Bueno",
          de: "Gut",
          fi: "Hyv√§",
          fr: "Bien",
          ar: "ÿ¨ŸäÿØ",
          it: "Buono",
        },
        bad: {
          en: "Bad",
          zh: "ÈåØË™§",
          ja: "ÊÇ™„ÅÑ",
          ko: "ÎÇòÏÅ®",
          es: "Malo",
          de: "Schlecht",
          fi: "Huono",
          fr: "Mauvais",
          ar: "ÿ≥Ÿäÿ°",
          it: "Cattivo",
        },

        q1: {
          en: "Queuing up politely",
          zh: "ÂÆàÁß©Â∫èÊéíÈöä",
          ja: "Á§ºÂÑÄÊ≠£„Åó„Åè‰∏¶„Å∂",
          ko: "ÏßàÏÑú ÏûàÍ≤å Ï§Ñ ÏÑúÍ∏∞",
          es: "Hacer cola educadamente",
          de: "H√∂flich anstehen",
          fi: "Jonottaa kohteliaasti",
          fr: "Faire la queue poliment",
          ar: "ÿßŸÑÿßÿµÿ∑ŸÅÿßŸÅ ÿ®ÿ£ÿØÿ®",
          it: "Fare la fila educatamente",
        },
        q2: {
          en: "Talking loudly on bus",
          zh: "Âú®Â∑¥Â£´‰∏äÂ§ßËÅ≤Ë™™Ë©±",
          ja: "„Éê„Çπ„ÅßÂ§ßÂ£∞„ÅßË©±„Åô",
          ko: "Î≤ÑÏä§ÏóêÏÑú ÌÅ¨Í≤å ÎßêÌïòÍ∏∞",
          es: "Hablar alto en el autob√∫s",
          de: "Laut im Bus sprechen",
          fi: "Puhua kovaa bussissa",
          fr: "Parler fort dans le bus",
          ar: "ÿßŸÑÿ™ÿ≠ÿØÿ´ ÿ®ÿµŸàÿ™ ÿπÿßŸÑ ŸÅŸä ÿßŸÑÿ≠ÿßŸÅŸÑÿ©",
          it: "Parlare ad alta voce sull'autobus",
        },
        q3: {
          en: "Helping elderly crossing",
          zh: "Êâ∂Èï∑ËÄÖÈÅéÈ¶¨Ë∑Ø",
          ja: "È´òÈΩ¢ËÄÖ„ÅÆÊ®™Êñ≠„ÇíÊâã‰ºù„ÅÜ",
          ko: "ÎÖ∏Ïù∏ Í∏∏ Í±¥ÎÑàÍ∏∞ ÎèïÍ∏∞",
          es: "Ayudar a ancianos a cruzar",
          de: "√Ñlteren beim √úberqueren helfen",
          fi: "Auttaa vanhuksia ylitt√§m√§√§n",
          fr: "Aider les personnes √¢g√©es √† traverser",
          ar: "ŸÖÿ≥ÿßÿπÿØÿ© ŸÉÿ®ÿßÿ± ÿßŸÑÿ≥ŸÜ ŸÅŸä ÿßŸÑÿπÿ®Ÿàÿ±",
          it: "Aiutare gli anziani ad attraversare",
        },
        q4: {
          en: "Littering on street",
          zh: "‰∫ÇÊããÂûÉÂúæ",
          ja: "ÈÅì„Å´„Ç¥„Éü„ÇíÊç®„Å¶„Çã",
          ko: "Í∏∏Ïóê Ïì∞Î†àÍ∏∞ Î≤ÑÎ¶¨Í∏∞",
          es: "Tirar basura en la calle",
          de: "M√ºll auf die Stra√üe werfen",
          fi: "Roskaaminen kadulla",
          fr: "Jeter des d√©chets dans la rue",
          ar: "ÿ±ŸÖŸä ÿßŸÑŸÇŸÖÿßŸÖÿ© ŸÅŸä ÿßŸÑÿ¥ÿßÿ±ÿπ",
          it: "Gettare rifiuti per strada",
        },
        q5: {
          en: "Wasting water",
          zh: "Êµ™Ë≤ªÈ£üÊ∞¥",
          ja: "Ê∞¥„ÇíÁÑ°ÈßÑ„Å´„Åô„Çã",
          ko: "Î¨º ÎÇ≠ÎπÑÌïòÍ∏∞",
          es: "Desperdiciar agua",
          de: "Wasser verschwenden",
          fi: "Veden tuhlaaminen",
          fr: "Gaspiller l'eau",
          ar: "ŸáÿØÿ± ÿßŸÑŸÖŸäÿßŸá",
          it: "Sprecare acqua",
        },
        q6: {
          en: "Returning lost items",
          zh: "Ë∑Ø‰∏çÊãæÈÅ∫",
          ja: "ËêΩ„Å®„ÅóÁâ©„ÇíÂ±ä„Åë„Çã",
          ko: "Î∂ÑÏã§Î¨º ÎèåÎ†§Ï£ºÍ∏∞",
          es: "Devolver objetos perdidos",
          de: "Verlorene Gegenst√§nde zur√ºckgeben",
          fi: "Kadonneiden tavaroiden palauttaminen",
          fr: "Rendre les objets perdus",
          ar: "ÿ•ÿπÿßÿØÿ© ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑŸÖŸÅŸÇŸàÿØÿ©",
          it: "Restituire oggetti smarriti",
        },

        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµÏûÖÎãàÎã§!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        wrong: {
          en: "Think again!",
          zh: "ÊÉ≥‰∏ÄÊÉ≥ÔºÅ",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶ËÄÉ„Åà„Å¶ÔºÅ",
          ko: "Îã§Ïãú ÏÉùÍ∞ÅÌï¥Î≥¥ÏÑ∏Ïöî!",
          es: "¬°Pi√©nsalo de nuevo!",
          de: "Denk nochmal nach!",
          fi: "Mieti uudelleen!",
          fr: "R√©fl√©chissez encore !",
          ar: "ŸÅŸÉÿ± ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ!",
          it: "Pensaci ancora!",
        },
        completed: {
          en: "Model Citizen!",
          zh: "Ê®°ÁØÑÂ•ΩÂÖ¨Ê∞ëÔºÅ",
          ja: "Ê®°ÁØÑÂ∏ÇÊ∞ëÔºÅ",
          ko: "Î™®Î≤î ÏãúÎØº!",
          es: "¬°Ciudadano Modelo!",
          de: "Vorbildlicher B√ºrger!",
          fi: "Mallikansalainen!",
          fr: "Citoyen mod√®le !",
          ar: "ŸÖŸàÿßÿ∑ŸÜ ŸÜŸÖŸàÿ∞ÿ¨Ÿä!",
          it: "Cittadino Modello!",
        },
        reset: {
          en: "Play Again",
          zh: "ÂÜçÁé©‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§",
          ko: "Îã§Ïãú ÌïòÍ∏∞",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "ÿßŸÑÿπÿ® ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Gioca di Nuovo",
        },
        score: {
          en: "Civic Score",
          zh: "ÂÖ¨Ê∞ëÂàÜ",
          ja: "Â∏ÇÊ∞ë„Çπ„Ç≥„Ç¢",
          ko: "ÏãúÎØº Ï†êÏàò",
          es: "Puntuaci√≥n C√≠vica",
          de: "B√ºrger-Punktestand",
          fi: "Kansalaispisteet",
          fr: "Score civique",
          ar: "ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÖÿØŸÜŸäÿ©",
          it: "Punteggio Civico",
        },
      };

      const scenarios = [
        { id: "q1", type: "good", icon: "üßçüßç‚Äç‚ôÄÔ∏èüßç‚Äç‚ôÇÔ∏è" },
        { id: "q2", type: "bad", icon: "üó£Ô∏èüöå" },
        { id: "q3", type: "good", icon: "üëµü§ù" },
        { id: "q4", type: "bad", icon: "üöØ" },
        { id: "q5", type: "bad", icon: "üö∞üíß" },
        { id: "q6", type: "good", icon: "üëõüëÆ" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [current, setCurrent] = useState(null);
        const [score, setScore] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...scenarios].sort(() => Math.random() - 0.5);
          setQueue(q);
          setCurrent(q[0]);
          setScore(0);
          setFeedback(null);
        };

        const handleAnswer = (ans) => {
          // good or bad
          if (feedback) return;

          const isCorrect = ans === current.type;
          if (isCorrect) {
            setScore((s) => s + 10);
            setFeedback("correct");
          } else {
            setScore((s) => Math.max(0, s - 5));
            setFeedback("wrong");
          }

          setTimeout(() => {
            setFeedback(null);
            const nextIdx = queue.indexOf(current) + 1;
            if (nextIdx < queue.length) setCurrent(queue[nextIdx]);
            else setCurrent(null);
          }, 800);
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-violet-800 mb-4 mt-8 drop-shadow-sm bg-white/50 px-6 py-2 rounded-full">
              ü§ù {getText("title")}
            </h1>

            {current ? (
              <div className="w-full max-w-md flex flex-col items-center flex-1 justify-center relative">
                <div className="absolute top-0 right-0 lg:-right-32 font-bold bg-white text-violet-600 px-4 py-2 rounded-xl shadow">
                  {getText("score")}: {score}
                </div>

                {/* Card */}
                <motion.div
                  key={current.id}
                  initial={{ scale: 0.8, opacity: 0, rotate: -5 }}
                  animate={{ scale: 1, opacity: 1, rotate: 0 }}
                  exit={{ scale: 1.2, opacity: 0 }}
                  className="bg-white p-12 rounded-[2.5rem] shadow-2xl border-b-8 border-violet-200 mb-8 flex flex-col items-center text-center w-full aspect-square justify-center relative z-20"
                >
                  <div className="text-9xl mb-6">{current.icon}</div>
                  <h2 className="text-3xl font-black text-slate-800 leading-tight">
                    {getText(current.id)}
                  </h2>

                  {feedback && (
                    <div
                      className={`absolute inset-0 bg-white/90 rounded-[2rem] flex items-center justify-center font-black text-4xl whitespace-nowrap ${
                        feedback === "correct"
                          ? "text-green-600"
                          : "text-red-500"
                      }`}
                    >
                      {getText(feedback)}
                    </div>
                  )}
                </motion.div>

                <p className="font-bold text-violet-900 mb-8 text-xl opacity-80">
                  {getText("instruction")}
                </p>

                <div className="flex gap-6 w-full">
                  <button
                    onClick={() => handleAnswer("good")}
                    disabled={feedback}
                    className="flex-1 bg-green-500 text-white rounded-2xl py-6 font-black text-3xl shadow-xl border-b-8 border-green-700 active:border-b-0 active:translate-y-2 hover:bg-green-400 transition-colors"
                  >
                    üëç{" "}
                    <span className="text-lg block mt-2 opacity-80">
                      {getText("good")}
                    </span>
                  </button>
                  <button
                    onClick={() => handleAnswer("bad")}
                    disabled={feedback}
                    className="flex-1 bg-red-500 text-white rounded-2xl py-6 font-black text-3xl shadow-xl border-b-8 border-red-700 active:border-b-0 active:translate-y-2 hover:bg-red-400 transition-colors"
                  >
                    üëé{" "}
                    <span className="text-lg block mt-2 opacity-80">
                      {getText("bad")}
                    </span>
                  </button>
                </div>
              </div>
            ) : (
              <div className="bg-white/90 p-12 rounded-3xl shadow-xl text-center mt-20">
                <div className="text-8xl mb-4">üèÖ</div>
                <h2 className="text-3xl font-black text-violet-800 mb-6">
                  {getText("completed")}
                </h2>
                <p className="text-xl text-slate-500 font-bold mb-8">
                  {getText("score")}: {score}
                </p>
                <button
                  onClick={initGame}
                  className="bg-violet-600 text-white px-10 py-4 rounded-full font-black text-xl hover:bg-violet-700 shadow-xl"
                >
                  {getText("reset")} üîÑ
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
