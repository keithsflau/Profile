<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸‰å¸¸è­˜ï¼šå¤©æ°£è­¦å‘Šè¨Šè™Ÿ | Weather Signals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: radial-gradient(circle at center, #cbd5e1 0%, #64748b 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Weather Signals",
          zh: "å¤©æ°£è­¦å‘Šè¨Šè™Ÿ",
          ja: "æ°—è±¡è­¦å ±",
          ko: "ë‚ ì”¨ ê²½ë³´",
          es: "SeÃ±ales MeteorolÃ³gicas",
          de: "Wettersignale",
          fi: "SÃ¤Ã¤merkit",
          fr: "Signaux mÃ©tÃ©orologiques",
          ar: "Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø·Ù‚Ø³",
          it: "Segnali Meteorologici",
        },
        instruction: {
          en: "Match the signal!",
          zh: "é…å°æ­£ç¢ºçš„è¨Šè™Ÿï¼",
          ja: "æ­£ã—ã„ä¿¡å·ã‚’åˆã‚ã›ã¦ãã ã•ã„ï¼",
          ko: "ì‹ í˜¸ë¥¼ ë§ì¶”ì„¸ìš”!",
          es: "Â¡Empareja la seÃ±al!",
          de: "Ordne das Signal zu!",
          fi: "YhdistÃ¤ merkki!",
          fr: "Associez le signal !",
          ar: "Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø¥Ø´Ø§Ø±Ø©!",
          it: "Abbina il segnale!",
        },

        t1: {
          en: "T1 Standby",
          zh: "ä¸€è™Ÿæˆ’å‚™è¨Šè™Ÿ",
          ja: "T1 è­¦æˆ’",
          ko: "T1 ëŒ€ê¸°",
          es: "T1 Espera",
          de: "T1 Bereitschaft",
          fi: "T1 Valmiustila",
          fr: "T1 Veille",
          ar: "T1 Ø§Ø³ØªØ¹Ø¯Ø§Ø¯",
          it: "T1 Standby",
        },
        t3: {
          en: "T3 Strong Wind",
          zh: "ä¸‰è™Ÿå¼·é¢¨è¨Šè™Ÿ",
          ja: "T3 å¼·é¢¨",
          ko: "T3 ê°•í’",
          es: "T3 Viento Fuerte",
          de: "T3 Starker Wind",
          fi: "T3 Kova tuuli",
          fr: "T3 Vent fort",
          ar: "T3 Ø±ÙŠØ§Ø­ Ù‚ÙˆÙŠØ©",
          it: "T3 Vento Forte",
        },
        t8: {
          en: "T8 Gale or Storm",
          zh: "å…«è™Ÿçƒˆé¢¨æˆ–æš´é¢¨è¨Šè™Ÿ",
          ja: "T8 æš´é¢¨",
          ko: "T8 ê°•í’ ë˜ëŠ” í­í’",
          es: "T8 Vendaval o Tormenta",
          de: "T8 Sturm",
          fi: "T8 Myrsky",
          fr: "T8 coup de vent ou tempÃªte",
          ar: "T8 Ø¹Ø§ØµÙØ©",
          it: "T8 Burrasca o Tempesta",
        },

        amber: {
          en: "Amber Rain",
          zh: "é»ƒè‰²æš´é›¨",
          ja: "é»„è‰²è±ªé›¨",
          ko: "í™©ìƒ‰ í˜¸ìš°",
          es: "Lluvia Ãmbar",
          de: "Gelber Regen",
          fi: "Keltainen sade",
          fr: "Pluie ambrÃ©e",
          ar: "Ù…Ø·Ø± ÙƒÙ‡Ø±Ù…Ø§Ù†ÙŠ",
          it: "Pioggia Ambra",
        },
        red: {
          en: "Red Rain",
          zh: "ç´…è‰²æš´é›¨",
          ja: "èµ¤è‰²è±ªé›¨",
          ko: "ì ìƒ‰ í˜¸ìš°",
          es: "Lluvia Roja",
          de: "Roter Regen",
          fi: "Punainen sade",
          fr: "Pluie rouge",
          ar: "Ù…Ø·Ø± Ø£Ø­Ù…Ø±",
          it: "Pioggia Rossa",
        },
        black: {
          en: "Black Rain",
          zh: "é»‘è‰²æš´é›¨",
          ja: "é»’è‰²è±ªé›¨",
          ko: "í‘ìƒ‰ í˜¸ìš°",
          es: "Lluvia Negra",
          de: "Schwarzer Regen",
          fi: "Musta sade",
          fr: "Pluie noire",
          ar: "Ù…Ø·Ø± Ø£Ø³ÙˆØ¯",
          it: "Pioggia Nera",
        },

        hot: {
          en: "Very Hot",
          zh: "é…·ç†±å¤©æ°£",
          ja: "çŒ›æš‘",
          ko: "ë§¤ìš° ë”ì›€",
          es: "Muy Caliente",
          de: "Sehr heiÃŸ",
          fi: "Todella kuuma",
          fr: "TrÃ¨s chaud",
          ar: "Ø­Ø§Ø± Ø¬Ø¯Ø§",
          it: "Molto Caldo",
        },
        cold: {
          en: "Cold",
          zh: "å¯’å†·å¤©æ°£",
          ja: "å¯’å†·",
          ko: "ì¶”ì›€",
          es: "FrÃ­o",
          de: "Kalt",
          fi: "KylmÃ¤",
          fr: "Froid",
          ar: "Ø¨Ø§Ø±Ø¯",
          it: "Freddo",
        },
        thunder: {
          en: "Thunderstorm",
          zh: "é›·æš´",
          ja: "é›·é›¨",
          ko: "ë‡Œìš°",
          es: "Tormenta elÃ©ctrica",
          de: "Gewitter",
          fi: "Ukkosmyrsky",
          fr: "Orage",
          ar: "Ø¹Ø§ØµÙØ© Ø±Ø¹Ø¯ÙŠØ©",
          it: "Temporale",
        },

        desc_t1: {
          en: "Typhoon is near",
          zh: "é¢±é¢¨æ¥è¿‘",
          ja: "å°é¢¨ãŒè¿‘ã¥ã„ã¦ã„ã¾ã™",
          ko: "íƒœí’ì´ ì ‘ê·¼ ì¤‘ì…ë‹ˆë‹¤",
          es: "El tifÃ³n estÃ¡ cerca",
          de: "Taifun ist nah",
          fi: "Taifuuni on lÃ¤hellÃ¤",
          fr: "Le typhon est proche",
          ar: "Ø§Ù„Ø¥Ø¹ØµØ§Ø± Ù‚Ø±ÙŠØ¨",
          it: "Il tifone Ã¨ vicino",
        },
        desc_t3: {
          en: "Wind is strong",
          zh: "é¢¨å‹¢å¢å¼·",
          ja: "é¢¨ãŒå¼·ã„",
          ko: "ë°”ëŒì´ ê°•í•©ë‹ˆë‹¤",
          es: "El viento es fuerte",
          de: "Wind ist stark",
          fi: "Tuuli on voimakas",
          fr: "Le vent est fort",
          ar: "Ø§Ù„Ø±ÙŠØ§Ø­ Ù‚ÙˆÙŠØ©",
          it: "Il vento Ã¨ forte",
        },
        desc_t8: {
          en: "No school/work",
          zh: "åœèª²åœå·¥",
          ja: "å­¦æ ¡ãƒ»ä»•äº‹ä¼‘ã¿",
          ko: "íœ´êµ/íœ´ë¬´",
          es: "Sin escuela/trabajo",
          de: "Keine Schule/Arbeit",
          fi: "Ei koulua/tÃ¶itÃ¤",
          fr: "Pas d'Ã©cole/travail",
          ar: "Ù„Ø§ Ù…Ø¯Ø±Ø³Ø©/Ø¹Ù…Ù„",
          it: "Niente scuola/lavoro",
        },

        desc_amber: {
          en: "Heavy rain",
          zh: "å¤§é›¨",
          ja: "å¤§é›¨",
          ko: "í­ìš°",
          es: "Lluvia fuerte",
          de: "Starker Regen",
          fi: "Rankkasade",
          fr: "Forte pluie",
          ar: "Ù…Ø·Ø± ØºØ²ÙŠØ±",
          it: "Pioggia forte",
        },
        desc_red: {
          en: "Very heavy rain",
          zh: "å¾ˆå¤§é›¨",
          ja: "æ¿€ã—ã„é›¨",
          ko: "ë§¤ìš° ë§ì€ ë¹„",
          es: "Lluvia muy fuerte",
          de: "Sehr starker Regen",
          fi: "ErittÃ¤in rankkasade",
          fr: "Pluie trÃ¨s forte",
          ar: "Ù…Ø·Ø± ØºØ²ÙŠØ± Ø¬Ø¯Ø§",
          it: "Pioggia molto forte",
        },
        desc_black: {
          en: "Dangerous rain",
          zh: "æ¥µå¤§é›¨",
          ja: "å±é™ºãªé›¨",
          ko: "ìœ„í—˜í•œ ë¹„",
          es: "Lluvia peligrosa",
          de: "GefÃ¤hrlicher Regen",
          fi: "Vaarallinen sade",
          fr: "Pluie dangereuse",
          ar: "Ù…Ø·Ø± Ø®Ø·ÙŠØ±",
          it: "Pioggia pericolosa",
        },

        desc_hot: {
          en: "Drink water",
          zh: "å¤šå–æ°´",
          ja: "æ°´ã‚’é£²ã‚€",
          ko: "ë¬¼ì„ ë§ˆì‹œì„¸ìš”",
          es: "Bebe agua",
          de: "Trink Wasser",
          fi: "Juo vettÃ¤",
          fr: "Buvez de l'eau",
          ar: "Ø§Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡",
          it: "Bevi acqua",
        },
        desc_cold: {
          en: "Wear warm clothes",
          zh: "å¤šç©¿è¡£æœ",
          ja: "æš–ã‹ã„æœã‚’ç€ã‚‹",
          ko: "ë”°ëœ»í•˜ê²Œ ì…ìœ¼ì„¸ìš”",
          es: "Usa ropa abrigada",
          de: "Zieh warme Kleidung an",
          fi: "Pukeudu lÃ¤mpimÃ¤sti",
          fr: "Portez des vÃªtements chauds",
          ar: "Ø§Ø±ØªØ¯ Ù…Ù„Ø§Ø¨Ø³ Ø¯Ø§ÙØ¦Ø©",
          it: "Indossa vestiti caldi",
        },
        desc_thunder: {
          en: "Stay indoors",
          zh: "ç•™åœ¨å®¤å…§",
          ja: "å±‹å†…ã«ç•™ã¾ã‚‹",
          ko: "ì‹¤ë‚´ì— ë¨¸ë¬´ì„¸ìš”",
          es: "QuÃ©date adentro",
          de: "Bleib drinnen",
          fi: "Pysy sisÃ¤llÃ¤",
          fr: "Restez Ã  l'intÃ©rieur",
          ar: "Ø§Ø¨Ù‚ ÙÙŠ Ø§Ù„Ø¯Ø§Ø®Ù„",
          it: "Rimani al chiuso",
        },

        correct: {
          en: "Correct!",
          zh: "æ­£ç¢ºï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µì…ë‹ˆë‹¤!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        wrong: {
          en: "Wrong Signal!",
          zh: "éŒ¯èª¤è¨Šè™Ÿï¼",
          ja: "é–“é•ã£ãŸä¿¡å·ï¼",
          ko: "ì˜ëª»ëœ ì‹ í˜¸!",
          es: "Â¡SeÃ±al incorrecta!",
          de: "Falsches Signal!",
          fi: "VÃ¤Ã¤rÃ¤ merkki!",
          fr: "Mauvais signal !",
          ar: "Ø¥Ø´Ø§Ø±Ø© Ø®Ø§Ø·Ø¦Ø©!",
          it: "Segnale errato!",
        },
        completed: {
          en: "Weather Expert!",
          zh: "å¤©æ°£å°å°ˆå®¶ï¼",
          ja: "ãŠå¤©æ°—ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆï¼",
          ko: "ë‚ ì”¨ ì „ë¬¸ê°€!",
          es: "Â¡Experto en Clima!",
          de: "Wetterexperte!",
          fi: "SÃ¤Ã¤asiantuntija!",
          fr: "Expert mÃ©tÃ©o !",
          ar: "Ø®Ø¨ÙŠØ± Ø§Ù„Ø·Ù‚Ø³!",
          it: "Esperto Meteo!",
        },
        reset: {
          en: "Play Again",
          zh: "å†ç©ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          ko: "ë‹¤ì‹œ í•˜ê¸°",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Gioca di Nuovo",
        },
      };

      // Simplified visuals for signals using text/emoji/color blocks to simulate HK Observatory icons
      const signals = [
        {
          id: "t1",
          type: "typhoon",
          color: "bg-white text-black",
          label: "1",
          shape: "T",
        },
        {
          id: "t3",
          type: "typhoon",
          color: "bg-white text-black",
          label: "3",
          shape: "T",
        },
        {
          id: "t8",
          type: "typhoon",
          color: "bg-white text-black",
          label: "8",
          shape: "T",
        },

        {
          id: "amber",
          type: "rain",
          color: "bg-yellow-400 text-black",
          label: "ğŸŒ§ï¸",
          shape: "Box",
        },
        {
          id: "red",
          type: "rain",
          color: "bg-red-500 text-white",
          label: "ğŸŒ§ï¸",
          shape: "Box",
        },
        {
          id: "black",
          type: "rain",
          color: "bg-black text-white border-2 border-white",
          label: "ğŸŒ§ï¸",
          shape: "Box",
        },

        {
          id: "hot",
          type: "temp",
          color: "bg-red-600 text-yellow-300",
          label: "H",
          shape: "Circle",
        }, // H for Hot (Simulated)
        {
          id: "cold",
          type: "temp",
          color: "bg-blue-600 text-white",
          label: "C",
          shape: "Circle",
        }, // C for Cold
        {
          id: "thunder",
          type: "other",
          color: "bg-yellow-500 text-black",
          label: "âš¡",
          shape: "Triangle",
        },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [current, setCurrent] = useState(null);
        const [feedback, setFeedback] = useState(null);
        const [options, setOptions] = useState([]);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...signals].sort(() => Math.random() - 0.5);
          setQueue(q);
          nextRound(q[0]);
        };

        const nextRound = (target) => {
          if (!target) {
            setCurrent(null);
            return;
          }
          setCurrent(target);
          setFeedback(null);

          // Generate options: target + 3 random distractors
          const distractors = signals
            .filter((s) => s.id !== target.id)
            .sort(() => Math.random() - 0.5)
            .slice(0, 3);
          const opts = [target, ...distractors].sort(() => Math.random() - 0.5);
          setOptions(opts);
        };

        const handleChoice = (opt) => {
          if (feedback) return;
          if (opt.id === current.id) {
            setFeedback("correct");
            setTimeout(() => {
              const nextIdx = queue.indexOf(current) + 1;
              if (nextIdx < queue.length) nextRound(queue[nextIdx]);
              else setCurrent(null);
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-yellow-300 mb-4 mt-8 drop-shadow-md">
              âš ï¸ {getText("title")}
            </h1>

            {current ? (
              <div className="w-full max-w-2xl flex flex-col items-center flex-1 justify-center relatives">
                {/* Prompt Card */}
                <div className="bg-white p-8 rounded-3xl shadow-2xl border-b-8 border-slate-300 w-full text-center mb-8 relative z-10">
                  <h2 className="text-4xl font-black text-slate-800 mb-2">
                    {getText(current.id)}
                  </h2>
                  <p className="text-xl text-slate-500 font-bold bg-slate-100 py-2 px-4 rounded-full inline-block">
                    {getText(`desc_${current.id}`)}
                  </p>

                  {feedback && (
                    <div
                      className={`absolute inset-0 bg-white/95 flex items-center justify-center text-4xl font-black rounded-3xl ${
                        feedback === "correct"
                          ? "text-green-600"
                          : "text-red-500"
                      }`}
                    >
                      {getText(feedback)}
                    </div>
                  )}
                </div>

                {/* Options Grid */}
                <div className="grid grid-cols-2 gap-6 w-full">
                  {options.map((opt) => (
                    <button
                      key={opt.id}
                      onClick={() => handleChoice(opt)}
                      className="bg-white/10 backdrop-blur-sm p-4 rounded-xl border-4 border-white/20 hover:bg-white/20 hover:scale-105 active:scale-95 transition-all flex flex-col items-center justify-center shadow-lg group"
                    >
                      {/* Signal Icon Simulation */}
                      <div
                        className={`w-28 h-28 flex items-center justify-center font-black text-6xl shadow-xl 
                                    ${
                                      opt.shape === "T"
                                        ? "border-4 border-black"
                                        : opt.shape === "Circle"
                                        ? "rounded-full"
                                        : "rounded-lg"
                                    }
                                    ${opt.color}
                                `}
                      >
                        {opt.label}
                      </div>
                    </button>
                  ))}
                </div>
              </div>
            ) : (
              <div className="bg-white/90 p-12 rounded-3xl shadow-xl text-center mt-20">
                <div className="text-8xl mb-4">ğŸŒªï¸</div>
                <h2 className="text-3xl font-black text-slate-800 mb-6">
                  {getText("completed")}
                </h2>
                <button
                  onClick={initGame}
                  className="bg-blue-600 text-white px-10 py-4 rounded-full font-black text-xl hover:bg-blue-700 shadow-xl"
                >
                  {getText("reset")} ğŸ”„
                </button>
              </div>
            )}

            <p className="font-bold text-white/80 mt-8 mb-4">
              {getText("instruction")}
            </p>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
