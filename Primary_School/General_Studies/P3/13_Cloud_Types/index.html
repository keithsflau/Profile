<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏âÂ∏∏Ë≠òÔºöÈõ≤ÁöÑÂΩ¢ÁãÄ | Cloud Types</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: radial-gradient(circle at center, #7dd3fc 0%, #0284c7 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Cloud Watcher",
          zh: "Èõ≤ÁöÑËßÄÂØüÂì°",
          ja: "Èõ≤„ÅÆË¶≥ÂØü",
          ko: "Íµ¨Î¶Ñ Í¥ÄÏ∞∞Ïûê",
          es: "Observador de Nubes",
          de: "Wolkenbeobachter",
          fi: "Pilvibongari",
          fr: "Observateur de nuages",
          ar: "ŸÖÿ±ÿßŸÇÿ® ÿßŸÑÿ≥ÿ≠ÿ®",
          it: "Osservatore di Nuvole",
        },
        instruction: {
          en: "What weather comes next?",
          zh: "ÈÄôÈ†êÁ§∫ÁîöÈ∫ºÂ§©Ê∞£Ôºü",
          ja: "Ê¨°„ÅØ„Å©„Çì„Å™Â§©Ê∞óÔºü",
          ko: "Îã§Ïùå ÎÇ†Ïî®Îäî Ïñ¥Îñ®ÍπåÏöî?",
          es: "¬øQu√© clima viene despu√©s?",
          de: "Welches Wetter kommt als n√§chstes?",
          fi: "Millainen s√§√§ tulee seuraavaksi?",
          fr: "Quel temps fera-t-il ensuite ?",
          ar: "ŸÖÿß ŸáŸà ÿßŸÑÿ∑ŸÇÿ≥ ÿßŸÑŸÇÿßÿØŸÖÿü",
          it: "Che tempo far√† dopo?",
        },

        cumulus: {
          en: "Cumulus (Fluffy)",
          zh: "Á©çÈõ≤ (Ê£âËä±ÁãÄ)",
          ja: "Á©çÈõ≤ („Åµ„Çè„Åµ„Çè)",
          ko: "Ï†ÅÏö¥ (ÏÜúÌÑ∏)",
          es: "C√∫mulo (Esponjoso)",
          de: "Kumulus (Flauschig)",
          fi: "Kumpupilvi (Pehme√§)",
          fr: "Cumulus (Duveteux)",
          ar: "ÿ±ŸÇŸÜŸä (ÿ±ŸÇŸäŸÇ)",
          it: "Cumulo (Soffice)",
        },
        stratus: {
          en: "Stratus (Flat)",
          zh: "Â±§Èõ≤ (Â±§ÁãÄ)",
          ja: "Â±§Èõ≤ (Âπ≥„Çâ)",
          ko: "Ï∏µÏö¥ (ÌèâÌèâÌï®)",
          es: "Estrato (Plano)",
          de: "Stratus (Flach)",
          fi: "Kerrospilvi (Tasainen)",
          fr: "Stratus (Plat)",
          ar: "ÿ±Ÿáÿ¨ (ŸÖÿ≥ÿ∑ÿ≠)",
          it: "Strato (Piatto)",
        },
        nimbus: {
          en: "Nimbus (Dark/Rain)",
          zh: "Èõ®Èõ≤ (Ê∑±ÁÅ∞Ëâ≤)",
          ja: "‰π±Â±§Èõ≤ (Êöó„ÅÑ/Èõ®)",
          ko: "ÎÇúÏ∏µÏö¥ (Ïñ¥ÎëêÏõÄ/ÎπÑ)",
          es: "Nimbo (Oscuro/Lluvia)",
          de: "Nimbus (Dunkel/Regen)",
          fi: "Sadepilvi (Tumma/Sade)",
          fr: "Nimbus (Sombre/Pluie)",
          ar: "ŸÖÿ≤ŸÜ (ŸÖÿ∏ŸÑŸÖ/ŸÖÿ∑ÿ±)",
          it: "Nembo (Scuro/Pioggia)",
        },
        wispy: {
          en: "Cirrus (Wispy)",
          zh: "Âç∑Èõ≤ (ÁæΩÊØõÁãÄ)",
          ja: "Â∑ªÈõ≤ (ËñÑ„ÅÑ)",
          ko: "Í∂åÏö¥ (ÏÉàÌÑ∏)",
          es: "Cirro (Tenue)",
          de: "Cirrus (Federwolke)",
          fi: "Yl√§pilvi (Hento)",
          fr: "Cirrus (Vaporeux)",
          ar: "ÿ≥ŸÖÿ≠ÿßŸÇ (ÿ±ŸÇŸäŸÇ)",
          it: "Cirro (Tenue)",
        },

        sunny: {
          en: "Sunny / Fair",
          zh: "Â§©Êô¥ / ËâØÂ•Ω",
          ja: "Êô¥„Çå / ËâØÂ•Ω",
          ko: "ÎßëÏùå / Ï¢ãÏùå",
          es: "Soleado / Bueno",
          de: "Sonnig / Heiter",
          fi: "Aurinkoinen / Selke√§",
          fr: "Ensoleill√© / Beau",
          ar: "ŸÖÿ¥ŸÖÿ≥ / ÿµÿ≠Ÿà",
          it: "Soleggiato / Sereno",
        },
        overcast: {
          en: "Cloudy / Gloomy",
          zh: "Èô∞Â§© / ÁÅ∞Êöó",
          ja: "Êõá„Çä / „Å©„Çì„Çà„Çä",
          ko: "ÌùêÎ¶º / Ïö∞Ïö∏",
          es: "Nublado / Sombr√≠o",
          de: "Bew√∂lkt / Tr√ºb",
          fi: "Pilvinen / Synkk√§",
          fr: "Nuageux / Sombre",
          ar: "ÿ∫ÿßÿ¶ŸÖ / ŸÉÿ¶Ÿäÿ®",
          it: "Nuvoloso / Cupo",
        },
        rain: {
          en: "Rain / Storm",
          zh: "‰∏ãÈõ® / Âõ†ÁÇ∫",
          ja: "Èõ® / Âµê",
          ko: "ÎπÑ / Ìè≠Ìíç",
          es: "Lluvia / Tormenta",
          de: "Regen / Sturm",
          fi: "Sade / Myrsky",
          fr: "Pluie / Temp√™te",
          ar: "ŸÖÿ∑ÿ± / ÿπÿßÿµŸÅÿ©",
          it: "Pioggia / Tempesta",
        },
        windy: {
          en: "Faire / Windy",
          zh: "Êô¥Êúó / ÊúâÈ¢®",
          ja: "Êô¥„Çå / È¢®",
          ko: "ÎßëÏùå / Î∞îÎûå",
          es: "Bueno / Ventoso",
          de: "Heiter / Windig",
          fi: "Selke√§ / Tuulinen",
          fr: "Beau / Vent√©",
          ar: "ÿµÿ≠Ÿà / ÿπÿßÿµŸÅ",
          it: "Sereno / Ventoso",
        },

        correct: {
          en: "Correct!",
          zh: "ËßÄÂØüÊ≠£Á¢∫ÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµÏûÖÎãàÎã§!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "ÂÜçÁúãÊ∏ÖÊ•öÔºÅ",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë¶ã„Å¶ÔºÅ",
          ko: "Îã§Ïãú Î≥¥ÏÑ∏Ïöî!",
          es: "¬°Int√©ntalo de nuevo!",
          de: "Versuch es nochmal!",
          fi: "Yrit√§ uudelleen!",
          fr: "R√©essayez !",
          ar: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ!",
          it: "Riprova!",
        },
        completed: {
          en: "Sky Expert!",
          zh: "Â§©Á©∫Â∞àÂÆ∂ÔºÅ",
          ja: "Á©∫„ÅÆ„Ç®„Ç≠„Çπ„Éë„Éº„ÉàÔºÅ",
          ko: "ÌïòÎäò Ï†ÑÎ¨∏Í∞Ä!",
          es: "¬°Experto del Cielo!",
          de: "Himmelsexperte!",
          fi: "Taivasasiantuntija!",
          fr: "Expert du ciel !",
          ar: "ÿÆÿ®Ÿäÿ± ÿßŸÑÿ≥ŸÖÿßÿ°!",
          it: "Esperto del Cielo!",
        },
        reset: {
          en: "Watch Again",
          zh: "ÂÜçËßÄÂØü",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë¶≥ÂØü",
          ko: "Îã§Ïãú Í¥ÄÏ∞∞ÌïòÍ∏∞",
          es: "Observar de Nuevo",
          de: "Nochmal beobachten",
          fi: "Katso uudelleen",
          fr: "Observer √† nouveau",
          ar: "ÿ¥ÿßŸáÿØ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Guarda di Nuovo",
        },
      };

      const clouds = [
        {
          id: "cumulus",
          shape: "‚òÅÔ∏è",
          color: "text-white",
          type: "sunny",
          size: "text-9xl scale-125",
        },
        {
          id: "nimbus",
          shape: "‚òÅÔ∏è",
          color: "text-slate-600",
          type: "rain",
          size: "text-[10rem]",
        }, // Dark
        {
          id: "stratus",
          shape: "üå´Ô∏è",
          color: "text-slate-300",
          type: "overcast",
          size: "text-9xl scale-x-150",
        }, // Flat
        {
          id: "wispy",
          shape: "„Ä∞Ô∏è",
          color: "text-white opacity-80",
          type: "windy",
          size: "text-8xl rotate-12",
        }, // Wispy simulation
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [target, setTarget] = useState(null);
        const [feedback, setFeedback] = useState(null);
        const [score, setScore] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          newCloud();
        }, []);

        const newCloud = () => {
          const c = clouds[Math.floor(Math.random() * clouds.length)];
          setTarget(c);
          setFeedback(null);
        };

        const handleGuess = (weatherType) => {
          if (feedback) return;

          if (weatherType === target.type) {
            setFeedback("correct");
            setScore((s) => s + 1);
            setTimeout(newCloud, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden cursor-default">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-white mb-2 mt-8 drop-shadow-md">
              üå§Ô∏è {getText("title")}
            </h1>

            <div className="font-bold text-white mb-8 bg-sky-900/30 px-6 py-1 rounded-full">
              {getText("instruction")}
            </div>

            {target && (
              <div className="flex-1 w-full max-w-4xl flex flex-col items-center">
                {/* Sky Viewport */}
                <div className="relative w-full aspect-video bg-sky-300 rounded-[3rem] shadow-inner border-8 border-white overflow-hidden mb-8 flex items-center justify-center">
                  {/* Sun (Conditional) */}
                  {(target.type === "sunny" || target.type === "windy") && (
                    <div className="absolute top-8 right-8 text-yellow-300 text-6xl animate-spin-slow">
                      ‚òÄÔ∏è
                    </div>
                  )}

                  {/* The Cloud */}
                  <motion.div
                    key={target.id + score} // Remount on new
                    initial={{ x: -200, opacity: 0 }}
                    animate={{ x: 0, opacity: 1 }}
                    className={`${target.size} ${target.color} drop-shadow-xl select-none`}
                  >
                    {target.shape}
                  </motion.div>

                  {/* Rain FX */}
                  {target.type === "rain" && (
                    <div className="absolute inset-0 bg-slate-900/20 pointer-events-none flex flex-col items-center justify-center pt-32">
                      <div className="text-4xl animate-bounce text-blue-300">
                        üíß üíß üíß
                      </div>
                    </div>
                  )}

                  {feedback && (
                    <div
                      className={`absolute inset-0 flex items-center justify-center z-20`}
                    >
                      <motion.div
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        className={`px-8 py-4 rounded-3xl font-black text-3xl shadow-2xl ${
                          feedback === "correct"
                            ? "bg-green-500 text-white"
                            : "bg-red-500 text-white"
                        }`}
                      >
                        {getText(feedback)}
                      </motion.div>
                    </div>
                  )}
                </div>

                {/* Controls */}
                <div className="w-full bg-white/10 backdrop-blur-md rounded-3xl p-6 border-2 border-white/20">
                  <div className="flex items-center justify-between mb-4">
                    <span className="text-white font-bold opacity-80">
                      {getText(target.id)}
                    </span>
                    <span className="bg-white/20 text-white px-3 py-1 rounded-full font-mono font-bold">
                      Score: {score}
                    </span>
                  </div>

                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    {[
                      { id: "sunny", label: "sunny", icon: "‚òÄÔ∏è" },
                      { id: "overcast", label: "overcast", icon: "‚òÅÔ∏è" },
                      { id: "rain", label: "rain", icon: "üåßÔ∏è" },
                      { id: "windy", label: "windy", icon: "üçÉ" },
                    ].map((opt) => (
                      <button
                        key={opt.id}
                        onClick={() => handleGuess(opt.id)}
                        disabled={feedback}
                        className="bg-white hover:bg-sky-50 active:scale-95 transition-all text-sky-800 rounded-xl py-4 font-bold shadow-lg flex flex-col items-center"
                      >
                        <span className="text-3xl mb-2">{opt.icon}</span>
                        <span className="text-sm leading-tight">
                          {getText(opt.label)}
                        </span>
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
