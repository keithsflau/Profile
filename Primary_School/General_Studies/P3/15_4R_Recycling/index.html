<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸‰å¸¸è­˜ï¼šç’°ä¿ 4R | 4R Recycling</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: radial-gradient(circle at center, #86efac 0%, #15803d 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "4R Challenge",
          zh: "ç’°ä¿ 4R æŒ‘æˆ°",
          ja: "4Rãƒãƒ£ãƒ¬ãƒ³ã‚¸",
          ko: "4R ì±Œë¦°ì§€",
          es: "DesafÃ­o 4R",
          de: "4R-Herausforderung",
          fi: "4R-haaste",
          fr: "DÃ©fi 4R",
          ar: "ØªØ­Ø¯ÙŠ 4R",
          it: "Sfida 4R",
        },
        instruction: {
          en: "Which R is this?",
          zh: "é€™æ˜¯å“ªä¸€å€‹ Rï¼Ÿ",
          ja: "ã“ã‚Œã¯ã©ã®Rã§ã™ã‹ï¼Ÿ",
          ko: "ì–´ë–¤ Rì¸ê°€ìš”?",
          es: "Â¿QuÃ© R es esta?",
          de: "Welches R ist das?",
          fi: "MikÃ¤ R tÃ¤mÃ¤ on?",
          fr: "Quel R est-ce ?",
          ar: "Ø£ÙŠ R Ù‡Ø°Ø§ØŸ",
          it: "Quale R Ã¨ questa?",
        },

        reduce: {
          en: "Reduce",
          zh: "æ¸›å°‘ä½¿ç”¨",
          ja: "ãƒªãƒ‡ãƒ¥ãƒ¼ã‚¹ (æ¸›ã‚‰ã™)",
          ko: "ì ˆì•½ (Reduce)",
          es: "Reducir",
          de: "Reduzieren",
          fi: "VÃ¤hennÃ¤",
          fr: "RÃ©duire",
          ar: "ØªÙ‚Ù„ÙŠÙ„",
          it: "Ridurre",
        },
        reuse: {
          en: "Reuse",
          zh: "ç‰©ç›¡å…¶ç”¨",
          ja: "ãƒªãƒ¦ãƒ¼ã‚¹ (å†åˆ©ç”¨)",
          ko: "ì¬ì‚¬ìš© (Reuse)",
          es: "Reutilizar",
          de: "Wiederverwenden",
          fi: "KÃ¤ytÃ¤ uudelleen",
          fr: "RÃ©utiliser",
          ar: "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…",
          it: "Riutilizzare",
        },
        recycle: {
          en: "Recycle",
          zh: "å¾ªç’°å†é€ ",
          ja: "ãƒªã‚µã‚¤ã‚¯ãƒ« (å†ç”Ÿåˆ©ç”¨)",
          ko: "ì¬í™œìš© (Recycle)",
          es: "Reciclar",
          de: "Recyceln",
          fi: "KierrÃ¤tÃ¤",
          fr: "Recycler",
          ar: "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±",
          it: "Riciclare",
        },
        replace: {
          en: "Replace",
          zh: "æ›¿ä»£ä½¿ç”¨",
          ja: "ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ (ä»£æ›¿)",
          ko: "ëŒ€ì²´ (Replace)",
          es: "Reemplazar",
          de: "Ersetzen",
          fi: "Korvaa",
          fr: "Remplacer",
          ar: "Ø§Ø³ØªØ¨Ø¯Ø§Ù„",
          it: "Sostituire",
        },

        desc_reduce: {
          en: "Buy less, waste less",
          zh: "å°‘è²·ï¼Œå°‘æµªè²»",
          ja: "ç„¡é§„ã‚’æ¸›ã‚‰ã™",
          ko: "ì ê²Œ ì‚¬ê³  ë‚­ë¹„ ì¤„ì´ê¸°",
          es: "Compra menos, desperdicia menos",
          de: "Kaufe weniger, verschwende weniger",
          fi: "Osta vÃ¤hemmÃ¤n, tuhlaa vÃ¤hemmÃ¤n",
          fr: "Achetez moins, gaspillez moins",
          ar: "Ø§Ø´ØªØ±ÙŠ Ø£Ù‚Ù„ØŒ Ø£Ù‡Ø¯Ø± Ø£Ù‚Ù„",
          it: "Compra meno, spreca meno",
        },
        desc_reuse: {
          en: "Use it again",
          zh: "é‡è¤‡ä½¿ç”¨",
          ja: "ã‚‚ã†ä¸€åº¦ä½¿ã†",
          ko: "ë‹¤ì‹œ ì‚¬ìš©í•˜ê¸°",
          es: "Ãšsalo de nuevo",
          de: "Benutze es wieder",
          fi: "KÃ¤ytÃ¤ uudelleen",
          fr: "Utilisez-le Ã  nouveau",
          ar: "Ø§Ø³ØªØ®Ø¯Ù…Ù‡ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Usalo di nuovo",
        },
        desc_recycle: {
          en: "Make into new things",
          zh: "è£½æˆæ–°ç‰©å“",
          ja: "æ–°ã—ã„ã‚‚ã®ã«å¤‰ãˆã‚‹",
          ko: "ìƒˆë¡œìš´ ë¬¼ê±´ìœ¼ë¡œ ë§Œë“¤ê¸°",
          es: "Convertir en cosas nuevas",
          de: "Zu neuen Dingen machen",
          fi: "Tee uusiksi asioiksi",
          fr: "Faire de nouvelles choses",
          ar: "ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø£Ø´ÙŠØ§Ø¡ Ø¬Ø¯ÙŠØ¯Ø©",
          it: "Trasforma in cose nuove",
        },
        desc_replace: {
          en: "Use eco-friendly items",
          zh: "ç”¨ç’°ä¿ç”¢å“ä»£æ›¿",
          ja: "ç’°å¢ƒã«å„ªã—ã„ã‚‚ã®ã‚’ä½¿ã†",
          ko: "ì¹œí™˜ê²½ ì œí’ˆ ì‚¬ìš©í•˜ê¸°",
          es: "Usa artÃ­culos ecolÃ³gicos",
          de: "Benutze umweltfreundliche Artikel",
          fi: "KÃ¤ytÃ¤ ympÃ¤ristÃ¶ystÃ¤vÃ¤llisiÃ¤ tuotteita",
          fr: "Utilisez des articles Ã©cologiques",
          ar: "Ø§Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ§Ø¯ ØµØ¯ÙŠÙ‚Ø© Ù„Ù„Ø¨ÙŠØ¦Ø©",
          it: "Usa articoli ecologici",
        },

        // Items
        item_towel: {
          en: "Handkerchief instead of Tissue",
          zh: "ç”¨æ‰‹å¸•ä»£æ›¿ç´™å·¾",
          ja: "ãƒ†ã‚£ãƒƒã‚·ãƒ¥ã®ä»£ã‚ã‚Šã«ãƒãƒ³ã‚«ãƒ",
          ko: "í™”ì¥ì§€ ëŒ€ì‹  ì†ìˆ˜ê±´",
          es: "PaÃ±uelo en lugar de paÃ±uelo de papel",
          de: "Taschentuch statt Papiertuch",
          fi: "NenÃ¤liina paperiliinan sijaan",
          fr: "Mouchoir au lieu de mouchoir en papier",
          ar: "Ø§Ù„Ù…Ù†Ø¯ÙŠÙ„ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…Ù†Ø§Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ±Ù‚ÙŠØ©",
          it: "Fazzoletto invece di fazzoletto di carta",
        },
        item_bottle: {
          en: "Refill Water Bottle",
          zh: "è‡ªå‚™æ°´æ¨½",
          ja: "æ°´ç­’ã‚’æŒã¡æ­©ã",
          ko: "ë¬¼ë³‘ ë¦¬í•„",
          es: "Rellenar botella de agua",
          de: "Wasserflasche auffÃ¼llen",
          fi: "TÃ¤ytÃ¤ vesipullo",
          fr: "Remplir la bouteille d'eau",
          ar: "Ø¥Ø¹Ø§Ø¯Ø© Ù…Ù„Ø¡ Ø²Ø¬Ø§Ø¬Ø© Ø§Ù„Ù…Ø§Ø¡",
          it: "Riempi borraccia",
        },
        item_can: {
          en: "Aluminum Can",
          zh: "é‹ç½",
          ja: "ã‚¢ãƒ«ãƒŸç¼¶",
          ko: "ì•Œë£¨ë¯¸ëŠ„ ìº”",
          es: "Lata de aluminio",
          de: "Alu-Dose",
          fi: "AlumiinitÃ¶lkki",
          fr: "Canette en aluminium",
          ar: "Ø¹Ù„Ø¨Ø© Ø£Ù„ÙˆÙ…Ù†ÙŠÙˆÙ…",
          it: "Lattina di alluminio",
        },
        item_bag: {
          en: "Bring your own bag",
          zh: "è‡ªå‚™è³¼ç‰©è¢‹",
          ja: "ãƒã‚¤ãƒãƒƒã‚°ã‚’æŒå‚",
          ko: "ì¥ë°”êµ¬ë‹ˆ ê°€ì ¸ì˜¤ê¸°",
          es: "Trae tu propia bolsa",
          de: "Bringe deine eigene Tasche mit",
          fi: "Tuo oma kassi",
          fr: "Apportez votre propre sac",
          ar: "Ø£Ø­Ø¶Ø± Ø­Ù‚ÙŠØ¨ØªÙƒ Ø§Ù„Ø®Ø§ØµØ©",
          it: "Porta la tua borsa",
        },
        item_paper: {
          en: "Write on both sides",
          zh: "ç´™å¼µé›™é¢ç”¨",
          ja: "ä¸¡é¢ã«æ›¸ã",
          ko: "ì–‘ë©´ ì‚¬ìš©",
          es: "Escribir en ambos lados",
          de: "Auf beiden Seiten schreiben",
          fi: "Kirjoita molemmille puolille",
          fr: "Ã‰crire des deux cÃ´tÃ©s",
          ar: "Ø§ÙƒØªØ¨ Ø¹Ù„Ù‰ ÙƒÙ„Ø§ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠÙ†",
          it: "Scrivi su entrambi i lati",
        },
        item_plastic: {
          en: "Plastic Bottle -> Jersey",
          zh: "è† æ¨½ -> çƒè¡£",
          ja: "ãƒšãƒƒãƒˆãƒœãƒˆãƒ« -> ã‚¸ãƒ£ãƒ¼ã‚¸",
          ko: "í”Œë¼ìŠ¤í‹± ë³‘ -> ìš´ë™ë³µ",
          es: "Botella de plÃ¡stico -> Camiseta",
          de: "Plastikflasche -> Trikot",
          fi: "Muovipullo -> Paita",
          fr: "Bouteille en plastique -> Maillot",
          ar: "Ø²Ø¬Ø§Ø¬Ø© Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ© -> Ù‚Ù…ÙŠØµ",
          it: "Bottiglia di plastica -> Maglia",
        },
        item_donation: {
          en: "Donate old clothes",
          zh: "æè´ˆèˆŠè¡£",
          ja: "å¤ç€ã‚’å¯„ä»˜",
          ko: "í—Œ ì˜· ê¸°ë¶€",
          es: "Donar ropa vieja",
          de: "Alte Kleidung spenden",
          fi: "Lahjoita vanhat vaatteet",
          fr: "Donner de vieux vÃªtements",
          ar: "ØªØ¨Ø±Ø¹ Ø¨Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©",
          it: "Dona vecchi vestiti",
        },
        item_less: {
          en: "Buy only what you need",
          zh: "åªè²·éœ€è¦çš„æ±è¥¿",
          ja: "å¿…è¦ãªã‚‚ã®ã ã‘è²·ã†",
          ko: "í•„ìš”í•œ ê²ƒë§Œ ì‚¬ê¸°",
          es: "Compra solo lo que necesitas",
          de: "Kaufe nur was du brauchst",
          fi: "Osta vain mitÃ¤ tarvitset",
          fr: "Achetez seulement ce dont vous avez besoin",
          ar: "Ø§Ø´ØªØ±ÙŠ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ ÙÙ‚Ø·",
          it: "Compra solo ciÃ² di cui hai bisogno",
        },

        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µì…ë‹ˆë‹¤!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "å†è©¦ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦",
          ko: "ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          es: "IntÃ©ntalo de nuevo",
          de: "Versuch es nochmal",
          fi: "YritÃ¤ uudelleen",
          fr: "RÃ©essayez",
          ar: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Riprova",
        },
        completed: {
          en: "Green Hero!",
          zh: "ç’°ä¿å°å…ˆé‹’ï¼",
          ja: "ã‚¨ã‚³ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼",
          ko: "í™˜ê²½ ì˜ì›…!",
          es: "Â¡HÃ©roe Verde!",
          de: "Umweltheld!",
          fi: "VihreÃ¤ sankari!",
          fr: "HÃ©ros vert !",
          ar: "Ø¨Ø·Ù„ Ø£Ø®Ø¶Ø±!",
          it: "Eroe Verde!",
        },
        reset: {
          en: "Play Again",
          zh: "å†ç©ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          ko: "ë‹¤ì‹œ í•˜ê¸°",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Gioca di Nuovo",
        },
      };

      const categories = [
        { id: "reduce", color: "bg-red-500", icon: "ğŸ“‰" },
        { id: "reuse", color: "bg-yellow-500", icon: "ğŸ”„" },
        { id: "recycle", color: "bg-blue-500", icon: "â™»ï¸" },
        { id: "replace", color: "bg-green-500", icon: "ğŸŒ¿" },
      ];

      const items = [
        { id: "item_towel", type: "replace", icon: "ğŸ¤§â¡ï¸ğŸŸ©" },
        { id: "item_bottle", type: "reuse", icon: "ğŸš°" }, // Can be reuse or replace (disposable). Standard: Reuse
        { id: "item_can", type: "recycle", icon: "ğŸ¥«" },
        { id: "item_bag", type: "reduce", icon: "ğŸ›ï¸" }, // Reduce plastic bags usage
        { id: "item_paper", type: "reduce", icon: "ğŸ“„" }, // Also reuse. But Reduce waste is key. Let's strictly map for P3.
        { id: "item_plastic", type: "recycle", icon: "ğŸ‘•" },
        { id: "item_donation", type: "reuse", icon: "ğŸ‘š" },
        { id: "item_less", type: "reduce", icon: "ğŸ›’" },
      ];

      // Strict mapping overrides for clearer teaching
      // Reduce: Buy less, use less (Paper both sides, No plastic bag)
      // Reuse: Use again (Water bottle refill, Donate clothes)
      // Recycle: Blue/Brown/Yellow bins (Can, Plastic to Jersey)
      // Replace: Use X instead of Y (Handkerchief instead of tissue)

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [current, setCurrent] = useState(null);
        const [feedback, setFeedback] = useState(null);
        const [score, setScore] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...items].sort(() => Math.random() - 0.5);
          setQueue(q);
          setCurrent(q[0]);
          setScore(0);
          setFeedback(null);
        };

        const handleSort = (catId) => {
          if (feedback) return;

          if (current.type === catId) {
            setFeedback("correct");
            setScore((s) => s + 10);
            setTimeout(() => {
              setFeedback(null);
              const nextIdx = queue.indexOf(current) + 1;
              if (nextIdx < queue.length) setCurrent(queue[nextIdx]);
              else setCurrent(null);
            }, 800);
          } else {
            setFeedback("wrong");
            setScore((s) => Math.max(0, s - 5));
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-white mb-2 mt-8 drop-shadow-md z-10">
              â™»ï¸ {getText("title")}
            </h1>

            <div className="font-bold text-green-900 bg-white/60 px-6 py-2 rounded-full mb-6 text-xl">
              Score: {score}
            </div>

            {current ? (
              <div className="w-full max-w-4xl flex flex-col items-center flex-1 justify-center relative">
                {/* Item Card */}
                <div className="relative z-20 mb-8">
                  <motion.div
                    key={current.id}
                    initial={{ scale: 0, rotate: 180 }}
                    animate={{ scale: 1, rotate: 0 }}
                    exit={{ scale: 0 }}
                    className="bg-white p-10 rounded-[3rem] shadow-2xl border-8 border-green-200 flex flex-col items-center text-center w-80 h-80 justify-center"
                  >
                    <div className="text-8xl mb-4">{current.icon}</div>
                    <div className="text-2xl font-black text-slate-700 leading-tight">
                      {getText(current.id)}
                    </div>
                  </motion.div>

                  {feedback && (
                    <div
                      className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 px-6 py-4 rounded-3xl font-black text-3xl shadow-2xl whitespace-nowrap ${
                        feedback === "correct"
                          ? "bg-green-600 text-white"
                          : "bg-red-500 text-white"
                      }`}
                    >
                      {getText(feedback)}
                    </div>
                  )}
                </div>

                <p className="font-bold text-white mb-8 text-2xl drop-shadow-lg">
                  {getText("instruction")}
                </p>

                {/* Bins / Categories */}
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 w-full">
                  {categories.map((cat) => (
                    <button
                      key={cat.id}
                      onClick={() => handleSort(cat.id)}
                      className={`${cat.color} text-white rounded-2xl p-4 flex flex-col items-center shadow-lg hover:brightness-110 active:scale-95 transition-all border-b-8 border-black/20`}
                    >
                      <div className="text-5xl mb-2">{cat.icon}</div>
                      <div className="font-black text-xl md:text-2xl">
                        {getText(cat.id)}
                      </div>
                      <div className="text-xs md:text-sm font-bold opacity-80 mt-1 leading-tight text-center">
                        {getText(`desc_${cat.id}`)}
                      </div>
                    </button>
                  ))}
                </div>
              </div>
            ) : (
              <div className="bg-white/95 p-12 rounded-[3rem] shadow-2xl text-center mt-20 backdrop-blur-sm">
                <div className="text-8xl mb-4">ğŸŒ</div>
                <h2 className="text-4xl font-black text-green-700 mb-6">
                  {getText("completed")}
                </h2>
                <p className="text-2xl font-bold text-slate-600 mb-8">
                  Score: {score}
                </p>
                <button
                  onClick={initGame}
                  className="bg-green-600 text-white px-12 py-4 rounded-full font-black text-2xl hover:bg-green-700 shadow-xl"
                >
                  {getText("reset")} ğŸ”„
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
