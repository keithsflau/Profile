<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸‰å¸¸è­˜ï¼šç¤¾å€è¨­æ–½ | Community Facilities</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Community Facilities",
          zh: "ç¤¾å€è¨­æ–½",
          ja: "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ–½è¨­",
          ko: "ì§€ì—­ ì‹œì„¤",
          es: "Instalaciones Comunitarias",
          de: "Gemeinschaftseinrichtungen",
          fi: "Yhteiskunnan tilat",
          fr: "Installations communautaires",
          ar: "Ù…Ø±Ø§ÙÙ‚ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹",
          it: "Strutture Comunitarie",
        },
        instruction: {
          en: "Where should they go?",
          zh: "ä»–å€‘æ‡‰è©²å»å“ªè£¡ï¼Ÿ",
          ja: "å½¼ã‚‰ã¯ã©ã“ã«è¡Œãã¹ãã§ã™ã‹ï¼Ÿ",
          ko: "ê·¸ë“¤ì€ ì–´ë””ë¡œ ê°€ì•¼ í•©ë‹ˆê¹Œ?",
          es: "Â¿A dÃ³nde deberÃ­an ir?",
          de: "Wohin sollen sie gehen?",
          fi: "Minne heidÃ¤n pitÃ¤isi mennÃ¤?",
          fr: "OÃ¹ devraient-ils aller ?",
          ar: "Ø¥Ù„Ù‰ Ø£ÙŠÙ† ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ°Ù‡Ø¨ÙˆØ§ØŸ",
          it: "Dove dovrebbero andare?",
        },

        hospital: {
          en: "Hospital",
          zh: "é†«é™¢",
          ja: "ç—…é™¢",
          ko: "ë³‘ì›",
          es: "Hospital",
          de: "Krankenhaus",
          fi: "Sairaala",
          fr: "HÃ´pital",
          ar: "Ù…Ø³ØªØ´ÙÙ‰",
          it: "Ospedale",
        },
        library: {
          en: "Library",
          zh: "åœ–æ›¸é¤¨",
          ja: "å›³æ›¸é¤¨",
          ko: "ë„ì„œê´€",
          es: "Biblioteca",
          de: "Bibliothek",
          fi: "Kirjasto",
          fr: "BibliothÃ¨que",
          ar: "Ù…ÙƒØªØ¨Ø©",
          it: "Biblioteca",
        },
        post: {
          en: "Post Office",
          zh: "éƒµæ”¿å±€",
          ja: "éƒµä¾¿å±€",
          ko: "ìš°ì²´êµ­",
          es: "Oficina de Correos",
          de: "Postamt",
          fi: "Posti",
          fr: "Bureau de poste",
          ar: "Ù…ÙƒØªØ¨ Ø§Ù„Ø¨Ø±ÙŠØ¯",
          it: "Ufficio Postale",
        },
        park: {
          en: "Park",
          zh: "å…¬åœ’",
          ja: "å…¬åœ’",
          ko: "ê³µì›",
          es: "Parque",
          de: "Park",
          fi: "Puisto",
          fr: "Parc",
          ar: "Ø­Ø¯ÙŠÙ‚Ø©",
          it: "Parco",
        },
        police: {
          en: "Police Station",
          zh: "è­¦ç½²",
          ja: "è­¦å¯Ÿç½²",
          ko: "ê²½ì°°ì„œ",
          es: "EstaciÃ³n de PolicÃ­a",
          de: "Polizeiwache",
          fi: "Poliisiasema",
          fr: "Commissariat",
          ar: "Ù…Ø±ÙƒØ² Ø§Ù„Ø´Ø±Ø·Ø©",
          it: "Stazione di Polizia",
        },
        market: {
          en: "Market",
          zh: "è¡—å¸‚",
          ja: "å¸‚å ´",
          ko: "ì‹œì¥",
          es: "Mercado",
          de: "Markt",
          fi: "Tori",
          fr: "MarchÃ©",
          ar: "Ø³ÙˆÙ‚",
          it: "Mercato",
        },

        need_sick: {
          en: "I feel sick...",
          zh: "æˆ‘ä¸èˆ’æœ...",
          ja: "æ°—åˆ†ãŒæ‚ªã„...",
          ko: "ì•„íŒŒìš”...",
          es: "Me siento enfermo...",
          de: "Ich fÃ¼hle mich krank...",
          fi: "Olen sairas...",
          fr: "Je me sens malade...",
          ar: "Ø£Ø´Ø¹Ø± Ø¨Ø§Ù„Ù…Ø±Ø¶...",
          it: "Mi sento male...",
        },
        need_read: {
          en: "I want to read!",
          zh: "æˆ‘æƒ³çœ‹æ›¸ï¼",
          ja: "æœ¬ãŒèª­ã¿ãŸã„ï¼",
          ko: "ì±…ì„ ì½ê³  ì‹¶ì–´ìš”!",
          es: "Â¡Quiero leer!",
          de: "Ich will lesen!",
          fi: "Haluan lukea!",
          fr: "Je veux lire !",
          ar: "Ø£Ø±ÙŠØ¯ Ø£Ù† Ø£Ù‚Ø±Ø£!",
          it: "Voglio leggere!",
        },
        need_mail: {
          en: "Send a letter",
          zh: "æˆ‘è¦å¯„ä¿¡",
          ja: "æ‰‹ç´™ã‚’é€ã‚‹",
          ko: "í¸ì§€ ë³´ë‚´ê¸°",
          es: "Enviar una carta",
          de: "Einen Brief senden",
          fi: "LÃ¤hetÃ¤ kirje",
          fr: "Envoyer une lettre",
          ar: "Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©",
          it: "Invia una lettera",
        },
        need_play: {
          en: "Let's play!",
          zh: "æˆ‘æƒ³ç©è€ï¼",
          ja: "éŠã¼ã†ï¼",
          ko: "ë†€ì!",
          es: "Â¡Vamos a jugar!",
          de: "Lass uns spielen!",
          fi: "MennÃ¤Ã¤n leikkimÃ¤Ã¤n!",
          fr: "Jouons !",
          ar: "Ù‡ÙŠØ§ Ù†Ù„Ø¹Ø¨!",
          it: "Giochiamo!",
        },
        need_help: {
          en: "I found a lost wallet",
          zh: "æˆ‘æ‹¾åˆ°éŒ¢åŒ…",
          ja: "è²¡å¸ƒã‚’æ‹¾ã„ã¾ã—ãŸ",
          ko: "ì§€ê°‘ì„ ì£¼ì› ì–´ìš”",
          es: "EncontrÃ© una billetera perdida",
          de: "Ich habe eine verlorene Brieftasche gefunden",
          fi: "LÃ¶ysin kadonneen lompakon",
          fr: "J'ai trouvÃ© un portefeuille perdu",
          ar: "ÙˆØ¬Ø¯Øª Ù…Ø­ÙØ¸Ø© Ù…ÙÙ‚ÙˆØ¯Ø©",
          it: "Ho trovato un portafoglio smarrito",
        },
        need_food: {
          en: "Buy vegetables",
          zh: "æˆ‘è¦è²·èœ",
          ja: "é‡èœã‚’è²·ã†",
          ko: "ì±„ì†Œ ì‚¬ê¸°",
          es: "Comprar verduras",
          de: "GemÃ¼se kaufen",
          fi: "Osta vihanneksia",
          fr: "Acheter des lÃ©gumes",
          ar: "Ø´Ø±Ø§Ø¡ Ø®Ø¶Ø±ÙˆØ§Øª",
          it: "Compra verdure",
        },

        correct: {
          en: "Correct!",
          zh: "ç­”å°äº†ï¼",
          ja: "æ­£è§£ï¼",
          ko: "ì •ë‹µì…ë‹ˆë‹¤!",
          es: "Â¡Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ØµØ­ÙŠØ­!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "å†è©¦ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦",
          ko: "ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          es: "IntÃ©ntalo de nuevo",
          de: "Versuch es nochmal",
          fi: "YritÃ¤ uudelleen",
          fr: "RÃ©essayez",
          ar: "Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Riprova",
        },
        completed: {
          en: "Good Helper!",
          zh: "å¥½å¹«æ‰‹ï¼",
          ja: "è‰¯ã„ãŠæ‰‹ä¼ã„ã•ã‚“ï¼",
          ko: "ì¢‹ì€ ë„ìš°ë¯¸!",
          es: "Â¡Buen Ayudante!",
          de: "Guter Helfer!",
          fi: "HyvÃ¤ apulainen!",
          fr: "Bon assistant !",
          ar: "Ù…Ø³Ø§Ø¹Ø¯ Ø¬ÙŠØ¯!",
          it: "Bravo Aiutante!",
        },
        reset: {
          en: "Play Again",
          zh: "å†ç©ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          ko: "ë‹¤ì‹œ í•˜ê¸°",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "Ø§Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "Gioca di Nuovo",
        },
      };

      const places = [
        { id: "hospital", icon: "ğŸ¥", color: "bg-red-100 border-red-300" },
        { id: "library", icon: "ğŸ“š", color: "bg-blue-100 border-blue-300" },
        { id: "post", icon: "ğŸ“®", color: "bg-green-100 border-green-300" },
        { id: "park", icon: "ğŸï¸", color: "bg-emerald-100 border-emerald-300" },
        { id: "police", icon: "ğŸ‘®", color: "bg-slate-200 border-slate-400" },
        { id: "market", icon: "ğŸ¥¦", color: "bg-orange-100 border-orange-300" },
      ];

      const tasks = [
        { id: 1, needs: "need_sick", target: "hospital", avatar: "ğŸ¤’" },
        { id: 2, needs: "need_read", target: "library", avatar: "ğŸ¤“" },
        { id: 3, needs: "need_mail", target: "post", avatar: "âœ‰ï¸" },
        { id: 4, needs: "need_play", target: "park", avatar: "âš½" },
        { id: 5, needs: "need_help", target: "police", avatar: "ğŸ‘›" },
        { id: 6, needs: "need_food", target: "market", avatar: "ğŸ§º" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [current, setCurrent] = useState(null);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...tasks].sort(() => Math.random() - 0.5);
          setQueue(q);
          setCurrent(q[0]);
          setFeedback(null);
        };

        const handleChoice = (placeId) => {
          if (feedback) return;

          if (current.target === placeId) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              const nextIdx = queue.indexOf(current) + 1;
              if (nextIdx < queue.length) setCurrent(queue[nextIdx]);
              else setCurrent(null);
            }, 800);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-sky-800 mb-4 mt-8 drop-shadow-sm bg-white/50 px-6 py-2 rounded-full">
              ğŸ™ï¸ {getText("title")}
            </h1>

            {/* Main Area */}
            {current ? (
              <div className="w-full max-w-4xl flex flex-col items-center flex-1 justify-center">
                {/* Character Card */}
                <motion.div
                  key={current.id}
                  initial={{ scale: 0, y: 50 }}
                  animate={{ scale: 1, y: 0 }}
                  exit={{ scale: 0, opacity: 0 }}
                  className="bg-white p-8 rounded-[2rem] shadow-2xl border-8 border-sky-200 mb-8 flex flex-col items-center text-center max-w-sm z-20"
                >
                  <div className="text-8xl mb-4 animate-bounce-slow">
                    {current.avatar}
                  </div>
                  <div className="text-2xl font-black text-slate-700 bg-slate-100 px-4 py-2 rounded-xl">
                    "{getText(current.needs)}"
                  </div>
                </motion.div>

                <p className="font-bold text-sky-700 mb-6 bg-white/60 px-6 py-1 rounded-full">
                  {getText("instruction")}
                </p>

                {/* Places Grid */}
                <div className="grid grid-cols-2 md:grid-cols-3 gap-4 w-full">
                  {places.map((place) => (
                    <button
                      key={place.id}
                      onClick={() => handleChoice(place.id)}
                      className={`${place.color} border-b-8 rounded-2xl p-4 flex flex-col items-center shadow-lg transition-transform active:scale-95 hover:-translate-y-1`}
                    >
                      <div className="text-5xl mb-2">{place.icon}</div>
                      <div className="font-bold text-slate-700">
                        {getText(place.id)}
                      </div>
                    </button>
                  ))}
                </div>

                {feedback && (
                  <div
                    className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 p-6 rounded-3xl font-black text-4xl shadow-2xl z-30 whitespace-nowrap ${
                      feedback === "correct"
                        ? "bg-green-500 text-white"
                        : "bg-red-500 text-white"
                    }`}
                  >
                    {getText(feedback)}
                  </div>
                )}
              </div>
            ) : (
              <div className="bg-white/90 p-12 rounded-3xl shadow-xl text-center mt-20">
                <div className="text-8xl mb-4">ğŸŒŸ</div>
                <h2 className="text-3xl font-black text-sky-800 mb-6">
                  {getText("completed")}
                </h2>
                <button
                  onClick={initGame}
                  className="bg-sky-500 text-white px-10 py-4 rounded-full font-black text-xl hover:bg-sky-600 shadow-xl"
                >
                  {getText("reset")} ğŸ”„
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
