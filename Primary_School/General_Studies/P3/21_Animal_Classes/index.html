<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏âÂ∏∏Ë≠òÔºöÂãïÁâ©ÂàÜÈ°û | Animal Classification</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: radial-gradient(circle at center, #fde047 0%, #ca8a04 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Animal Classes",
          zh: "ÂãïÁâ©ÂàÜÈ°û",
          ja: "ÂãïÁâ©„ÅÆÂàÜÈ°û",
          ko: "ÎèôÎ¨º Î∂ÑÎ•ò",
          es: "Clases de Animales",
          de: "Tierklassen",
          fi: "El√§inluokat",
          fr: "Classes d'animaux",
          ar: "ŸÅÿ¶ÿßÿ™ ÿßŸÑÿ≠ŸäŸàÿßŸÜÿßÿ™",
          it: "Classi di Animali",
        },
        instruction: {
          en: "Sort the animals correctly!",
          zh: "Â∞áÂãïÁâ©Ê≠£Á¢∫ÂàÜÈ°ûÔºÅ",
          ja: "ÂãïÁâ©„ÇíÊ≠£„Åó„ÅèÂàÜÈ°û„Åó„Åæ„Åó„Çá„ÅÜÔºÅ",
          ko: "ÎèôÎ¨ºÏùÑ Ïò¨Î∞îÎ•¥Í≤å Î∂ÑÎ•òÌïòÏÑ∏Ïöî!",
          es: "¬°Clasifica los animales correctamente!",
          de: "Sortiere die Tiere richtig!",
          fi: "Lajittele el√§imet oikein!",
          fr: "Triez les animaux correctement !",
          ar: "ÿµŸÜŸÅ ÿßŸÑÿ≠ŸäŸàÿßŸÜÿßÿ™ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠!",
          it: "Ordina gli animali correttamente!",
        },

        mammal: {
          en: "Mammal",
          zh: "Âì∫‰π≥È°û",
          ja: "Âì∫‰π≥È°û",
          ko: "Ìè¨Ïú†Î•ò",
          es: "Mam√≠fero",
          de: "S√§ugetier",
          fi: "Nis√§k√§s",
          fr: "Mammif√®re",
          ar: "ÿ´ÿØŸäŸäÿßÿ™",
          it: "Mammifero",
        },
        bird: {
          en: "Bird",
          zh: "È≥•È°û",
          ja: "È≥•È°û",
          ko: "Ï°∞Î•ò",
          es: "Ave",
          de: "Vogel",
          fi: "Lintu",
          fr: "Oiseau",
          ar: "ÿ∑ÿßÿ¶ÿ±",
          it: "Uccello",
        },
        fish: {
          en: "Fish",
          zh: "È≠öÈ°û",
          ja: "È≠öÈ°û",
          ko: "Ïñ¥Î•ò",
          es: "Pez",
          de: "Fisch",
          fi: "Kala",
          fr: "Poisson",
          ar: "ÿ≥ŸÖŸÉÿ©",
          it: "Pesce",
        },
        insect: {
          en: "Insect",
          zh: "ÊòÜËü≤È°û",
          ja: "ÊòÜËô´",
          ko: "Í≥§Ï∂©",
          es: "Insecto",
          de: "Insekt",
          fi: "Hy√∂nteinen",
          fr: "Insecte",
          ar: "ÿ≠ÿ¥ÿ±ÿ©",
          it: "Insetto",
        },
        reptile: {
          en: "Reptile",
          zh: "Áà¨Ë°åÈ°û",
          ja: "Áà¨Ëô´È°û",
          ko: "ÌååÏ∂©Î•ò",
          es: "Reptil",
          de: "Reptil",
          fi: "Matelija",
          fr: "Reptile",
          ar: "ÿ≤ÿßÿ≠ŸÅ",
          it: "Rettile",
        },

        desc_mammal: {
          en: "Hair/Milk",
          zh: "ÊúâÊØõ/È£≤Â•∂",
          ja: "ÊØõ/‰π≥",
          ko: "ÌÑ∏/Ï†ñ",
          es: "Pelo/Leche",
          de: "Haare/Milch",
          fi: "Karvat/Maito",
          fr: "Poils/Lait",
          ar: "ÿ¥ÿπÿ±/ÿ≠ŸÑŸäÿ®",
          it: "Pelo/Latte",
        },
        desc_bird: {
          en: "Feathers/Eggs",
          zh: "ÊúâÁæΩÊØõ/ÁîüËõã",
          ja: "ÁæΩ/Âçµ",
          ko: "ÍπÉÌÑ∏/Ïïå",
          es: "Plumas/Huevos",
          de: "Federn/Eier",
          fi: "H√∂yhenet/Munat",
          fr: "Plumes/Oeufs",
          ar: "ÿ±Ÿäÿ¥/ÿ®Ÿäÿ∂",
          it: "Piume/Uova",
        },
        desc_fish: {
          en: "Scales/Water",
          zh: "ÊúâÈ±ó/Ê∞¥‰∏≠ÁîüÊ¥ª",
          ja: "È±ó/Ê∞¥",
          ko: "ÎπÑÎäò/Î¨º",
          es: "Escamas/Agua",
          de: "Schuppen/Wasser",
          fi: "Suomut/Vesi",
          fr: "√âcailles/Eau",
          ar: "ŸÇÿ¥Ÿàÿ±/ŸÖÿßÿ°",
          it: "Squame/Acqua",
        },
        desc_insect: {
          en: "6 Legs",
          zh: "ÂÖ≠Ê¢ùËÖø",
          ja: "6Êú¨„ÅÆË∂≥",
          ko: "Îã§Î¶¨ 6Í∞ú",
          es: "6 Patas",
          de: "6 Beine",
          fi: "6 jalkaa",
          fr: "6 pattes",
          ar: "6 ÿ£ÿ±ÿ¨ŸÑ",
          it: "6 Zampe",
        },
        desc_reptile: {
          en: "Scales/Land",
          zh: "ÊúâÈ±ó/Èô∏‰∏äÁà¨Ë°å",
          ja: "È±ó/Èô∏",
          ko: "ÎπÑÎäò/Ïú°ÏßÄ",
          es: "Escamas/Tierra",
          de: "Schuppen/Land",
          fi: "Suomut/Maa",
          fr: "√âcailles/Terre",
          ar: "ŸÇÿ¥Ÿàÿ±/ÿ£ÿ±ÿ∂",
          it: "Squame/Terra",
        },

        dog: {
          en: "Dog",
          zh: "Áãó",
          ja: "Áä¨",
          ko: "Í∞ú",
          es: "Perro",
          de: "Hund",
          fi: "Koira",
          fr: "Chien",
          ar: "ŸÉŸÑÿ®",
          it: "Cane",
        },
        cat: {
          en: "Cat",
          zh: "Ë≤ì",
          ja: "Áå´",
          ko: "Í≥†ÏñëÏù¥",
          es: "Gato",
          de: "Katze",
          fi: "Kissa",
          fr: "Chat",
          ar: "ŸÇÿ∑ÿ©",
          it: "Gatto",
        },
        human: {
          en: "Human",
          zh: "‰∫∫È°û",
          ja: "‰∫∫Èñì",
          ko: "Ïù∏Í∞Ñ",
          es: "Humano",
          de: "Mensch",
          fi: "Ihminen",
          fr: "Humain",
          ar: "ÿ•ŸÜÿ≥ÿßŸÜ",
          it: "Umano",
        },
        whale: {
          en: "Whale",
          zh: "ÈØ®È≠ö",
          ja: "„ÇØ„Ç∏„É©",
          ko: "Í≥†Îûò",
          es: "Ballena",
          de: "Wal",
          fi: "Valas",
          fr: "Baleine",
          ar: "ÿ≠Ÿàÿ™",
          it: "Balena",
        },
        eagle: {
          en: "Eagle",
          zh: "ËÄÅÈ∑π",
          ja: "È∑≤",
          ko: "ÎèÖÏàòÎ¶¨",
          es: "√Åguila",
          de: "Adler",
          fi: "Kotka",
          fr: "Aigle",
          ar: "ŸÜÿ≥ÿ±",
          it: "Aquila",
        },
        penguin: {
          en: "Penguin",
          zh: "‰ºÅÈµù",
          ja: "„Éö„É≥„ÇÆ„É≥",
          ko: "Ìé≠Í∑Ñ",
          es: "Ping√ºino",
          de: "Pinguin",
          fi: "Pingviini",
          fr: "Manchot",
          ar: "ÿ®ÿ∑ÿ±ŸäŸÇ",
          it: "Pinguino",
        },
        chicken: {
          en: "Chicken",
          zh: "Èõû",
          ja: "È∂è",
          ko: "Îã≠",
          es: "Pollo",
          de: "Huhn",
          fi: "Kana",
          fr: "Poulet",
          ar: "ÿØÿ¨ÿßÿ¨ÿ©",
          it: "Pollo",
        },

        goldfish: {
          en: "Goldfish",
          zh: "ÈáëÈ≠ö",
          ja: "ÈáëÈ≠ö",
          ko: "Í∏àÎ∂ïÏñ¥",
          es: "Pez de colores",
          de: "Goldfisch",
          fi: "Kultakala",
          fr: "Poisson rouge",
          ar: "ÿ≥ŸÖŸÉÿ© ÿ∞Ÿáÿ®Ÿäÿ©",
          it: "Pesce rosso",
        },
        shark: {
          en: "Shark",
          zh: "ÈØäÈ≠ö",
          ja: "„Çµ„É°",
          ko: "ÏÉÅÏñ¥",
          es: "Tibur√≥n",
          de: "Hai",
          fi: "Hai",
          fr: "Requin",
          ar: "ŸÇÿ±ÿ¥",
          it: "Squalo",
        },

        ant: {
          en: "Ant",
          zh: "ËûûËüª",
          ja: "„Ç¢„É™",
          ko: "Í∞úÎØ∏",
          es: "Hormiga",
          de: "Ameise",
          fi: "Muurahainen",
          fr: "Fourmi",
          ar: "ŸÜŸÖŸÑÿ©",
          it: "Formica",
        },
        butterfly: {
          en: "Butterfly",
          zh: "Ëù¥Ëù∂",
          ja: "Ëù∂",
          ko: "ÎÇòÎπÑ",
          es: "Mariposa",
          de: "Schmetterling",
          fi: "Perhonen",
          fr: "Papillon",
          ar: "ŸÅÿ±ÿßÿ¥ÿ©",
          it: "Farfalla",
        },
        bee: {
          en: "Bee",
          zh: "ËúúËúÇ",
          ja: "ËúÇ",
          ko: "Î≤å",
          es: "Abeja",
          de: "Biene",
          fi: "Mehil√§inen",
          fr: "Abeille",
          ar: "ŸÜÿ≠ŸÑÿ©",
          it: "Ape",
        },

        snake: {
          en: "Snake",
          zh: "Ëõá",
          ja: "Ëõá",
          ko: "Î±Ä",
          es: "Serpiente",
          de: "Schlange",
          fi: "K√§√§rme",
          fr: "Serpent",
          ar: "ÿ´ÿπÿ®ÿßŸÜ",
          it: "Serpente",
        },
        turtle: {
          en: "Turtle",
          zh: "ÁÉèÈæú",
          ja: "‰∫Ä",
          ko: "Í±∞Î∂ÅÏù¥",
          es: "Tortuga",
          de: "Schildkr√∂te",
          fi: "Kilpikonna",
          fr: "Tortue",
          ar: "ÿ≥ŸÑÿ≠ŸÅÿßÿ©",
          it: "Tartaruga",
        },
        lizard: {
          en: "Lizard",
          zh: "Ëú•Ëú¥",
          ja: "„Éà„Ç´„Ç≤",
          ko: "ÎèÑÎßàÎ±Ä",
          es: "Lagarto",
          de: "Eidechse",
          fi: "Lisko",
          fr: "L√©zard",
          ar: "ÿ≥ÿ≠ŸÑŸäÿ©",
          it: "Lucertola",
        },

        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµÏûÖÎãàÎã§!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "ÂÜçË©¶‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶",
          ko: "Îã§Ïãú ÏãúÎèÑÌïòÏÑ∏Ïöî",
          es: "Int√©ntalo de nuevo",
          de: "Versuch es nochmal",
          fi: "Yrit√§ uudelleen",
          fr: "R√©essayez",
          ar: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Riprova",
        },
        completed: {
          en: "Zoologist!",
          zh: "ÂãïÁâ©Â≠∏ÂÆ∂ÔºÅ",
          ja: "ÂãïÁâ©Â≠¶ËÄÖÔºÅ",
          ko: "ÎèôÎ¨ºÌïôÏûê!",
          es: "¬°Zo√≥logo!",
          de: "Zoologe!",
          fi: "El√§intieteilij√§!",
          fr: "Zoologiste !",
          ar: "ÿπÿßŸÑŸÖ ÿ≠ŸäŸàÿßŸÜ!",
          it: "Zoologo!",
        },
        reset: {
          en: "Play Again",
          zh: "ÂÜçÁé©‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§",
          ko: "Îã§Ïãú ÌïòÍ∏∞",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "ÿßŸÑÿπÿ® ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Gioca di Nuovo",
        },
      };

      const categories = [
        {
          id: "mammal",
          color: "bg-orange-200 border-orange-400",
          bg: "bg-orange-500",
          icon: "ü¶Å",
        },
        {
          id: "bird",
          color: "bg-sky-200 border-sky-400",
          bg: "bg-sky-500",
          icon: "ü¶Ö",
        },
        {
          id: "fish",
          color: "bg-blue-200 border-blue-400",
          bg: "bg-blue-500",
          icon: "üêü",
        },
        {
          id: "insect",
          color: "bg-green-200 border-green-400",
          bg: "bg-green-500",
          icon: "üêû",
        },
        {
          id: "reptile",
          color: "bg-emerald-200 border-emerald-400",
          bg: "bg-emerald-500",
          icon: "ü¶é",
        },
      ];

      const animals = [
        { id: "dog", type: "mammal", icon: "üê∂" },
        { id: "whale", type: "mammal", icon: "üê≥" },
        { id: "human", type: "mammal", icon: "üßë" },
        { id: "eagle", type: "bird", icon: "ü¶Ö" },
        { id: "penguin", type: "bird", icon: "üêß" },
        { id: "shark", type: "fish", icon: "ü¶à" },
        { id: "goldfish", type: "fish", icon: "üê†" },
        { id: "ant", type: "insect", icon: "üêú" },
        { id: "butterfly", type: "insect", icon: "ü¶ã" },
        { id: "snake", type: "reptile", icon: "üêç" },
        { id: "turtle", type: "reptile", icon: "üê¢" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [current, setCurrent] = useState(null);
        const [feedback, setFeedback] = useState(null);
        const [score, setScore] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...animals].sort(() => Math.random() - 0.5);
          setQueue(q);
          setCurrent(q[0]);
          setScore(0);
          setFeedback(null);
        };

        const handleSort = (catId) => {
          if (feedback) return;

          if (current.type === catId) {
            setFeedback("correct");
            setScore((s) => s + 10);
            setTimeout(() => {
              setFeedback(null);
              const nextIdx = queue.indexOf(current) + 1;
              if (nextIdx < queue.length) setCurrent(queue[nextIdx]);
              else setCurrent(null);
            }, 800);
          } else {
            setFeedback("wrong");
            setScore((s) => Math.max(0, s - 5));
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-amber-900 mb-2 mt-8 drop-shadow-sm bg-white/50 px-6 py-2 rounded-full">
              üêæ {getText("title")}
            </h1>

            {current ? (
              <div className="w-full max-w-6xl flex flex-col items-center flex-1 justify-center relative">
                {/* Animal Card */}
                <div className="relative mb-6 z-20">
                  <motion.div
                    key={current.id}
                    initial={{ scale: 0, rotate: -10 }}
                    animate={{ scale: 1, rotate: 0 }}
                    exit={{ scale: 0, opacity: 0 }}
                    className="bg-white p-10 rounded-[2.5rem] shadow-2xl border-8 border-amber-200 flex flex-col items-center justify-center w-64 h-64"
                  >
                    <div className="text-8xl mb-4">{current.icon}</div>
                    <div className="text-2xl font-black text-slate-700 leading-tight">
                      {getText(current.id)}
                    </div>
                  </motion.div>

                  {feedback && (
                    <div
                      className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 px-6 py-3 rounded-2xl font-black text-3xl shadow-xl whitespace-nowrap ${
                        feedback === "correct"
                          ? "bg-green-500 text-white"
                          : "bg-red-500 text-white"
                      }`}
                    >
                      {getText(feedback)}
                    </div>
                  )}
                </div>

                <p className="font-bold text-amber-900 mb-6 bg-white/60 px-6 py-1 rounded-full text-lg">
                  {getText("instruction")}
                </p>

                {/* Bins */}
                <div className="flex flex-wrap gap-4 w-full justify-center">
                  {categories.map((cat) => (
                    <button
                      key={cat.id}
                      onClick={() => handleSort(cat.id)}
                      className={`flex-1 min-w-[140px] ${cat.color} border-b-8 rounded-2xl p-4 flex flex-col items-center shadow-lg active:scale-95 transition-all hover:brightness-110`}
                    >
                      <div className="text-4xl mb-2 bg-white/50 p-2 rounded-full shadow-sm">
                        {cat.icon}
                      </div>
                      <div className="font-black text-lg md:text-xl text-slate-800">
                        {getText(cat.id)}
                      </div>
                      <div className="text-xs font-bold opacity-80 mt-1 bg-white/60 px-2 py-1 rounded w-full">
                        {getText(`desc_${cat.id}`)}
                      </div>
                    </button>
                  ))}
                </div>
              </div>
            ) : (
              <div className="bg-white/90 p-12 rounded-3xl shadow-xl text-center mt-20">
                <div className="text-8xl mb-4">üèÜ</div>
                <h2 className="text-4xl font-black text-amber-800 mb-6">
                  {getText("completed")}
                </h2>
                <button
                  onClick={initGame}
                  className="bg-amber-600 text-white px-10 py-4 rounded-full font-black text-2xl hover:bg-amber-700 shadow-xl"
                >
                  {getText("reset")} üîÑ
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
