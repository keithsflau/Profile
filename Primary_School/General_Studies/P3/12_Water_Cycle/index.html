<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸‰å¸¸è­˜ï¼šæ°´å¾ªç’° | Water Cycle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(180deg, #bae6fd 0%, #3b82f6 100%);
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "The Water Cycle",
          zh: "æ°´å¾ªç’°",
          ja: "æ°´ã®å¾ªç’°",
          ko: "ë¬¼ì˜ ìˆœí™˜",
          es: "El Ciclo del Agua",
          de: "Der Wasserkreislauf",
          fi: "Veden kiertokulku",
          fr: "Le cycle de l'eau",
          ar: "Ø¯ÙˆØ±Ø© Ø§Ù„Ù…ÙŠØ§Ù‡",
          it: "Il Ciclo dell'Acqua",
        },
        instruction: {
          en: "Drag the labels to the right spot!",
          zh: "å°‡æ¨™ç±¤æ‹–æ”¾åˆ°æ­£ç¢ºä½ç½®ï¼",
          ja: "ãƒ©ãƒ™ãƒ«ã‚’æ­£ã—ã„å ´æ‰€ã«ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ãã ã•ã„ï¼",
          ko: "ë¼ë²¨ì„ ì˜¬ë°”ë¥¸ ìœ„ì¹˜ë¡œ ë“œë˜ê·¸í•˜ì„¸ìš”!",
          es: "Â¡Arrastra las etiquetas al lugar correcto!",
          de: "Ziehe die Etiketten an die richtige Stelle!",
          fi: "VedÃ¤ etiketit oikeaan paikkaan!",
          fr: "Faites glisser les Ã©tiquettes au bon endroit !",
          ar: "Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ØµÙ‚Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„ØµØ­ÙŠØ­!",
          it: "Trascina le etichette nel posto giusto!",
        },

        sun: {
          en: "Sun",
          zh: "å¤ªé™½",
          ja: "å¤ªé™½",
          ko: "íƒœì–‘",
          es: "Sol",
          de: "Sonne",
          fi: "Aurinko",
          fr: "Soleil",
          ar: "Ø´Ù…Ø³",
          it: "Sole",
        },
        evaporation: {
          en: "Evaporation",
          zh: "è’¸ç™¼",
          ja: "è’¸ç™º",
          ko: "ì¦ë°œ",
          es: "EvaporaciÃ³n",
          de: "Verdunstung",
          fi: "Haihtuminen",
          fr: "Ã‰vaporation",
          ar: "ØªØ¨Ø®Ø±",
          it: "Evaporazione",
        },
        condensation: {
          en: "Condensation",
          zh: "å‡çµ",
          ja: "å‡ç¸®",
          ko: "ì‘ê²°",
          es: "CondensaciÃ³n",
          de: "Kondensation",
          fi: "Tiivistyminen",
          fr: "Condensation",
          ar: "ØªÙƒØ«ÙŠÙ",
          it: "Condensazione",
        },
        cloud: {
          en: "Cloud",
          zh: "é›²",
          ja: "é›²",
          ko: "êµ¬ë¦„",
          es: "Nube",
          de: "Wolke",
          fi: "Pilvi",
          fr: "Nuage",
          ar: "Ø³Ø­Ø§Ø¨Ø©",
          it: "Nuvola",
        },
        rain: {
          en: "Precipitation",
          zh: "é™é›¨",
          ja: "é™æ°´",
          ko: "ê°•ìˆ˜",
          es: "PrecipitaciÃ³n",
          de: "Niederschlag",
          fi: "Sade",
          fr: "PrÃ©cipitations",
          ar: "Ù‡Ø·ÙˆÙ„",
          it: "Precipitazione",
        },
        river: {
          en: "Collection",
          zh: "æ²³æµ/æµ·æ´‹",
          ja: "é›†æ°´",
          ko: "ìˆ˜ì§‘",
          es: "RecolecciÃ³n",
          de: "Sammlung",
          fi: "KerÃ¤Ã¤ntyminen",
          fr: "Collection",
          ar: "ØªØ¬Ù…ÙŠØ¹",
          it: "Raccolta",
        },

        desc_sun: {
          en: "Heats the water",
          zh: "åŠ ç†±æµ·æ°´",
          ja: "æ°´ã‚’æ¸©ã‚ã‚‹",
          ko: "ë¬¼ì„ ë°ì›€",
          es: "Calienta el agua",
          de: "ErwÃ¤rmt das Wasser",
          fi: "LÃ¤mmittÃ¤Ã¤ veden",
          fr: "Chauffe l'eau",
          ar: "ÙŠØ³Ø®Ù† Ø§Ù„Ù…Ø§Ø¡",
          it: "Riscalda l'acqua",
        },
        desc_evap: {
          en: "Water turns to vapor",
          zh: "æ°´è®Šæˆæ°´è’¸æ°£",
          ja: "æ°´ãŒè’¸æ°—ã«ãªã‚‹",
          ko: "ë¬¼ì´ ì¦ê¸°ë¡œ ë³€í•¨",
          es: "El agua se convierte en vapor",
          de: "Wasser wird zu Dampf",
          fi: "Vesi muuttuu hÃ¶yryksi",
          fr: "L'eau se transforme en vapeur",
          ar: "ÙŠØªØ­ÙˆÙ„ Ø§Ù„Ù…Ø§Ø¡ Ø¥Ù„Ù‰ Ø¨Ø®Ø§Ø±",
          it: "L'acqua si trasforma in vapore",
        },
        desc_cond: {
          en: "Vapor turns to drops",
          zh: "æ°´è’¸æ°£è®Šæˆæ°´é»",
          ja: "è’¸æ°—ãŒæ°´æ»´ã«ãªã‚‹",
          ko: "ì¦ê¸°ê°€ ë¬¼ë°©ìš¸ë¡œ ë³€í•¨",
          es: "Vapor se convierte en gotas",
          de: "Dampf wird zu Tropfen",
          fi: "HÃ¶yry muuttuu pisaroiksi",
          fr: "La vapeur se transforme en gouttes",
          ar: "ÙŠØªØ­ÙˆÙ„ Ø§Ù„Ø¨Ø®Ø§Ø± Ø¥Ù„Ù‰ Ù‚Ø·Ø±Ø§Øª",
          it: "Il vapore si trasforma in gocce",
        },
        desc_cloud: {
          en: "Tiny drops gather",
          zh: "å°æ°´é»èšé›†",
          ja: "å°ã•ãªæ°´æ»´ãŒé›†ã¾ã‚‹",
          ko: "ì‘ì€ ë¬¼ë°©ìš¸ì´ ëª¨ì„",
          es: "PequeÃ±as gotas se juntan",
          de: "Winzige Tropfen sammeln sich",
          fi: "Pienet pisarat kerÃ¤Ã¤ntyvÃ¤t",
          fr: "De minuscules gouttes se rassemblent",
          ar: "ØªØªØ¬Ù…Ø¹ Ø§Ù„Ù‚Ø·Ø±Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©",
          it: "Piccole gocce si radunano",
        },
        desc_rain: {
          en: "Water falls down",
          zh: "é›¨æ°´è½ä¸‹",
          ja: "æ°´ãŒè½ã¡ã‚‹",
          ko: "ë¬¼ì´ ë–¨ì–´ì§",
          es: "El agua cae",
          de: "Wasser fÃ¤llt herunter",
          fi: "Vesi sataa alas",
          fr: "L'eau tombe",
          ar: "ÙŠØ³Ù‚Ø· Ø§Ù„Ù…Ø§Ø¡",
          it: "L'acqua cade giÃ¹",
        },
        desc_river: {
          en: "Water flows back",
          zh: "é›¨æ°´åŒ¯èš",
          ja: "æ°´ãŒæˆ»ã‚‹",
          ko: "ë¬¼ì´ ë‹¤ì‹œ íë¦„",
          es: "El agua fluye de vuelta",
          de: "Wasser flieÃŸt zurÃ¼ck",
          fi: "Vesi virtaa takaisin",
          fr: "L'eau reflue",
          ar: "Ø§Ù„Ù…Ø§Ø¡ ÙŠØªØ¯ÙÙ‚ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
          it: "L'acqua scorre indietro",
        },

        completed: {
          en: "Cycle Complete!",
          zh: "å¾ªç’°å®Œæˆï¼",
          ja: "ã‚µã‚¤ã‚¯ãƒ«å®Œäº†ï¼",
          ko: "ìˆœí™˜ ì™„ë£Œ!",
          es: "Â¡Ciclo Completo!",
          de: "Kreislauf abgeschlossen!",
          fi: "Kierto valmis!",
          fr: "Cycle terminÃ© !",
          ar: "Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ø¯ÙˆØ±Ø©!",
          it: "Ciclo Completo!",
        },
        reset: {
          en: "Reset",
          zh: "é‡ç½®",
          ja: "ãƒªã‚»ãƒƒãƒˆ",
          ko: "ì´ˆê¸°í™”",
          es: "Reiniciar",
          de: "ZurÃ¼cksetzen",
          fi: "Nollaa",
          fr: "RÃ©initialiser",
          ar: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†",
          it: "Reimposta",
        },
      };

      const stages = [
        { id: "sun", x: 15, y: 15, w: 15, h: 15, icon: "â˜€ï¸" },
        { id: "evaporation", x: 30, y: 60, w: 20, h: 20, icon: "â™¨ï¸" }, // Rising arrows
        { id: "condensation", x: 40, y: 30, w: 15, h: 15, icon: "ğŸŒ«ï¸" },
        { id: "cloud", x: 60, y: 20, w: 20, h: 15, icon: "â˜ï¸" },
        { id: "rain", x: 75, y: 45, w: 15, h: 25, icon: "ğŸŒ§ï¸" },
        { id: "river", x: 60, y: 80, w: 25, h: 15, icon: "ğŸŒŠ" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [placed, setPlaced] = useState({});
        const [dragging, setDragging] = useState(null);
        const [completed, setCompleted] = useState(false);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          if (Object.keys(placed).length === stages.length) {
            setCompleted(true);
          }
        }, [placed]);

        const handleDrop = (stageId) => {
          if (dragging && dragging.id === stageId) {
            setPlaced((prev) => ({ ...prev, [stageId]: true }));
            setDragging(null);
          }
        };

        const reset = () => {
          setPlaced({});
          setCompleted(false);
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans cursor-default">
            <LanguageSelector lang={lang} setLang={setLang} />

            <h1 className="text-4xl md:text-5xl font-black text-white mb-2 mt-8 drop-shadow-md z-10">
              ğŸ’§ {getText("title")}
            </h1>
            <p className="font-bold text-white/90 mb-4 z-10 bg-black/20 px-4 py-1 rounded-full">
              {getText("instruction")}
            </p>

            <div className="flex flex-col md:flex-row gap-8 w-full max-w-6xl items-center md:items-start flex-1">
              {/* Scene (Drop Zones) */}
              <div className="relative w-full aspect-[16/9] bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-white/50">
                {/* Background Art - Using simplistic shapes/CSS gradients for diagram feel */}

                {/* Sky */}
                <div className="absolute inset-0 bg-sky-200"></div>

                {/* Ocean */}
                <div className="absolute bottom-0 w-full h-[30%] bg-blue-500">
                  <div className="animate-wave w-[200%] h-full bg-[url('data:image/svg+xml;utf8,<svg width=\'100\' height=\'20\' viewBox=\'0 0 100 20\' xmlns=\'http://www.w3.org/2000/svg\'><path d=\'M0 10 Q25 0 50 10 T100 10\' fill=\'none\' stroke=\'white\' stroke-width=\'2\'/></svg>')] opacity-30"></div>
                </div>

                {/* Mountain */}
                <div className="absolute bottom-[20%] right-0 w-[40%] h-[50%] bg-emerald-600 rounded-tl-full"></div>

                {/* Sun */}
                <div className="absolute top-[5%] left-[5%] text-[8rem] opacity-50">
                  â˜€ï¸
                </div>

                {/* Drop Zones */}
                {stages.map((s) => (
                  <div
                    key={s.id}
                    className={`absolute border-4 border-dashed rounded-xl transition-all flex items-center justify-center z-20 
                                 ${
                                   placed[s.id]
                                     ? "border-transparent bg-white/80"
                                     : "border-white/50 bg-black/10 hover:bg-white/20"
                                 }
                             `}
                    style={{
                      left: `${s.x}%`,
                      top: `${s.y}%`,
                      width: `${s.w}%`,
                      height: `${s.h}%`,
                    }}
                    onDragOver={(e) => e.preventDefault()}
                    onDrop={() => handleDrop(s.id)}
                  >
                    {placed[s.id] ? (
                      <motion.div
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        className="text-center"
                      >
                        <div className="text-3xl lg:text-5xl">{s.icon}</div>
                        <div className="font-bold text-slate-800 text-xs md:text-sm lg:text-base leading-tight mt-1">
                          {getText(s.id)}
                        </div>
                      </motion.div>
                    ) : (
                      <div className="text-white/50 text-2xl animate-pulse">
                        ?
                      </div>
                    )}
                  </div>
                ))}

                {/* Arrows (Animated CSS or just visible when placed) */}
                {Object.keys(placed).length > 2 && (
                  <svg
                    className="absolute inset-0 pointer-events-none opacity-50"
                    viewBox="0 0 100 100"
                  >
                    {/* Evap */}
                    <path
                      d="M25 80 Q25 50 35 40"
                      stroke="white"
                      strokeWidth="1"
                      fill="none"
                      strokeDasharray="5,5"
                      className="animate-dash"
                    />
                    {/* Cond */}
                    <path
                      d="M45 35 Q55 25 65 25"
                      stroke="white"
                      strokeWidth="1"
                      fill="none"
                      strokeDasharray="5,5"
                    />
                    {/* Rain */}
                    <path
                      d="M75 35 Q80 50 82 70"
                      stroke="blue"
                      strokeWidth="1"
                      fill="none"
                      strokeDasharray="5,5"
                    />
                    {/* River */}
                    <path
                      d="M80 85 Q60 90 40 85"
                      stroke="blue"
                      strokeWidth="1"
                      fill="none"
                      strokeDasharray="5,5"
                    />
                  </svg>
                )}
              </div>

              {/* Labels (Draggable) */}
              <div className="bg-white/20 backdrop-blur-md rounded-3xl p-6 w-full md:w-64 flex flex-col gap-4 border-2 border-white/30 z-20">
                <h3 className="text-white font-bold text-center border-b border-white/30 pb-2">
                  Labels
                </h3>

                {stages.map(
                  (s) =>
                    !placed[s.id] && (
                      <div
                        key={s.id}
                        draggable
                        onDragStart={() => setDragging(s)}
                        className="bg-white rounded-xl p-3 shadow-lg cursor-grab active:cursor-grabbing hover:scale-105 transition-transform flex items-center gap-3"
                      >
                        <span className="text-3xl">{s.icon}</span>
                        <div>
                          <div className="font-bold text-slate-800 leading-tight">
                            {getText(s.id)}
                          </div>
                          <div className="text-[10px] text-slate-500 font-bold">
                            {getText(
                              `desc_${
                                s.id === "sun"
                                  ? "sun"
                                  : s.id === "evaporation"
                                  ? "evap"
                                  : s.id === "condensation"
                                  ? "cond"
                                  : s.id === "rain"
                                  ? "rain"
                                  : s.id === "river"
                                  ? "river"
                                  : "cloud"
                              }`
                            )}
                          </div>
                        </div>
                      </div>
                    )
                )}

                {completed && (
                  <div className="text-center animate-fade-in">
                    <div className="text-5xl mb-2">ğŸ‰</div>
                    <div className="font-black text-white text-xl mb-4">
                      {getText("completed")}
                    </div>
                    <button
                      onClick={reset}
                      className="bg-white text-blue-600 px-6 py-2 rounded-full font-bold shadow-lg hover:bg-blue-50"
                    >
                      {getText("reset")}
                    </button>
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
