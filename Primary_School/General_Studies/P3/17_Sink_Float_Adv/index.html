<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸‰å¸¸è­˜ï¼šæ²‰èˆ‡æµ® (é€²éš) | Sink or Float Adv</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: radial-gradient(circle at center, #bfdbfe 0%, #3b82f6 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Sink or Float?",
          zh: "æ²‰é‚„æ˜¯æµ®ï¼Ÿ",
          ja: "æ²ˆã‚€ï¼Ÿæµ®ãï¼Ÿ",
          ko: "ê°€ë¼ì•‰ì„ê¹Œìš” ëœ°ê¹Œìš”?",
          es: "Â¿Se hunde o flota?",
          de: "Sinken oder Schwimmen?",
          fi: "Uppoaako vai kelluuko?",
          fr: "Coule ou flotte ?",
          ar: "ÙŠØºØ±Ù‚ Ø£Ù… ÙŠØ·ÙÙˆØŸ",
          it: "Affonda o Galleggia?",
        },
        instruction: {
          en: "Predict then Test!",
          zh: "å…ˆé æ¸¬ï¼Œå¾Œæ¸¬è©¦ï¼",
          ja: "äºˆæ¸¬ã—ã¦ã‹ã‚‰ãƒ†ã‚¹ãƒˆï¼",
          ko: "ì˜ˆì¸¡í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”!",
          es: "Â¡Predice y luego prueba!",
          de: "Vorhersagen, dann testen!",
          fi: "Ennusta ja testaa!",
          fr: "PrÃ©disez puis testez !",
          ar: "ØªÙˆÙ‚Ø¹ Ø«Ù… Ø§Ø®ØªØ¨Ø±!",
          it: "Prevedi e poi Test!",
        },

        sink: {
          en: "Sink",
          zh: "æ²‰",
          ja: "æ²ˆã‚€",
          ko: "ê°€ë¼ì•‰ë‹¤",
          es: "Hundirse",
          de: "Sinken",
          fi: "Upota",
          fr: "Couler",
          ar: "ÙŠØºØ±Ù‚",
          it: "Affondare",
        },
        float: {
          en: "Float",
          zh: "æµ®",
          ja: "æµ®ã",
          ko: "ëœ¨ë‹¤",
          es: "Flotar",
          de: "Schwimmen",
          fi: "Kellua",
          fr: "Flotter",
          ar: "ÙŠØ·ÙÙˆ",
          it: "Galleggiare",
        },

        predict: {
          en: "Will it float?",
          zh: "å®ƒæœƒæµ®å—ï¼Ÿ",
          ja: "æµ®ãã¾ã™ã‹ï¼Ÿ",
          ko: "ëœ°ê¹Œìš”?",
          es: "Â¿FlotarÃ¡?",
          de: "Wird es schwimmen?",
          fi: "Kelluuko se?",
          fr: "Est-ce qu'il flottera ?",
          ar: "Ù‡Ù„ Ø³ÙŠØ·ÙÙˆØŸ",
          it: "GalleggerÃ ?",
        },
        test: {
          en: "Let's Test!",
          zh: "æ¸¬è©¦ï¼",
          ja: "ãƒ†ã‚¹ãƒˆï¼",
          ko: "í…ŒìŠ¤íŠ¸!",
          es: "Â¡Probemos!",
          de: "Lass uns testen!",
          fi: "Testataan!",
          fr: "Testons !",
          ar: "Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ø®ØªØ¨Ø±!",
          it: "Testiamo!",
        },
        next: {
          en: "Next Item",
          zh: "ä¸‹ä¸€å€‹",
          ja: "æ¬¡ã¸",
          ko: "ë‹¤ìŒ ì•„ì´í…œ",
          es: "Siguiente Ã­tem",
          de: "NÃ¤chstes Element",
          fi: "Seuraava esine",
          fr: "Article suivant",
          ar: "Ø§Ù„Ø¹Ù†ØµØ± Ø§Ù„ØªØ§Ù„ÙŠ",
          it: "Oggetto successivo",
        },

        correct: {
          en: "Prediction Correct!",
          zh: "é æ¸¬æ­£ç¢ºï¼",
          ja: "äºˆæ¸¬æ­£è§£ï¼",
          ko: "ì˜ˆì¸¡ ì„±ê³µ!",
          es: "Â¡PredicciÃ³n Correcta!",
          de: "Vorhersage richtig!",
          fi: "Ennustus oikein!",
          fr: "PrÃ©diction correcte !",
          ar: "Ø§Ù„ØªÙ†Ø¨Ø¤ ØµØ­ÙŠØ­!",
          it: "Previsione Corretta!",
        },
        wrong: {
          en: "Surprising result!",
          zh: "æ„æƒ³ä¸åˆ°çš„çµæœï¼",
          ja: "é©šãã®çµæœï¼",
          ko: "ë†€ë¼ìš´ ê²°ê³¼!",
          es: "Â¡Resultado sorprendente!",
          de: "Ãœberraschendes Ergebnis!",
          fi: "YllÃ¤ttÃ¤vÃ¤ tulos!",
          fr: "RÃ©sultat surprenant !",
          ar: "Ù†ØªÙŠØ¬Ø© Ù…ÙØ§Ø¬Ø¦Ø©!",
          it: "Risultato sorprendente!",
        },

        // Items
        rock: {
          en: "Rock",
          zh: "çŸ³é ­",
          ja: "å²©",
          ko: "ë°”ìœ„",
          es: "Roca",
          de: "Stein",
          fi: "Kivi",
          fr: "Rocher",
          ar: "ØµØ®Ø±Ø©",
          it: "Roccia",
        },
        wood: {
          en: "Wood Block",
          zh: "æœ¨å¡Š",
          ja: "æœ¨ã®ãƒ–ãƒ­ãƒƒã‚¯",
          ko: "ë‚˜ë¬´ ë¸”ë¡",
          es: "Bloque de madera",
          de: "Holzklotz",
          fi: "Puupalikka",
          fr: "Bloc de bois",
          ar: "ÙƒØªÙ„Ø© Ø®Ø´Ø¨ÙŠØ©",
          it: "Blocco di legno",
        },
        clay_ball: {
          en: "Clay Ball",
          zh: "æ³¥è† çƒ",
          ja: "ç²˜åœŸã®ãƒœãƒ¼ãƒ«",
          ko: "ì í†  ê³µ",
          es: "Bola de arcilla",
          de: "Tonball",
          fi: "Savipallo",
          fr: "Boule d'argile",
          ar: "ÙƒØ±Ø© Ø·ÙŠÙ†ÙŠØ©",
          it: "Palla di argilla",
        },
        clay_boat: {
          en: "Clay Boat",
          zh: "æ³¥è† èˆ¹",
          ja: "ç²˜åœŸã®ãƒœãƒ¼ãƒˆ",
          ko: "ì í†  ë°°",
          es: "Barco de arcilla",
          de: "Tonboot",
          fi: "Savivene",
          fr: "Bateau en argile",
          ar: "Ù‚Ø§Ø±Ø¨ Ø·ÙŠÙ†ÙŠ",
          it: "Barca di argilla",
        },
        orange_peel: {
          en: "Orange (Peeled)",
          zh: "å»çš®æ©™",
          ja: "çš®ã‚’ã‚€ã„ãŸã‚ªãƒ¬ãƒ³ã‚¸",
          ko: "ê»ì§ˆ ë²—ê¸´ ì˜¤ë Œì§€",
          es: "Naranja (Pelada)",
          de: "Orange (GeschÃ¤lt)",
          fi: "Appelsiini (Kuorittu)",
          fr: "Orange (PelÃ©e)",
          ar: "Ø¨Ø±ØªÙ‚Ø§Ù„ (Ù…Ù‚Ø´Ø±)",
          it: "Arancia (Sbucciata)",
        },
        orange_full: {
          en: "Orange (Unpeeled)",
          zh: "é€£çš®æ©™",
          ja: "çš®ä»˜ãã‚ªãƒ¬ãƒ³ã‚¸",
          ko: "ê»ì§ˆ ìˆëŠ” ì˜¤ë Œì§€",
          es: "Naranja (Sin pelar)",
          de: "Orange (UngeschÃ¤lt)",
          fi: "Appelsiini (Kuorimaton)",
          fr: "Orange (Non pelÃ©e)",
          ar: "Ø¨Ø±ØªÙ‚Ø§Ù„ (ØºÙŠØ± Ù…Ù‚Ø´Ø±)",
          it: "Arancia (Non sbucciata)",
        },
        coin: {
          en: "Coin",
          zh: "ç¡¬å¹£",
          ja: "ã‚³ã‚¤ãƒ³",
          ko: "ë™ì „",
          es: "Moneda",
          de: "MÃ¼nze",
          fi: "Kolikko",
          fr: "PiÃ¨ce",
          ar: "Ø¹Ù…Ù„Ø©",
          it: "Moneta",
        },
        sponge: {
          en: "Sponge",
          zh: "æµ·ç¶¿",
          ja: "ã‚¹ãƒãƒ³ã‚¸",
          ko: "ìŠ¤í€ì§€",
          es: "Esponja",
          de: "Schwamm",
          fi: "Sieni",
          fr: "Ã‰ponge",
          ar: "Ø¥Ø³ÙÙ†Ø¬Ø©",
          it: "Spugna",
        },
      };

      const items = [
        { id: "wood", result: "float", icon: "ğŸªµ" },
        { id: "rock", result: "sink", icon: "ğŸª¨" },
        { id: "clay_ball", result: "sink", icon: "âš«" }, // Clay ball sinks
        { id: "clay_boat", result: "float", icon: "ğŸ›¶" }, // Clay boat floats (Shape matters!)
        { id: "orange_full", result: "float", icon: "ğŸŠ" }, // Full orange floats (air pockets in peel)
        { id: "orange_peel", result: "sink", icon: "ğŸŸ " }, // Peeled orange sinks (denser)
        { id: "coin", result: "sink", icon: "ğŸª™" },
        { id: "sponge", result: "float", icon: "ğŸ§½" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [currentItem, setCurrentItem] = useState(null);
        const [phase, setPhase] = useState("predict"); // predict, testing, result
        const [prediction, setPrediction] = useState(null);
        const [queue, setQueue] = useState([]);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...items].sort(() => Math.random() - 0.5);
          setQueue(q);
          setCurrentItem(q[0]);
          setPhase("predict");
          setPrediction(null);
        };

        const handlePredict = (guess) => {
          setPrediction(guess);
          setPhase("testing");
        };

        const handleAnimationComplete = () => {
          setPhase("result");
        };

        const next = () => {
          const nextIdx = queue.indexOf(currentItem) + 1;
          if (nextIdx < queue.length) {
            setCurrentItem(queue[nextIdx]);
            setPhase("predict");
            setPrediction(null);
          } else {
            initGame(); // Reset loop
          }
        };

        // Animation variant calculation
        const dropVariants = {
          start: { y: -200, opacity: 1 },
          end: (result) => ({
            y: result === "sink" ? 150 : 0, // 0 is surface, 150 is bottom
            transition: { type: "spring", damping: 10, stiffness: 50 },
          }),
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />

            <h1 className="text-4xl md:text-5xl font-black text-white mb-2 mt-8 drop-shadow-md">
              ğŸš¢ {getText("title")}
            </h1>

            {currentItem && (
              <div className="w-full max-w-lg flex flex-col items-center flex-1 justify-center relative">
                {/* Item Card (Top) - Only show during prediction */}
                {phase === "predict" && (
                  <motion.div
                    initial={{ scale: 0 }}
                    animate={{ scale: 1 }}
                    className="bg-white p-6 rounded-[2rem] shadow-xl border-4 border-blue-200 mb-8 flex flex-col items-center z-20"
                  >
                    <div className="text-8xl mb-2">{currentItem.icon}</div>
                    <div className="text-xl font-bold text-slate-700">
                      {getText(currentItem.id)}
                    </div>
                  </motion.div>
                )}

                {/* Water Tank */}
                <div className="relative w-80 h-96 border-x-8 border-b-8 border-white/50 rounded-b-3xl bg-blue-400/30 overflow-hidden mb-8 shadow-2xl backdrop-blur-sm">
                  {/* Water Surface Line */}
                  <div className="absolute top-1/2 left-0 w-full h-1 bg-white/50 z-10"></div>
                  <div className="absolute top-1/2 left-0 w-full h-full bg-blue-500/50"></div>

                  {/* Bubbles */}
                  <div className="absolute top-1/2 bottom-0 left-0 w-full overflow-hidden">
                    {[...Array(5)].map((_, i) => (
                      <div
                        key={i}
                        className="absolute bg-white/30 rounded-full animate-float-up"
                        style={{
                          left: `${Math.random() * 100}%`,
                          width: `${Math.random() * 20 + 10}px`,
                          height: `${Math.random() * 20 + 10}px`,
                          animationDuration: `${Math.random() * 3 + 2}s`,
                          animationDelay: `${Math.random() * 2}s`,
                        }}
                      ></div>
                    ))}
                  </div>

                  {/* Item Animation */}
                  {phase !== "predict" && (
                    <motion.div
                      className="absolute top-1/2 left-1/2 text-8xl -translate-x-1/2 -translate-y-1/2 z-20"
                      variants={dropVariants}
                      initial="start"
                      animate="end"
                      custom={currentItem.result}
                      onAnimationComplete={handleAnimationComplete}
                    >
                      {currentItem.icon}
                    </motion.div>
                  )}
                </div>

                {/* Controls */}
                {phase === "predict" ? (
                  <div className="w-full">
                    <p className="text-white font-bold text-center mb-4 text-xl shadow-black drop-shadow-md">
                      {getText("predict")}
                    </p>
                    <div className="flex gap-4">
                      <button
                        onClick={() => handlePredict("float")}
                        className="flex-1 bg-white hover:bg-blue-50 text-blue-600 font-black text-2xl py-4 rounded-xl shadow-lg border-b-4 border-blue-200"
                      >
                        â¬†ï¸ {getText("float")}
                      </button>
                      <button
                        onClick={() => handlePredict("sink")}
                        className="flex-1 bg-slate-800 hover:bg-slate-700 text-white font-black text-2xl py-4 rounded-xl shadow-lg border-b-4 border-slate-900"
                      >
                        â¬‡ï¸ {getText("sink")}
                      </button>
                    </div>
                  </div>
                ) : phase === "testing" ? (
                  <div className="text-white font-black text-3xl animate-pulse">
                    {getText("test")}
                  </div>
                ) : (
                  <div className="w-full flex flex-col items-center">
                    <div
                      className={`text-3xl font-black mb-4 px-6 py-2 rounded-xl shadow-xl ${
                        prediction === currentItem.result
                          ? "bg-green-500 text-white"
                          : "bg-yellow-400 text-black"
                      }`}
                    >
                      {prediction === currentItem.result
                        ? getText("correct")
                        : getText("wrong")}
                    </div>
                    <div className="font-bold text-white mb-6 text-xl">
                      {getText(currentItem.id)} = {getText(currentItem.result)}
                    </div>
                    <button
                      onClick={next}
                      className="bg-white text-blue-600 font-black text-xl py-3 px-12 rounded-full shadow-xl hover:scale-105 transition-transform"
                    >
                      {getText("next")} â¡ï¸
                    </button>
                  </div>
                )}
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
