<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏âÂ∏∏Ë≠òÔºöÁâ©Ë≥™‰∏âÊÖã | States of Matter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #ddd6fe 0%, #c4b5fd 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "States of Matter",
          zh: "Áâ©Ë≥™‰∏âÊÖã",
          ja: "Áâ©Ë≥™„ÅÆ‰∏âÊÖã",
          ko: "Î¨ºÏßàÏùò ÏÉÅÌÉú",
          es: "Estados de la Materia",
          de: "Aggregatzust√§nde",
          fi: "Aineen olomuodot",
          fr: "√âtats de la mati√®re",
          ar: "ÿ≠ÿßŸÑÿßÿ™ ÿßŸÑŸÖÿßÿØÿ©",
          it: "Stati della Materia",
        },
        instruction: {
          en: "Solid, Liquid, or Gas?",
          zh: "Âõ∫È´î„ÄÅÊ∂≤È´îÈÇÑÊòØÊ∞£È´îÔºü",
          ja: "Âõ∫‰Ωì„ÄÅÊ∂≤‰Ωì„ÄÅ„Åæ„Åü„ÅØÊ∞ó‰ΩìÔºü",
          ko: "Í≥†Ï≤¥, Ïï°Ï≤¥, ÎòêÎäî Í∏∞Ï≤¥?",
          es: "¬øS√≥lido, L√≠quido o Gas?",
          de: "Fest, Fl√ºssig oder Gasf√∂rmig?",
          fi: "Kiinte√§, neste vai kaasu?",
          fr: "Solide, Liquide ou Gaz ?",
          ar: "ÿµŸÑÿ®ÿå ÿ≥ÿßÿ¶ŸÑÿå ÿ£ŸÖ ÿ∫ÿßÿ≤ÿü",
          it: "Solido, Liquido o Gas?",
        },

        solid: {
          en: "Solid",
          zh: "Âõ∫È´î",
          ja: "Âõ∫‰Ωì",
          ko: "Í≥†Ï≤¥",
          es: "S√≥lido",
          de: "Feststoff",
          fi: "Kiinte√§",
          fr: "Solide",
          ar: "ÿµŸÑÿ®",
          it: "Solido",
        },
        liquid: {
          en: "Liquid",
          zh: "Ê∂≤È´î",
          ja: "Ê∂≤‰Ωì",
          ko: "Ïï°Ï≤¥",
          es: "L√≠quido",
          de: "Fl√ºssigkeit",
          fi: "Neste",
          fr: "Liquide",
          ar: "ÿ≥ÿßÿ¶ŸÑ",
          it: "Liquido",
        },
        gas: {
          en: "Gas",
          zh: "Ê∞£È´î",
          ja: "Ê∞ó‰Ωì",
          ko: "Í∏∞Ï≤¥",
          es: "Gas",
          de: "Gas",
          fi: "Kaasu",
          fr: "Gaz",
          ar: "ÿ∫ÿßÿ≤",
          it: "Gas",
        },

        ice: {
          en: "Ice",
          zh: "ÂÜ∞",
          ja: "Ê∞∑",
          ko: "ÏñºÏùå",
          es: "Hielo",
          de: "Eis",
          fi: "J√§√§",
          fr: "Gla√ßon",
          ar: "ÿ¨ŸÑŸäÿØ",
          it: "Ghiaccio",
        },
        water: {
          en: "Water",
          zh: "Ê∞¥",
          ja: "Ê∞¥",
          ko: "Î¨º",
          es: "Agua",
          de: "Wasser",
          fi: "Vesi",
          fr: "Eau",
          ar: "ŸÖÿßÿ°",
          it: "Acqua",
        },
        steam: {
          en: "Steam",
          zh: "Ê∞¥Ëí∏Ê∞£",
          ja: "Ëí∏Ê∞ó",
          ko: "Ï¶ùÍ∏∞",
          es: "Vapor",
          de: "Dampf",
          fi: "H√∂yry",
          fr: "Vapeur",
          ar: "ÿ®ÿÆÿßÿ±",
          it: "Vapore",
        },
        rock: {
          en: "Rock",
          zh: "Áü≥È†≠",
          ja: "Â≤©",
          ko: "Î∞îÏúÑ",
          es: "Roca",
          de: "Stein",
          fi: "Kivi",
          fr: "Rocher",
          ar: "ÿµÿÆÿ±ÿ©",
          it: "Roccia",
        },
        juice: {
          en: "Juice",
          zh: "ÊûúÊ±Å",
          ja: "„Ç∏„É•„Éº„Çπ",
          ko: "Ï£ºÏä§",
          es: "Jugo",
          de: "Saft",
          fi: "Mehu",
          fr: "Jus",
          ar: "ÿπÿµŸäÿ±",
          it: "Succo",
        },
        air: {
          en: "Air in Balloon",
          zh: "Ê∞£ÁêÉÂÖßÁöÑÊ∞£È´î",
          ja: "È¢®Ëàπ„ÅÆÁ©∫Ê∞ó",
          ko: "ÌíçÏÑ† ÏÜç Í≥µÍ∏∞",
          es: "Aire en globo",
          de: "Luft im Ballon",
          fi: "Ilma pallossa",
          fr: "Air dans le ballon",
          ar: "ŸáŸàÿßÿ° ŸÅŸä ÿßŸÑÿ®ÿßŸÑŸàŸÜ",
          it: "Aria nel palloncino",
        },
        smoke: {
          en: "Smoke",
          zh: "ÁÖô",
          ja: "ÁÖô",
          ko: "Ïó∞Í∏∞",
          es: "Humo",
          de: "Rauch",
          fi: "Savu",
          fr: "Fum√©e",
          ar: "ÿØÿÆÿßŸÜ",
          it: "Fumo",
        },
        chair: {
          en: "Chair",
          zh: "Ê§ÖÂ≠ê",
          ja: "Ê§ÖÂ≠ê",
          ko: "ÏùòÏûê",
          es: "Silla",
          de: "Stuhl",
          fi: "Tuoli",
          fr: "Chaise",
          ar: "ŸÉÿ±ÿ≥Ÿä",
          it: "Sedia",
        },

        desc_solid: {
          en: "Fixed Shape",
          zh: "ÊúâÂõ∫ÂÆöÂΩ¢ÁãÄ",
          ja: "‰∏ÄÂÆö„ÅÆÂΩ¢",
          ko: "Í≥†Ï†ïÎêú Î™®Ïñë",
          es: "Forma fija",
          de: "Feste Form",
          fi: "Kiinte√§ muoto",
          fr: "Forme fixe",
          ar: "ÿ¥ŸÉŸÑ ÿ´ÿßÿ®ÿ™",
          it: "Forma fissa",
        },
        desc_liquid: {
          en: "Flows, No Shape",
          zh: "ÊúÉÊµÅÂãïÔºåÁÑ°Âõ∫ÂÆöÂΩ¢ÁãÄ",
          ja: "ÊµÅ„Çå„Çã„ÄÅÂΩ¢„Åå„Å™„ÅÑ",
          ko: "ÌùêÎ¶Ñ, Î™®Ïñë ÏóÜÏùå",
          es: "Fluye, sin forma",
          de: "Flie√üt, keine Form",
          fi: "Virtaa, ei muotoa",
          fr: "Coule, pas de forme",
          ar: "Ÿäÿ™ÿØŸÅŸÇÿå ŸÑÿß ÿ¥ŸÉŸÑ ŸÑŸá",
          it: "Scorre, nessuna forma",
        },
        desc_gas: {
          en: "Spreads out",
          zh: "ÊúÉÊì¥Êï£ÔºåÁÑ°Âõ∫ÂÆöÂΩ¢ÁãÄ",
          ja: "Â∫É„Åå„Çã",
          ko: "ÌçºÏßê",
          es: "Se expande",
          de: "Breitet sich aus",
          fi: "Levitt√§ytyy",
          fr: "Se r√©pand",
          ar: "ŸäŸÜÿ™ÿ¥ÿ±",
          it: "Si diffonde",
        },

        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµÏûÖÎãàÎã§!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "ÂÜçË©¶‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶",
          ko: "Îã§Ïãú ÏãúÎèÑÌïòÏÑ∏Ïöî",
          es: "Int√©ntalo de nuevo",
          de: "Versuch es nochmal",
          fi: "Yrit√§ uudelleen",
          fr: "R√©essayez",
          ar: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Riprova",
        },
        completed: {
          en: "Matter Master!",
          zh: "‰∏âÊÖãÂ∞àÂÆ∂ÔºÅ",
          ja: "Áâ©Ë≥™„Éû„Çπ„Çø„ÉºÔºÅ",
          ko: "Î¨ºÏßà ÎßàÏä§ÌÑ∞!",
          es: "¬°Maestro de la Materia!",
          de: "Materie-Meister!",
          fi: "Ainemestari!",
          fr: "Ma√Ætre de la mati√®re !",
          ar: "ÿÆÿ®Ÿäÿ± ÿßŸÑŸÖÿßÿØÿ©!",
          it: "Maestro della Materia!",
        },
        reset: {
          en: "Play Again",
          zh: "ÂÜçÁé©‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§",
          ko: "Îã§Ïãú ÌïòÍ∏∞",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "ÿßŸÑÿπÿ® ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Gioca di Nuovo",
        },
      };

      const categories = [
        {
          id: "solid",
          color: "bg-blue-200 border-blue-400",
          bg: "bg-blue-500",
          icon: "üßä",
        },
        {
          id: "liquid",
          color: "bg-cyan-200 border-cyan-400",
          bg: "bg-cyan-500",
          icon: "üíß",
        },
        {
          id: "gas",
          color: "bg-slate-200 border-slate-400",
          bg: "bg-slate-500",
          icon: "üí®",
        },
      ];

      const items = [
        { id: "ice", type: "solid", icon: "üßä" },
        { id: "water", type: "liquid", icon: "üíß" },
        { id: "steam", type: "gas", icon: "‚ô®Ô∏è" },
        { id: "rock", type: "solid", icon: "ü™®" },
        { id: "juice", type: "liquid", icon: "üßÉ" },
        { id: "air", type: "gas", icon: "üéà" },
        { id: "smoke", type: "gas", icon: "üè≠" },
        { id: "chair", type: "solid", icon: "ü™ë" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [current, setCurrent] = useState(null);
        const [feedback, setFeedback] = useState(null);
        const [score, setScore] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...items].sort(() => Math.random() - 0.5);
          setQueue(q);
          setCurrent(q[0]);
          setScore(0);
          setFeedback(null);
        };

        const handleSort = (catId) => {
          if (feedback) return;

          if (current.type === catId) {
            setFeedback("correct");
            setScore((s) => s + 10);
            setTimeout(() => {
              setFeedback(null);
              const nextIdx = queue.indexOf(current) + 1;
              if (nextIdx < queue.length) setCurrent(queue[nextIdx]);
              else setCurrent(null);
            }, 800);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none font-sans overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-violet-800 mb-4 mt-8 drop-shadow-sm bg-white/50 px-6 py-2 rounded-full">
              ‚öóÔ∏è {getText("title")}
            </h1>

            {current ? (
              <div className="w-full max-w-5xl flex flex-col items-center flex-1 justify-center relative">
                {/* Floating Item */}
                <div className="relative mb-8 z-20">
                  <motion.div
                    key={current.id}
                    initial={{ scale: 0, y: 50 }}
                    animate={{ scale: 1, y: 0 }}
                    exit={{ scale: 0, opacity: 0 }}
                    className="bg-white p-12 rounded-[2.5rem] shadow-2xl border-8 border-violet-200 flex flex-col items-center justify-center w-72 h-72"
                  >
                    <div className="text-8xl mb-4">{current.icon}</div>
                    <div className="text-3xl font-black text-slate-700 leading-tight">
                      {getText(current.id)}
                    </div>
                  </motion.div>

                  {feedback && (
                    <div
                      className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 px-8 py-4 rounded-full font-black text-4xl shadow-2xl whitespace-nowrap ${
                        feedback === "correct"
                          ? "bg-green-500 text-white"
                          : "bg-red-500 text-white"
                      }`}
                    >
                      {getText(feedback)}
                    </div>
                  )}
                </div>

                <p className="font-bold text-violet-900 mb-8 bg-white/60 px-6 py-1 rounded-full text-xl">
                  {getText("instruction")}
                </p>

                {/* Jars */}
                <div className="flex flex-col md:flex-row gap-6 w-full justify-center">
                  {categories.map((cat) => (
                    <button
                      key={cat.id}
                      onClick={() => handleSort(cat.id)}
                      className={`flex-1 ${cat.color} border-x-4 border-b-8 rounded-b-3xl rounded-t-lg p-6 flex flex-col items-center shadow-lg active:scale-95 transition-all relative overflow-hidden group h-64 justify-end`}
                    >
                      {/* Jar Liquid/Content Effect */}
                      <div
                        className={`absolute bottom-0 left-0 w-full h-[30%] ${cat.bg} opacity-20 group-hover:h-[40%] transition-all duration-300`}
                      ></div>

                      <div className="text-6xl mb-4 z-10 drop-shadow-lg">
                        {cat.icon}
                      </div>
                      <div className="font-black text-3xl z-10 text-slate-800">
                        {getText(cat.id)}
                      </div>
                      <div className="text-sm font-bold opacity-60 z-10 mt-2 bg-white/50 px-2 rounded">
                        {getText(`desc_${cat.id}`)}
                      </div>
                    </button>
                  ))}
                </div>
              </div>
            ) : (
              <div className="bg-white/90 p-12 rounded-3xl shadow-xl text-center mt-20">
                <div className="text-8xl mb-4">‚öõÔ∏è</div>
                <h2 className="text-4xl font-black text-violet-800 mb-6">
                  {getText("completed")}
                </h2>
                <button
                  onClick={initGame}
                  className="bg-violet-600 text-white px-10 py-4 rounded-full font-black text-2xl hover:bg-violet-700 shadow-xl"
                >
                  {getText("reset")} üîÑ
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
