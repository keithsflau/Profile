<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Nutrition Scanner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f0fdf4;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Nutrition Scanner",
          zh: "ç‡Ÿé¤ŠæŽƒæå™¨",
          ja: "æ „é¤Šã‚¹ã‚­ãƒ£ãƒŠãƒ¼",
          ko: "ì˜ì–‘ ìŠ¤ìºë„ˆ",
          es: "EscÃ¡ner de nutriciÃ³n",
          de: "ErnÃ¤hrungsscanner",
          fi: "Ravintoskanneri",
          fr: "Scanner de nutrition",
          ar: "Ù…Ø§Ø³Ø­ Ø§Ù„ØªØºØ°ÙŠØ©",
          it: "Scanner Nutrizionale",
        },
        instruction: {
          en: "Scan the food to see its nutrients!",
          zh: "æŽƒæé£Ÿç‰©ä»¥æŸ¥çœ‹å…¶ç‡Ÿé¤Šæˆåˆ†ï¼",
          ja: "é£Ÿå“ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦æ „é¤Šç´ ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼",
          ko: "ìŒì‹ì„ ìŠ¤ìº”í•˜ì—¬ ì˜ì–‘ì†Œë¥¼ í™•ì¸í•˜ì„¸ìš”!",
          es: "Â¡Escanea la comida para ver sus nutrientes!",
          de: "Scanne das Essen, um seine NÃ¤hrstoffe zu sehen!",
          fi: "Skannaa ruoka nÃ¤hdÃ¤ksesi sen ravintoaineet!",
          fr: "Scannez les aliments pour voir leurs nutriments !",
          ar: "Ø§Ù…Ø³Ø­ Ø§Ù„Ø·Ø¹Ø§Ù… Ù„Ø±Ø¤ÙŠØ© Ø¹Ù†Ø§ØµØ±Ù‡ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©!",
          it: "Scansiona il cibo per vedere i suoi nutrienti!",
        },
        scan: {
          en: "SCAN",
          zh: "æŽƒæ",
          ja: "ã‚¹ã‚­ãƒ£ãƒ³",
          ko: "ìŠ¤ìº”",
          es: "ESCANEAR",
          de: "SCANNEN",
          fi: "SKANNAA",
          fr: "SCANNER",
          ar: "Ù…Ø³Ø­",
          it: "SCANSIONA",
        },
        protein: {
          en: "Protein",
          zh: "è›‹ç™½è³ª",
          ja: "ã‚¿ãƒ³ãƒ‘ã‚¯è³ª",
          ko: "ë‹¨ë°±ì§ˆ",
          es: "ProteÃ­na",
          de: "Protein",
          fi: "Proteiini",
          fr: "ProtÃ©ine",
          ar: "Ø¨Ø±ÙˆØªÙŠÙ†",
          it: "Proteine",
        },
        carbs: {
          en: "Carbohydrates",
          zh: "ç¢³æ°´åŒ–åˆç‰©",
          ja: "ç‚­æ°´åŒ–ç‰©",
          ko: "íƒ„ìˆ˜í™”ë¬¼",
          es: "Carbohidratos",
          de: "Kohlenhydrate",
          fi: "Hiilihydraatit",
          fr: "Glucides",
          ar: "ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª",
          it: "Carboidrati",
        },
        fat: {
          en: "Fat",
          zh: "è„‚è‚ª",
          ja: "è„‚è‚ª",
          ko: "ì§€ë°©",
          es: "Grasa",
          de: "Fett",
          fi: "Rasva",
          fr: "Graisses",
          ar: "Ø¯Ù‡ÙˆÙ†",
          it: "Grassi",
        },
        sugar: {
          en: "Sugar",
          zh: "ç³–",
          ja: "ç³–åˆ†",
          ko: "ì„¤íƒ•",
          es: "AzÃºcar",
          de: "Zucker",
          fi: "Sokeri",
          fr: "Sucre",
          ar: "Ø³ÙƒØ±",
          it: "Zucchero",
        },

        verdict: {
          en: "Verdict:",
          zh: "è©•åƒ¹ï¼š",
          ja: "åˆ¤å®šï¼š",
          ko: "íŒê²°:",
          es: "Veredicto:",
          de: "Urteil:",
          fi: "Tuomio:",
          fr: "Verdict :",
          ar: "Ø§Ù„Ø­ÙƒÙ…:",
          it: "Verdetto:",
        },
        healthy: {
          en: "Healthy Choice",
          zh: "å¥åº·é¸æ“‡",
          ja: "å¥åº·çš„ãªé¸æŠž",
          ko: "ê±´ê°•í•œ ì„ íƒ",
          es: "OpciÃ³n saludable",
          de: "Gesunde Wahl",
          fi: "Terveellinen valinta",
          fr: "Choix sain",
          ar: "Ø®ÙŠØ§Ø± ØµØ­ÙŠ",
          it: "Scelta Salutare",
        },
        moderation: {
          en: "Eat in Moderation",
          zh: "é©é‡é£Ÿç”¨",
          ja: "é©åº¦ã«é£Ÿã¹ã‚‹",
          ko: "ì ë‹¹ížˆ ì„­ì·¨",
          es: "Comer con moderaciÃ³n",
          de: "In MaÃŸen essen",
          fi: "SyÃ¶ kohtuudella",
          fr: "Ã€ consommer avec modÃ©ration",
          ar: "ØªÙ†Ø§ÙˆÙ„ Ø¨Ø§Ø¹ØªØ¯Ø§Ù„",
          it: "Mangiare con Moderazione",
        },
        unhealthy: {
          en: "Unhealthy (Limit)",
          zh: "ä¸å¥åº· (å°‘åƒ)",
          ja: "ä¸å¥åº· (åˆ¶é™ã™ã‚‹)",
          ko: "ê±´ê°•ì— í•´ë¡œì›€ (ì œí•œ)",
          es: "Poco saludable (Limitar)",
          de: "Ungesund (Begrenzen)",
          fi: "EpÃ¤terveellinen (Rajoita)",
          fr: "Malsain (Limiter)",
          ar: "ØºÙŠØ± ØµØ­ÙŠ (Ø§Ù„Ø­Ø¯)",
          it: "Malsano (Limitare)",
        },
        // Food Names
        apple: { en: "Apple", zh: "è˜‹æžœ", ja: "ãƒªãƒ³ã‚´", ko: "ì‚¬ê³¼", es: "Manzana", de: "Apfel", fi: "Omena", fr: "Pomme", ar: "ØªÙØ§Ø­Ø©", it: "Mela" },
        burger: { en: "Burger", zh: "æ¼¢å ¡", ja: "ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼", ko: "í–„ë²„ê±°", es: "Hamburguesa", de: "Burger", fi: "Hampurilainen", fr: "Burger", ar: "Ø¨Ø±ØºØ±", it: "Hamburger" },
        broccoli: { en: "Broccoli", zh: "è¥¿è˜­èŠ±", ja: "ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼", ko: "ë¸Œë¡œì½œë¦¬", es: "BrÃ³coli", de: "Brokkoli", fi: "Parsakaali", fr: "Brocoli", ar: "Ø¨Ø±ÙˆÙƒÙ„ÙŠ", it: "Broccoli" },
        pizza: { en: "Pizza", zh: "æŠ«è–©", ja: "ãƒ”ã‚¶", ko: "í”¼ìž", es: "Pizza", de: "Pizza", fi: "Pizza", fr: "Pizza", ar: "Ø¨ÙŠØªØ²Ø§", it: "Pizza" },
        rice: { en: "Rice", zh: "ç±³é£¯", ja: "ç±³", ko: "ë°¥", es: "Arroz", de: "Reis", fi: "Riisi", fr: "Riz", ar: "Ø£Ø±Ø²", it: "Riso" },
        chicken: { en: "Chicken", zh: "é›žè‚‰", ja: "é¶è‚‰", ko: "ë‹­ê³ ê¸°", es: "Pollo", de: "HÃ¼hnchen", fi: "Kana", fr: "Poulet", ar: "Ø¯Ø¬Ø§Ø¬", it: "Pollo" },
        cake: { en: "Cake", zh: "è›‹ç³•", ja: "ã‚±ãƒ¼ã‚­", ko: "ì¼€ì´í¬", es: "Pastel", de: "Kuchen", fi: "Kakku", fr: "GÃ¢teau", ar: "ÙƒØ¹ÙƒØ©", it: "Torta" },
        fish: { en: "Fish", zh: "é­š", ja: "é­š", ko: "ìƒì„ ", es: "Pescado", de: "Fisch", fi: "Kala", fr: "Poisson", ar: "Ø³Ù…Ùƒ", it: "Pesce" },

        // Levels
        low: { en: "Low", zh: "ä½Ž", ja: "ä½Ž", ko: "ë‚®ìŒ", es: "Bajo", de: "Niedrig", fi: "Matala", fr: "Faible", ar: "Ù…Ù†Ø®ÙØ¶", it: "Basso" },
        med: { en: "Med", zh: "ä¸­", ja: "ä¸­", ko: "ì¤‘ê°„", es: "Medio", de: "Mittel", fi: "Keski", fr: "Moyen", ar: "Ù…ØªÙˆØ³Ø·", it: "Medio" },
        high: { en: "High", zh: "é«˜", ja: "é«˜", ko: "ë†’ìŒ", es: "Alto", de: "Hoch", fi: "Korkea", fr: "Ã‰levÃ©", ar: "Ø¹Ø§Ù„ÙŠ", it: "Alto" },
      };

      const foods = [
        { id: 1, name: "apple", icon: "ðŸŽ", p: "low", c: "med", f: "low", s: "med", type: "healthy" },
        { id: 2, name: "burger", icon: "ðŸ”", p: "high", c: "high", f: "high", s: "low", type: "unhealthy" },
        { id: 3, name: "broccoli", icon: "ðŸ¥¦", p: "med", c: "low", f: "low", s: "low", type: "healthy" },
        { id: 4, name: "pizza", icon: "ðŸ•", p: "med", c: "high", f: "high", s: "low", type: "unhealthy" },
        { id: 5, name: "rice", icon: "ðŸš", p: "low", c: "high", f: "low", s: "low", type: "moderation" },
        { id: 6, name: "chicken", icon: "ðŸ—", p: "high", c: "low", f: "med", s: "low", type: "healthy" },
        { id: 7, name: "cake", icon: "ðŸ°", p: "low", c: "high", f: "high", s: "high", type: "unhealthy" },
        { id: 8, name: "fish", icon: "ðŸŸ", p: "high", c: "low", f: "low", s: "low", type: "healthy" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [scannedItem, setScannedItem] = useState(null);
        const [scanning, setScanning] = useState(false);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const handleScan = (item) => {
          setScanning(true);
          setScannedItem(null);
          setTimeout(() => {
            setScanning(false);
            setScannedItem(item);
          }, 1500);
        };

        const getColor = (level) => {
          if (level === "high") return "text-red-500 font-bold";
          if (level === "med") return "text-yellow-500 font-bold";
          return "text-green-500 font-bold";
        };

        const getTypeColor = (type) => {
          if (type === "healthy")
            return "bg-green-100 text-green-700 border-green-300";
          if (type === "moderation")
            return "bg-yellow-100 text-yellow-700 border-yellow-300";
          return "bg-red-100 text-red-700 border-red-300";
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-green-700">
              ðŸ¤³ {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="flex flex-col md:flex-row gap-8 w-full max-w-5xl items-start justify-center">
              {/* Food Belt */}
              <div className="bg-white p-6 rounded-3xl shadow-lg w-full md:w-1/3 flex flex-wrap gap-4 justify-center border-2 border-slate-100">
                {foods.map((f) => (
                  <button
                    key={f.id}
                    onClick={() => handleScan(f)}
                    className="text-6xl p-4 bg-slate-50 rounded-2xl hover:bg-green-50 hover:scale-110 transition-all border border-slate-200"
                  >
                    {f.icon}
                  </button>
                ))}
              </div>

              {/* Scanner Device */}
              <div className="relative w-full md:w-1/2 bg-slate-800 rounded-[3rem] p-8 border-8 border-slate-600 shadow-2xl min-h-[500px] flex flex-col items-center justify-between">
                {/* Screen */}
                <div className="w-full bg-black rounded-2xl h-[300px] relative overflow-hidden flex items-center justify-center border-4 border-slate-700">
                  {scanning && (
                    <div className="absolute inset-0 z-20 flex items-center justify-center">
                      <motion.div
                        className="w-full h-1 bg-green-500 shadow-[0_0_20px_#4ade80]"
                        animate={{ y: [-150, 150, -150] }}
                        transition={{
                          repeat: Infinity,
                          duration: 1.5,
                          ease: "linear",
                        }}
                      />
                      <div className="absolute bottom-4 text-green-500 font-mono animate-pulse">
                        {getText("scan")}...
                      </div>
                    </div>
                  )}

                  {!scanning && scannedItem ? (
                    <div className="w-full h-full p-6 flex flex-col">
                      <div className="flex items-center gap-4 mb-4 border-b border-slate-700 pb-4">
                        <div className="text-6xl">{scannedItem.icon}</div>
                        <div className="text-3xl text-white font-bold">
                        <div className="text-3xl text-white font-bold">
                          {getText(scannedItem.name)}
                        </div>
                      </div>

                      <div className="grid grid-cols-2 gap-4 text-sm font-mono flex-1">
                        <div className="bg-slate-900 p-2 rounded text-slate-300">
                          {getText("protein")}:{" "}
                          <span className={getColor(scannedItem.p)}>
                            {getText(scannedItem.p)}
                          </span>
                        </div>
                        <div className="bg-slate-900 p-2 rounded text-slate-300">
                          {getText("carbs")}:{" "}
                          <span className={getColor(scannedItem.c)}>
                            {getText(scannedItem.c)}
                          </span>
                        </div>
                        <div className="bg-slate-900 p-2 rounded text-slate-300">
                          {getText("fat")}:{" "}
                          <span className={getColor(scannedItem.f)}>
                            {getText(scannedItem.f)}
                          </span>
                        </div>
                        <div className="bg-slate-900 p-2 rounded text-slate-300">
                          {getText("sugar")}:{" "}
                          <span className={getColor(scannedItem.s)}>
                            {getText(scannedItem.s)}
                          </span>
                        </div>
                      </div>

                      <div
                        className={`mt-4 p-3 rounded-lg border-l-4 text-center font-bold ${getTypeColor(
                          scannedItem.type
                        )}`}
                      >
                        {getText(scannedItem.type)}
                      </div>
                    </div>
                  ) : (
                    <div className="text-slate-600 font-mono text-center px-8">
                      [ System Ready ]<br />
                      Select item to scan
                    </div>
                  )}
                </div>

                {/* Controls */}
                <div className="w-full flex justify-center pb-4">
                  <div className="w-16 h-16 rounded-full border-4 border-white flex items-center justify-center">
                    <div className="w-10 h-10 bg-red-500 rounded-full animate-pulse"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
