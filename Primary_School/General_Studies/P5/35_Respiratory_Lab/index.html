<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Respiratory Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fefffa;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Lungs & Breathing",
          zh: "è‚ºèˆ‡å‘¼å¸",
          ja: "è‚ºã¨å‘¼å¸",
          ko: "íì™€ í˜¸í¡",
          es: "Pulmones y respiraciÃ³n",
          de: "Lungen & Atmung",
          fi: "Keuhkot ja hengitys",
          fr: "Poumons et respiration",
          ar: "Ø§Ù„Ø±Ø¦ØªÙŠÙ† ÙˆØ§Ù„ØªÙ†ÙØ³",
          it: "Polmoni e Respirazione",
        },
        instruction: {
          en: "Press Inhale/Exhale to see how the diaphragm works.",
          zh: "æŒ‰ä¸‹å¸æ°£/å‘¼æ°£ä»¥è§€å¯Ÿæ©«è†ˆè†œå¦‚ä½•é‹ä½œã€‚",
          ja: "å¸ã†/åãã‚’æŠ¼ã—ã¦ã€æ¨ªéš”è†œã®åƒãã‚’è¦‹ã¦ãã ã•ã„ã€‚",
          ko: "ìˆ¨ì„ ë“¤ì´ë§ˆì‹œê³  ë‚´ì‰¬ë©° íš¡ê²©ë§‰ì´ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.",
          es: "Presiona Inhalar/Exhalar para ver cÃ³mo funciona el diafragma.",
          de: "DrÃ¼cke Einatmen/Ausatmen, um zu sehen, wie das Zwerchfell funktioniert.",
          fi: "Paina SisÃ¤Ã¤nhengitys/Uloshengitys nÃ¤hdÃ¤ksesi, miten pallea toimii.",
          fr: "Appuyez sur Inspirer/Expirer pour voir comment fonctionne le diaphragme.",
          ar: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù‡ÙŠÙ‚/Ø§Ù„Ø²ÙÙŠØ± Ù„Ø±Ø¤ÙŠØ© ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„Ø­Ø¬Ø§Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø².",
          it: "Premi Inala/esala per vedere come funziona il diaframma.",
        },
        inhale: { en: "Inhale", zh: "å¸æ°£", ja: "å¸ã†", ko: "ë“¤ìˆ¨" },
        exhale: { en: "Exhale", zh: "å‘¼æ°£", ja: "åã", ko: "ë‚ ìˆ¨" },
        diaphragm: {
          en: "Diaphragm",
          zh: "æ©«è†ˆè†œ",
          ja: "æ¨ªéš”è†œ",
          ko: "íš¡ê²©ë§‰",
        },
        oxygen: {
          en: "Oxygen (O2)",
          zh: "æ°§æ°£ (O2)",
          ja: "é…¸ç´  (O2)",
          ko: "ì‚°ì†Œ (O2)",
        },
        co2: {
          en: "Carbon Dioxide (CO2)",
          zh: "äºŒæ°§åŒ–ç¢³ (CO2)",
          ja: "äºŒé…¸åŒ–ç‚­ç´  (CO2)",
          ko: "ì´ì‚°í™”íƒ„ì†Œ (CO2)",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [state, setState] = useState("rest"); // rest, inhale, exhale

        const getText = (key) => t[key][lang] || t[key]["en"];

        // Inhale: Diaphragm moves DOWN, Lungs EXPAND. Air comes IN.
        // Exhale: Diaphragm moves UP, Lungs SHRINK. Air goes OUT.

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-sky-600">
              {getText("title")}
            </h1>

            <div className="w-full max-w-lg bg-sky-50 p-8 rounded-3xl shadow-xl flex flex-col items-center">
              {/* Visualizer */}
              <div className="relative w-[300px] h-[400px] border-4 border-slate-300 rounded-[50px] bg-white overflow-hidden mb-8">
                {/* Air Particles */}
                <motion.div
                  className="absolute top-[50px] left-[130px] w-10 h-10 text-2xl flex flex-col items-center"
                  animate={{
                    y: state === "inhale" ? 100 : state === "exhale" ? -100 : 0,
                    opacity: state === "rest" ? 0 : 1,
                  }}
                >
                  {state === "inhale" ? "ğŸ”µ" : "âš«"}
                </motion.div>

                {/* Trachea */}
                <div className="absolute top-0 left-[140px] w-5 h-[100px] bg-pink-200"></div>

                {/* Lungs */}
                <motion.div
                  className="absolute top-[100px] left-[50px] w-[200px] h-[200px] bg-pink-300 rounded-[4rem] opacity-80"
                  animate={{ scale: state === "inhale" ? 1.2 : 0.9 }}
                ></motion.div>

                {/* Diaphragm (Curve at bottom) */}
                <motion.div
                  className="absolute bottom-[50px] left-0 w-full h-[20px] bg-red-500 rounded-[50%]"
                  animate={{
                    y: state === "inhale" ? 40 : state === "exhale" ? -20 : 0,
                    scaleX: state === "inhale" ? 0.9 : 1.1,
                  }}
                ></motion.div>

                <div className="absolute bottom-4 left-1/2 -translate-x-1/2 text-xs font-bold text-red-600">
                  {getText("diaphragm")}
                </div>
              </div>

              <div className="flex gap-4">
                <button
                  onClick={() => setState("inhale")}
                  className={`px-8 py-4 rounded-xl font-bold text-xl shadow-lg transition-all ${
                    state === "inhale"
                      ? "bg-sky-500 text-white scale-105"
                      : "bg-white text-sky-500 border-2 border-sky-200"
                  }`}
                >
                  {getText("inhale")}
                </button>
                <button
                  onClick={() => setState("exhale")}
                  className={`px-8 py-4 rounded-xl font-bold text-xl shadow-lg transition-all ${
                    state === "exhale"
                      ? "bg-slate-500 text-white scale-105"
                      : "bg-white text-slate-500 border-2 border-slate-200"
                  }`}
                >
                  {getText("exhale")}
                </button>
              </div>

              {state !== "rest" && (
                <div className="mt-6 font-bold text-lg animate-fade-in text-center">
                  {state === "inhale" ? (
                    <span className="text-blue-500">
                      â¬‡ï¸ Diaphragm Down = Air In ({getText("oxygen")})
                    </span>
                  ) : (
                    <span className="text-slate-600">
                      â¬†ï¸ Diaphragm Up = Air Out ({getText("co2")})
                    </span>
                  )}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
