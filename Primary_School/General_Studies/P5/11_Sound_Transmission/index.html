<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Sound Transmission</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #eef2ff;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Travel of Sound",
          zh: "è²éŸ³çš„å‚³æ’­",
          ja: "éŸ³ã®ä¼ã‚ã‚Šæ–¹",
          ko: "ì†Œë¦¬ì˜ ì´ë™",
          es: "PropagaciÃ³n del sonido",
          de: "Ausbreitung von Schall",
          fi: "Ã„Ã¤nen leviÃ¤minen",
          fr: "Propagation du son",
          ar: "Ø§Ù†ØªØ´Ø§Ø± Ø§Ù„ØµÙˆØª",
          it: "Propagazione del Suono",
        },
        instruction: {
          en: "Tap to make a sound and see how fast it travels!",
          zh: "é»æ“Šç™¼å‡ºè²éŸ³ï¼Œçœ‹çœ‹å®ƒçš„å‚³æ’­é€Ÿåº¦ï¼",
          ja: "ã‚¿ãƒƒãƒ—ã—ã¦éŸ³ã‚’å‡ºã—ã€ã©ã‚Œãã‚‰ã„é€Ÿãä¼ã‚ã‚‹ã‹è¦‹ã¦ã¿ã‚ˆã†ï¼",
          ko: "íƒ­í•˜ì—¬ ì†Œë¦¬ë¥¼ ë‚´ê³  ì´ë™ ì†ë„ë¥¼ í™•ì¸í•˜ì„¸ìš”!",
          es: "Â¡Toca para hacer un sonido y ver quÃ© tan rÃ¡pido viaja!",
          de: "Tippe, um ein GerÃ¤usch zu machen und zu sehen, wie schnell es sich ausbreitet!",
          fi: "Napauta tehdÃ¤ksesi Ã¤Ã¤nen ja nÃ¤e kuinka nopeasti se kulkee!",
          fr: "Tapez pour faire un son et voir Ã  quelle vitesse il voyage !",
          ar: "Ø§Ø¶ØºØ· Ù„Ø¥ØµØ¯Ø§Ø± ØµÙˆØª ÙˆØ´Ø§Ù‡Ø¯ Ø³Ø±Ø¹Ø© Ø§Ù†ØªÙ‚Ø§Ù„Ù‡!",
          it: "Tocca per fare un suono e vedi quanto viaggia veloce!",
        },
        gas: {
          en: "Gas (Air)",
          zh: "æ°£é«” (ç©ºæ°£)",
          ja: "æ°—ä½“ (ç©ºæ°—)",
          ko: "ê¸°ì²´ (ê³µê¸°)",
          es: "Gas (Aire)",
          de: "Gas (Luft)",
          fi: "Kaasu (Ilma)",
          fr: "Gaz (Air)",
          ar: "ØºØ§Ø² (Ù‡ÙˆØ§Ø¡)",
          it: "Gas (Aria)",
        },
        liquid: {
          en: "Liquid (Water)",
          zh: "æ¶²é«” (æ°´)",
          ja: "æ¶²ä½“ (æ°´)",
          ko: "ì•¡ì²´ (ë¬¼)",
          es: "LÃ­quido (Agua)",
          de: "FlÃ¼ssigkeit (Wasser)",
          fi: "Neste (Vesi)",
          fr: "Liquide (Eau)",
          ar: "Ø³Ø§Ø¦Ù„ (Ù…Ø§Ø¡)",
          it: "Liquido (Acqua)",
        },
        solid: {
          en: "Solid (Wood/Metal)",
          zh: "å›ºé«” (æœ¨/é‡‘å±¬)",
          ja: "å›ºä½“ (æœ¨/é‡‘å±)",
          ko: "ê³ ì²´ (ë‚˜ë¬´/ê¸ˆì†)",
          es: "SÃ³lido (Madera/Metal)",
          de: "Feststoff (Holz/Metall)",
          fi: "KiinteÃ¤ (Puu/Metalli)",
          fr: "Solide (Bois/MÃ©tal)",
          ar: "ØµÙ„Ø¨ (Ø®Ø´Ø¨/Ù…Ø¹Ø¯Ù†)",
          it: "Solido (Legno/Metallo)",
        },
        speed: {
          en: "Speed",
          zh: "é€Ÿåº¦",
          ja: "é€Ÿåº¦",
          ko: "ì†ë„",
          es: "Velocidad",
          de: "Geschwindigkeit",
          fi: "Nopeus",
          fr: "Vitesse",
          ar: "Ø³Ø±Ø¹Ø©",
          it: "VelocitÃ ",
        },
      };

      const media = [
        { id: "gas", speed: 2, particles: 10, color: "bg-sky-100" }, // Slowest, few particles
        { id: "liquid", speed: 1, particles: 40, color: "bg-blue-300" }, // Medium
        { id: "solid", speed: 0.2, particles: 100, color: "bg-amber-800" }, // Very fast, dense particles
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [activeMedium, setActiveMedium] = useState("gas");
        const [wave, setWave] = useState(false);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const currentM = media.find((m) => m.id === activeMedium);

        const playSound = () => {
          setWave(false);
          setTimeout(() => setWave(true), 50);
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-indigo-700">
              {getText("title")}
            </h1>

            <div className="flex gap-4 mb-8">
              {media.map((m) => (
                <button
                  key={m.id}
                  onClick={() => {
                    setActiveMedium(m.id);
                    setWave(false);
                  }}
                  className={`px-6 py-3 rounded-full font-bold border-4 transition-transform active:scale-95
                         ${
                           activeMedium === m.id
                             ? "border-indigo-500 bg-indigo-100"
                             : "border-transparent bg-white"
                         }
                      `}
                >
                  {getText(m.id)}
                </button>
              ))}
            </div>

            <div
              className="w-full max-w-4xl h-[400px] border-8 border-slate-700 rounded-3xl relative overflow-hidden bg-white shadow-xl cursor-pointer"
              onClick={playSound}
            >
              {/* Background Particles representing density */}
              <div
                className={`absolute inset-0 transition-colors duration-500 ${currentM.color}`}
              >
                {[...Array(currentM.particles)].map((_, i) => (
                  <div
                    key={i}
                    className="absolute w-2 h-2 rounded-full bg-black/20"
                    style={{
                      left: Math.random() * 100 + "%",
                      top: Math.random() * 100 + "%",
                    }}
                  />
                ))}
              </div>

              {/* Speaker Icon / Source */}
              <div className="absolute left-10 top-1/2 -translate-y-1/2 text-6xl z-10">
                ğŸ”Š
              </div>

              {/* Helper Text */}
              <div className="absolute bottom-4 left-1/2 -translate-x-1/2 text-slate-500 font-bold opacity-70 animate-pulse pointer-events-none">
                {getText("instruction")}
              </div>

              {/* Sound Wave Animation */}
              {wave && (
                <motion.div
                  className="absolute left-28 top-0 bottom-0 w-2 bg-indigo-500/50 shadow-[0_0_20px_indigo]"
                  initial={{ x: 0, opacity: 1, scaleX: 1 }}
                  animate={{ x: 800, opacity: 0, scaleX: 5 }}
                  transition={{ duration: currentM.speed, ease: "linear" }}
                  onAnimationComplete={() => setWave(false)}
                />
              )}
            </div>

            <div className="mt-8 text-2xl font-bold">
              {getText("speed")}:
              <span className="ml-2 text-indigo-600">
                {activeMedium === "gas" && "Low ğŸ¢"}
                {activeMedium === "liquid" && "Medium ğŸš¶"}
                {activeMedium === "solid" && "High ğŸ‡"}
              </span>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
