<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Heat Transfer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fff7ed;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Heat Transfer Master",
          zh: "ç†±å‚³éžå¤§å¸«",
          ja: "ç†±ä¼é”ãƒžã‚¹ã‚¿ãƒ¼",
          ko: "ì—´ ì „ë‹¬ ë§ˆìŠ¤í„°",
          es: "Maestro de transferencia de calor",
          de: "WÃ¤rmeÃ¼bertragungs-Meister",
          fi: "LÃ¤mmÃ¶nsiirron mestari",
          fr: "MaÃ®tre du transfert de chaleur",
          ar: "Ø®Ø¨ÙŠØ± Ù†Ù‚Ù„ Ø§Ù„Ø­Ø±Ø§Ø±Ø©",
          it: "Maestro del Trasferimento di Calore",
        },
        instruction: {
          en: "How is heat moving?",
          zh: "ç†±é‡æ˜¯å¦‚ä½•å‚³éžçš„ï¼Ÿ",
          ja: "ç†±ã¯ã©ã®ã‚ˆã†ã«ç§»å‹•ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
          ko: "ì—´ì€ ì–´ë–»ê²Œ ì´ë™í•˜ë‚˜ìš”?",
          es: "Â¿CÃ³mo se mueve el calor?",
          de: "Wie bewegt sich die WÃ¤rme?",
          fi: "Miten lÃ¤mpÃ¶ liikkuu?",
          fr: "Comment la chaleur se dÃ©place-t-elle ?",
          ar: "ÙƒÙŠÙ ØªÙ†ØªÙ‚Ù„ Ø§Ù„Ø­Ø±Ø§Ø±Ø©ØŸ",
          it: "Come si muove il calore?",
        },
        conduction: { en: "Conduction", zh: "å‚³å°Ž", ja: "ä¼å°Ž", ko: "ì „ë„" },
        convection: { en: "Convection", zh: "å°æµ", ja: "å¯¾æµ", ko: "ëŒ€ë¥˜" },
        radiation: { en: "Radiation", zh: "è¼»å°„", ja: "æ”¾å°„", ko: "ë³µì‚¬" },

        spoon: {
          en: "Hot Spoon in Soup",
          zh: "æ¹¯è£¡çš„ç†±æ¹¯åŒ™",
          ja: "ã‚¹ãƒ¼ãƒ—ã®ä¸­ã®ç†±ã„ã‚¹ãƒ—ãƒ¼ãƒ³",
          ko: "ìˆ˜í”„ ì†ì˜ ëœ¨ê±°ìš´ ìˆŸê°€ë½",
        },
        boiling: {
          en: "Boiling Water",
          zh: "æ²¸é¨°çš„æ°´",
          ja: "æ²¸é¨°ã—ã¦ã„ã‚‹æ°´",
          ko: "ë“ëŠ” ë¬¼",
        },
        sun: { en: "Sunlight", zh: "é™½å…‰", ja: "æ—¥å…‰", ko: "í–‡ë¹›" },
        fire: {
          en: "Hands near Fire",
          zh: "ç«å †å–æš–",
          ja: "ç«ã®ãã°ã®æ‰‹",
          ko: "ë¶ˆ ê·¼ì²˜ì˜ ì†",
        },
        iron: {
          en: "Ironing Clothes",
          zh: "ç†¨è¡£æœ",
          ja: "ã‚¢ã‚¤ãƒ­ãƒ³ãŒã‘",
          ko: "ë‹¤ë¦¼ì§ˆ",
        },

        correct: { en: "Correct!", zh: "æ­£ç¢ºï¼", ja: "æ­£è§£ï¼", ko: "ì •ë‹µ!" },
        wrong: {
          en: "Try Again",
          zh: "å†è©¦ä¸€æ¬¡",
          ja: "ã‚‚ã†ä¸€åº¦",
          ko: "ë‹¤ì‹œ ì‹œë„",
        },
      };

      const scenarios = [
        { id: "spoon", type: "conduction", icon: "ðŸ¥„" },
        { id: "boiling", type: "convection", icon: "ðŸ²" },
        { id: "sun", type: "radiation", icon: "â˜€ï¸" },
        { id: "fire", type: "radiation", icon: "ðŸ”¥" },
        { id: "iron", type: "conduction", icon: "ðŸ‘•" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [idx, setIdx] = useState(0);
        const [feedback, setFeedback] = useState("");

        const getText = (key) => t[key][lang] || t[key]["en"];
        const current = scenarios[idx];

        const handleGuess = (type) => {
          if (feedback) return;
          if (type === current.type) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback("");
              setIdx((idx + 1) % scenarios.length);
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(""), 800);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-orange-600">
              {getText("title")}
            </h1>
            <p className="mb-4 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="bg-white p-12 rounded-3xl shadow-xl mb-12 border-4 border-orange-100 flex flex-col items-center min-w-[300px]">
              <div className="text-9xl mb-4">{current.icon}</div>
              <div className="text-2xl font-bold text-slate-800 text-center">
                {getText(current.id)}
              </div>

              {feedback && (
                <div
                  className={`mt-4 text-3xl font-black ${
                    feedback === "correct" ? "text-green-500" : "text-red-500"
                  }`}
                >
                  {getText(feedback)}
                </div>
              )}
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-4xl">
              {["conduction", "convection", "radiation"].map((type) => (
                <button
                  key={type}
                  onClick={() => handleGuess(type)}
                  className="p-6 bg-orange-100 hover:bg-orange-200 text-orange-900 rounded-xl font-bold text-xl transition-transform active:scale-95 border-b-4 border-orange-300"
                >
                  {getText(type)}
                </button>
              ))}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
