<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Energy Forms</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fff;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Energy Sorter",
          zh: "èƒ½é‡åˆ†é¡žå™¨",
          ja: "ã‚¨ãƒãƒ«ã‚®ãƒ¼ä»•åˆ†ã‘",
          ko: "ì—ë„ˆì§€ ë¶„ë¥˜ê¸°",
          es: "Clasificador de energÃ­a",
          de: "Energiesortierer",
          fi: "Energialajittelija",
          fr: "Trieur d'Ã©nergie",
          ar: "ÙØ§Ø±Ø² Ø§Ù„Ø·Ø§Ù‚Ø©",
          it: "Selezionatore di Energia",
        },
        instruction: {
          en: "Match the object to its main form of energy.",
          zh: "å°‡ç‰©é«”èˆ‡å…¶ä¸»è¦èƒ½é‡å½¢å¼é…å°ã€‚",
          ja: "ç‰©ä½“ã‚’ãã®ä¸»ãªã‚¨ãƒãƒ«ã‚®ãƒ¼å½¢æ…‹ã¨ä¸€è‡´ã•ã›ã¦ãã ã•ã„ã€‚",
          ko: "ë¬¼ì²´ë¥¼ ì£¼ìš” ì—ë„ˆì§€ í˜•íƒœì™€ ì—°ê²°í•˜ì„¸ìš”.",
          es: "Empareja el objeto con su forma principal de energÃ­a.",
          de: "Ordne das Objekt seiner Hauptenergieform zu.",
          fi: "YhdistÃ¤ esine sen pÃ¤Ã¤asialliseen energiamuotoon.",
          fr: "Associez l'objet Ã  sa principale forme d'Ã©nergie.",
          ar: "Ø·Ø§Ø¨Ù‚ Ø§Ù„ÙƒØ§Ø¦Ù† Ù…Ø¹ Ø´ÙƒÙ„Ù‡ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ù† Ø§Ù„Ø·Ø§Ù‚Ø©.",
          it: "Abbina l'oggetto alla sua forma principale di energia.",
        },
        kinetic: { en: "Kinetic", zh: "å‹•èƒ½", ja: "é‹å‹•", ko: "ìš´ë™" },
        potential: { en: "Potential", zh: "ä½èƒ½", ja: "ä½ç½®", ko: "ìœ„ì¹˜" },
        chemical: { en: "Chemical", zh: "åŒ–å­¸èƒ½", ja: "åŒ–å­¦", ko: "í™”í•™" },
        electrical: { en: "Electrical", zh: "é›»èƒ½", ja: "é›»æ°—", ko: "ì „ê¸°" },
        light: { en: "Light", zh: "å…‰èƒ½", ja: "å…‰", ko: "ë¹›" },

        car: {
          en: "Moving Car",
          zh: "è¡Œé§›ä¸­çš„æ±½è»Š",
          ja: "èµ°ã£ã¦ã„ã‚‹è»Š",
          ko: "ì›€ì§ì´ëŠ” ì°¨",
        },
        dam: {
          en: "Water in Dam",
          zh: "æ°´å£©è£¡çš„æ°´",
          ja: "ãƒ€ãƒ ã®æ°´",
          ko: "ëŒì˜ ë¬¼",
        },
        battery: { en: "Battery", zh: "é›»æ± ", ja: "é›»æ± ", ko: "ë°°í„°ë¦¬" },
        bulb: {
          en: "Lit Bulb",
          zh: "äº®è‘—çš„ç‡ˆæ³¡",
          ja: "ç‚¹ç¯ã—ãŸé›»çƒ",
          ko: "ì¼œì§„ ì „êµ¬",
        },
        socket: { en: "Wall Socket", zh: "æ’åº§", ja: "ã‚³ãƒ³ã‚»ãƒ³ãƒˆ", ko: "ì†Œì¼“" },
        food: { en: "Apple", zh: "è˜‹æžœ", ja: "ãƒªãƒ³ã‚´", ko: "ì‚¬ê³¼" },

        correct: { en: "Correct!", zh: "æ­£ç¢ºï¼", ja: "æ­£è§£ï¼", ko: "ì •ë‹µ!" },
      };

      const items = [
        { id: "car", type: "kinetic", icon: "ðŸš—" },
        { id: "dam", type: "potential", icon: "ðŸŒŠ" },
        { id: "battery", type: "chemical", icon: "ðŸ”‹" },
        { id: "bulb", type: "light", icon: "ðŸ’¡" },
        { id: "socket", type: "electrical", icon: "ðŸ”Œ" },
        { id: "food", type: "chemical", icon: "ðŸŽ" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [idx, setIdx] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const current = items[idx];

        const handleGuess = (type) => {
          if (feedback) return;
          if (type === current.type) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setIdx((idx + 1) % items.length);
            }, 1000);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 500);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-indigo-700">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="bg-indigo-50 p-12 rounded-3xl shadow-xl mb-12 flex flex-col items-center">
              <div className="text-9xl mb-4">{current.icon}</div>
              <div className="text-2xl font-bold text-indigo-900">
                {getText(current.id)}
              </div>
              {feedback === "correct" && (
                <div className="text-green-500 font-black text-3xl mt-4 animate-bounce">
                  âœ“
                </div>
              )}
            </div>

            <div className="grid grid-cols-2 md:grid-cols-3 gap-4 w-full max-w-4xl">
              {["kinetic", "potential", "chemical", "electrical", "light"].map(
                (type) => (
                  <button
                    key={type}
                    onClick={() => handleGuess(type)}
                    className="p-4 bg-white border-2 border-indigo-200 rounded-xl hover:bg-indigo-100 text-indigo-800 font-bold shadow-sm transition-all"
                  >
                    {getText(type)}
                  </button>
                )
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
