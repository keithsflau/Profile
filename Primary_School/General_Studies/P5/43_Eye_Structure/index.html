<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Eye Structure</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fdf4ff;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Human Eye Anatomy",
          zh: "眼睛構造",
          ja: "目の構造",
          ko: "눈의 구조",
          es: "Anatomía del ojo humano",
          de: "Anatomie des menschlichen Auges",
          fi: "Ihmissilmän anatomia",
          fr: "Anatomie de l'œil humain",
          ar: "تشريح العين البشرية",
          it: "Anatomia dell'Occhio Umano",
        },
        instruction: {
          en: "Label the parts of the eye.",
          zh: "標記眼睛的各個部分。",
          ja: "目の部分にラベルを付けてください。",
          ko: "눈의 각 부분에 라벨을 붙이세요.",
          es: "Etiqueta las partes del ojo.",
          de: "Beschrifte die Teile des Auges.",
          fi: "Nimeä silmän osat.",
          fr: "Étiquetez les parties de l'œil.",
          ar: "قم بتسمية أجزاء العين.",
          it: "Etichetta le parti dell'occhio.",
        },
        pupil: { en: "Pupil", zh: "瞳孔", ja: "瞳孔", ko: "동공" },
        iris: { en: "Iris", zh: "虹膜", ja: "虹彩", ko: "홍채" },
        lens: { en: "Lens", zh: "晶狀體", ja: "水晶体", ko: "수정체" },
        retina: { en: "Retina", zh: "視網膜", ja: "網膜", ko: "망막" },
        optic: { en: "Optic Nerve", zh: "視神經", ja: "視神経", ko: "시신경" },

        correct: { en: "Correct!", zh: "正確！", ja: "正解！", ko: "정답!" },
      };

      const parts = [
        { id: "pupil", x: 25, y: 50 },
        { id: "iris", x: 25, y: 30 },
        { id: "lens", x: 35, y: 50 },
        { id: "retina", x: 80, y: 50 },
        { id: "optic", x: 95, y: 50 },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [placed, setPlaced] = useState([]);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const handleDrop = (e, targetId) => {
          e.preventDefault();
          const draggedId = e.dataTransfer.getData("id");
          if (draggedId === targetId) {
            setPlaced([...placed, targetId]);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-purple-800">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="flex flex-col md:flex-row gap-8 w-full max-w-5xl items-start">
              {/* Visual */}
              <div className="relative w-[500px] h-[300px] bg-white rounded-3xl shadow-xl border-4 border-purple-200 mx-auto">
                {/* Simplified Eye SVG */}
                <svg
                  viewBox="0 0 200 120"
                  className="absolute inset-0 w-full h-full"
                >
                  {/* Eyeball */}
                  <circle
                    cx="100"
                    cy="60"
                    r="50"
                    fill="#f3e8ff"
                    stroke="#a855f7"
                    strokeWidth="2"
                  />
                  {/* Cornea bulge */}
                  <path
                    d="M55,40 Q40,60 55,80"
                    fill="none"
                    stroke="#a855f7"
                    strokeWidth="2"
                  />
                  {/* Lens */}
                  <ellipse cx="70" cy="60" rx="5" ry="15" fill="#bae6fd" />
                  {/* Pupil/Iris area */}
                  <rect
                    x="58"
                    y="45"
                    width="4"
                    height="30"
                    fill="#a855f7"
                  />{" "}
                  {/* Iris */}
                  {/* Retina lining */}
                  <path
                    d="M140,40 Q150,60 140,80"
                    fill="none"
                    stroke="red"
                    strokeWidth="2"
                    strokeDasharray="4"
                  />
                  {/* Optic Nerve */}
                  <path
                    d="M148,55 L180,55 L180,65 L148,65"
                    fill="#f3e8ff"
                    stroke="#a855f7"
                    strokeWidth="2"
                  />
                </svg>

                {/* Drop Zones */}
                {parts.map((p) => (
                  <div
                    key={p.id}
                    onDragOver={(e) => e.preventDefault()}
                    onDrop={(e) => handleDrop(e, p.id)}
                    className={`absolute w-24 h-8 -translate-x-1/2 -translate-y-1/2 border-2 border-dashed border-purple-400 rounded flex items-center justify-center text-xs font-bold transition-colors
                            ${
                              placed.includes(p.id)
                                ? "bg-green-100 border-green-500 text-green-800"
                                : "bg-white/50"
                            }
                         `}
                    style={{ left: `${p.x}%`, top: `${p.y}%` }}
                  >
                    {placed.includes(p.id) ? getText(p.id) : "?"}
                  </div>
                ))}
              </div>

              {/* Tags */}
              <div className="flex flex-wrap gap-4 w-full md:w-64">
                {parts.map(
                  (p) =>
                    !placed.includes(p.id) && (
                      <div
                        key={p.id}
                        draggable
                        onDragStart={(e) => e.dataTransfer.setData("id", p.id)}
                        className="bg-purple-100 hover:bg-purple-200 text-purple-900 px-4 py-2 rounded-lg cursor-grab font-bold border border-purple-300 w-full text-center"
                      >
                        {getText(p.id)}
                      </div>
                    )
                )}
                {placed.length === parts.length && (
                  <div className="text-2xl font-black text-green-500 animate-bounce w-full text-center">
                    {getText("correct")}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
