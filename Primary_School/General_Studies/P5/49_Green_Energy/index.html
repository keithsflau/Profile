<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Green Energy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f0fdf4;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Green Energy City",
          zh: "ç¶ è‰²èƒ½æºåŸå¸‚",
          ja: "ã‚°ãƒªãƒ¼ãƒ³ã‚¨ãƒãƒ«ã‚®ãƒ¼éƒ½å¸‚",
          ko: "ê·¸ë¦° ì—ë„ˆì§€ ë„ì‹œ",
          es: "Ciudad de energÃ­a verde",
          de: "GrÃ¼ne Energiestadt",
          fi: "VihreÃ¤n energian kaupunki",
          fr: "Ville Ã  Ã©nergie verte",
          ar: "Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡",
          it: "CittÃ  dell'Energia Verde",
        },
        instruction: {
          en: "Power the city with renewable energy!",
          zh: "ç”¨å¯å†ç”Ÿèƒ½æºç‚ºåŸå¸‚ä¾›é›»ï¼",
          ja: "å†ç”Ÿå¯èƒ½ã‚¨ãƒãƒ«ã‚®ãƒ¼ã§éƒ½å¸‚ã«é›»åŠ›ã‚’ä¾›çµ¦ã—ã¾ã—ã‚‡ã†ï¼",
          ko: "ì¬ìƒ ê°€ëŠ¥ ì—ë„ˆì§€ë¡œ ë„ì‹œì— ì „ë ¥ì„ ê³µê¸‰í•˜ì„¸ìš”!",
          es: "Â¡Alimenta la ciudad con energÃ­a renovable!",
          de: "Versorge die Stadt mit erneuerbarer Energie!",
          fi: "Anna kaupungille virtaa uusiutuvalla energialla!",
          fr: "Alimentez la ville avec de l'Ã©nergie renouvelable !",
          ar: "Ù‚Ù… Ø¨ØªØ²ÙˆÙŠØ¯ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø¨Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ØªØ¬Ø¯Ø¯Ø©!",
          it: "Alimenta la cittÃ  con energia rinnovabile!",
        },
        solar: {
          en: "Solar Panels",
          zh: "å¤ªé™½èƒ½æ¿",
          ja: "ã‚½ãƒ¼ãƒ©ãƒ¼ãƒ‘ãƒãƒ«",
          ko: "íƒœì–‘ê´‘ íŒ¨ë„",
        },
        wind: {
          en: "Wind Turbine",
          zh: "é¢¨åŠ›ç™¼é›»æ©Ÿ",
          ja: "é¢¨åŠ›ã‚¿ãƒ¼ãƒ“ãƒ³",
          ko: "í’ë ¥ í„°ë¹ˆ",
        },
        hydro: {
          en: "Hydro Dam",
          zh: "æ°´åŠ›ç™¼é›»ç«™",
          ja: "æ°´åŠ›ãƒ€ãƒ ",
          ko: "ìˆ˜ë ¥ ëŒ",
        },
        coal: {
          en: "Coal Plant (Dirty!)",
          zh: "ç‡ƒç…¤ç™¼é›»å»  (æ±¡æŸ“!)",
          ja: "çŸ³ç‚­å·¥å ´ (æ±šã„!)",
          ko: "ì„íƒ„ ë°œì „ì†Œ (ë”ëŸ¬ì›€!)",
        },

        power: {
          en: "Power Output",
          zh: "é›»åŠ›è¼¸å‡º",
          ja: "å‡ºåŠ›",
          ko: "ì „ë ¥ ì¶œë ¥",
        },
        pollution: { en: "Pollution", zh: "æ±¡æŸ“", ja: "æ±šæŸ“", ko: "ì˜¤ì—¼" },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [grid, setGrid] = useState([null, null, null]);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const addSource = (idx, type) => {
          const newGrid = [...grid];
          newGrid[idx] = type;
          setGrid(newGrid);
        };

        const stats = grid.reduce(
          (acc, curr) => {
            if (curr === "solar") {
              acc.power += 20;
            }
            if (curr === "wind") {
              acc.power += 30;
            }
            if (curr === "hydro") {
              acc.power += 40;
            }
            if (curr === "coal") {
              acc.power += 50;
              acc.poll += 50;
            }
            return acc;
          },
          { power: 0, poll: 0 }
        );

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-green-700">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="w-full max-w-4xl grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
              {[0, 1, 2].map((i) => (
                <div
                  key={i}
                  className="aspect-square bg-green-50 border-4 border-dashed border-green-200 rounded-3xl flex flex-col items-center justify-center relative overflow-hidden"
                >
                  {grid[i] ? (
                    <div className="text-center">
                      <div className="text-6xl mb-4">
                        {grid[i] === "solar"
                          ? "â˜€ï¸"
                          : grid[i] === "wind"
                          ? "ğŸŒ¬ï¸"
                          : grid[i] === "hydro"
                          ? "ğŸ’§"
                          : "ğŸ­"}
                      </div>
                      <div className="font-bold text-green-900">
                        {getText(grid[i])}
                      </div>
                      <button
                        onClick={() => addSource(i, null)}
                        className="mt-2 text-xs text-red-500 underline"
                      >
                        Remove
                      </button>
                    </div>
                  ) : (
                    <div className="text-slate-400 font-bold">Empty Plot</div>
                  )}
                </div>
              ))}
            </div>

            <div className="bg-white p-6 rounded-2xl shadow-lg w-full max-w-2xl mb-8">
              <div className="mb-4">
                <div className="flex justify-between font-bold mb-1">
                  <span>{getText("power")}</span>
                  <span>{stats.power}/100</span>
                </div>
                <div className="h-4 bg-slate-100 rounded-full overflow-hidden">
                  <div
                    className="h-full bg-yellow-400 transition-all duration-500"
                    style={{ width: `${Math.min(100, stats.power)}%` }}
                  ></div>
                </div>
              </div>
              <div>
                <div className="flex justify-between font-bold mb-1">
                  <span>{getText("pollution")}</span>
                  <span
                    className={
                      stats.poll > 0 ? "text-red-500" : "text-green-500"
                    }
                  >
                    {stats.poll}
                  </span>
                </div>
                <div className="h-4 bg-slate-100 rounded-full overflow-hidden">
                  <div
                    className="h-full bg-slate-700 transition-all duration-500"
                    style={{ width: `${Math.min(100, stats.poll)}%` }}
                  ></div>
                </div>
              </div>
            </div>

            <div className="flex gap-4 flex-wrap justify-center">
              <button
                onClick={() =>
                  addSource(
                    grid.findIndex((x) => !x),
                    "solar"
                  )
                }
                disabled={!grid.includes(null)}
                className="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-xl font-bold hover:bg-yellow-200 disabled:opacity-50"
              >
                â˜€ï¸ {getText("solar")}
              </button>
              <button
                onClick={() =>
                  addSource(
                    grid.findIndex((x) => !x),
                    "wind"
                  )
                }
                disabled={!grid.includes(null)}
                className="px-6 py-3 bg-blue-100 text-blue-800 rounded-xl font-bold hover:bg-blue-200 disabled:opacity-50"
              >
                ğŸŒ¬ï¸ {getText("wind")}
              </button>
              <button
                onClick={() =>
                  addSource(
                    grid.findIndex((x) => !x),
                    "hydro"
                  )
                }
                disabled={!grid.includes(null)}
                className="px-6 py-3 bg-cyan-100 text-cyan-800 rounded-xl font-bold hover:bg-cyan-200 disabled:opacity-50"
              >
                ğŸ’§ {getText("hydro")}
              </button>
              <button
                onClick={() =>
                  addSource(
                    grid.findIndex((x) => !x),
                    "coal"
                  )
                }
                disabled={!grid.includes(null)}
                className="px-6 py-3 bg-slate-200 text-slate-800 rounded-xl font-bold hover:bg-slate-300 disabled:opacity-50"
              >
                ğŸ­ {getText("coal")}
              </button>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
