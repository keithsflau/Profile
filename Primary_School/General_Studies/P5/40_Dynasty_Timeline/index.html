<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Dynasty Timeline</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f7fee7;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Dynasty Timeline",
          zh: "朝代時間軸",
          ja: "王朝年表",
          ko: "왕조 연표",
          es: "Línea de tiempo de la dinastía",
          de: "Dynastie-Zeitlinie",
          fi: "Dynastia-aikajana",
          fr: "Chronologie de la dynastie",
          ar: "الجدول الزمني للسلالة",
          it: "Cronologia della Dinastia",
        },
        instruction: {
          en: "Order the dynasties from Oldest to Newest.",
          zh: "按時間順序排列朝代（最古老到最新）。",
          ja: "最も古いものから新しいものへ王朝を並べ替えてください。",
          ko: "가장 오래된 왕조부터 최신 순으로 정렬하세요.",
          es: "Ordena las dinastías de la más antigua a la más nueva.",
          de: "Ordne die Dynastien von der ältesten bis zur neuesten.",
          fi: "Järjestä dynastiat vanhimmasta uusimpaan.",
          fr: "Ordonnez les dynasties de la plus ancienne à la plus récente.",
          ar: "رتب السلالات من الأقدم إلى الأحدث.",
          it: "Ordina le dinastie dalla più antica alla più recente.",
        },
        tang: { en: "Tang", zh: "唐", ja: "唐", ko: "당" },
        song: { en: "Song", zh: "宋", ja: "宋", ko: "송" },
        yuan: { en: "Yuan", zh: "元", ja: "元", ko: "원" },
        ming: { en: "Ming", zh: "明", ja: "明", ko: "명" },
        qing: { en: "Qing", zh: "清", ja: "清", ko: "청" },

        check: {
          en: "Check Order",
          zh: "檢查順序",
          ja: "順序を確認",
          ko: "순서 확인",
        },
        correct: {
          en: "Perfect! History Master!",
          zh: "完美！歷史大師！",
          ja: "完璧！歴史マスター！",
          ko: "완벽해요! 역사 마스터!",
        },
        wrong: {
          en: "Try Again",
          zh: "再試一次",
          ja: "もう一度",
          ko: "다시 시도",
        },
      };

      const correctOrder = ["tang", "song", "yuan", "ming", "qing"];

      function App() {
        const [lang, setLang] = useState("zh");
        // Initial shuffle
        const [items, setItems] = useState([
          "ming",
          "tang",
          "qing",
          "song",
          "yuan",
        ]);
        const [feedback, setFeedback] = useState("");

        const getText = (key) => t[key][lang] || t[key]["en"];

        const moveUp = (idx) => {
          if (idx === 0) return;
          const newItems = [...items];
          const temp = newItems[idx];
          newItems[idx] = newItems[idx - 1];
          newItems[idx - 1] = temp;
          setItems(newItems);
          setFeedback("");
        };

        const check = () => {
          const isCorrect = items.every(
            (val, idx) => val === correctOrder[idx]
          );
          setFeedback(isCorrect ? "correct" : "wrong");
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-lime-800">
              {getText("title")}
            </h1>
            <p className="mb-8 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="flex flex-col gap-2 w-full max-w-md bg-white p-6 rounded-2xl shadow-xl mb-8">
              {items.map((item, idx) => (
                <div key={item} className="flex items-center gap-4">
                  <div className="font-mono font-bold text-slate-300 w-8">
                    {idx + 1}.
                  </div>
                  <div className="flex-1 p-4 bg-lime-100 rounded-lg font-bold text-lg text-lime-900 border-l-4 border-lime-500 shadow-sm flex justify-between items-center">
                    {getText(item)}
                    <div className="flex flex-col gap-1">
                      {idx > 0 && (
                        <button
                          onClick={() => moveUp(idx)}
                          className="w-6 h-6 bg-white rounded flex items-center justify-center text-xs shadow hover:bg-lime-200"
                        >
                          ▲
                        </button>
                      )}
                    </div>
                  </div>
                </div>
              ))}
            </div>

            <div className="flex flex-col items-center gap-4">
              <button
                onClick={check}
                className="px-8 py-3 bg-lime-600 hover:bg-lime-700 text-white font-bold rounded-xl shadow-lg"
              >
                {getText("check")}
              </button>
              {feedback && (
                <div
                  className={`text-2xl font-black ${
                    feedback === "correct" ? "text-green-600" : "text-red-500"
                  } animate-bounce`}
                >
                  {getText(feedback)}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
