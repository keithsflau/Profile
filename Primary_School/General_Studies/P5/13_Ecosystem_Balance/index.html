<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Ecosystem Balance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f0fdf4;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Ecosystem Stability",
          zh: "ç”Ÿæ…‹å¹³è¡¡",
          ja: "ç”Ÿæ…‹ç³»ã®å®‰å®š",
          ko: "ìƒíƒœê³„ ì•ˆì •ì„±",
          es: "Estabilidad del ecosistema",
          de: "Ã–kosystemstabilitÃ¤t",
          fi: "Ekosysteemin vakaus",
          fr: "StabilitÃ© de l'Ã©cosystÃ¨me",
          ar: "Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ¦ÙŠ",
          it: "StabilitÃ  dell'Ecosistema",
        },
        instruction: {
          en: "Balance the population of Grass, Rabbits, and Foxes!",
          zh: "å¹³è¡¡è‰ã€å…”å­å’Œç‹ç‹¸çš„æ•¸é‡ï¼",
          ja: "è‰ã€ã‚¦ã‚µã‚®ã€ã‚­ãƒ„ãƒã®å€‹ä½“æ•°ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ã¨ã£ã¦ãã ã•ã„ï¼",
          ko: "í’€, í† ë¼, ì—¬ìš°ì˜ ê°œì²´ìˆ˜ ê· í˜•ì„ ë§ì¶”ì„¸ìš”!",
          es: "Â¡Equilibra la poblaciÃ³n de hierba, conejos y zorros!",
          de: "Gleiche die Population von Gras, Kaninchen und FÃ¼chsen aus!",
          fi: "Tasapainota ruohon, kanien ja kettujen populaatio!",
          fr: "Ã‰quilibrez la population d'herbe, de lapins et de renards !",
          ar: "ÙˆØ§Ø²ÙÙ† Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ø´Ø¨ ÙˆØ§Ù„Ø£Ø±Ø§Ù†Ø¨ ÙˆØ§Ù„Ø«Ø¹Ø§Ù„Ø¨!",
          it: "Bilancia la popolazione di erba, conigli e volpi!",
        },
        grass: {
          en: "Grass (Producer)",
          zh: "è‰ (ç”Ÿç”¢è€…)",
          ja: "è‰ (ç”Ÿç”£è€…)",
          ko: "í’€ (ìƒì‚°ì)",
          es: "Hierba (Productor)",
          de: "Gras (Produzent)",
          fi: "Ruoho (Tuottaja)",
          fr: "Herbe (Producteur)",
          ar: "Ø¹Ø´Ø¨ (Ù…Ù†ØªØ¬)",
          it: "Erba (Produttore)",
        },
        rabbit: {
          en: "Rabbit (Consumer)",
          zh: "å…”å­ (æ¶ˆè²»è€…)",
          ja: "ã‚¦ã‚µã‚® (æ¶ˆè²»è€…)",
          ko: "í† ë¼ (ì†Œë¹„ì)",
          es: "Conejo (Consumidor)",
          de: "Kaninchen (Verbraucher)",
          fi: "Kani (Kuluttaja)",
          fr: "Lapin (Consommateur)",
          ar: "Ø£Ø±Ù†Ø¨ (Ù…Ø³ØªÙ‡Ù„Ùƒ)",
          it: "Coniglio (Consumatore)",
        },
        fox: {
          en: "Fox (Predator)",
          zh: "ç‹ç‹¸ (æ•é£Ÿè€…)",
          ja: "ã‚­ãƒ„ãƒ (æ•é£Ÿè€…)",
          ko: "ì—¬ìš° (í¬ì‹ì)",
          es: "Zorro (Depredador)",
          de: "Fuchs (Raubtier)",
          fi: "Kettu (PetoelÃ¤in)",
          fr: "Renard (PrÃ©dateur)",
          ar: "Ø«Ø¹Ù„Ø¨ (Ù…ÙØªØ±Ø³)",
          it: "Volpe (Predatore)",
        },

        status: {
          en: "Ecosystem Status:",
          zh: "ç”Ÿæ…‹ç³»çµ±ç‹€æ…‹ï¼š",
          ja: "ç”Ÿæ…‹ç³»ã®çŠ¶æ…‹ï¼š",
          ko: "ìƒíƒœê³„ ìƒíƒœ:",
          es: "Estado del ecosistema:",
          de: "Ã–kosystemstatus:",
          fi: "Ekosysteemin tila:",
          fr: "Ã‰tat de l'Ã©cosystÃ¨me :",
          ar: "Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ¦ÙŠ:",
          it: "Stato dell'Ecosistema:",
        },
        balanced: {
          en: "Balanced",
          zh: "å¹³è¡¡",
          ja: "ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Œã¦ã„ã‚‹",
          ko: "ê· í˜• ì¡í˜",
          es: "Equilibrado",
          de: "Ausgeglichen",
          fi: "Tasapainoinen",
          fr: "Ã‰quilibrÃ©",
          ar: "Ù…ØªÙˆØ§Ø²Ù†",
          it: "Bilanciato",
        },
        collapse: {
          en: "Collapsing!",
          zh: "å´©æ½°ä¸­ï¼",
          ja: "å´©å£Šä¸­ï¼",
          ko: "ë¶•ê´´ ì¤‘!",
          es: "Â¡Colapsando!",
          de: "Zusammenbruch!",
          fi: "Romahtamassa!",
          fr: "Effondrement !",
          ar: "ÙŠÙ†Ù‡Ø§Ø±!",
          it: "Collasso!",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [grass, setGrass] = useState(50);
        const [rabbits, setRabbits] = useState(10);
        const [foxes, setFoxes] = useState(2);
        const [running, setRunning] = useState(true);

        const getText = (key) => t[key][lang] || t[key]["en"];

        // Simple Simulation Interval
        useEffect(() => {
          if (!running) return;
          const timer = setInterval(() => {
            setGrass((g) => {
              let nextG = g + 5; // Regrow
              // Eaten by rabbits
              nextG -= rabbits * 0.5;
              return Math.max(0, Math.min(100, nextG));
            });

            setRabbits((r) => {
              let nextR = r;
              // Eat grass to survive/reproduce
              if (grass > r * 2) nextR += r * 0.1; // Grow
              else nextR -= r * 0.1; // Starve

              // Eaten by foxes
              nextR -= foxes * 1;

              return Math.max(0, Math.min(100, nextR));
            });

            setFoxes((f) => {
              let nextF = f;
              // Eat rabbits
              if (rabbits > f * 3) nextF += f * 0.05;
              else nextF -= f * 0.1;

              return Math.max(0, Math.min(50, nextF));
            });
          }, 500);
          return () => clearInterval(timer);
        }, [running, grass, rabbits, foxes]);

        // Determine State
        const isStable = grass > 10 && rabbits > 2 && foxes > 0 && rabbits < 80;

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-4 text-green-800">
              {getText("title")}
            </h1>

            <div className="w-full max-w-4xl bg-white p-6 rounded-3xl shadow-xl border-4 border-green-100">
              <div
                className={`text-center font-bold text-xl mb-4 p-2 rounded ${
                  isStable
                    ? "bg-green-100 text-green-800"
                    : "bg-red-100 text-red-800 animate-pulse"
                }`}
              >
                {getText("status")}{" "}
                {isStable ? getText("balanced") : getText("collapse")}
              </div>

              <div className="grid grid-cols-3 gap-4 h-[400px]">
                {/* Grass Section */}
                <div className="bg-green-100 rounded-xl relative overflow-hidden flex flex-col justify-end p-2 border-2 border-green-300">
                  <div className="absolute top-2 left-2 font-bold text-green-900 bg-white/80 px-2 rounded z-10">
                    {getText("grass")}: {Math.round(grass)}
                  </div>
                  <div className="flex flex-wrap content-end gap-1">
                    {[...Array(Math.min(50, Math.round(grass)))].map((_, i) => (
                      <div key={i} className="text-xl">
                        ğŸŒ¿
                      </div>
                    ))}
                  </div>
                  <button
                    onClick={() => setGrass((g) => Math.min(100, g + 10))}
                    className="absolute top-2 right-2 bg-green-500 text-white w-8 h-8 rounded-full z-20 hover:scale-110 shadow"
                  >
                    ï¼‹
                  </button>
                </div>

                {/* Rabbit Section */}
                <div className="bg-orange-50 rounded-xl relative overflow-hidden flex flex-col justify-end p-2 border-2 border-orange-200">
                  <div className="absolute top-2 left-2 font-bold text-orange-900 bg-white/80 px-2 rounded z-10">
                    {getText("rabbit")}: {Math.round(rabbits)}
                  </div>
                  <div className="flex flex-wrap content-end gap-1">
                    {[...Array(Math.min(30, Math.round(rabbits)))].map(
                      (_, i) => (
                        <div key={i} className="text-xl">
                          ğŸ°
                        </div>
                      )
                    )}
                  </div>
                  <button
                    onClick={() => setRabbits((r) => Math.min(100, r + 5))}
                    className="absolute top-2 right-2 bg-orange-500 text-white w-8 h-8 rounded-full z-20 hover:scale-110 shadow"
                  >
                    ï¼‹
                  </button>
                </div>

                {/* Fox Section */}
                <div className="bg-red-50 rounded-xl relative overflow-hidden flex flex-col justify-end p-2 border-2 border-red-200">
                  <div className="absolute top-2 left-2 font-bold text-red-900 bg-white/80 px-2 rounded z-10">
                    {getText("fox")}: {Math.round(foxes)}
                  </div>
                  <div className="flex flex-wrap content-end gap-1">
                    {[...Array(Math.min(20, Math.round(foxes)))].map((_, i) => (
                      <div key={i} className="text-xl">
                        ğŸ¦Š
                      </div>
                    ))}
                  </div>
                  <button
                    onClick={() => setFoxes((f) => Math.min(50, f + 2))}
                    className="absolute top-2 right-2 bg-red-500 text-white w-8 h-8 rounded-full z-20 hover:scale-110 shadow"
                  >
                    ï¼‹
                  </button>
                </div>
              </div>

              <div className="mt-6 text-center text-slate-500 text-sm">
                {getText("instruction")}
              </div>

              <div className="mt-4 flex justify-center">
                <button
                  onClick={() => setRunning(!running)}
                  className="bg-slate-700 text-white px-6 py-2 rounded-lg font-bold"
                >
                  {running ? "Pause" : "Resume"}
                </button>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
