<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Force and Motion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #f1f5f9;
        overflow-x: hidden;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useRef } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Ramp Experiment",
          zh: "æ–œé¢å¯¦é©—",
          ja: "æ–œé¢å®Ÿé¨“",
          ko: "ê²½ì‚¬ë©´ ì‹¤í—˜",
          es: "Experimento de rampa",
          de: "Rampenexperiment",
          fi: "Ramppikoe",
          fr: "ExpÃ©rience de rampe",
          ar: "ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ù†Ø­Ø¯Ø±",
          it: "Esperimento della Rampa",
        },
        instruction: {
          en: "Adjust ramp height and launch the car!",
          zh: "èª¿æ•´æ–œé¢é«˜åº¦ä¸¦ç™¼å°„æ±½è»Šï¼",
          ja: "æ–œé¢ã®é«˜ã•ã‚’èª¿æ•´ã—ã¦è»Šã‚’ç™ºè»Šã•ã›ã‚ˆã†ï¼",
          ko: "ê²½ì‚¬ ë†’ì´ë¥¼ ì¡°ì ˆí•˜ê³  ì°¨ë¥¼ ì¶œë°œì‹œí‚¤ì„¸ìš”!",
          es: "Â¡Ajusta la altura de la rampa y lanza el coche!",
          de: "Stelle die RampenhÃ¶he ein und starte das Auto!",
          fi: "SÃ¤Ã¤dÃ¤ rampin korkeutta ja laukaise auto!",
          fr: "Ajustez la hauteur de la rampe et lancez la voiture !",
          ar: "Ø§Ø¶Ø¨Ø· Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ù†Ø­Ø¯Ø± ÙˆØ£Ø·Ù„Ù‚ Ø§Ù„Ø³ÙŠØ§Ø±Ø©!",
          it: "Regola l'altezza della rampa e lancia l'auto!",
        },
        height: {
          en: "Ramp Height",
          zh: "æ–œé¢é«˜åº¦",
          ja: "æ–œé¢ã®é«˜ã•",
          ko: "ê²½ì‚¬ë©´ ë†’ì´",
          es: "Altura de la rampa",
          de: "RampenhÃ¶he",
          fi: "Rampin korkeus",
          fr: "Hauteur de la rampe",
          ar: "Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ù†Ø­Ø¯Ø±",
          it: "Altezza Rampa",
        },
        launch: {
          en: "Launch!",
          zh: "ç™¼å°„ï¼",
          ja: "ç™ºè»Šï¼",
          ko: "ë°œì‚¬!",
          es: "Â¡Lanzar!",
          de: "Start!",
          fi: "Laukaise!",
          fr: "Lancer !",
          ar: "Ø¥Ø·Ù„Ø§Ù‚!",
          it: "Lancia!",
        },
        reset: {
          en: "Reset",
          zh: "é‡ç½®",
          ja: "ãƒªã‚»ãƒƒãƒˆ",
          ko: "ì´ˆê¸°í™”",
          es: "Reiniciar",
          de: "ZurÃ¼cksetzen",
          fi: "Nollaa",
          fr: "RÃ©initialiser",
          ar: "Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†",
          it: "Ripristina",
        },
        distance: {
          en: "Distance:",
          zh: "è·é›¢ï¼š",
          ja: "è·é›¢ï¼š",
          ko: "ê±°ë¦¬:",
          es: "Distancia:",
          de: "Distanz:",
          fi: "EtÃ¤isyys:",
          fr: "Distance :",
          ar: "Ø§Ù„Ù…Ø³Ø§ÙØ©:",
          it: "Distanza:",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [height, setHeight] = useState(20); // 10 to 50
        const [launched, setLaunched] = useState(false);
        const [distance, setDistance] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const launch = () => {
          setLaunched(true);
          // Simple physics: Higher ramp = more potential energy = more kinetic energy = further distance.
          // Distance ~ Height
          const dist = height * 5;
          setDistance(dist);
        };

        const reset = () => {
          setLaunched(false);
          setDistance(0);
        };

        // Ramp SVG Path calc
        // Base is at (50, 250).
        // New: High point at Left (50, top). Slopes down to Right (250, 250).
        // Ramp Width = 200.
        // Height factor = 3.
        const rampHeightPx = height * 3;
        const rampTopY = 250 - rampHeightPx;

        // Path: Start Bottom-Right(250,250) -> Top-Left(50, top) -> Bottom-Left(50,250) -> Close
        const rampPath = `M250,250 L50,${rampTopY} L50,250 Z`;

        // Car Rotation
        // Slope is down-right. Angle is positive atan(opp/adj).
        const angleDeg = Math.atan(rampHeightPx / 200) * (180 / Math.PI);

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-blue-800">
              {getText("title")}
            </h1>

            <div className="w-full max-w-4xl bg-white p-8 rounded-3xl shadow-xl overflow-hidden relative min-h-[400px]">
              {/* Simulation Area */}
              <div className="relative w-full h-[300px] border-b-4 border-slate-400">
                {/* Ramp */}
                <svg
                  width="100%"
                  height="100%"
                  className="absolute inset-0 z-0"
                >
                  <path
                    d={rampPath}
                    fill="#cbd5e1"
                    stroke="#64748b"
                    strokeWidth="2"
                  />
                </svg>

                {/* Car */}
                <motion.div
                  className="absolute text-5xl origin-bottom"
                  initial={{
                    x: 50,
                    y: rampTopY - 40, // Sit on top
                    rotate: angleDeg,
                  }}
                  animate={
                    launched
                      ? {
                          x: [50, 250, 250 + distance], // Down ramp (50->250), then floor (->250+dist)
                          y: [rampTopY - 40, 210, 210], // Follow slope then flat
                          rotate: [angleDeg, 0, 0], // Rotate flat when on floor
                        }
                      : {
                          x: 50,
                          y: rampTopY - 40,
                          rotate: angleDeg,
                        }
                  }
                  transition={{ duration: 2, ease: "easeIn" }} // Make it smooth
                >
                  ğŸï¸
                </motion.div>

                {/* Ruler markings on floor */}
                <div className="absolute bottom-0 left-[50px] right-0 h-4 bg-yellow-100 flex">
                  {[...Array(10)].map((_, i) => (
                    <div
                      key={i}
                      className="flex-1 border-r border-slate-300 text-[10px] text-slate-400"
                    >
                      {i * 30}
                    </div>
                  ))}
                </div>
              </div>

              {/* Controls */}
              <div className="mt-8 flex gap-8 items-center justify-center">
                <div className="flex flex-col w-64">
                  <label className="font-bold text-slate-500 mb-2">
                    {getText("height")}: {height}
                  </label>
                  <input
                    type="range"
                    min="10"
                    max="60"
                    value={height}
                    onChange={(e) => {
                      setHeight(Number(e.target.value));
                      reset();
                    }}
                    className="w-full h-4 bg-slate-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50"
                    disabled={launched}
                  />
                </div>

                <button
                  onClick={launched ? reset : launch}
                  className={`px-10 py-4 rounded-full font-black text-xl shadow-lg transition-transform active:scale-95 text-white
                         ${
                           launched
                             ? "bg-slate-500 hover:bg-slate-600"
                             : "bg-blue-600 hover:bg-blue-500"
                         }
                      `}
                >
                  {launched ? getText("reset") : getText("launch")}
                </button>
              </div>

              {launched && distance > 0 && (
                <div className="absolute top-8 right-8 bg-blue-100 text-blue-800 p-4 rounded-xl font-bold shadow animate-bounce">
                  {getText("distance")} {distance} cm
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
