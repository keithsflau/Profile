<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - China Geography</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fdf2f8;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "China Geography Map",
          zh: "中國地理地圖",
          ja: "中国地理マップ",
          ko: "중국 지리 지도",
          es: "Mapa de geografía de China",
          de: "China Geographie Karte",
          fi: "Kiinan maantiedekartta",
          fr: "Carte géographique de la Chine",
          ar: "خريطة جغرافية الصين",
          it: "Mappa Geografica Cina",
        },
        instruction: {
          en: "Drag the label to the correct location.",
          zh: "將標籤拖到正確的位置。",
          ja: "ラベルを正しい場所にドラッグしてください。",
          ko: "레이블을 올바른 위치로 드래그하세요.",
          es: "Arrastra la etiqueta a la ubicación correcta.",
          de: "Ziehe das Etikett an die richtige Stelle.",
          fi: "Vedä etiketti oikeaan paikkaan.",
          fr: "Faites glisser l'étiquette vers le bon emplacement.",
          ar: "اسحب الملصق إلى الموقع الصحيح.",
          it: "Trascina l'etichetta nella posizione corretta.",
        },
        beijing: {
          en: "Beijing (Capital)",
          zh: "北京 (首都)",
          ja: "北京 (首都)",
          ko: "베이징 (수도)",
          es: "Pekín (Capital)",
          de: "Peking (Hauptstadt)",
          fi: "Peking (Pääkaupunki)",
          fr: "Pékin (Capitale)",
          ar: "بكين (العاصمة)",
          it: "Pechino (Capitale)",
        },
        shanghai: {
          en: "Shanghai",
          zh: "上海",
          ja: "上海",
          ko: "상하이",
          es: "Shanghái",
          de: "Shanghai",
          fi: "Shanghai",
          fr: "Shanghai",
          ar: "شنغهاي",
          it: "Shanghai",
        },
        hongkong: {
          en: "Hong Kong",
          zh: "香港",
          ja: "香港",
          ko: "홍콩",
          es: "Hong Kong",
          de: "Hongkong",
          fi: "Hongkong",
          fr: "Hong Kong",
          ar: "هونغ كونغ",
          it: "Hong Kong",
        },
        yellowriver: {
          en: "Yellow River",
          zh: "黃河",
          ja: "黄河",
          ko: "황허",
          es: "Río Amarillo",
          de: "Gelber Fluss",
          fi: "Keltainenjoki",
          fr: "Fleuve Jaune",
          ar: "النهر الأصفر",
          it: "Fiume Giallo",
        },
        yangtze: {
          en: "Yangtze River",
          zh: "長江",
          ja: "長江",
          ko: "양쯔강",
          es: "Río Yangtsé",
          de: "Jangtsekiang",
          fi: "Jangtse",
          fr: "Fleuve Yangtze",
          ar: "نهر اليانغتسي",
          it: "Fiume Azzurro",
        },
        thibet: {
          en: "Qinghai-Tibet Plateau",
          zh: "青藏高原",
          ja: "青海チベット高原",
          ko: "칭짱 고원",
          es: "Meseta tibetana",
          de: "Tibet-Plateau",
          fi: "Tiibetin ylänkö",
          fr: "Plateau tibétain",
          ar: "هضبة التبت",
          it: "Altopiano del Tibet",
        },
      };

      const locations = [
        { id: "beijing", top: 28, left: 63, type: "city" },
        { id: "shanghai", top: 55, left: 72, type: "city" },
        { id: "hongkong", top: 80, left: 65, type: "city" },
        { id: "yellowriver", top: 38, left: 55, type: "river" }, // Rough center point
        { id: "yangtze", top: 55, left: 55, type: "river" },
        { id: "thibet", top: 50, left: 20, type: "area" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [placed, setPlaced] = useState([]);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const handleDragStart = (e, id) => {
          e.dataTransfer.setData("id", id);
        };

        const handleDrop = (e, targetId) => {
          e.preventDefault();
          const draggedId = e.dataTransfer.getData("id");
          if (draggedId === targetId) {
            setPlaced([...placed, targetId]);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-4 text-red-700">
              {getText("title")}
            </h1>
            <p className="mb-4 font-bold text-slate-500">
              {getText("instruction")}
            </p>

            <div className="flex flex-col md:flex-row gap-8 w-full max-w-5xl items-start justify-center">
              {/* Map Container */}
              <div className="relative w-full max-w-2xl aspect-[4/3] bg-blue-100 rounded-3xl border-4 border-slate-300 shadow-xl overflow-hidden">
                {/* China Map SVG (Simplified) */}
                <svg
                  viewBox="0 0 100 80"
                  className="absolute inset-0 w-full h-full"
                >
                  {/* Outline approx */}
                  <path
                    d="M20,40 L30,20 L50,15 L70,20 L80,30 L80,50 L70,70 L50,75 L30,60 Z"
                    fill="#fecaca"
                    stroke="#ef4444"
                    strokeWidth="0.5"
                  />

                  {/* River paths just for visual guidance if mapped to IDs */}
                  {/* Yellow River: ~M30,35 Q50,25 70,35 */}
                  <path
                    d="M30,35 Q45,25 65,38"
                    fill="none"
                    stroke="#ca8a04"
                    strokeWidth="1"
                    opacity="0.5"
                  />
                  {/* Yangtze: ~M25,45 Q45,55 70,55 */}
                  <path
                    d="M25,45 Q45,60 72,55"
                    fill="none"
                    stroke="#3b82f6"
                    strokeWidth="1"
                    opacity="0.5"
                  />

                  {/* Drop Targets */}
                  {/* Using HTML overlay for better drop handling */}
                </svg>

                {/* Overlay Drop Zones */}
                {locations.map((loc) => (
                  <div
                    key={loc.id}
                    onDragOver={(e) => e.preventDefault()}
                    onDrop={(e) => handleDrop(e, loc.id)}
                    className={`absolute w-16 h-16 rounded-full border-2 border-dashed border-red-400 flex items-center justify-center transition-all bg-white/30
                            ${
                              placed.includes(loc.id)
                                ? "border-solid border-green-600 bg-white shadow-lg opacity-100"
                                : "opacity-60"
                            }
                         `}
                    style={{
                      top: `${loc.top}%`,
                      left: `${loc.left}%`,
                      transform: "translate(-50%, -50%)",
                    }}
                  >
                    {placed.includes(loc.id) && (
                      <div className="text-[10px] font-bold text-center leading-tight">
                        {getText(loc.id).split("(")[0]}
                      </div>
                    )}
                  </div>
                ))}
              </div>

              {/* Labels */}
              <div className="w-full md:w-64 flex flex-col gap-2">
                <h3 className="font-bold text-slate-700 mb-2">Labels</h3>
                {locations.map((loc) =>
                  !placed.includes(loc.id) ? (
                    <div
                      key={loc.id}
                      draggable
                      onDragStart={(e) => handleDragStart(e, loc.id)}
                      className="bg-white p-3 rounded-lg shadow cursor-grab border border-slate-200 text-sm font-bold text-center hover:bg-slate-50"
                    >
                      {getText(loc.id)}
                    </div>
                  ) : (
                    <div
                      key={loc.id}
                      className="bg-green-100 p-3 rounded-lg text-green-800 text-sm font-bold text-center opacity-50"
                    >
                      ✓ {getText(loc.id)}
                    </div>
                  )
                )}
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
