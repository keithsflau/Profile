<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Puberty Changes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #fdf2f8;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Changes in Puberty",
          zh: "ÈùíÊò•ÊúüÁöÑËΩâËÆä",
          ja: "ÊÄùÊò•Êúü„ÅÆÂ§âÂåñ",
          ko: "ÏÇ¨Ï∂òÍ∏∞Ïùò Î≥ÄÌôî",
          es: "Cambios en la pubertad",
          de: "Ver√§nderungen in der Pubert√§t",
          fi: "Murrosi√§n muutokset",
          fr: "Changements √† la pubert√©",
          ar: "ÿßŸÑÿ™ÿ∫Ÿäÿ±ÿßÿ™ ŸÅŸä ÿ≥ŸÜ ÿßŸÑÿ®ŸÑŸàÿ∫",
          it: "Cambiamenti nella Pubert√†",
        },
        instruction: {
          en: "Sort the changes: Boys, Girls, or Both?",
          zh: "ÂàÜÈ°ûËΩâËÆäÔºöÁî∑Áîü„ÄÅÂ•≥ÁîüÊàñÂÖ©ËÄÖÔºü",
          ja: "Â§âÂåñ„ÇíÂàÜÈ°ûÔºöÁî∑„ÅÆÂ≠ê„ÄÅÂ•≥„ÅÆÂ≠ê„ÄÅ„Åù„Çå„Å®„ÇÇ‰∏°ÊñπÔºü",
          ko: "Î≥ÄÌôîÎ•º Î∂ÑÎ•òÌïòÏÑ∏Ïöî: ÎÇ®Ïûê, Ïó¨Ïûê, ÎòêÎäî Îëò Îã§?",
          es: "Clasifica los cambios: ¬øNi√±os, Ni√±as o Ambos?",
          de: "Sortiere die Ver√§nderungen: Jungen, M√§dchen oder Beide?",
          fi: "Lajittele muutokset: Pojat, tyt√∂t vai molemmat?",
          fr: "Triez les changements : Gar√ßons, Filles ou les deux ?",
          ar: "ŸÅÿ±ÿ≤ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™: ÿ£ŸàŸÑÿßÿØÿå ÿ®ŸÜÿßÿ™ÿå ÿ£Ÿà ŸÉŸÑÿßŸáŸÖÿßÿü",
          it: "Ordina i cambiamenti: Ragazzi, Ragazze o Entrambi?",
        },
        boys: { en: "Boys", zh: "Áî∑Áîü", ja: "Áî∑„ÅÆÂ≠ê", ko: "ÎÇ®Ïûê" },
        girls: { en: "Girls", zh: "Â•≥Áîü", ja: "Â•≥„ÅÆÂ≠ê", ko: "Ïó¨Ïûê" },
        both: { en: "Both", zh: "ÂÖ©ËÄÖ", ja: "‰∏°Êñπ", ko: "Îëò Îã§" },

        voice: {
          en: "Voice gets deeper",
          zh: "ËÅ≤Èü≥ËÆä‰ΩéÊ≤â",
          ja: "Â£∞„Åå‰Ωé„Åè„Å™„Çã",
          ko: "Î™©ÏÜåÎ¶¨Í∞Ä ÍµµÏñ¥Ïßê",
        },
        tall: {
          en: "Grow taller fast",
          zh: "Âø´ÈÄüÈï∑È´ò",
          ja: "ÊÄ•„Å´ËÉå„Åå‰º∏„Å≥„Çã",
          ko: "ÌÇ§Í∞Ä Îπ®Î¶¨ ÏûêÎûå",
        },
        hair: {
          en: "Body hair grows",
          zh: "Èï∑Âá∫Ë∫´È´îÊØõÈ´Æ",
          ja: "‰ΩìÊØõ„ÅåÁîü„Åà„Çã",
          ko: "Ï≤¥Î™®Í∞Ä ÏûêÎûå",
        },
        acne: {
          en: "Pimples / Acne",
          zh: "ÊöóÁò° / ÈùíÊò•Áóò",
          ja: "„Éã„Ç≠„Éì",
          ko: "Ïó¨ÎìúÎ¶Ñ",
        },
        breast: {
          en: "Breasts develop",
          zh: "‰π≥ÊàøÁôºËÇ≤",
          ja: "ËÉ∏„ÅåÁô∫ÈÅî„Åô„Çã",
          ko: "Í∞ÄÏä¥ Î∞úÎã¨",
        },
        mens: { en: "Menstruation", zh: "ÊúàÁ∂ì‰æÜÊΩÆ", ja: "ÊúàÁµå", ko: "ÏõîÍ≤Ω" },
        beard: {
          en: "Facial hair grows",
          zh: "Èï∑Âá∫È¨çÈ¨ö",
          ja: "„Éí„Ç≤„ÅåÁîü„Åà„Çã",
          ko: "ÏàòÏóºÏù¥ ÏûêÎûå",
        },
        hips: {
          en: "Hips get wider",
          zh: "ËáÄÈÉ®ËÆäÂØ¨",
          ja: "„ÅäÂ∞ª„ÅåÂ∫É„Åè„Å™„Çã",
          ko: "ÏóâÎç©Ïù¥Í∞Ä ÎÑìÏñ¥Ïßê",
        },

        correct: { en: "Correct!", zh: "Ê≠£Á¢∫ÔºÅ", ja: "Ê≠£Ëß£ÔºÅ", ko: "Ï†ïÎãµ!" },
      };

      const changes = [
        { id: "voice", type: "boys" }, // Though girls change too, typically assoc with boys deepening significantly
        { id: "tall", type: "both" },
        { id: "hair", type: "both" },
        { id: "acne", type: "both" },
        { id: "breast", type: "girls" },
        { id: "mens", type: "girls" },
        { id: "beard", type: "boys" },
        { id: "hips", type: "girls" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [index, setIndex] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];
        const current = changes[index];

        const handleSort = (type) => {
          if (feedback) return;

          // Simplified logic: accept broad answers or strict? Let's go strict based on primary school syllabus
          // Voice -> Boys (Deepening)
          // Hips -> Girls
          if (
            type === current.type ||
            (current.type === "both" && type === "both")
          ) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setIndex((index + 1) % changes.length);
            }, 1000);
          } else {
            // Shake or error
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 500);
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-pink-600">
              {getText("title")}
            </h1>

            <div className="w-full max-w-2xl text-center">
              <p className="mb-8 font-bold text-slate-500">
                {getText("instruction")}
              </p>

              {/* Card */}
              <div className="bg-white p-12 rounded-3xl shadow-xl mb-12 border-4 border-pink-100 min-h-[200px] flex items-center justify-center relative overflow-hidden">
                <motion.div
                  key={current.id}
                  initial={{ scale: 0.5, opacity: 0 }}
                  animate={{ scale: 1, opacity: 1 }}
                  className="text-3xl font-black text-slate-800"
                >
                  {getText(current.id)}
                </motion.div>

                {feedback === "correct" && (
                  <div className="absolute inset-0 bg-green-500/90 flex items-center justify-center text-white font-bold text-4xl">
                    ‚úÖ
                  </div>
                )}
                {feedback === "wrong" && (
                  <div className="absolute inset-0 bg-red-500/90 flex items-center justify-center text-white font-bold text-4xl">
                    ‚ùå
                  </div>
                )}
              </div>

              {/* Buckets */}
              <div className="grid grid-cols-3 gap-4">
                <button
                  onClick={() => handleSort("boys")}
                  className="p-6 bg-blue-100 hover:bg-blue-200 rounded-2xl border-b-8 border-blue-300 transition-transform active:scale-95"
                >
                  <div className="text-4xl mb-2">üë¶</div>
                  <div className="font-bold text-blue-800">
                    {getText("boys")}
                  </div>
                </button>
                <button
                  onClick={() => handleSort("both")}
                  className="p-6 bg-purple-100 hover:bg-purple-200 rounded-2xl border-b-8 border-purple-300 transition-transform active:scale-95"
                >
                  <div className="text-4xl mb-2">üë´</div>
                  <div className="font-bold text-purple-800">
                    {getText("both")}
                  </div>
                </button>
                <button
                  onClick={() => handleSort("girls")}
                  className="p-6 bg-pink-100 hover:bg-pink-200 rounded-2xl border-b-8 border-pink-300 transition-transform active:scale-95"
                >
                  <div className="text-4xl mb-2">üëß</div>
                  <div className="font-bold text-pink-800">
                    {getText("girls")}
                  </div>
                </button>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
