<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>General Studies - Space Exploration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Segoe UI", "Microsoft JhengHei", sans-serif;
        background: #0f172a;
        color: white;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Solar System Order",
          zh: "太陽系行星順序",
          ja: "太陽系の順序",
          ko: "태양계 순서",
          es: "Orden del sistema solar",
          de: "Reihenfolge des Sonnensystems",
          fi: "Aurinkokunnan järjestys",
          fr: "Ordre du système solaire",
          ar: "ترتيب النظام الشمسي",
          it: "Ordine Sistema Solare",
        },
        instruction: {
          en: "Place planets in order from the Sun.",
          zh: "按距離太陽的順序排列行星。",
          ja: "太陽からの距離順に惑星を並べてください。",
          ko: "태양에서 가까운 순서대로 행성을 배치하세요.",
          es: "Coloca los planetas en orden desde el Sol.",
          de: "Ordne die Planeten nach ihrer Entfernung zur Sonne.",
          fi: "Aseta planeetat järjestykseen Auringosta.",
          fr: "Placez les planètes dans l'ordre à partir du Soleil.",
          ar: "رتب الكواكب حسب بعدها عن الشمس.",
          it: "Metti i pianeti in ordine dal Sole.",
        },
        mercury: { en: "Mercury", zh: "水星", ja: "水星", ko: "수성" },
        venus: { en: "Venus", zh: "金星", ja: "金星", ko: "금성" },
        earth: { en: "Earth", zh: "地球", ja: "地球", ko: "지구" },
        mars: { en: "Mars", zh: "火星", ja: "火星", ko: "화성" },
        jupiter: { en: "Jupiter", zh: "木星", ja: "木星", ko: "목성" },
        saturn: { en: "Saturn", zh: "土星", ja: "土星", ko: "토성" },
        uranus: { en: "Uranus", zh: "天王星", ja: "天王星", ko: "천왕성" },
        neptune: { en: "Neptune", zh: "海王星", ja: "海王星", ko: "해왕성" },

        sun: { en: "Sun", zh: "太陽", ja: "太陽", ko: "태양" },
        check: { en: "Check", zh: "檢查", ja: "確認", ko: "확인" },
        correct: {
          en: "Perfect Alignment!",
          zh: "排列正確！",
          ja: "完璧な配置！",
          ko: "완벽한 정렬!",
        },
      };

      const planets = [
        { id: "mercury", color: "#9ca3af", size: 20 },
        { id: "venus", color: "#fbbf24", size: 30 },
        { id: "earth", color: "#3b82f6", size: 32 },
        { id: "mars", color: "#ef4444", size: 25 },
        { id: "jupiter", color: "#d97706", size: 60 },
        { id: "saturn", color: "#fcd34d", size: 55, ring: true },
        { id: "uranus", color: "#22d3ee", size: 40 },
        { id: "neptune", color: "#1d4ed8", size: 40 },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [placed, setPlaced] = useState([]);
        const [pool, setPool] = useState(
          [...planets].sort(() => Math.random() - 0.5)
        );
        const [message, setMessage] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        const handlePlace = (p) => {
          setPlaced([...placed, p]);
          setPool(pool.filter((item) => item.id !== p.id));
        };

        const reset = () => {
          setPlaced([]);
          setPool([...planets].sort(() => Math.random() - 0.5));
          setMessage(null);
        };

        const check = () => {
          const correctOrder = planets.map((p) => p.id);
          const currentOrder = placed.map((p) => p.id);
          if (JSON.stringify(correctOrder) === JSON.stringify(currentOrder)) {
            setMessage("correct");
          } else {
            setMessage(null);
            // Simple shake effect visually (omitted here for brevity)
            alert("Not quite right. Try again!");
            reset();
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl font-bold mb-8 text-yellow-300">
              {getText("title")}
            </h1>

            <div className="w-full max-w-6xl overflow-x-auto">
              {/* Space Track */}
              <div className="flex items-center gap-2 min-w-[800px] h-[200px] border-b border-indigo-900 mb-8 relative px-4">
                <div className="w-24 h-24 rounded-full bg-yellow-500 shadow-[0_0_50px_orange] flex items-center justify-center font-bold text-yellow-900 mr-8 z-10 shrink-0">
                  {getText("sun")}
                </div>

                {placed.map((p, i) => (
                  <motion.div
                    key={p.id}
                    layoutId={p.id}
                    className="flex flex-col items-center shrink-0"
                  >
                    <div
                      className="rounded-full shadow-lg relative mb-2"
                      style={{
                        width: p.size,
                        height: p.size,
                        backgroundColor: p.color,
                      }}
                    >
                      {p.ring && (
                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[140%] h-[20%] border-2 border-white/50 rounded-[50%]"></div>
                      )}
                    </div>
                    <div className="text-xs text-slate-300">
                      {getText(p.id)}
                    </div>
                  </motion.div>
                ))}

                {placed.length < 8 && (
                  <div className="text-slate-500 border-2 border-dashed border-slate-700 rounded-full w-10 h-10 flex items-center justify-center ml-4 opacity-50 text-2xl">
                    +
                  </div>
                )}
              </div>

              {/* Pool */}
              <div className="flex flex-wrap gap-4 justify-center">
                {pool.map((p) => (
                  <motion.button
                    key={p.id}
                    layoutId={p.id}
                    onClick={() => handlePlace(p)}
                    className="bg-slate-800 p-4 rounded-xl flex flex-col items-center gap-2 hover:bg-slate-700 w-24"
                  >
                    <div
                      className="rounded-full"
                      style={{
                        width: 30,
                        height: 30,
                        backgroundColor: p.color,
                      }} // Uniform size for pool
                    ></div>
                    <div className="text-xs text-white">{getText(p.id)}</div>
                  </motion.button>
                ))}
              </div>

              <div className="flex justify-center gap-4 mt-8">
                <button
                  onClick={reset}
                  className="bg-slate-600 px-6 py-2 rounded-lg font-bold"
                >
                  Reset
                </button>
                <button
                  onClick={check}
                  disabled={placed.length < 8}
                  className="bg-indigo-600 px-6 py-2 rounded-lg font-bold disabled:opacity-50 hover:bg-indigo-500"
                >
                  {getText("check")}
                </button>
              </div>

              {message && (
                <div className="mt-8 text-center text-3xl text-green-400 font-bold animate-pulse">
                  {getText(message)}
                </div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          「耶和華用能力創造大地，用智慧建立世界，用聰明鋪張穹蒼。」 耶利米書 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
