<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫åÂ∏∏Ë≠òÔºöÁí∞‰øùÂ∞èÂÖàÈãí | Green Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #d9f99d 0%, #bef264 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Green Manager",
          zh: "Áí∞‰øùÂ∞èÂÖàÈãí",
          ja: "„Ç∞„É™„Éº„É≥„Éû„Éç„Éº„Ç∏„É£„Éº",
          ko: "ÌôòÍ≤Ω ÏßÄÌÇ¥Ïù¥",
          es: "Gerente Verde",
          de: "Umweltmanager",
          fi: "Vihre√§ johtaja",
          fr: "Responsable vert",
          ar: "ÿßŸÑŸÖÿØŸäÿ± ÿßŸÑÿ£ÿÆÿ∂ÿ±",
          it: "Manager Verde",
        },
        instruction: {
          en: "Sort waste into correct bins!",
          zh: "Â∞áÂûÉÂúæÂàÜÈ°ûÂà∞Ê≠£Á¢∫ÁöÑÂõûÊî∂ÁÆ±ÔºÅ",
          ja: "„Ç¥„Éü„ÇíÊ≠£„Åó„ÅÑÂàÜÂà•ÁÆ±„Å´ÂÖ•„Çå„Å¶„Åè„Å†„Åï„ÅÑÔºÅ",
          ko: "Ïì∞Î†àÍ∏∞Î•º Ïò¨Î∞îÎ•∏ ÌÜµÏóê Î∂ÑÎ•òÌïòÏÑ∏Ïöî!",
          es: "¬°Clasifica los residuos en los contenedores correctos!",
          de: "Sortiere den Abfall in die richtigen Tonnen!",
          fi: "Lajittele j√§tteet oikeisiin astioihin!",
          fr: "Triez les d√©chets dans les bonnes poubelles !",
          ar: "ŸÅÿ±ÿ≤ ÿßŸÑŸÜŸÅÿßŸäÿßÿ™ ŸÅŸä ÿßŸÑÿµŸÜÿßÿØŸäŸÇ ÿßŸÑÿµÿ≠Ÿäÿ≠ÿ©!",
          it: "Differenzia i rifiuti nei contenitori corretti!",
        },

        paper: {
          en: "Paper",
          zh: "Âª¢Á¥ô",
          ja: "Á¥ô",
          ko: "Ï¢ÖÏù¥",
          es: "Papel",
          de: "Papier",
          fi: "Paperi",
          fr: "Papier",
          ar: "Ÿàÿ±ŸÇ",
          it: "Carta",
        },
        plastic: {
          en: "Plastic",
          zh: "Â°ëËÜ†",
          ja: "„Éó„É©„Çπ„ÉÅ„ÉÉ„ÇØ",
          ko: "ÌîåÎùºÏä§Ìã±",
          es: "Pl√°stico",
          de: "Plastik",
          fi: "Muovi",
          fr: "Plastique",
          ar: "ÿ®ŸÑÿßÿ≥ÿ™ŸäŸÉ",
          it: "Plastica",
        },
        metal: {
          en: "Metal",
          zh: "ÈáëÂ±¨",
          ja: "ÈáëÂ±û",
          ko: "Í∏àÏÜç",
          es: "Metal",
          de: "Metall",
          fi: "Metalli",
          fr: "M√©tal",
          ar: "ŸÖÿπÿØŸÜ",
          it: "Metallo",
        },
        trash: {
          en: "Trash",
          zh: "‰∏ÄËà¨ÂûÉÂúæ",
          ja: "„Ç¥„Éü",
          ko: "ÏùºÎ∞ò Ïì∞Î†àÍ∏∞",
          es: "Basura",
          de: "M√ºll",
          fi: "Roskat",
          fr: "D√©chets",
          ar: "ŸÇŸÖÿßŸÖÿ©",
          it: "Rifiuti",
        },

        newspaper: {
          en: "Newspaper",
          zh: "Â†±Á¥ô",
          ja: "Êñ∞ËÅû",
          ko: "Ïã†Î¨∏",
          es: "Peri√≥dico",
          de: "Zeitung",
          fi: "Sanomalehti",
          fr: "Journal",
          ar: "ÿ¨ÿ±ŸäÿØÿ©",
          it: "Giornale",
        },
        bottle: {
          en: "Plastic Bottle",
          zh: "ËÜ†Ê®Ω",
          ja: "„Éö„ÉÉ„Éà„Éú„Éà„É´",
          ko: "ÌîåÎùºÏä§Ìã± Î≥ë",
          es: "Botella de Pl√°stico",
          de: "Plastikflasche",
          fi: "Muovipullo",
          fr: "Bouteille en plastique",
          ar: "ÿ≤ÿ¨ÿßÿ¨ÿ© ÿ®ŸÑÿßÿ≥ÿ™ŸäŸÉŸäÿ©",
          it: "Bottiglia di Plastica",
        },
        can: {
          en: "Soda Can",
          zh: "Ê±ΩÊ∞¥ÁΩê",
          ja: "Á©∫„ÅçÁº∂",
          ko: "ÏùåÎ£åÏàò Ï∫î",
          es: "Lata de Refresco",
          de: "Limo-Dose",
          fi: "Limut√∂lkki",
          fr: "Canette de soda",
          ar: "ÿπŸÑÿ®ÿ© ÿµŸàÿØÿß",
          it: "Lattina",
        },
        tissue: {
          en: "Used Tissue",
          zh: "Áî®ÈÅéÁöÑÁ¥ôÂ∑æ",
          ja: "‰ΩøÁî®Ê∏à„Åø„ÉÜ„Ç£„ÉÉ„Ç∑„É•",
          ko: "ÏÇ¨Ïö©Ìïú Ìú¥ÏßÄ",
          es: "Pa√±uelo Usado",
          de: "Benutztes Taschentuch",
          fi: "K√§ytetty nen√§liina",
          fr: "Mouchoir usag√©",
          ar: "ŸÖŸÜÿØŸäŸÑ ŸÖÿ≥ÿ™ÿπŸÖŸÑ",
          it: "Fazzoletto Usato",
        },
        box: {
          en: "Cardboard Box",
          zh: "Á¥ôÁöÆÁÆ±",
          ja: "ÊÆµ„Éú„Éº„É´ÁÆ±",
          ko: "Ï¢ÖÏù¥ ÏÉÅÏûê",
          es: "Caja de Cart√≥n",
          de: "Pappkarton",
          fi: "Pahvilaatikko",
          fr: "Bo√Æte en carton",
          ar: "ÿµŸÜÿØŸàŸÇ ŸÉÿ±ÿ™ŸàŸÜ",
          it: "Scatola di Cartone",
        },
        bag: {
          en: "Plastic Bag",
          zh: "ËÜ†Ë¢ã",
          ja: "„Éì„Éã„Éº„É´Ë¢ã",
          ko: "ÎπÑÎãê Î¥âÌà¨",
          es: "Bolsa de Pl√°stico",
          de: "Plastikt√ºte",
          fi: "Muovipussi",
          fr: "Sac en plastique",
          ar: "ŸÉŸäÿ≥ ÿ®ŸÑÿßÿ≥ÿ™ŸäŸÉŸä",
          it: "Sacchetto di Plastica",
        },

        correct: {
          en: "Great Recycling!",
          zh: "ÂàÜÈ°ûÊ≠£Á¢∫ÔºÅ",
          ja: "„É™„Çµ„Ç§„ÇØ„É´ÊàêÂäüÔºÅ",
          ko: "Ïû¨ÌôúÏö© ÏÑ±Í≥µ!",
          es: "¬°Gran Reciclaje!",
          de: "Tolles Recycling!",
          fi: "Hienoa kierr√§tyst√§!",
          fr: "Super recyclage !",
          ar: "ÿ•ÿπÿßÿØÿ© ÿ™ÿØŸàŸäÿ± ÿ±ÿßÿ¶ÿπÿ©!",
          it: "Grande Riciclo!",
        },
        wrong: {
          en: "Wrong Bin!",
          zh: "ÊîæÈåØ‰∫ÜÔºÅ",
          ja: "ÈÅï„ÅÜÁÆ±„Åß„ÅôÔºÅ",
          ko: "ÌãÄÎ¶∞ ÌÜµÏûÖÎãàÎã§!",
          es: "¬°Contenedor Incorrecto!",
          de: "Falsche Tonne!",
          fi: "V√§√§r√§ astia!",
          fr: "Mauvaise poubelle !",
          ar: "ÿµŸÜÿØŸàŸÇ ÿÆÿßÿ∑ÿ¶!",
          it: "Contenitore Sbagliato!",
        },
        completed: {
          en: "Earth is Happy!",
          zh: "Âú∞ÁêÉÂæàÈñãÂøÉÔºÅ",
          ja: "Âú∞ÁêÉ„ÇÇÂñú„Çì„Åß„ÅÑ„Åæ„ÅôÔºÅ",
          ko: "ÏßÄÍµ¨Í∞Ä ÌñâÎ≥µÌï¥Ìï¥Ïöî!",
          es: "¬°La Tierra est√° Feliz!",
          de: "Die Erde ist gl√ºcklich!",
          fi: "Maapallo on onnellinen!",
          fr: "La Terre est heureuse !",
          ar: "ÿßŸÑÿ£ÿ±ÿ∂ ÿ≥ÿπŸäÿØÿ©!",
          it: "La Terra √® Felice!",
        },
        reset: {
          en: "Play Again",
          zh: "ÂÜçÁé©‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Éó„É¨„Ç§",
          ko: "Îã§Ïãú ÌïòÍ∏∞",
          es: "Jugar de Nuevo",
          de: "Nochmal spielen",
          fi: "Pelaa uudelleen",
          fr: "Rejouer",
          ar: "ÿßŸÑÿπÿ® ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Gioca di Nuovo",
        },
      };

      const items = [
        { id: "newspaper", icon: "üì∞", type: "paper" },
        { id: "bottle", icon: "ü•§", type: "plastic" },
        { id: "can", icon: "ü•´", type: "metal" },
        { id: "tissue", icon: "üßª", type: "trash" }, // Not recyclable mainly
        { id: "box", icon: "üì¶", type: "paper" },
        { id: "bag", icon: "üõçÔ∏è", type: "plastic" },
      ];

      const bins = [
        {
          type: "paper",
          color: "bg-blue-500",
          labelColor: "bg-blue-700",
          border: "border-blue-700",
        }, // Blue for Paper (HK standard)
        {
          type: "metal",
          color: "bg-yellow-500",
          labelColor: "bg-yellow-700",
          border: "border-yellow-700",
        }, // Yellow for Metal
        {
          type: "plastic",
          color: "bg-amber-800",
          labelColor: "bg-amber-900",
          border: "border-amber-900",
        }, // Brown for Plastic
        {
          type: "trash",
          color: "bg-slate-500",
          labelColor: "bg-slate-700",
          border: "border-slate-700",
        }, // Grey/Green for Trash but bins usually Orange/Green vary. Grey standard here.
      ];
      // Note: HK standard: Blue=Paper, Yellow=Metal, Brown=Plastic, Green=Glass (not here), Orange/Black=Refuse.
      // Let's stick to HK colors roughly. Brown for plastic is HK standard.

      function App() {
        const [lang, setLang] = useState("zh");
        const [queue, setQueue] = useState([]);
        const [currentItem, setCurrentItem] = useState(null);
        const [feedback, setFeedback] = useState(null);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          initGame();
        }, []);

        const initGame = () => {
          const q = [...items].sort(() => Math.random() - 0.5);
          setQueue(q);
          setCurrentItem(q[0]);
          setFeedback(null);
        };

        const handleSort = (binType) => {
          if (feedback) return;

          if (currentItem.type === binType) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              const nextIdx = queue.indexOf(currentItem) + 1;
              if (nextIdx < queue.length) setCurrentItem(queue[nextIdx]);
              else setCurrentItem(null);
            }, 800);
          } else {
            setFeedback("wrong");
            setTimeout(() => setFeedback(null), 800);
          }
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center select-none overflow-hidden">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-lime-800 mb-4 mt-8 drop-shadow-sm bg-white/50 px-6 py-2 rounded-full z-10">
              ‚ôªÔ∏è {getText("title")}
            </h1>

            {currentItem ? (
              <div className="w-full flex-1 flex flex-col items-center justify-between py-4 max-w-4xl">
                {/* Item to Sort */}
                <motion.div
                  key={currentItem.id} // Re-anim on change
                  initial={{ scale: 0, y: -100 }}
                  animate={{ scale: 1, y: 0 }}
                  className="bg-white p-8 rounded-full shadow-2xl border-8 border-lime-300 z-20 flex flex-col items-center w-48 h-48 justify-center mb-8"
                >
                  <div className="text-7xl mb-2">{currentItem.icon}</div>
                  <div className="font-bold text-slate-500 text-center leading-tight">
                    {getText(currentItem.id)}
                  </div>
                </motion.div>

                {/* Bins */}
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 w-full">
                  {bins.map((bin) => (
                    <button
                      key={bin.type}
                      onClick={() => handleSort(bin.type)}
                      className={`flex flex-col items-center justify-end h-48 md:h-64 rounded-t-3xl ${bin.color} border-x-4 border-t-4 ${bin.border} shadow-xl relative group transform hover:scale-105 transition-transform active:scale-95 overflow-hidden`}
                    >
                      <div className="absolute top-4 text-white/30 text-8xl font-black">
                        ‚ôªÔ∏è
                      </div>
                      <div
                        className={`w-full py-4 text-white font-black text-xl md:text-2xl text-center z-10 ${bin.labelColor}`}
                      >
                        {getText(bin.type)}
                      </div>
                      {/* Lid Visual */}
                      <div className="absolute top-0 w-full h-4 bg-black/20"></div>
                    </button>
                  ))}
                </div>

                {feedback && (
                  <div
                    className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 p-6 rounded-2xl font-black text-3xl shadow-2xl z-30 whitespace-nowrap ${
                      feedback === "correct"
                        ? "bg-green-500 text-white"
                        : "bg-red-500 text-white"
                    }`}
                  >
                    {getText(feedback)}
                  </div>
                )}
              </div>
            ) : (
              <div className="bg-white/90 p-12 rounded-3xl shadow-xl text-center mt-20">
                <div className="text-8xl mb-4">üåç</div>
                <h2 className="text-3xl font-black text-lime-800 mb-6">
                  {getText("completed")}
                </h2>
                <button
                  onClick={initGame}
                  className="bg-lime-600 text-white px-10 py-4 rounded-full font-black text-xl hover:bg-lime-700 shadow-xl"
                >
                  {getText("reset")} üîÑ
                </button>
              </div>
            )}

            {!currentItem && <div className="flex-1"></div>}

            <p className="mt-4 font-bold text-lime-800 text-lg mb-8">
              {getText("instruction")}
            </p>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
