<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°äºŒå¸¸è­˜ï¼šèª²å®¤å€¼æ—¥ç”Ÿ | Classroom Duty</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #fb923c 0%, #fed7aa 100%);
      }
      .cursor-brush {
        cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><text y="20" font-size="20">ğŸ§¹</text></svg>'),
          auto;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Classroom Duty",
          zh: "èª²å®¤å€¼æ—¥ç”Ÿ",
          ja: "æ—¥ç›´",
        },
        instruction: {
          en: "Tap the messy spots to clean them!",
          zh: "é»æ“Šéª¯é«’çš„åœ°æ–¹ä¾†æ¸…æ½”ï¼",
          ja: "æ±šã‚ŒãŸå ´æ‰€ã‚’ã‚¿ãƒƒãƒ—ã—ã¦æƒé™¤ã—ã¾ã—ã‚‡ã†ï¼",
        },
        clean: { en: "All Clean!", zh: "æ¸…æ½”ä¹¾æ·¨äº†ï¼" },
        reset: { en: "Clean Again", zh: "å†æ¸…æ½”ä¸€æ¬¡" },

        trash: { en: "Trash", zh: "åƒåœ¾" },
        dust: { en: "Dust", zh: "ç°å¡µ" },
        blackboard: { en: "Dirty Board", zh: "é»‘æ¿æœªæ“¦" },
        desk: { en: "Messy Desk", zh: "æ¡Œå­å‡Œäº‚" },
      };

      // Random generate mess
      const generateMess = () => {
        const items = [];
        for (let i = 0; i < 5; i++) {
          items.push({
            id: i,
            type: "trash",
            x: Math.random() * 80 + 10,
            y: Math.random() * 30 + 60, // Floor area
            icon: "ğŸ“„",
            rotation: Math.random() * 360,
          });
        }
        for (let i = 5; i < 8; i++) {
          items.push({
            id: i,
            type: "dust",
            x: Math.random() * 80 + 10,
            y: Math.random() * 20 + 40, // Desk area vertical
            icon: "ğŸŒ«ï¸",
            rotation: 0,
          });
        }
        // Blackboard smudge
        items.push({
          id: 99,
          type: "board",
          x: 50,
          y: 20,
          icon: "ğŸ–ï¸",
          rotation: 0,
          scale: 3,
          opacity: 0.5,
        });

        return items;
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [messes, setMesses] = useState([]);
        const [cleanedCount, setCleanedCount] = useState(0);

        const getText = (key) => t[key][lang] || t[key]["en"];

        useEffect(() => {
          reset();
        }, []);

        const reset = () => {
          setMesses(generateMess());
          setCleanedCount(0);
        };

        const handleClean = (id) => {
          setMesses((prev) => prev.filter((m) => m.id !== id));
          setCleanedCount((prev) => prev + 1);
        };

        const allClean = messes.length === 0;

        return (
          <div className="min-h-screen p-4 flex flex-col items-center cursor-brush select-none">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-white mb-2 mt-8 drop-shadow-md">
              ğŸ§¹ {getText("title")}
            </h1>
            <p className="font-bold text-white/90 mb-6 bg-orange-600/30 px-4 py-1 rounded-full">
              {getText("instruction")}
            </p>

            <div className="relative w-full max-w-4xl aspect-video bg-white rounded-3xl shadow-2xl border-8 border-orange-200 overflow-hidden">
              {/* Classroom Background - CSS Art style */}
              <div className="absolute inset-0 bg-[#fef9c3]"></div>{" "}
              {/* Cream Wall */}
              <div className="absolute bottom-0 w-full h-[30%] bg-[#b45309]"></div>{" "}
              {/* Wood Floor */}
              {/* Blackboard */}
              <div className="absolute top-[10%] left-[15%] right-[15%] h-[30%] bg-[#1c1917] border-4 border-[#78350f] rounded-lg shadow-inner flex items-center justify-center">
                <span className="text-white/20 font-hand text-4xl font-mono rotate-[-2deg]">
                  1 + 1 = 2
                </span>
              </div>
              {/* Desks */}
              <div className="absolute top-[50%] left-[10%] w-[20%] h-[20%] bg-[#d97706] rounded-t-lg shadow-lg transform perspective-[500px] rotate-x-10"></div>
              <div className="absolute top-[50%] left-[40%] w-[20%] h-[20%] bg-[#d97706] rounded-t-lg shadow-lg"></div>
              <div className="absolute top-[50%] right-[10%] w-[20%] h-[20%] bg-[#d97706] rounded-t-lg shadow-lg"></div>
              {/* Messes */}
              <AnimatePresence>
                {messes.map((item) => (
                  <motion.button
                    key={item.id}
                    initial={{ scale: 0 }}
                    animate={{
                      scale: item.scale || 1,
                      opacity: item.opacity || 1,
                      rotate: item.rotation,
                    }}
                    exit={{ scale: 1.5, opacity: 0, filter: "brightness(2)" }}
                    className="absolute text-4xl filter drop-shadow-md hover:scale-110 active:scale-90 transition-transform cursor-brush focus:outline-none"
                    style={{ left: `${item.x}%`, top: `${item.y}%` }}
                    onClick={() => handleClean(item.id)}
                    whileTap={{ scale: 0.8 }}
                  >
                    {item.icon}
                  </motion.button>
                ))}
              </AnimatePresence>
              {/* Decoration: Plant */}
              <div className="absolute bottom-4 left-4 text-6xl pointer-events-none">
                ğŸª´
              </div>
              {/* Success Overlay */}
              {allClean && (
                <div className="absolute inset-0 bg-black/20 backdrop-blur-sm flex flex-col items-center justify-center z-10">
                  <motion.div
                    initial={{ scale: 0.5, opacity: 0 }}
                    animate={{ scale: 1, opacity: 1 }}
                    className="bg-white p-8 rounded-3xl shadow-2xl text-center"
                  >
                    <div className="text-8xl mb-4">âœ¨</div>
                    <h2 className="text-3xl font-black text-orange-500 mb-6">
                      {getText("clean")}
                    </h2>
                    <button
                      onClick={reset}
                      className="bg-orange-500 text-white px-8 py-3 rounded-full font-bold shadow hover:bg-orange-600"
                    >
                      {getText("reset")}
                    </button>
                  </motion.div>
                </div>
              )}
            </div>

            <div className="mt-4 font-bold text-orange-800 text-xl">
              ğŸ§¹ {cleanedCount} / 9
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
