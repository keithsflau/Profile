<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏âÊï∏Â≠∏ÔºöÁ•ûÂ•áÈô£ÂàóÂúñ | Magic Array</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #818cf8 0%, #4f46e5 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Magic Array",
          zh: "Á•ûÂ•áÈô£ÂàóÂúñ",
          ja: "È≠îÊ≥ï„ÅÆÈÖçÂàó",
          ko: "ÎßàÎ≤ï Î∞∞Ïó¥",
          es: "Matriz m√°gica",
          de: "Magisches Array",
          fi: "Taikataulukko",
          fr: "Tableau magique",
          ar: "ÿßŸÑŸÖÿµŸÅŸàŸÅÿ© ÿßŸÑÿ≥ÿ≠ÿ±Ÿäÿ©",
          it: "Matrice magica",
        },
        settings: {
          en: "Array Settings",
          zh: "Ë®≠ÂÆöÈô£Âàó",
          ja: "ÈÖçÂàóË®≠ÂÆö",
          ko: "Î∞∞Ïó¥ ÏÑ§Ï†ï",
          es: "Configuraci√≥n de la matriz",
          de: "Array-Einstellungen",
          fi: "Taulukon asetukset",
          fr: "Param√®tres du tableau",
          ar: "ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖÿµŸÅŸàŸÅÿ©",
          it: "Impostazioni matrice",
        },
        rows: {
          en: "Rows",
          zh: "Ë°åÊï∏",
          ja: "Ë°å",
          ko: "Ìñâ",
          es: "Filas",
          de: "Zeilen",
          fi: "Rivit",
          fr: "Lignes",
          ar: "ÿßŸÑÿµŸÅŸàŸÅ",
          it: "Righe",
        },
        cols: {
          en: "Columns",
          zh: "ÂàóÊï∏",
          ja: "Âàó",
          ko: "Ïó¥",
          es: "Columnas",
          de: "Spalten",
          fi: "Sarakkeet",
          fr: "Colonnes",
          ar: "ÿßŸÑÿ£ÿπŸÖÿØÿ©",
          it: "Colonne",
        },
        selectIcon: {
          en: "Select Icon",
          zh: "ÈÅ∏ÊìáÂúñÊ°à",
          ja: "„Ç¢„Ç§„Ç≥„É≥„ÇíÈÅ∏Êäû",
          ko: "ÏïÑÏù¥ÏΩò ÏÑ†ÌÉù",
          es: "Seleccionar icono",
          de: "Symbol w√§hlen",
          fi: "Valitse kuvake",
          fr: "S√©lectionner l'ic√¥ne",
          ar: "ÿßÿÆÿ™ÿ± ÿßŸÑÿ±ŸÖÿ≤",
          it: "Seleziona icona",
        },
        formula: {
          en: "Multiplication Formula",
          zh: "‰πòÊ≥ïÁÆóÂºè",
          ja: "Êéõ„ÅëÁÆó„ÅÆÂºè",
          ko: "Í≥±ÏÖà Í≥µÏãù",
          es: "F√≥rmula de multiplicaci√≥n",
          de: "Multiplikationsformel",
          fi: "Kertolaskukaava",
          fr: "Formule de multiplication",
          ar: "ÿµŸäÿ∫ÿ© ÿßŸÑÿ∂ÿ±ÿ®",
          it: "Formula di moltiplicazione",
        },
        legendTitle: {
          en: "Legend",
          zh: "Âúñ‰æã",
          ja: "Âá°‰æã",
          ko: "Î≤îÎ°Ä",
          es: "Leyenda",
          de: "Legende",
          fi: "Selite",
          fr: "L√©gende",
          ar: "ÿßŸÑŸÖŸÅÿ™ÿßÿ≠",
          it: "Legenda",
        },
        vertical: {
          en: "Rows (Vertical)",
          zh: "Ë°åÊï∏ (Á∏±Âêë)",
          ja: "Ë°å (ÂûÇÁõ¥)",
          ko: "Ìñâ (ÏàòÏßÅ)",
          es: "Filas (Vertical)",
          de: "Zeilen (Vertikal)",
          fi: "Rivit (Pysty)",
          fr: "Lignes (Vertical)",
          ar: "ÿßŸÑÿµŸÅŸàŸÅ (ÿπŸÖŸàÿØŸä)",
          it: "Righe (Verticale)",
        },
        horizontal: {
          en: "Columns (Horizontal)",
          zh: "ÂàóÊï∏ (Ê©´Âêë)",
          ja: "Âàó (Ê∞¥Âπ≥)",
          ko: "Ïó¥ (ÏàòÌèâ)",
          es: "Columnas (Horizontal)",
          de: "Spalten (Horizontal)",
          fi: "Sarakkeet (Vaaka)",
          fr: "Colonnes (Horizontal)",
          ar: "ÿßŸÑÿ£ÿπŸÖÿØÿ© (ÿ£ŸÅŸÇŸä)",
          it: "Colonne (Orizzontale)",
        },
        desc: {
          en: "{r} Rows, {c} per row",
          zh: "{r} Ë°åÔºåÊØèË°å {c} ÂÄã",
          ja: "{r} Ë°å„ÄÅÂêÑË°å {c} ÂÄã",
          ko: "{r} Ìñâ, Í∞Å ÌñâÏóê {c} Í∞ú",
          es: "{r} Filas, {c} por fila",
          de: "{r} Zeilen, {c} pro Zeile",
          fi: "{r} rivi√§, {c} per rivi",
          fr: "{r} Lignes, {c} par ligne",
          ar: "{r} ÿµŸÅŸàŸÅÿå {c} ŸÅŸä ŸÉŸÑ ÿµŸÅ",
          it: "{r} Righe, {c} per riga",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [rows, setRows] = useState(3);
        const [cols, setCols] = useState(4);
        const icons = ["üçé", "‚≠ê", "‚öΩ", "üê±", "üöÄ", "üíé"];
        const [icon, setIcon] = useState("üçé");

        const total = rows * cols;
        const getDescText = () =>
          (t.desc[lang] || t.desc["en"])
            .replace("{r}", rows)
            .replace("{c}", cols);

        return (
          <div className="min-h-screen p-8 flex flex-col items-center text-white">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-6xl font-black text-indigo-100 mb-8 mt-8 drop-shadow-md text-center">
              {t.title[lang] || t.title["en"]}
            </h1>

            <div className="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-12 gap-8">
              {/* Control Panel */}
              <div className="lg:col-span-4 bg-white/10 backdrop-blur-md rounded-3xl p-8 border border-white/20 shadow-xl">
                <h2 className="text-2xl font-bold mb-6 text-indigo-200">
                  {t.settings[lang] || t.settings["en"]}
                </h2>

                <div className="mb-8">
                  <label className="flex justify-between text-lg font-bold mb-2">
                    <span>{t.rows[lang] || t.rows["en"]}</span>
                    <span className="text-indigo-300">{rows}</span>
                  </label>
                  <input
                    type="range"
                    min="1"
                    max="10"
                    value={rows}
                    onChange={(e) => setRows(parseInt(e.target.value))}
                    className="w-full h-3 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer accent-indigo-400"
                  />
                </div>

                <div className="mb-8">
                  <label className="flex justify-between text-lg font-bold mb-2">
                    <span>{t.cols[lang] || t.cols["en"]}</span>
                    <span className="text-indigo-300">{cols}</span>
                  </label>
                  <input
                    type="range"
                    min="1"
                    max="10"
                    value={cols}
                    onChange={(e) => setCols(parseInt(e.target.value))}
                    className="w-full h-3 bg-indigo-900/50 rounded-lg appearance-none cursor-pointer accent-indigo-400"
                  />
                </div>

                <div className="mb-8">
                  <div className="text-lg font-bold mb-3">
                    {t.selectIcon[lang] || t.selectIcon["en"]}
                  </div>
                  <div className="flex gap-2 flex-wrap">
                    {icons.map((ic) => (
                      <button
                        key={ic}
                        onClick={() => setIcon(ic)}
                        className={`w-12 h-12 text-2xl rounded-xl transition-all ${
                          icon === ic
                            ? "bg-indigo-500 scale-110 ring-2 ring-white"
                            : "bg-indigo-900/30 hover:bg-indigo-800/50"
                        }`}
                      >
                        {ic}
                      </button>
                    ))}
                  </div>
                </div>

                <div className="bg-indigo-600 rounded-2xl p-6 text-center">
                  <div className="text-indigo-200 font-bold mb-2">
                    {t.formula[lang] || t.formula["en"]}
                  </div>
                  <div className="text-4xl font-black">
                    <span className="text-pink-300">{rows}</span> √ó{" "}
                    <span className="text-cyan-300">{cols}</span> ={" "}
                    <span className="text-yellow-300">{total}</span>
                  </div>
                </div>
              </div>

              {/* Visualization Area */}
              <div className="lg:col-span-8 bg-white rounded-3xl p-8 shadow-2xl text-slate-800 flex flex-col items-center justify-center min-h-[500px] relative overflow-hidden">
                <div className="absolute top-4 left-4 text-slate-400 font-bold text-sm">
                  {getDescText()}
                </div>

                <motion.div
                  className="grid gap-2"
                  style={{
                    gridTemplateRows: `repeat(${rows}, minmax(0, 1fr))`,
                    gridTemplateColumns: `repeat(${cols}, minmax(0, 1fr))`,
                  }}
                >
                  {[...Array(rows)].map((_, r) =>
                    [...Array(cols)].map((_, c) => (
                      <motion.div
                        key={`${r}-${c}`}
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        transition={{
                          delay: (r * cols + c) * 0.02,
                          type: "spring",
                        }}
                        className="w-12 h-12 sm:w-16 sm:h-16 flex items-center justify-center text-3xl sm:text-4xl bg-indigo-50 rounded-xl border-2 border-indigo-100 hover:border-indigo-400 cursor-pointer shadow-sm hover:shadow-md transition-all"
                        whileHover={{ scale: 1.1, rotate: 10 }}
                      >
                        {icon}
                      </motion.div>
                    ))
                  )}
                </motion.div>

                <div className="mt-8 flex flex-wrap gap-8 text-sm font-bold text-slate-400 justify-center">
                  <div className="flex items-center gap-2">
                    <div className="w-4 h-4 rounded-full bg-pink-400"></div>{" "}
                    {t.vertical[lang] || t.vertical["en"]}
                  </div>
                  <div className="flex items-center gap-2">
                    <div className="w-4 h-4 rounded-full bg-cyan-400"></div>{" "}
                    {t.horizontal[lang] || t.horizontal["en"]}
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
