<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏âÊï∏Â≠∏ÔºöË∂£Âë≥Ë±°ÂΩ¢Âúñ | Fun Pictograms</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #fde68a 0%, #f59e0b 100%);
      }
      .grid-bg {
        background-image: radial-gradient(#d1d5db 1px, transparent 1px);
        background-size: 20px 20px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Fun Pictograms",
          zh: "Ë∂£Âë≥Ë±°ÂΩ¢Âúñ",
          ja: "Ê•Ω„Åó„ÅÑÁµµ„Ç∞„É©„Éï",
          ko: "Ïû¨ÎØ∏ÏûàÎäî Í∑∏Î¶º Í∑∏ÎûòÌîÑ",
          es: "Pictogramas divertidos",
          de: "Lustige Piktogramme",
          fi: "Hauskat kuvaajat",
          fr: "Pictogrammes amusants",
          ar: "ÿßŸÑÿµŸàÿ± ÿßŸÑÿ™Ÿàÿ∂Ÿäÿ≠Ÿäÿ© ÿßŸÑŸÖŸÖÿ™ÿπÿ©",
          it: "Pittogrammi divertenti",
        },
        data: {
          en: "Survey Data",
          zh: "Ë™øÊü•Êï∏Êìö",
          ja: "Ë™øÊüª„Éá„Éº„Çø",
          ko: "ÏÑ§Î¨∏ Îç∞Ïù¥ÌÑ∞",
          es: "Datos de la encuesta",
          de: "Umfragedaten",
          fi: "Kyselytiedot",
          fr: "Donn√©es de l'enqu√™te",
          ar: "ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ÿ∑ŸÑÿßÿπ",
          it: "Dati sondaggio",
        },
        legend: {
          en: "Legend Settings",
          zh: "Âúñ‰æãË®≠ÂÆö",
          ja: "Âá°‰æãË®≠ÂÆö",
          ko: "Î≤îÎ°Ä ÏÑ§Ï†ï",
          es: "Ajustes de leyenda",
          de: "Legendeneinstellungen",
          fi: "Selitteen asetukset",
          fr: "Param√®tres de l√©gende",
          ar: "ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠",
          it: "Impostazioni legenda",
        },
        represents: {
          en: "Each icon represents",
          zh: "ÊØèÂÄãÂúñÊ°à‰ª£Ë°®",
          ja: "ÂêÑ„Ç¢„Ç§„Ç≥„É≥„ÅØ‰ª•‰∏ã„ÇíË°®„Åó„Åæ„Åô",
          ko: "Í∞Å ÏïÑÏù¥ÏΩòÏùÄ Îã§ÏùåÏùÑ ÎÇòÌÉÄÎÉÖÎãàÎã§",
          es: "Cada icono representa",
          de: "Jedes Symbol steht f√ºr",
          fi: "Jokainen kuvake edustaa",
          fr: "Chaque ic√¥ne repr√©sente",
          ar: "ŸÉŸÑ ÿ±ŸÖÿ≤ ŸäŸÖÿ´ŸÑ",
          it: "Ogni icona rappresenta",
        },
        people: {
          en: "people",
          zh: "‰∫∫",
          ja: "‰∫∫",
          ko: "Î™Ö",
          es: "personas",
          de: "Personen",
          fi: "henkil√∂√§",
          fr: "personnes",
          ar: "ÿ£ÿ¥ÿÆÿßÿµ",
          it: "persone",
        },
        surveyTitle: {
          en: "Class Activity Survey",
          zh: "ÂÖ®Áè≠ÂñúÊÑõÊ¥ªÂãïË™øÊü•",
          ja: "„ÇØ„É©„ÇπÊ¥ªÂãïË™øÊüª",
          ko: "ÌïôÍ∏â ÌôúÎèô ÏÑ§Î¨∏Ï°∞ÏÇ¨",
          es: "Encuesta de actividades de clase",
          de: "Klassenaktivit√§tsumfrage",
          fi: "Luokan toimintakysely",
          fr: "Enqu√™te sur les activit√©s de classe",
          ar: "ÿßÿ≥ÿ™ÿ∑ŸÑÿßÿπ ŸÜÿ¥ÿßÿ∑ ÿßŸÑÿµŸÅ",
          it: "Indagine sulle attivit√† di classe",
        },
        legendRep: {
          en: "Legend: 1 Icon = {n} People",
          zh: "‰ª£Ë°®Ôºö1 ÂÄãÂúñÊ°à = {n} ‰∫∫",
          ja: "Âá°‰æã: 1 „Ç¢„Ç§„Ç≥„É≥ = {n} ‰∫∫",
          ko: "Î≤îÎ°Ä: 1 ÏïÑÏù¥ÏΩò = {n} Î™Ö",
          es: "Leyenda: 1 icono = {n} personas",
          de: "Legende: 1 Symbol = {n} Personen",
          fi: "Selite: 1 kuvake = {n} henkil√∂√§",
          fr: "L√©gende : 1 ic√¥ne = {n} personnes",
          ar: "ÿßŸÑŸÖŸÅÿ™ÿßÿ≠: 1 ÿ±ŸÖÿ≤ = {n} ÿ£ÿ¥ÿÆÿßÿµ",
          it: "Legenda: 1 icona = {n} persone",
        },
        items: {
          books: {
            en: "Reading",
            zh: "ÂñúÊÑõÂúñÊõ∏",
            ja: "Ë™≠Êõ∏",
            ko: "ÎèÖÏÑú",
            es: "Lectura",
            de: "Lesen",
            fi: "Lukeminen",
            fr: "Lecture",
            ar: "ŸÇÿ±ÿßÿ°ÿ©",
            it: "Lettura",
          },
          sports: {
            en: "Sports",
            zh: "ÂñúÊÑõÈÅãÂãï",
            ja: "„Çπ„Éù„Éº„ÉÑ",
            ko: "Ïä§Ìè¨Ï∏†",
            es: "Deportes",
            de: "Sport",
            fi: "Urheilu",
            fr: "Sports",
            ar: "ÿ±Ÿäÿßÿ∂ÿ©",
            it: "Sport",
          },
          music: {
            en: "Music",
            zh: "ÂñúÊÑõÈü≥Ê®Ç",
            ja: "Èü≥Ê•Ω",
            ko: "ÏùåÏïÖ",
            es: "M√∫sica",
            de: "Musik",
            fi: "Musiikki",
            fr: "Musique",
            ar: "ŸÖŸàÿ≥ŸäŸÇŸâ",
            it: "Musica",
          },
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [scale, setScale] = useState(1);
        const [data, setData] = useState([
          {
            key: "books",
            icon: "üìö",
            count: 4,
            color: "bg-blue-100 border-blue-300",
          },
          {
            key: "sports",
            icon: "‚öΩ",
            count: 6,
            color: "bg-green-100 border-green-300",
          },
          {
            key: "music",
            icon: "üéµ",
            count: 3,
            color: "bg-pink-100 border-pink-300",
          },
        ]);

        const updateCount = (idx, delta) => {
          const newData = [...data];
          newData[idx].count = Math.max(0, newData[idx].count + delta);
          setData(newData);
        };

        const getItemName = (key) => t.items[key][lang] || t.items[key]["en"];
        const getLegendText = () =>
          (t.legendRep[lang] || t.legendRep["en"]).replace("{n}", scale);

        return (
          <div className="min-h-screen p-8 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-6xl font-black text-amber-900 mb-8 mt-8 drop-shadow-sm text-center">
              üìä {t.title[lang] || t.title["en"]}
            </h1>

            <div className="bg-white/90 backdrop-blur-md rounded-3xl p-8 shadow-2xl max-w-5xl w-full flex flex-col lg:flex-row gap-8">
              {/* Editor */}
              <div className="lg:w-1/3 space-y-4">
                <h2 className="text-2xl font-bold text-amber-800 mb-4">
                  {t.data[lang] || t.data["en"]}
                </h2>
                {data.map((item, idx) => (
                  <div
                    key={idx}
                    className="bg-white rounded-xl p-4 shadow-sm border-2 border-slate-100 flex items-center justify-between"
                  >
                    <div className="flex items-center gap-3">
                      <div className="text-3xl">{item.icon}</div>
                      <div className="font-bold text-slate-700 text-sm md:text-base">
                        {getItemName(item.key)}
                      </div>
                    </div>
                    <div className="flex items-center gap-3">
                      <button
                        onClick={() => updateCount(idx, -1)}
                        className="w-8 h-8 rounded-full bg-slate-100 hover:bg-red-100 text-slate-600 font-bold"
                      >
                        -
                      </button>
                      <span className="text-xl font-black w-6 text-center">
                        {item.count}
                      </span>
                      <button
                        onClick={() => updateCount(idx, 1)}
                        className="w-8 h-8 rounded-full bg-slate-100 hover:bg-green-100 text-slate-600 font-bold"
                      >
                        +
                      </button>
                    </div>
                  </div>
                ))}

                <div className="mt-8 p-4 bg-amber-50 rounded-xl border-2 border-amber-200">
                  <label className="block text-lg font-bold text-amber-800 mb-2">
                    {t.legend[lang] || t.legend["en"]}
                  </label>
                  <div className="flex items-center gap-4">
                    <div className="text-4xl">‚≠ê</div>
                    <div>
                      <div className="font-bold text-slate-700">
                        {t.represents[lang] || t.represents["en"]}
                      </div>
                      <div className="flex gap-2 mt-1 flex-wrap">
                        {[1, 2, 5, 10].map((v) => (
                          <button
                            key={v}
                            onClick={() => setScale(v)}
                            className={`px-3 py-1 rounded-lg font-bold ${
                              scale === v
                                ? "bg-amber-500 text-white"
                                : "bg-white text-amber-700"
                            }`}
                          >
                            {v}
                          </button>
                        ))}
                        <span className="self-center font-bold text-slate-600">
                          {t.people[lang] || t.people["en"]}
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Graph Display */}
              <div className="lg:w-2/3 bg-white rounded-3xl border-4 border-slate-200 p-8 relative grid-bg">
                <h2 className="text-2xl md:text-3xl font-black text-center text-slate-700 mb-8 border-b-2 border-slate-100 pb-4">
                  {t.surveyTitle[lang] || t.surveyTitle["en"]}
                </h2>

                <div className="space-y-8">
                  {data.map((item, idx) => {
                    const numIcons = item.count / scale;
                    return (
                      <div key={idx} className="flex items-center">
                        <div className="w-24 md:w-32 font-bold text-right pr-4 text-lg md:text-xl text-slate-600 truncate">
                          {getItemName(item.key)}
                        </div>
                        <div className="flex-1 min-h-[60px] flex items-center flex-wrap gap-2 p-2 rounded-xl bg-slate-50">
                          <div className="flex flex-wrap gap-1">
                            {[...Array(Math.floor(numIcons))].map((_, i) => (
                              <motion.div
                                key={`full-${i}`}
                                initial={{ scale: 0 }}
                                animate={{ scale: 1 }}
                                className="text-3xl md:text-4xl drop-shadow-md"
                              >
                                {item.icon}
                              </motion.div>
                            ))}
                            {/* Partial Icon Visualization (Clip) */}
                            {numIcons % 1 !== 0 && (
                              <motion.div
                                initial={{ scale: 0 }}
                                animate={{ scale: 1 }}
                                className="text-3xl md:text-4xl drop-shadow-md relative overflow-hidden"
                                style={{ width: `${(numIcons % 1) * 36}px` }}
                              >
                                <div className="w-[36px]">{item.icon}</div>
                              </motion.div>
                            )}
                          </div>
                        </div>
                        <div className="w-12 md:w-16 font-black text-slate-400 pl-4">
                          {item.count}
                        </div>
                      </div>
                    );
                  })}
                </div>

                <div className="absolute bottom-4 right-4 text-slate-400 font-bold bg-white/80 px-4 py-2 rounded-lg backdrop-blur-sm border border-slate-200">
                  {getLegendText()}
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
