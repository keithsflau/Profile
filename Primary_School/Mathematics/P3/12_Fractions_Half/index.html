<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∏âÊï∏Â≠∏ÔºöÂàÜÊï∏Ë™çË≠ò | Fraction Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Fraction Learning",
          zh: "ÂàÜÊï∏Ë™çË≠ò",
          ja: "ÂàÜÊï∞Â≠¶Áøí",
          ko: "Î∂ÑÏàò ÌïôÏäµ",
          es: "Aprendizaje de fracciones",
          de: "Bruchrechnen lernen",
          fi: "Murtolukujen oppiminen",
          fr: "Apprentissage des fractions",
          ar: "ÿ™ÿπŸÑŸÖ ÿßŸÑŸÉÿ≥Ÿàÿ±",
          it: "Apprendimento delle frazioni",
        },
        tipTitle: {
          en: "Explanation",
          zh: "Ë™™Êòé",
          ja: "Ë™¨Êòé",
          ko: "ÏÑ§Î™Ö",
          es: "Explicaci√≥n",
          de: "Erkl√§rung",
          fi: "Selitys",
          fr: "Explication",
          ar: "ÿ¥ÿ±ÿ≠",
          it: "Spiegazione",
        },
        // Templates for explanation with placeholders {parts} and {filled}
        explanation: {
          en: "Divide into {parts} equal parts, fill {filled} part(s), it is {name}",
          zh: "ÊääÊï¥È´îÂàÜÊàê{parts}Á≠â‰ªΩÔºåÂ°´Êªø‰∫Ü{filled}‰ªΩÔºåÂ∞±ÊòØ{name}",
          ja: "{parts}Á≠âÂàÜ„Åó„ÄÅ{filled}ÂàÜ„ÇíÂüã„ÇÅ„Çã„Å®„ÄÅ{name}„Åß„Åô",
          ko: "Ï†ÑÏ≤¥Î•º {parts}Îì±Î∂ÑÌïòÏó¨ {filled}ÎßåÌÅº Ï±ÑÏö∞Î©¥ {name}ÏûÖÎãàÎã§",
          es: "Dividir en {parts} partes iguales, llenar {filled} parte(s), es {name}",
          de: "In {parts} gleiche Teile teilen, {filled} Teil(e) f√ºllen, es ist {name}",
          fi: "Jaa {parts} yht√§ suureen osaan, t√§yt√§ {filled} osa(a), se on {name}",
          fr: "Diviser en {parts} parties √©gales, remplir {filled} partie(s), c'est {name}",
          ar: "ŸÇÿ≥ŸÖ ÿ•ŸÑŸâ {parts} ÿ£ÿ¨ÿ≤ÿßÿ° ŸÖÿ™ÿ≥ÿßŸàŸäÿ©ÿå ÿßŸÖŸÑÿ£ {filled} ÿ¨ÿ≤ÿ° (ÿ£ÿ¨ÿ≤ÿßÿ°)ÿå ŸáŸà {name}",
          it: "Dividi in {parts} parti uguali, riempi {filled} parte/i, √® {name}",
        },
        fracNames: {
          "1/2": {
            en: "one half",
            zh: "‰∫åÂàÜ‰πã‰∏Ä",
            ja: "2ÂàÜ„ÅÆ1",
            ko: "2Î∂ÑÏùò 1",
            es: "un medio",
            de: "ein Halb",
            fi: "puoli",
            fr: "un demi",
            ar: "ŸÜÿµŸÅ",
            it: "un mezzo",
          },
          "1/4": {
            en: "one quarter",
            zh: "ÂõõÂàÜ‰πã‰∏Ä",
            ja: "4ÂàÜ„ÅÆ1",
            ko: "4Î∂ÑÏùò 1",
            es: "un cuarto",
            de: "ein Viertel",
            fi: "nelj√§sosa",
            fr: "un quart",
            ar: "ÿ±ÿ®ÿπ",
            it: "un quarto",
          },
          "3/4": {
            en: "three quarters",
            zh: "ÂõõÂàÜ‰πã‰∏â",
            ja: "4ÂàÜ„ÅÆ3",
            ko: "4Î∂ÑÏùò 3",
            es: "tres cuartos",
            de: "drei Viertel",
            fi: "kolme nelj√§sosaa",
            fr: "trois quarts",
            ar: "ÿ´ŸÑÿßÿ´ÿ© ÿ£ÿ±ÿ®ÿßÿπ",
            it: "tre quarti",
          },
          "1/3": {
            en: "one third",
            zh: "‰∏âÂàÜ‰πã‰∏Ä",
            ja: "3ÂàÜ„ÅÆ1",
            ko: "3Î∂ÑÏùò 1",
            es: "un tercio",
            de: "ein Drittel",
            fi: "kolmasosa",
            fr: "un tiers",
            ar: "ÿ´ŸÑÿ´",
            it: "un terzo",
          },
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [fraction, setFraction] = useState("1/2");
        const fractions = {
          "1/2": { parts: 2, filled: 1 },
          "1/4": { parts: 4, filled: 1 },
          "3/4": { parts: 4, filled: 3 },
          "1/3": { parts: 3, filled: 1 },
        };
        const f = fractions[fraction];

        const getFracName = (k) => t.fracNames[k][lang] || t.fracNames[k]["en"];

        const getExplanation = () => {
          let text = t.explanation[lang] || t.explanation["en"];
          text = text.replace("{parts}", f.parts);
          text = text.replace("{filled}", f.filled);
          text = text.replace("{name}", getFracName(fraction));
          return text;
        };

        return (
          <div className="min-h-screen p-8 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-6xl font-black text-pink-900 mb-8 mt-8 text-center">
              üç∞ {t.title[lang] || t.title["en"]}
            </h1>
            <div className="bg-white/90 backdrop-blur-md rounded-3xl p-8 shadow-2xl max-w-4xl w-full">
              <div className="grid grid-cols-4 gap-4 mb-8">
                {Object.entries(fractions).map(([key, val]) => (
                  <button
                    key={key}
                    onClick={() => setFraction(key)}
                    className={`py-4 rounded-2xl font-black text-xl transition-all ${
                      fraction === key
                        ? "bg-pink-600 text-white scale-105"
                        : "bg-pink-100 hover:bg-pink-200"
                    }`}
                  >
                    {key}
                  </button>
                ))}
              </div>
              <div className="text-center mb-8">
                <div className="text-8xl font-black text-pink-600 mb-4">
                  {fraction}
                </div>
                <div className="text-3xl font-bold text-pink-800">
                  {getFracName(fraction)}
                </div>
              </div>
              <svg
                width="300"
                height="300"
                viewBox="0 0 400 400"
                className="mx-auto mb-8"
                style={{ maxWidth: "100%", maxHeight: "300px" }}
              >
                <circle
                  cx="200"
                  cy="200"
                  r="150"
                  fill="#fce7f3"
                  stroke="#ec4899"
                  strokeWidth="4"
                />
                {[...Array(f.parts)].map((_, i) => {
                  const angle = (360 / f.parts) * i;
                  const nextAngle = (360 / f.parts) * (i + 1);
                  const x1 =
                    200 + 150 * Math.cos(((angle - 90) * Math.PI) / 180);
                  const y1 =
                    200 + 150 * Math.sin(((angle - 90) * Math.PI) / 180);
                  const x2 =
                    200 + 150 * Math.cos(((nextAngle - 90) * Math.PI) / 180);
                  const y2 =
                    200 + 150 * Math.sin(((nextAngle - 90) * Math.PI) / 180);
                  return (
                    <path
                      key={i}
                      d={`M200,200 L${x1},${y1} A150,150 0 0,1 ${x2},${y2} Z`}
                      fill={i < f.filled ? "#ec4899" : "#fce7f3"}
                      stroke="#ec4899"
                      strokeWidth="2"
                    />
                  );
                })}
              </svg>
              <div className="bg-pink-50 p-6 rounded-xl">
                <div className="font-bold text-pink-800 text-lg mb-2">
                  üí° {t.tipTitle[lang] || t.tipTitle["en"]}
                </div>
                <div className="text-pink-700">{getExplanation()}</div>
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
