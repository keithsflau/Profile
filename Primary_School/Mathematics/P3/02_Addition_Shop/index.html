<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°ä¸‰æ•¸å­¸ï¼šåŠ æ³•å¤§ä½œæˆ°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://unpkg.com/react@18/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background-color: #fff7ed; /* Orange tint */
        background-image: radial-gradient(#ffedd5 10%, transparent 10%);
        background-size: 30px 30px;
      }
      .glossy-panel {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.05);
      }
      .input-box {
        background: white;
        border: 2px solid #e2e8f0;
        text-align: center;
        font-weight: 900;
        color: #1e293b;
        transition: all 0.2s;
      }
      .input-box:focus {
        border-color: #f97316;
        transform: scale(1.05);
        outline: none;
        box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.1);
      }
      .carry-box {
        font-size: 0.8em;
        color: #ef4444;
        background: #fef2f2;
        border: 1px dashed #fca5a5;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;
      const { motion, AnimatePresence } = window.Motion;
      // Inline Icons
      const ShoppingCart = ({ size = 24, className = "" }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          <circle cx="8" cy="21" r="1" />
          <circle cx="19" cy="21" r="1" />
          <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12" />
        </svg>
      );
      const Calculator = ({ size = 24, className = "" }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          <rect width="16" height="20" x="4" y="2" rx="2" />
          <line x1="8" x2="16" y1="6" y2="6" />
          <line x1="16" x2="16" y1="14" y2="18" />
          <path d="M16 10h.01" />
          <path d="M12 10h.01" />
          <path d="M8 10h.01" />
          <path d="M12 14h.01" />
          <path d="M8 14h.01" />
          <path d="M12 18h.01" />
          <path d="M8 18h.01" />
        </svg>
      );
      const Check = ({ size = 24, className = "" }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          <path d="M20 6 9 17l-5-5" />
        </svg>
      );
      const X = ({ size = 24, className = "" }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          <path d="M18 6 6 18" />
          <path d="m6 6 12 12" />
        </svg>
      );
      const RefreshCw = ({ size = 24, className = "" }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" />
          <path d="M21 3v5h-5" />
          <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" />
          <path d="M8 16H3v5" />
        </svg>
      );
      const ShoppingBag = ({ size = 24, className = "" }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z" />
          <path d="M3 6h18" />
          <path d="M16 10a4 4 0 0 1-8 0" />
        </svg>
      );
      const Plus = ({ size = 24, className = "" }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className={className}
        >
          <path d="M5 12h14" />
          <path d="M12 5v14" />
        </svg>
      );

      const ITEMS = [
        { name: "éŠæˆ²æ©Ÿ", priceRange: [1500, 3500], icon: "ğŸ®" },
        { name: "å–®è»Š", priceRange: [800, 2500], icon: "ğŸš²" },
        { name: "æ›¸åŒ…", priceRange: [200, 500], icon: "ğŸ’" },
        { name: "æ³¢é‹", priceRange: [300, 900], icon: "ğŸ‘Ÿ" },
        { name: "æ‰‹éŒ¶", priceRange: [1000, 4000], icon: "âŒš" },
        { name: "çµä»–", priceRange: [1200, 3000], icon: "ğŸ¸" },
        { name: "å¹³æ¿é›»è…¦", priceRange: [2000, 5000], icon: "ğŸ“±" },
        { name: "ç©å…·æ©Ÿæ¢°äºº", priceRange: [400, 1000], icon: "ğŸ¤–" },
      ];

      function App() {
        const [item1, setItem1] = useState(null);
        const [item2, setItem2] = useState(null);
        const [step, setStep] = useState(0); // 0: Browse, 1: Calculate, 2: Result
        const [userInputs, setUserInputs] = useState(Array(5).fill("")); // 5 digits max result
        const [carries, setCarries] = useState(Array(4).fill("")); // Carry over inputs
        const [feedback, setFeedback] = useState(null);

        const generateQuestion = () => {
          const i1 = ITEMS[Math.floor(Math.random() * ITEMS.length)];
          let i2 = ITEMS[Math.floor(Math.random() * ITEMS.length)];
          while (i1 === i2)
            i2 = ITEMS[Math.floor(Math.random() * ITEMS.length)];

          const price1 =
            Math.floor(Math.random() * (i1.priceRange[1] - i1.priceRange[0])) +
            i1.priceRange[0];
          const price2 =
            Math.floor(Math.random() * (i2.priceRange[1] - i2.priceRange[0])) +
            i2.priceRange[0];

          setItem1({ ...i1, price: price1 });
          setItem2({ ...i2, price: price2 });
          setStep(0);
          setUserInputs(Array(5).fill(""));
          setCarries(Array(4).fill(""));
          setFeedback(null);
        };

        useEffect(() => {
          generateQuestion();
        }, []);

        if (!item1 || !item2) return null;

        const correctSum = item1.price + item2.price;
        const price1Str = item1.price.toString().padStart(4, "0"); // Pad for alignment logic, though visualization handles logic better
        const price2Str = item2.price.toString().padStart(4, "0");

        // Decompose for grid
        // Grid columns: 10000, 1000, 100, 10, 1 (Indices 0,1,2,3,4)
        // But inputs usually go right to left.
        // Let's use array index 4 as units, 3 as tens, etc.

        const getDigit = (num, posFromRight) => {
          const str = num.toString();
          if (posFromRight >= str.length) return null;
          return str[str.length - 1 - posFromRight];
        };

        const checkAnswer = () => {
          // Construct user number
          // Inputs are [TenK, Thou, Hun, Ten, Unit]
          let userString = userInputs.join("");
          if (parseInt(userString) === correctSum) {
            setFeedback("correct");
          } else {
            setFeedback("incorrect");
          }
        };

        const handleInput = (index, val) => {
          if (val.length > 1) val = val.slice(-1);
          const newInputs = [...userInputs];
          newInputs[index] = val;
          setUserInputs(newInputs);
        };

        const handleCarry = (index, val) => {
          if (val.length > 1) val = val.slice(-1);
          const newC = [...carries];
          newC[index] = val;
          setCarries(newC);
        };

        return (
          <div className="min-h-screen p-4 flex flex-col items-center justify-center">
            <header className="mb-8 text-center">
              <div className="inline-flex items-center gap-2 bg-white px-6 py-2 rounded-full shadow-sm mb-4">
                <ShoppingCart className="text-orange-500" size={20} />
                <span className="font-bold text-slate-600">
                  å°ä¸‰æ•¸å­¸ï¼šåŠ æ³•ç›´å¼
                </span>
              </div>
              <h1 className="text-4xl font-black text-slate-800 tracking-tight">
                è¶…ç´šå¸‚å ´å¤§æœè³¼
              </h1>
            </header>

            <div className="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8">
              {/* Shopping Cart Side */}
              <div className="flex flex-col gap-4">
                <div className="glossy-panel rounded-3xl p-6 flex items-center justify-between group cursor-default">
                  <div className="flex items-center gap-4">
                    <div className="text-5xl bg-orange-100 p-4 rounded-2xl group-hover:scale-110 transition-transform">
                      {item1.icon}
                    </div>
                    <div>
                      <div className="text-slate-500 font-bold">å•†å“ 1</div>
                      <div className="text-2xl font-black text-slate-800">
                        {item1.name}
                      </div>
                    </div>
                  </div>
                  <div className="text-3xl font-black text-orange-600 bg-white/50 px-4 py-2 rounded-xl">
                    ${item1.price}
                  </div>
                </div>

                <div className="flex justify-center text-slate-400">
                  <Plus size={32} strokeWidth={4} />
                </div>

                <div className="glossy-panel rounded-3xl p-6 flex items-center justify-between group cursor-default">
                  <div className="flex items-center gap-4">
                    <div className="text-5xl bg-blue-100 p-4 rounded-2xl group-hover:scale-110 transition-transform">
                      {item2.icon}
                    </div>
                    <div>
                      <div className="text-slate-500 font-bold">å•†å“ 2</div>
                      <div className="text-2xl font-black text-slate-800">
                        {item2.name}
                      </div>
                    </div>
                  </div>
                  <div className="text-3xl font-black text-orange-600 bg-white/50 px-4 py-2 rounded-xl">
                    ${item2.price}
                  </div>
                </div>
              </div>

              {/* Calculation Side */}
              <div className="glossy-panel rounded-3xl p-8 flex flex-col items-center">
                <div className="w-full max-w-xs">
                  <div className="grid grid-cols-5 gap-2 text-center mb-2 text-slate-400 font-bold text-sm">
                    <div>è¬</div>
                    <div>åƒ</div>
                    <div>ç™¾</div>
                    <div>å</div>
                    <div>å€‹</div>
                  </div>

                  {/* Carry Row */}
                  <div className="grid grid-cols-5 gap-2 mb-2 h-8">
                    <div></div>{" "}
                    {/* 10k carry usually not needed unless 6 digits, but here maybe */}
                    {[0, 1, 2, 3].map((i) => (
                      <input
                        key={i}
                        type="text"
                        inputMode="numeric"
                        className="carry-box w-full h-8 rounded-lg text-center font-bold"
                        maxLength="1"
                        value={carries[i]}
                        onChange={(e) => handleCarry(i, e.target.value)}
                      />
                    ))}
                  </div>

                  {/* First Number */}
                  <div className="grid grid-cols-5 gap-2 mb-2 text-2xl font-black text-slate-700 font-mono">
                    <div className="col-span-1"></div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item1.price, 3)}
                    </div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item1.price, 2)}
                    </div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item1.price, 1)}
                    </div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item1.price, 0)}
                    </div>
                  </div>

                  {/* Second Number with Plus Sign */}
                  <div className="grid grid-cols-5 gap-2 mb-4 text-2xl font-black text-slate-700 font-mono relative">
                    <div className="absolute -left-6 top-2 text-slate-400">
                      +
                    </div>
                    <div className="col-span-1"></div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item2.price, 3)}
                    </div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item2.price, 2)}
                    </div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item2.price, 1)}
                    </div>
                    <div className="flex items-center justify-center h-12 bg-white/30 rounded-lg">
                      {getDigit(item2.price, 0)}
                    </div>
                  </div>

                  <div className="border-b-4 border-slate-300 mb-4"></div>

                  {/* Answer Inputs */}
                  <div className="grid grid-cols-5 gap-2 mb-8">
                    {[0, 1, 2, 3, 4].map((idx) => (
                      <input
                        key={idx}
                        type="text"
                        inputMode="numeric"
                        maxLength="1"
                        className="input-box aspect-square rounded-xl text-2xl"
                        placeholder="?"
                        value={userInputs[idx]}
                        onChange={(e) => handleInput(idx, e.target.value)}
                      />
                    ))}
                  </div>

                  {/* Check Button */}
                  <button
                    onClick={checkAnswer}
                    className="w-full py-4 bg-orange-500 hover:bg-orange-600 text-white rounded-2xl font-bold text-xl shadow-lg hover:shadow-xl transition-all flex items-center justify-center gap-2"
                  >
                    <Check strokeWidth={3} /> æ ¸å°ç­”æ¡ˆ
                  </button>

                  {feedback === "correct" && (
                    <motion.div
                      initial={{ opacity: 0, y: 10 }}
                      animate={{ opacity: 1, y: 0 }}
                      className="mt-4 w-full bg-green-100 text-green-700 p-4 rounded-xl font-bold flex flex-col items-center gap-2"
                    >
                      <div className="flex items-center gap-2">
                        <Check /> ç­”å°äº†ï¼ç¸½æ•¸æ˜¯ ${correctSum}
                      </div>
                      <button
                        onClick={generateQuestion}
                        className="px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700"
                      >
                        ä¸‹ä¸€é¡Œ
                      </button>
                    </motion.div>
                  )}

                  {feedback === "incorrect" && (
                    <motion.div
                      initial={{ opacity: 0, y: 10 }}
                      animate={{ opacity: 1, y: 0 }}
                      className="mt-4 w-full bg-red-100 text-red-700 p-4 rounded-xl font-bold flex items-center justify-center gap-2"
                    >
                      <X /> å””...å†ç®—ç®—çœ‹ï¼
                    </motion.div>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
