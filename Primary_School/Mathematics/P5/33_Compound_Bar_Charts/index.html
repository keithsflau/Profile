<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫îÊï∏Â≠∏ÔºöË§áÂêàÊ£íÂΩ¢Âúñ | Compound Bar Charts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #fef3c7 0%, #f59e0b 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Compound Bar Charts",
          zh: "Ë§áÂêàÊ£íÂΩ¢Âúñ",
          ja: "Ë§áÂêàÊ£í„Ç∞„É©„Éï",
          ko: "Î≥µÌï© ÎßâÎåÄ Ï∞®Ìä∏",
          es: "Gr√°ficos de Barras Compuestas",
          de: "Zusammengesetzte Balkendiagramme",
          fi: "Yhdistelm√§pylv√§skaaviot",
          fr: "Graphiques √† barres composites",
          ar: "ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© ÿßŸÑÿ¥ÿ±Ÿäÿ∑Ÿäÿ© ÿßŸÑŸÖÿ±ŸÉÿ®ÿ©",
          it: "Grafici a barre composti",
        },
        boys: {
          en: "Boys",
          zh: "Áî∑Áîü",
          ja: "Áî∑Â≠ê",
          ko: "ÎÇ®ÌïôÏÉù",
          es: "Ni√±os",
          de: "Jungen",
          fi: "Pojat",
          fr: "Gar√ßons",
          ar: "ÿ£ŸàŸÑÿßÿØ",
          it: "Ragazzi",
        },
        girls: {
          en: "Girls",
          zh: "Â•≥Áîü",
          ja: "Â•≥Â≠ê",
          ko: "Ïó¨ÌïôÏÉù",
          es: "Ni√±as",
          de: "M√§dchen",
          fi: "Tyt√∂t",
          fr: "Filles",
          ar: "ÿ®ŸÜÿßÿ™",
          it: "Ragazze",
        },
        boyLabel: {
          en: "B:",
          zh: "Áî∑:",
          ja: "Áî∑:",
          ko: "ÎÇ®:",
          es: "N:",
          de: "J:",
          fi: "P:",
          fr: "G:",
          ar: "ŸàŸÑÿØ:",
          it: "M:",
        },
        girlLabel: {
          en: "G:",
          zh: "Â•≥:",
          ja: "Â•≥:",
          ko: "Ïó¨:",
          es: "Ni:",
          de: "M:",
          fi: "T:",
          fr: "F:",
          ar: "ÿ®ŸÜÿ™:",
          it: "F:",
        },
        jan: {
          en: "Jan",
          zh: "‰∏ÄÊúà",
          ja: "1Êúà",
          ko: "1Ïõî",
          es: "Ene",
          de: "Jan",
          fi: "Tammi",
          fr: "Jan",
          ar: "ŸäŸÜÿßŸäÿ±",
          it: "Gen",
        },
        feb: {
          en: "Feb",
          zh: "‰∫åÊúà",
          ja: "2Êúà",
          ko: "2Ïõî",
          es: "Feb",
          de: "Feb",
          fi: "Helmi",
          fr: "F√©v",
          ar: "ŸÅÿ®ÿ±ÿßŸäÿ±",
          it: "Feb",
        },
        mar: {
          en: "Mar",
          zh: "‰∏âÊúà",
          ja: "3Êúà",
          ko: "3Ïõî",
          es: "Mar",
          de: "M√§r",
          fi: "Maalis",
          fr: "Mar",
          ar: "ŸÖÿßÿ±ÿ≥",
          it: "Mar",
        },
        apr: {
          en: "Apr",
          zh: "ÂõõÊúà",
          ja: "4Êúà",
          ko: "4Ïõî",
          es: "Abr",
          de: "Apr",
          fi: "Huhti",
          fr: "Avr",
          ar: "ÿ£ÿ®ÿ±ŸäŸÑ",
          it: "Apr",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const getText = (key) => t[key][lang] || t[key]["en"];

        const [data, setData] = useState([
          { id: "jan", boys: 25, girls: 30 },
          { id: "feb", boys: 20, girls: 28 },
          { id: "mar", boys: 35, girls: 32 },
          { id: "apr", boys: 28, girls: 25 },
        ]);
        const maxVal = Math.max(...data.flatMap((d) => [d.boys, d.girls]));

        return (
          <div className="min-h-screen p-8 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-5xl font-black text-amber-900 mb-2 mt-8">
              üìä {getText("title")}
            </h1>

            <div className="bg-white/90 backdrop-blur rounded-3xl p-8 shadow-2xl max-w-4xl w-full mt-8">
              <div className="flex gap-4 justify-center mb-4">
                <div className="flex items-center gap-2">
                  <div className="w-6 h-6 bg-blue-500 rounded"></div>
                  <span className="font-bold">{getText("boys")}</span>
                </div>
                <div className="flex items-center gap-2">
                  <div className="w-6 h-6 bg-pink-500 rounded"></div>
                  <span className="font-bold">{getText("girls")}</span>
                </div>
              </div>

              <div className="bg-slate-50 rounded-2xl p-6 mb-6">
                <div className="flex items-end justify-around h-64 border-b-4 border-l-4 border-slate-300 relative">
                  {data.map((d, i) => (
                    <div key={i} className="flex gap-1 items-end">
                      <div
                        className="w-10 bg-blue-500 rounded-t transition-all"
                        style={{ height: `${(d.boys / maxVal) * 200}px` }}
                      >
                        <div className="text-xs text-white text-center font-bold pt-1">
                          {d.boys}
                        </div>
                      </div>
                      <div
                        className="w-10 bg-pink-500 rounded-t transition-all"
                        style={{ height: `${(d.girls / maxVal) * 200}px` }}
                      >
                        <div className="text-xs text-white text-center font-bold pt-1">
                          {d.girls}
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
                <div className="flex justify-around mt-2">
                  {data.map((d, i) => (
                    <div
                      key={i}
                      className="text-center font-bold text-slate-600"
                    >
                      {getText(d.id)}
                    </div>
                  ))}
                </div>
              </div>

              <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                {data.map((d, i) => (
                  <div
                    key={i}
                    className="bg-slate-100 rounded-xl p-3 space-y-2"
                  >
                    <div className="font-bold text-center">{getText(d.id)}</div>
                    <div className="flex items-center gap-2">
                      <span className="text-blue-600">
                        {getText("boyLabel")}
                      </span>
                      <input
                        type="number"
                        value={d.boys}
                        onChange={(e) => {
                          const n = [...data];
                          n[i].boys = parseInt(e.target.value) || 0;
                          setData(n);
                        }}
                        className="w-16 text-center border rounded p-1"
                      />
                    </div>
                    <div className="flex items-center gap-2">
                      <span className="text-pink-600">
                        {getText("girlLabel")}
                      </span>
                      <input
                        type="number"
                        value={d.girls}
                        onChange={(e) => {
                          const n = [...data];
                          n[i].girls = parseInt(e.target.value) || 0;
                          setData(n);
                        }}
                        className="w-16 text-center border rounded p-1"
                      />
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
