<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫îÊï∏Â≠∏ÔºöÂúìÂΩ¢ÂúñÂÖ•ÈñÄ | Introduction to Pie Charts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #e0e7ff 0%, #6366f1 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Introduction to Pie Charts",
          zh: "ÂúìÂΩ¢ÂúñÂÖ•ÈñÄ",
          ja: "ÂÜÜ„Ç∞„É©„ÉïÂÖ•ÈñÄ",
          ko: "ÏõêÌòï Ï∞®Ìä∏ ÏÜåÍ∞ú",
          es: "Introducci√≥n a los Gr√°ficos Circulares",
          de: "Einf√ºhrung in Kreisdiagramme",
          fi: "Johdatus ympyr√§kaavioihin",
          fr: "Introduction aux diagrammes circulaires",
          ar: "ŸÖŸÇÿØŸÖÿ© ŸÅŸä ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© ÿßŸÑÿØÿßÿ¶ÿ±Ÿäÿ©",
          it: "Introduzione ai grafici a torta",
        },
        chartTitle: {
          en: "Favorite Sports",
          zh: "ÊúÄÂñúÊ≠°ÁöÑÈÅãÂãï",
          ja: "Â•Ω„Åç„Å™„Çπ„Éù„Éº„ÉÑ",
          ko: "Ï¢ãÏïÑÌïòÎäî Ïä§Ìè¨Ï∏†",
          es: "Deportes Favoritos",
          de: "Lieblingssportarten",
          fi: "Suosikkiurheilulajit",
          fr: "Sports pr√©f√©r√©s",
          ar: "ÿßŸÑÿ±Ÿäÿßÿ∂ÿßÿ™ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©",
          it: "Sport preferiti",
        },
        football: {
          en: "Football",
          zh: "Ë∂≥ÁêÉ",
          ja: "„Çµ„ÉÉ„Ç´„Éº",
          ko: "Ï∂ïÍµ¨",
          es: "F√∫tbol",
          de: "Fu√üball",
          fi: "Jalkapallo",
          fr: "Football",
          ar: "ŸÉÿ±ÿ© ÿßŸÑŸÇÿØŸÖ",
          it: "Calcio",
        },
        basketball: {
          en: "Basketball",
          zh: "Á±ÉÁêÉ",
          ja: "„Éê„Çπ„Ç±„ÉÉ„Éà„Éú„Éº„É´",
          ko: "ÎÜçÍµ¨",
          es: "Baloncesto",
          de: "Basketball",
          fi: "Koripallo",
          fr: "Basket-ball",
          ar: "ŸÉÿ±ÿ© ÿßŸÑÿ≥ŸÑÿ©",
          it: "Pallacanestro",
        },
        swimming: {
          en: "Swimming",
          zh: "Ê∏∏Ê≥≥",
          ja: "Ê∞¥Ê≥≥",
          ko: "ÏàòÏòÅ",
          es: "Nataci√≥n",
          de: "Schwimmen",
          fi: "Uinti",
          fr: "Natation",
          ar: "ÿßŸÑÿ≥ÿ®ÿßÿ≠ÿ©",
          it: "Nuoto",
        },
        running: {
          en: "Running",
          zh: "Ë∑ëÊ≠•",
          ja: "„É©„É≥„Éã„É≥„Ç∞",
          ko: "Îã¨Î¶¨Í∏∞",
          es: "Correr",
          de: "Laufen",
          fi: "Juoksu",
          fr: "Course √† pied",
          ar: "ÿßŸÑÿ¨ÿ±Ÿä",
          it: "Corsa",
        },
        others: {
          en: "Others",
          zh: "ÂÖ∂‰ªñ",
          ja: "„Åù„ÅÆ‰ªñ",
          ko: "Í∏∞ÌÉÄ",
          es: "Otros",
          de: "Andere",
          fi: "Muut",
          fr: "Autres",
          ar: "ÿ£ÿÆÿ±Ÿâ",
          it: "Altri",
        },
        people: {
          en: "people",
          zh: "‰∫∫",
          ja: "‰∫∫",
          ko: "Î™Ö",
          es: "personas",
          de: "Personen",
          fi: "hl√∂",
          fr: "personnes",
          ar: "ÿ¥ÿÆÿµ",
          it: "persone",
        },
        tip: {
          en: "Pie charts show the proportion of each part to the whole.",
          zh: "ÂúìÂΩ¢ÂúñÈ°ØÁ§∫ÂêÑÈÉ®ÂàÜ‰ΩîÊï¥È´îÁöÑÊØî‰æã",
          ja: "ÂÜÜ„Ç∞„É©„Éï„ÅØ„ÄÅÂÖ®‰Ωì„Å´ÂØæ„Åô„ÇãÂêÑÈÉ®ÂàÜ„ÅÆÂâ≤Âêà„ÇíÁ§∫„Åó„Åæ„Åô„ÄÇ",
          ko: "ÏõêÌòï Ï∞®Ìä∏Îäî Ï†ÑÏ≤¥Ïóê ÎåÄÌïú Í∞Å Î∂ÄÎ∂ÑÏùò ÎπÑÏú®ÏùÑ Î≥¥Ïó¨Ï§çÎãàÎã§.",
          es: "Los gr√°ficos circulares muestran la proporci√≥n de cada parte con respecto al todo.",
          de: "Kreisdiagramme zeigen den Anteil jedes Teils am Ganzen.",
          fi: "Ympyr√§kaaviot osoittavat kunkin osan osuuden kokonaisuudesta.",
          fr: "Les diagrammes circulaires montrent la proportion de chaque partie par rapport √† l'ensemble.",
          ar: "ÿ™ÿ∏Ÿáÿ± ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© ÿßŸÑÿØÿßÿ¶ÿ±Ÿäÿ© ŸÜÿ≥ÿ®ÿ© ŸÉŸÑ ÿ¨ÿ≤ÿ° ÿ•ŸÑŸâ ÿßŸÑŸÉŸÑ.",
          it: "I grafici a torta mostrano la proporzione di ogni parte rispetto al tutto.",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const getText = (key) => t[key][lang] || t[key]["en"];

        const data = [
          { id: "football", value: 30, color: "#3b82f6" },
          { id: "basketball", value: 25, color: "#ef4444" },
          { id: "swimming", value: 20, color: "#22c55e" },
          { id: "running", value: 15, color: "#f59e0b" },
          { id: "others", value: 10, color: "#8b5cf6" },
        ];
        const total = data.reduce((s, d) => s + d.value, 0);
        const [selected, setSelected] = useState(null);

        // Calculate pie slices
        let cumulative = 0;
        const slices = data.map((d) => {
          const start = cumulative;
          cumulative += (d.value / total) * 360;
          return { ...d, startAngle: start, endAngle: cumulative };
        });

        const describeArc = (cx, cy, r, startAngle, endAngle) => {
          const start = polarToCartesian(cx, cy, r, endAngle);
          const end = polarToCartesian(cx, cy, r, startAngle);
          const largeArc = endAngle - startAngle <= 180 ? 0 : 1;
          return `M ${cx} ${cy} L ${start.x} ${start.y} A ${r} ${r} 0 ${largeArc} 0 ${end.x} ${end.y} Z`;
        };

        const polarToCartesian = (cx, cy, r, angle) => {
          const rad = ((angle - 90) * Math.PI) / 180;
          return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };
        };

        return (
          <div className="min-h-screen p-8 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-5xl font-black text-indigo-100 mb-2 mt-8">
              ü•ß {getText("title")}
            </h1>

            <div className="bg-white/90 backdrop-blur rounded-3xl p-8 shadow-2xl max-w-4xl w-full mt-8">
              <h3 className="text-xl font-bold text-center text-slate-700 mb-4">
                {getText("chartTitle")}
              </h3>

              <div className="flex flex-col md:flex-row gap-8 items-center">
                <svg viewBox="0 0 220 220" className="w-64 h-64">
                  {slices.map((s, i) => (
                    <path
                      key={i}
                      d={describeArc(110, 110, 100, s.startAngle, s.endAngle)}
                      fill={s.color}
                      stroke="white"
                      strokeWidth="2"
                      onClick={() => setSelected(i)}
                      className={`cursor-pointer transition-transform ${
                        selected === i ? "scale-105" : ""
                      }`}
                      style={{ transformOrigin: "110px 110px" }}
                    />
                  ))}
                </svg>
                <div className="flex-1 space-y-2">
                  {data.map((d, i) => (
                    <div
                      key={i}
                      onClick={() => setSelected(i)}
                      className={`flex items-center gap-3 p-2 rounded-lg cursor-pointer ${
                        selected === i
                          ? "bg-slate-100 ring-2 ring-indigo-400"
                          : ""
                      }`}
                    >
                      <div
                        className="w-6 h-6 rounded"
                        style={{ backgroundColor: d.color }}
                      ></div>
                      <span className="font-bold flex-1">{getText(d.id)}</span>
                      <span className="font-mono">
                        {d.value}
                        {getText("people")}
                      </span>
                      <span className="text-slate-500">
                        ({Math.round((d.value / total) * 100)}%)
                      </span>
                    </div>
                  ))}
                </div>
              </div>

              <div className="mt-6 bg-amber-50 border-2 border-amber-200 rounded-xl p-4 text-amber-800">
                <p className="font-bold">üí° {getText("tip")}</p>
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
