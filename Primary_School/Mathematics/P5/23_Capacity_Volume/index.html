<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫îÊï∏Â≠∏ÔºöÂÆπÈáèËàáÈ´îÁ©ç | Capacity and Volume</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: #0f172a;
        color: white;
        overflow-x: hidden;
      }
      .glass-panel {
        background: rgba(30, 41, 59, 0.7);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      input[type="range"] {
        -webkit-appearance: none;
        background: transparent;
        height: 6px;
        border-radius: 3px;
        background: rgba(255, 255, 255, 0.2);
        cursor: pointer;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 18px;
        width: 18px;
        border-radius: 50%;
        background: #0ea5e9;
        margin-top: -6px;
        box-shadow: 0 0 10px #0ea5e9;
        border: 2px solid white;
        transition: transform 0.1s;
      }
      input[type="range"]::-webkit-slider-thumb:hover {
        transform: scale(1.2);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector } = window.MathI18n || {
        LanguageSelector: () => null,
      };

      const t = {
        title: {
          en: "Capacity & Volume",
          zh: "ÂÆπÈáèËàáÈ´îÁ©ç",
          ja: "ÂÆπÁ©ç„Å®‰ΩìÁ©ç",
          ko: "Ïö©ÎüâÍ≥º Î∂ÄÌîº",
          es: "Capacidad y Volumen",
          de: "Kapazit√§t und Volumen",
          fi: "Kapasiteetti ja tilavuus",
          fr: "Capacit√© et volume",
          ar: "ÿßŸÑÿ≥ÿπÿ© ŸàÿßŸÑÿ≠ÿ¨ŸÖ",
          it: "Capacit√† e Volume",
        },
        length: {
          en: "Length L",
          zh: "Èï∑ L",
          ja: "Èï∑„Åï L",
          ko: "Í∏∏Ïù¥ L",
          es: "Longitud L",
          de: "L√§nge L",
          fi: "Pituus L",
          fr: "Longueur L",
          ar: "ÿßŸÑÿ∑ŸàŸÑ L",
          it: "Lunghezza L",
        },
        width: {
          en: "Width W",
          zh: "Èóä W",
          ja: "ÂπÖ W",
          ko: "ÎÑàÎπÑ W",
          es: "Ancho W",
          de: "Breite B",
          fi: "Leveys L",
          fr: "Largeur l",
          ar: "ÿßŸÑÿπÿ±ÿ∂ W",
          it: "Larghezza W",
        },
        height: {
          en: "Height H",
          zh: "È´ò H",
          ja: "È´ò„Åï H",
          ko: "ÎÜíÏù¥ H",
          es: "Altura H",
          de: "H√∂he H",
          fi: "Korkeus K",
          fr: "Hauteur H",
          ar: "ÿßŸÑÿßÿ±ÿ™ŸÅÿßÿπ H",
          it: "Altezza H",
        },
        fillLevel: {
          en: "Fill Level",
          zh: "Ë£ùÊ∞¥Èáè",
          ja: "Ê∞¥‰Ωç",
          ko: "Ï±ÑÏö¥ Ïñë",
          es: "Nivel de llenado",
          de: "F√ºllstand",
          fi: "T√§ytt√∂aste",
          fr: "Niveau de remplissage",
          ar: "ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿßŸÖÿ™ŸÑÿßÿ°",
          it: "Livello di riempimento",
        },
        containerVolume: {
          en: "Container Volume",
          zh: "ÂÆπÂô®È´îÁ©ç",
          ja: "ÂÆπÂô®„ÅÆ‰ΩìÁ©ç",
          ko: "Ïö©Í∏∞ Î∂ÄÌîº",
          es: "Volumen del Contenedor",
          de: "Beh√§ltervolumen",
          fi: "S√§ili√∂n tilavuus",
          fr: "Volume du conteneur",
          ar: "ÿ≠ÿ¨ŸÖ ÿßŸÑÿ≠ÿßŸàŸäÿ©",
          it: "Volume del contenitore",
        },
        capacity: {
          en: "Capacity",
          zh: "ÂÆπÈáè",
          ja: "ÂÆπÁ©ç",
          ko: "Ïö©Îüâ",
          es: "Capacidad",
          de: "Kapazit√§t",
          fi: "Kapasiteetti",
          fr: "Capacit√©",
          ar: "ÿßŸÑÿ≥ÿπÿ©",
          it: "Capacit√†",
        },
        currentWater: {
          en: "Current Water",
          zh: "ÁèæË£ùÊ∞¥Èáè",
          ja: "ÁèæÂú®„ÅÆÊ∞¥Èáè",
          ko: "ÌòÑÏû¨ Î¨ºÏùò Ïñë",
          es: "Agua Actual",
          de: "Aktuelle Wassermenge",
          fi: "Nykyinen vesim√§√§r√§",
          fr: "Eau actuelle",
          ar: "ÿßŸÑŸÖÿßÿ° ÿßŸÑÿ≠ÿßŸÑŸä",
          it: "Acqua attuale",
        },
        tipTitle: {
          en: "Remember: 1 cm¬≥ = 1 mL",
          zh: "Ë®ò‰Ωè: 1 cm¬≥ = 1 mL",
          ja: "Ë¶ö„Åà„Å¶„Åä„Åì„ÅÜ: 1 cm¬≥ = 1 mL",
          ko: "Í∏∞ÏñµÌïòÏÑ∏Ïöî: 1 cm¬≥ = 1 mL",
          es: "Recuerda: 1 cm¬≥ = 1 mL",
          de: "Merke: 1 cm¬≥ = 1 mL",
          fi: "Muista: 1 cm¬≥ = 1 mL",
          fr: "Rappelez-vous : 1 cm¬≥ = 1 mL",
          ar: "ÿ™ÿ∞ŸÉÿ±: 1 cm¬≥ = 1 mL",
          it: "Ricorda: 1 cm¬≥ = 1 mL",
        },
        tipText: {
          en: "Volume describes the space occupied by an object, Capacity describes how much liquid a container can hold.",
          zh: "È´îÁ©ç (Volume) ÊèèËø∞Áâ©È´î‰ΩîÁî®ÁöÑÁ©∫ÈñìÔºåÂÆπÈáè (Capacity) ÊèèËø∞ÂÆπÂô®ËÉΩË£ùÂ§öÂ∞ëÊ∂≤È´î„ÄÇ",
          ja: "‰ΩìÁ©ç„ÅØÁâ©‰Ωì„ÅåÂç†„ÇÅ„ÇãÁ©∫Èñì„ÇíË°®„Åó„ÄÅÂÆπÁ©ç„ÅØÂÆπÂô®„Å´„Å©„Çå„Åè„Çâ„ÅÑ„ÅÆÊ∂≤‰Ωì„ÅåÂÖ•„Çã„Åã„ÇíË°®„Åó„Åæ„Åô„ÄÇ",
          ko: "Î∂ÄÌîºÎäî Î¨ºÏ≤¥Í∞Ä Ï∞®ÏßÄÌïòÎäî Í≥µÍ∞ÑÏùÑ ÏùòÎØ∏ÌïòÍ≥†, Ïö©ÎüâÏùÄ Ïö©Í∏∞Í∞Ä Îã¥ÏùÑ Ïàò ÏûàÎäî Ïï°Ï≤¥Ïùò ÏñëÏùÑ ÏùòÎØ∏Ìï©ÎãàÎã§.",
          es: "El volumen describe el espacio ocupado por un objeto, la capacidad describe cu√°nto l√≠quido puede contener un recipiente.",
          de: "Volumen beschreibt den von einem Objekt eingenommenen Raum, Kapazit√§t beschreibt, wie viel Fl√ºssigkeit ein Beh√§lter fassen kann.",
          fi: "Tilavuus kuvaa esineen viem√§√§ tilaa, kapasiteetti kuvaa kuinka paljon nestett√§ s√§ili√∂√∂n mahtuu.",
          fr: "Le volume d√©crit l'espace occup√© par un objet, la capacit√© d√©crit la quantit√© de liquide qu'un conteneur peut contenir.",
          ar: "ÿßŸÑÿ≠ÿ¨ŸÖ ŸäÿµŸÅ ÿßŸÑÿ≠Ÿäÿ≤ ÿßŸÑÿ∞Ÿä Ÿäÿ¥ÿ∫ŸÑŸá ÿßŸÑÿ¨ÿ≥ŸÖÿå ÿ®ŸäŸÜŸÖÿß ÿßŸÑÿ≥ÿπÿ© ÿ™ÿµŸÅ ŸÉŸÖŸäÿ© ÿßŸÑÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™Ÿä ŸäŸÖŸÉŸÜ ÿ£ŸÜ ÿ™ÿ≠ÿ™ŸàŸäŸáÿß ÿßŸÑÿ≠ÿßŸàŸäÿ©.",
          it: "Il volume descrive lo spazio occupato da un oggetto, la capacit√† descrive quanto liquido pu√≤ contenere un contenitore.",
        },
      };

      const getText = (key, lang) => t[key]?.[lang] || t[key]?.["en"] || key;

      function App() {
        const [lang, setLang] = useState("zh");
        const [l, setL] = useState(10);
        const [w, setW] = useState(8);
        const [h, setH] = useState(6);
        const [fillPercent, setFillPercent] = useState(75);

        const totalVolume = l * w * h;
        const capacity = totalVolume; // 1 cm¬≥ = 1 mL
        const filledVolume = Math.round((totalVolume * fillPercent) / 100);

        return (
          <div className="min-h-screen flex flex-col items-center p-4 font-sans bg-slate-900 text-white">
            <div className="w-full max-w-5xl flex justify-between items-center mb-10">
              <h1 className="text-4xl font-black text-sky-400 drop-shadow-[0_0_15px_rgba(14,165,233,0.5)]">
                üíß {getText("title", lang)}
              </h1>
              <div className="flex bg-slate-800/80 p-1.5 rounded-xl border border-white/10 flex-wrap justify-end gap-1 max-w-[50%]">
                {[
                  "zh",
                  "en",
                  "ja",
                  "ko",
                  "es",
                  "de",
                  "fi",
                  "fr",
                  "ar",
                  "it",
                ].map((l) => (
                  <button
                    key={l}
                    onClick={() => setLang(l)}
                    className={`px-3 py-1.5 rounded-lg font-bold text-xs uppercase transition-all ${
                      lang === l
                        ? "bg-sky-600 text-white shadow-lg scale-105"
                        : "text-slate-400 hover:text-white hover:bg-white/5"
                    }`}
                  >
                    {l}
                  </button>
                ))}
              </div>
            </div>

            <div className="w-full max-w-5xl flex flex-col md:flex-row gap-8">
              {/* Visual */}
              <div className="flex-1 glass-panel p-8 rounded-3xl flex items-center justify-center min-h-[400px]">
                <svg
                  viewBox="0 0 300 300"
                  className="w-full h-full max-w-sm overflow-visible"
                >
                  <defs>
                    <linearGradient
                      id="waterGrad"
                      x1="0%"
                      y1="0%"
                      x2="0%"
                      y2="100%"
                    >
                      <stop offset="0%" stopColor="#38bdf8" stopOpacity="0.8" />
                      <stop
                        offset="100%"
                        stopColor="#0284c7"
                        stopOpacity="0.9"
                      />
                    </linearGradient>
                    <filter id="dropshadow">
                      <feDropShadow
                        dx="2"
                        dy="2"
                        stdDeviation="4"
                        floodOpacity="0.3"
                      />
                    </filter>
                  </defs>

                  {/* 3D Box Estimation using isometric projection logic roughly or simplistic perspective */}
                  {/* Front Face: Start 50,50. Width 200. Height 200. */}
                  {/* Let's scale based on L/H/W but keep within viewbox */}

                  {(() => {
                    const scale = 200 / Math.max(l, h, w);
                    const sw = w * scale * 0.8; // Width in SVG
                    const sh = h * scale * 0.8; // Height in SVG
                    const sl = l * scale * 0.8; // Length (Depth) in SVG - represented by skew

                    // Perspective: Front face is rectangle. Side/Top recede.
                    // Let's do simple 2D front view with depth indication?
                    // Or standard Isometric?
                    // Isometric:
                    // x axis: 30 deg
                    // y axis: -30 deg?
                    // z axis: -90 deg.

                    // Center in viewbox 150,150.
                    const iso = (x, y, z) => {
                      // x=width(L?), y=depth(W?), z=height(H?)
                      const u = 20; // unit
                      const ix = (x - y) * Math.cos(Math.PI / 6);
                      const iy = (x + y) * Math.sin(Math.PI / 6) - z;
                      return { x: 150 + ix * u, y: 200 + iy * u };
                    };

                    // But L, W, H are dynamic.
                    // Let's normalize u so it fits.
                    const maxDim = Math.max(l, w, h);
                    const u = 100 / maxDim;

                    // Center of bottom:
                    const cx = 150,
                      cy = 250;
                    const iso2 = (dx, dy, dz) => {
                      // dx (L) goes right-down
                      // dy (W) goes left-down
                      // dz (H) goes up
                      const ang = Math.PI / 6;
                      const px = (dx - dy) * Math.cos(ang);
                      const py = (dx + dy) * Math.sin(ang) - dz;
                      return { x: cx + px * u, y: cy + py * u };
                    };

                    // Points
                    // Origin is Back-Bottom-Left?
                    // Let's say origin is center bottom.
                    // Box corners: 0..L, 0..W, 0..H.
                    // Shift so center is center.

                    const pts = (h_val) => [
                      iso2(-l / 2, -w / 2, h_val), // Back Left
                      iso2(l / 2, -w / 2, h_val), // Back Right
                      iso2(l / 2, w / 2, h_val), // Front Right
                      iso2(-l / 2, w / 2, h_val), // Front Left
                    ];

                    const bottom = pts(0);
                    const top = pts(h);
                    const waterTop = pts(h * (fillPercent / 100));

                    // Draw Back lines (dashed)
                    // Draw Water
                    // Draw Front lines

                    return (
                      <g>
                        {/* Back Faces (Glass) */}
                        <path
                          d={`M${bottom[0].x},${bottom[0].y} L${bottom[1].x},${bottom[1].y} L${top[1].x},${top[1].y} L${top[0].x},${top[0].y} Z`}
                          fill="rgba(255,255,255,0.05)"
                          stroke="rgba(255,255,255,0.2)"
                          strokeDasharray="4 4"
                        />
                        <path
                          d={`M${bottom[0].x},${bottom[0].y} L${bottom[3].x},${bottom[3].y} L${top[3].x},${top[3].y} L${top[0].x},${top[0].y} Z`}
                          fill="rgba(255,255,255,0.05)"
                          stroke="rgba(255,255,255,0.2)"
                          strokeDasharray="4 4"
                        />

                        {/* Water Volume */}
                        {fillPercent > 0 && (
                          <g>
                            {/* Water Bottom (Hidden mostly) */}
                            {/* Water Side Left */}
                            <path
                              d={`M${bottom[3].x},${bottom[3].y} L${bottom[0].x},${bottom[0].y} L${waterTop[0].x},${waterTop[0].y} L${waterTop[3].x},${waterTop[3].y} Z`}
                              fill="url(#waterGrad)"
                              opacity="0.6"
                            />
                            {/* Water Side Right */}
                            <path
                              d={`M${bottom[1].x},${bottom[1].y} L${bottom[2].x},${bottom[2].y} L${waterTop[2].x},${waterTop[2].y} L${waterTop[1].x},${waterTop[1].y} Z`}
                              fill="url(#waterGrad)"
                              opacity="0.8"
                            />
                            {/* Water Front Left */}
                            <path
                              d={`M${bottom[3].x},${bottom[3].y} L${bottom[2].x},${bottom[2].y} L${waterTop[2].x},${waterTop[2].y} L${waterTop[3].x},${waterTop[3].y} Z`}
                              fill="url(#waterGrad)"
                              opacity="0.7"
                            />
                            {/* Water Top Surface */}
                            <path
                              d={`M${waterTop[0].x},${waterTop[0].y} L${waterTop[1].x},${waterTop[1].y} L${waterTop[2].x},${waterTop[2].y} L${waterTop[3].x},${waterTop[3].y} Z`}
                              fill="#7dd3fc"
                              opacity="0.9"
                            />
                          </g>
                        )}

                        {/* Container Frame (Front) */}
                        <path
                          d={`M${bottom[2].x},${bottom[2].y} L${bottom[3].x},${bottom[3].y} L${top[3].x},${top[3].y} L${top[2].x},${top[2].y} Z`}
                          fill="none"
                          stroke="white"
                          strokeWidth="2"
                        />
                        <path
                          d={`M${bottom[2].x},${bottom[2].y} L${bottom[1].x},${bottom[1].y} L${top[1].x},${top[1].y} L${top[2].x},${top[2].y} Z`}
                          fill="none"
                          stroke="white"
                          strokeWidth="2"
                        />
                        <path
                          d={`M${top[0].x},${top[0].y} L${top[1].x},${top[1].y} L${top[2].x},${top[2].y} L${top[3].x},${top[3].y} Z`}
                          fill="none"
                          stroke="white"
                          strokeWidth="2"
                        />

                        {/* Labels */}
                        <text
                          x={bottom[2].x + 10}
                          y={bottom[2].y + 10}
                          fill="white"
                          fontSize="12"
                        >
                          {l}cm
                        </text>
                        <text
                          x={bottom[3].x - 20}
                          y={bottom[3].y + 10}
                          fill="white"
                          fontSize="12"
                        >
                          {w}cm
                        </text>
                        <text
                          x={top[2].x + 5}
                          y={top[2].y + (bottom[2].y - top[2].y) / 2}
                          fill="white"
                          fontSize="12"
                        >
                          {h}cm
                        </text>
                      </g>
                    );
                  })()}
                </svg>
              </div>

              {/* Controls & Stats */}
              <div className="w-full md:w-96 flex flex-col gap-6">
                <div className="glass-panel p-6 rounded-2xl flex flex-col gap-6">
                  <ControlSlider
                    label={getText("length", lang)}
                    val={l}
                    set={setL}
                    max={20}
                    color="text-sky-300"
                  />
                  <ControlSlider
                    label={getText("width", lang)}
                    val={w}
                    set={setW}
                    max={20}
                    color="text-sky-300"
                  />
                  <ControlSlider
                    label={getText("height", lang)}
                    val={h}
                    set={setH}
                    max={20}
                    color="text-sky-300"
                  />

                  <div className="pt-4 border-t border-white/10">
                    <div className="flex justify-between text-sm font-bold text-sky-400 mb-2">
                      <span>{getText("fillLevel", lang)}</span>
                      <span>{fillPercent}%</span>
                    </div>
                    <input
                      type="range"
                      min="0"
                      max="100"
                      value={fillPercent}
                      onChange={(e) => setFillPercent(Number(e.target.value))}
                      className="w-full"
                    />
                  </div>
                </div>

                <div className="glass-panel p-6 rounded-2xl space-y-4">
                  <StatRow
                    label={getText("containerVolume", lang)}
                    val={`${totalVolume} cm¬≥`}
                    sub={`${l} √ó ${w} √ó ${h}`}
                    color="text-white"
                  />
                  <StatRow
                    label={getText("capacity", lang)}
                    val={`${(capacity / 1000).toFixed(3)} L`}
                    sub={`${capacity} mL`}
                    color="text-sky-300"
                  />
                  <StatRow
                    label={getText("currentWater", lang)}
                    val={`${Math.round(filledVolume)} mL`}
                    sub=""
                    color="text-blue-300"
                  />
                </div>

                <div className="bg-amber-500/20 border border-amber-500/30 p-4 rounded-xl text-xs text-amber-200">
                  <div className="font-bold mb-1">
                    üí° {getText("tipTitle", lang)}
                  </div>
                  {getText("tipText", lang)}
                </div>
              </div>
            </div>
          </div>
        );
      }

      const ControlSlider = ({ label, val, set, max = 20, color }) => (
        <div className="flex flex-col gap-2">
          <div className={`flex justify-between font-bold text-sm ${color}`}>
            <label>{label}</label>
            <span>{val} cm</span>
          </div>
          <input
            type="range"
            min="1"
            max={max}
            value={val}
            onChange={(e) => set(Number(e.target.value))}
            className="w-full"
          />
        </div>
      );

      const StatRow = ({ label, val, sub, color }) => (
        <div className="flex justify-between items-center">
          <div className="text-slate-400 text-xs font-bold uppercase tracking-widest text-right w-24">
            {label}
          </div>
          <div className="text-right">
            <div className={`text-2xl font-black ${color}`}>{val}</div>
            {sub && <div className="text-xs font-mono opacity-60">{sub}</div>}
          </div>
        </div>
      );

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
