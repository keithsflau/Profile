<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°äº”æ•¸å­¸ï¼šå°æ•¸å››æ¨äº”å…¥ | Decimal Rounding</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: #0f172a;
        color: white;
        overflow-x: hidden;
      }
      .glass-panel {
        background: rgba(79, 70, 229, 0.15); /* Indigo 600 alpha */
        backdrop-filter: blur(16px);
        border: 1px solid rgba(129, 140, 248, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector } = window.MathI18n || {
        LanguageSelector: () => null,
      };

      const t = {
        title: {
          en: "Decimal Rounding",
          zh: "å°æ•¸å››æ¨äº”å…¥",
          ja: "å°æ•°ã®å››æ¨äº”å…¥",
          ko: "ì†Œìˆ˜ ë°˜ì˜¬ë¦¼",
          es: "Redondeo de Decimales",
          de: "Dezimalzahlen runden",
          fi: "Desimaalien pyÃ¶ristys",
          fr: "Arrondi dÃ©cimal",
          ar: "ØªÙ‚Ø±ÙŠØ¨ Ø§Ù„ÙƒØ³ÙˆØ± Ø§Ù„Ø¹Ø´Ø±ÙŠØ©",
          it: "Arrotondamento decimale",
        },
        decimalPlaces: {
          en: "{p} d.p.",
          zh: "{p} ä½å°æ•¸",
          ja: "å°æ•°ç¬¬ {p} ä½",
          ko: "ì†Œìˆ˜ì  {p} ìë¦¬",
          es: "{p} decimales",
          de: "{p} Dezimalst.",
          fi: "{p} desimaalia",
          fr: "{p} dÃ©cimales",
          ar: "{p} Ù…Ù†Ø§Ø²Ù„ Ø¹Ø´Ø±ÙŠØ©",
          it: "{p} cifre dec.",
        },
        correctTo: {
          en: "Correct to <b>{places}</b> decimal place(s)",
          zh: "æº–ç¢ºè‡³ <b>{places}</b> ä½å°æ•¸",
          ja: "å°æ•°ç¬¬ <b>{places}</b> ä½ã¾ã§",
          ko: "ì†Œìˆ˜ì  <b>{places}</b> ìë¦¬ê¹Œì§€ ë°˜ì˜¬ë¦¼",
          es: "Correcto a <b>{places}</b> lugar(es) decimal(es)",
          de: "Auf <b>{places}</b> Dezimalstelle(n) runden",
          fi: "Tarkkuus <b>{places}</b> desimaaliin",
          fr: "Arrondir Ã  <b>{places}</b> dÃ©cimale(s)",
          ar: "ØªÙ‚Ø±ÙŠØ¨ Ø¥Ù„Ù‰ <b>{places}</b> Ù…Ù†Ø§Ø²Ù„ Ø¹Ø´Ø±ÙŠØ©",
          it: "Arrotonda a <b>{places}</b> cifre decimali",
        },
        checkDigit: {
          en: "Check <b>{n}</b>th decimal place =",
          zh: "çœ‹ç¬¬ <b>{n}</b> ä½å°æ•¸ =",
          ja: "å°æ•°ç¬¬ <b>{n}</b> ä½ã‚’è¦‹ã‚‹ =",
          ko: "ì†Œìˆ˜ì  <b>{n}</b> ìë¦¬ë¥¼ í™•ì¸ =",
          es: "Verificar el <b>{n}</b>Â° lugar decimal =",
          de: "PrÃ¼fe <b>{n}</b>. Dezimalstelle =",
          fi: "Tarkista <b>{n}</b>. desimaalipaikka =",
          fr: "VÃ©rifier la <b>{n}</b>e dÃ©cimale =",
          ar: "ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ù†Ø²Ù„Ø© Ø§Ù„Ø¹Ø´Ø±ÙŠØ© <b>{n}</b> =",
          it: "Controlla la <b>{n}</b>Âª cifra decimale =",
        },
        roundUp: {
          en: "â‰¥ 5, Round Up",
          zh: "â‰¥ 5ï¼Œé€²ä½",
          ja: "â‰¥ 5ã€åˆ‡ã‚Šä¸Šã’",
          ko: "â‰¥ 5, ì˜¬ë¦¼",
          es: "â‰¥ 5, Redondeo hacia arriba",
          de: "â‰¥ 5, Aufrunden",
          fi: "â‰¥ 5, PyÃ¶ristÃ¤ ylÃ¶spÃ¤in",
          fr: "â‰¥ 5, Arrondir au supÃ©rieur",
          ar: "â‰¥ 5ØŒ ØªÙ‚Ø±ÙŠØ¨ Ù„Ù„Ø£Ø¹Ù„Ù‰",
          it: "â‰¥ 5, Arrotonda per eccesso",
        },
        roundDown: {
          en: "< 5, Round Down",
          zh: "< 5ï¼Œæ¨å»",
          ja: "< 5ã€åˆ‡ã‚Šæ¨ã¦",
          ko: "< 5, ë‚´ë¦¼",
          es: "< 5, Redondeo hacia abajo",
          de: "< 5, Abrunden",
          fi: "< 5, PyÃ¶ristÃ¤ alaspÃ¤in",
          fr: "< 5, Arrondir Ã  l'infÃ©rieur",
          ar: "< 5ØŒ ØªÙ‚Ø±ÙŠØ¨ Ù„Ù„Ø£Ø³ÙÙ„",
          it: "< 5, Arrotonda per difetto",
        },
        afterRounding: {
          en: "Result",
          zh: "å››æ¨äº”å…¥å¾Œ",
          ja: "å››æ¨äº”å…¥å¾Œ",
          ko: "ë°˜ì˜¬ë¦¼ í›„",
          es: "Resultado",
          de: "Ergebnis",
          fi: "Tulos",
          fr: "RÃ©sultat",
          ar: "Ø§Ù„Ù†ØªÙŠØ¬Ø©",
          it: "Risultato",
        },
        ruleTitle: {
          en: "Rounding Rule:",
          zh: "å››æ¨äº”å…¥è¦å‰‡:",
          ja: "å››æ¨äº”å…¥ã®ãƒ«ãƒ¼ãƒ«:",
          ko: "ë°˜ì˜¬ë¦¼ ê·œì¹™:",
          es: "Regla de Redondeo:",
          de: "Rundungsregel:",
          fi: "PyÃ¶ristyssÃ¤Ã¤ntÃ¶:",
          fr: "RÃ¨gle d'arrondi :",
          ar: "Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ¨:",
          it: "Regola di arrotondamento:",
        },
        ruleText: {
          en: "Look at the next digit: 0-4 Round Down, 5-9 Round Up.",
          zh: "çœ‹ä¿ç•™ä½æ•¸çš„ä¸‹ä¸€ä½ï¼š0-4 æ¨å»ï¼Œ5-9 é€²ä½ã€‚",
          ja: "æ¬¡ã®æ•°å­—ã‚’è¦‹ã‚‹ï¼š0-4 ã¯åˆ‡ã‚Šæ¨ã¦ã€5-9 ã¯åˆ‡ã‚Šä¸Šã’ã€‚",
          ko: "ë‹¤ìŒ ìˆ«ì í™•ì¸: 0-4 ë‚´ë¦¼, 5-9 ì˜¬ë¦¼.",
          es: "Mira el siguiente dÃ­gito: 0-4 Abajo, 5-9 Arriba.",
          de: "Schaue auf die nÃ¤chste Ziffer: 0-4 Abrunden, 5-9 Aufrunden.",
          fi: "Katso seuraavaa numeroa: 0-4 alas, 5-9 ylÃ¶s.",
          fr: "Regardez le chiffre suivant : 0-4 vers le bas, 5-9 vers le haut.",
          ar: "Ø§Ù†Ø¸Ø± Ù„Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ§Ù„ÙŠ: 0-4 Ù„Ù„Ø£Ø³ÙÙ„ØŒ 5-9 Ù„Ù„Ø£Ø¹Ù„Ù‰.",
          it: "Guarda la cifra successiva: 0-4 GiÃ¹, 5-9 Su.",
        },
      };

      const getText = (key, lang) => t[key]?.[lang] || t[key]?.["en"] || key;

      function App() {
        const [lang, setLang] = useState("zh");
        const [num, setNum] = useState(3.4567);
        const [places, setPlaces] = useState(2);

        const rounded = parseFloat(num.toFixed(places));
        const digitToCheck = num.toString().split(".")[1]?.[places] || "0";
        const isRoundUp = parseInt(digitToCheck) >= 5;

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <div className="w-full max-w-4xl flex justify-between items-center mb-10">
              <h1 className="text-4xl font-black text-indigo-400 drop-shadow-[0_0_15px_rgba(129,140,248,0.5)]">
                ğŸ”¢ {getText("title", lang)}
              </h1>
              <div className="bg-slate-800/80 p-1.5 rounded-xl border border-white/10 flex flex-wrap justify-end gap-1 max-w-[50%]">
                {[
                  "zh",
                  "en",
                  "ja",
                  "ko",
                  "es",
                  "de",
                  "fi",
                  "fr",
                  "ar",
                  "it",
                ].map((l) => (
                  <button
                    key={l}
                    onClick={() => setLang(l)}
                    className={`px-3 py-1.5 rounded-lg font-bold text-xs uppercase transition-all ${
                      lang === l
                        ? "bg-indigo-600 text-white shadow-lg scale-105"
                        : "text-slate-400 hover:text-white hover:bg-white/5"
                    }`}
                  >
                    {l}
                  </button>
                ))}
              </div>
            </div>

            <div className="w-full max-w-3xl flex flex-col gap-6">
              {/* Input Section */}
              <div className="glass-panel p-8 rounded-3xl flex flex-col  items-center justify-center gap-6 border-indigo-500/30">
                <div className="flex flex-col items-center w-full gap-4">
                  <input
                    type="number"
                    step="0.0001"
                    value={num}
                    onChange={(e) => setNum(parseFloat(e.target.value) || 0)}
                    className="bg-slate-900/50 border-b-2 border-indigo-400 text-4xl font-mono font-black text-center w-64 p-3 outline-none focus:border-indigo-300 text-white"
                  />

                  <div className="flex gap-2">
                    {[0, 1, 2, 3].map((p) => (
                      <button
                        key={p}
                        onClick={() => setPlaces(p)}
                        className={`px-4 py-2 rounded-xl font-bold transition-all ${
                          places === p
                            ? "bg-indigo-500 text-white shadow-lg shadow-indigo-500/50"
                            : "bg-slate-800/50 text-indigo-200 hover:bg-slate-700"
                        }`}
                      >
                        {getText("decimalPlaces", lang).replace("{p}", p)}
                      </button>
                    ))}
                  </div>
                </div>
              </div>

              {/* Analysis */}
              <div className="glass-panel p-6 rounded-2xl flex flex-col gap-4 text-center">
                <p
                  className="text-xl text-indigo-100"
                  dangerouslySetInnerHTML={{
                    __html: getText("correctTo", lang).replace(
                      "{places}",
                      `<span class="text-indigo-300 font-bold text-2xl mx-1">${places}</span>`
                    ),
                  }}
                />

                <div className="flex flex-col md:flex-row items-center justify-center gap-4 bg-black/20 p-4 rounded-xl">
                  <span
                    className="text-slate-300"
                    dangerouslySetInnerHTML={{
                      __html: getText("checkDigit", lang).replace(
                        "{n}",
                        places + 1
                      ),
                    }}
                  />
                  <motion.div
                    key={digitToCheck}
                    initial={{ scale: 0.5 }}
                    animate={{ scale: 1 }}
                    className={`w-12 h-12 flex items-center justify-center rounded-full text-2xl font-black border-2
                                ${
                                  isRoundUp
                                    ? "bg-red-500/20 border-red-500 text-red-400"
                                    : "bg-blue-500/20 border-blue-500 text-blue-400"
                                }
                            `}
                  >
                    {digitToCheck}
                  </motion.div>
                  <span
                    className={`font-bold ${
                      isRoundUp ? "text-red-400" : "text-blue-400"
                    }`}
                  >
                    âœ{" "}
                    {isRoundUp
                      ? getText("roundUp", lang)
                      : getText("roundDown", lang)}
                  </span>
                </div>
              </div>

              {/* Result */}
              <motion.div
                key={rounded}
                initial={{ scale: 0.9, opacity: 0 }}
                animate={{ scale: 1, opacity: 1 }}
                className="bg-gradient-to-r from-indigo-900/40 to-blue-900/40 border border-indigo-500/30 p-8 rounded-3xl text-center flex flex-col items-center"
              >
                <div className="text-indigo-300 font-bold uppercase tracking-widest text-sm mb-2">
                  {getText("afterRounding", lang)}
                </div>
                <div className="text-6xl font-black text-white font-mono drop-shadow-[0_0_20px_rgba(79,70,229,0.6)]">
                  {rounded}
                </div>
              </motion.div>

              {/* Tip */}
              <div className="bg-amber-500/10 border border-amber-500/20 p-4 rounded-xl flex gap-3 text-amber-200 text-sm justify-center items-center">
                <span className="text-2xl">ğŸ’¡</span>
                <div>
                  <span className="font-bold mr-2 uppercase">
                    {getText("ruleTitle", lang)}
                  </span>
                  {getText("ruleText", lang)}
                </div>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
