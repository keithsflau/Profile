<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫îÊï∏Â≠∏ÔºöÊï∏ÁêÜÊåëÊà∞ | P5 Math Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #111827 0%, #6366f1 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "P5 Math Challenge",
          zh: "P5 Êï∏ÁêÜÊåëÊà∞",
          ja: "P5 Êï∞Â≠¶„ÉÅ„É£„É¨„É≥„Ç∏",
          ko: "P5 ÏàòÌïô Ï±åÎ¶∞ÏßÄ",
          es: "Desaf√≠o de Matem√°ticas P5",
          de: "P5 Mathe-Herausforderung",
          fi: "P5 Matematiikkahaaste",
          fr: "D√©fi math√©matique P5",
          ar: "ÿ™ÿ≠ÿØŸä ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿßÿ™ P5",
          it: "Sfida di matematica P5",
        },
        start: {
          en: "Start Challenge",
          zh: "ÈñãÂßãÊåëÊà∞",
          ja: "„ÉÅ„É£„É¨„É≥„Ç∏ÈñãÂßã",
          ko: "Ï±åÎ¶∞ÏßÄ ÏãúÏûë",
          es: "Iniciar Desaf√≠o",
          de: "Herausforderung starten",
          fi: "Aloita haaste",
          fr: "Commencer le d√©fi",
          ar: "ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿ≠ÿØŸä",
          it: "Inizia sfida",
        },
        question: {
          en: "Question",
          zh: "ÂïèÈ°å",
          ja: "Ë≥™Âïè",
          ko: "ÏßàÎ¨∏",
          es: "Pregunta",
          de: "Frage",
          fi: "Kysymys",
          fr: "Question",
          ar: "ÿ≥ÿ§ÿßŸÑ",
          it: "Domanda",
        },
        score: {
          en: "Pts",
          zh: "ÂàÜ",
          ja: "ÁÇπ",
          ko: "Ï†ê",
          es: "Ptos",
          de: "Pkt",
          fi: "Pist",
          fr: "Pts",
          ar: "ŸÜŸÇÿßÿ∑",
          it: "Punti",
        },
        completed: {
          en: "Challenge Completed!",
          zh: "ÊåëÊà∞ÂÆåÊàêÔºÅ",
          ja: "„ÉÅ„É£„É¨„É≥„Ç∏ÂÆå‰∫ÜÔºÅ",
          ko: "Ï±åÎ¶∞ÏßÄ ÏôÑÎ£å!",
          es: "¬°Desaf√≠o Completado!",
          de: "Herausforderung abgeschlossen!",
          fi: "Haaste suoritettu!",
          fr: "D√©fi termin√© !",
          ar: "ÿßŸÉÿ™ŸÖŸÑ ÿßŸÑÿ™ÿ≠ÿØŸä!",
          it: "Sfida completata!",
        },
        back: {
          en: "Back to Menu",
          zh: "Âõû‰∏ªÈÅ∏ÂñÆ",
          ja: "„É°„Éã„É•„Éº„Å´Êàª„Çã",
          ko: "Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞",
          es: "Volver al Men√∫",
          de: "Zur√ºck zum Men√º",
          fi: "Takaisin valikkoon",
          fr: "Retour au menu",
          ar: "ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ©",
          it: "Torna al menu",
        },
        q1: {
          en: "3/4 + 1/2 = ?",
          zh: "3/4 + 1/2 = ?",
          ja: "3/4 + 1/2 = ?",
          ko: "3/4 + 1/2 = ?",
        },
        q2: {
          en: "Formula for area of triangle?",
          zh: "‰∏âËßíÂΩ¢Èù¢Á©çÂÖ¨ÂºèÊòØÔºü",
          ja: "‰∏âËßíÂΩ¢„ÅÆÈù¢Á©ç„ÅÆÂÖ¨Âºè„ÅØÔºü",
          ko: "ÏÇºÍ∞ÅÌòïÏùò ÎÑìÏù¥ Í≥µÏãùÏùÄ?",
        },
        q2_opt1: {
          en: "Base √ó Height",
          zh: "Â∫ï√óÈ´ò",
          ja: "Â∫ïËæ∫√óÈ´ò„Åï",
          ko: "Î∞ëÎ≥Ä√óÎÜíÏù¥",
        },
        q2_opt2: {
          en: "Base √ó Height √∑ 2",
          zh: "Â∫ï√óÈ´ò√∑2",
          ja: "Â∫ïËæ∫√óÈ´ò„Åï√∑2",
          ko: "Î∞ëÎ≥Ä√óÎÜíÏù¥√∑2",
        },
        q2_opt3: {
          en: "Base + Height",
          zh: "Â∫ï+È´ò",
          ja: "Â∫ïËæ∫+È´ò„Åï",
          ko: "Î∞ëÎ≥Ä+ÎÜíÏù¥",
        },
        q2_opt4: {
          en: "Base √ó Height √ó 2",
          zh: "Â∫ï√óÈ´ò√ó2",
          ja: "Â∫ïËæ∫√óÈ´ò„Åï√ó2",
          ko: "Î∞ëÎ≥Ä√óÎÜíÏù¥√ó2",
        },
        q3: {
          en: "25% equals?",
          zh: "25% Á≠âÊñºÂ§öÂ∞ëÔºü",
          ja: "25% „ÅØ„ÅÑ„Åè„Å§„Åß„Åô„ÅãÔºü",
          ko: "25%Îäî ÏñºÎßàÏûÖÎãàÍπå?",
        },
        q4: {
          en: "Volume of cuboid = ?",
          zh: "Èï∑ÊñπÈ´îÈ´îÁ©ç = ?",
          ja: "Áõ¥Êñπ‰Ωì„ÅÆ‰ΩìÁ©ç = ?",
          ko: "ÏßÅÏú°Î©¥Ï≤¥Ïùò Î∂ÄÌîº = ?",
        },
        q4_opt1: { en: "L √ó W", zh: "Èï∑√óÈóä", ja: "Á∏¶√óÊ®™", ko: "Í∞ÄÎ°ú√óÏÑ∏Î°ú" },
        q4_opt2: {
          en: "L √ó W √ó H",
          zh: "Èï∑√óÈóä√óÈ´ò",
          ja: "Á∏¶√óÊ®™√óÈ´ò„Åï",
          ko: "Í∞ÄÎ°ú√óÏÑ∏Î°ú√óÎÜíÏù¥",
        },
        q4_opt3: {
          en: "L + W + H",
          zh: "Èï∑+Èóä+È´ò",
          ja: "Á∏¶+Ê®™+È´ò„Åï",
          ko: "Í∞ÄÎ°ú+ÏÑ∏Î°ú+ÎÜíÏù¥",
        },
        q4_opt4: {
          en: "2(L + W)",
          zh: "2(Èï∑+Èóä)",
          ja: "2(Á∏¶+Ê®™)",
          ko: "2(Í∞ÄÎ°ú+ÏÑ∏Î°ú)",
        },
        q7: {
          en: "Angle of North-East?",
          zh: "Êù±ÂåóÊñπÁöÑËßíÂ∫¶ÊòØÔºü",
          ja: "ÂåóÊù±„ÅÆËßíÂ∫¶„ÅØÔºü",
          ko: "Î∂ÅÎèôÏ™ΩÏùò Í∞ÅÎèÑÎäî?",
        },
        q8: {
          en: "Round 3.456 to 1 decimal place =",
          zh: "3.456 ÂõõÊç®‰∫îÂÖ•Ëá≥‰∏Ä‰ΩçÂ∞èÊï∏ =",
          ja: "3.456 „ÇíÂ∞èÊï∞Á¨¨1‰Ωç„ÅßÂõõÊç®‰∫îÂÖ• =",
          ko: "3.456ÏùÑ ÏÜåÏàò Ï≤´Ïß∏ ÏûêÎ¶¨ Î∞òÏò¨Î¶º =",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const getText = (key) => t[key][lang] || t[key]["en"];

        const [state, setState] = useState("menu");
        const [score, setScore] = useState(0);
        const [qIdx, setQIdx] = useState(0);

        const questions = [
          { q: getText("q1"), opts: ["5/4", "4/6", "1", "5/6"], ansIdx: 0 },
          {
            q: getText("q2"),
            opts: [
              getText("q2_opt1"),
              getText("q2_opt2"),
              getText("q2_opt3"),
              getText("q2_opt4"),
            ],
            ansIdx: 1,
          },
          {
            q: getText("q3"),
            opts: ["0.25", "0.025", "2.5", "25"],
            ansIdx: 0,
          },
          {
            q: getText("q4"),
            opts: [
              getText("q4_opt1"),
              getText("q4_opt2"),
              getText("q4_opt3"),
              getText("q4_opt4"),
            ],
            ansIdx: 1,
          },
          { q: "2x + 3 = 11, x = ?", opts: ["4", "5", "7", "3"], ansIdx: 0 },
          {
            q: "1.5 √ó 0.4 = ?",
            opts: ["0.6", "6", "0.06", "0.54"],
            ansIdx: 0,
          },
          {
            q: getText("q7"),
            opts: ["45¬∞", "90¬∞", "135¬∞", "180¬∞"],
            ansIdx: 0,
          },
          {
            q: getText("q8"),
            opts: ["3.4", "3.5", "3.46", "3.0"],
            ansIdx: 1,
          },
        ];

        const handleAnswer = (idx) => {
          if (idx === questions[qIdx].ansIdx) setScore((s) => s + 100);
          if (qIdx < questions.length - 1) setQIdx(qIdx + 1);
          else setState("end");
        };

        return (
          <div className="min-h-screen p-8 flex flex-col items-center justify-center text-white relative">
            <div className="absolute top-4 right-4">
              <LanguageSelector lang={lang} setLang={setLang} />
            </div>
            {state === "menu" && (
              <div className="text-center">
                <h1 className="text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-500 mb-8">
                  üèÜ {getText("title")}
                </h1>
                <button
                  onClick={() => {
                    setScore(0);
                    setQIdx(0);
                    setState("play");
                  }}
                  className="bg-gradient-to-r from-indigo-500 to-purple-500 px-12 py-6 rounded-full text-4xl font-black hover:scale-110 transition-transform shadow-2xl"
                >
                  {getText("start")}
                </button>
              </div>
            )}

            {state === "play" && (
              <div className="w-full max-w-2xl bg-white/10 backdrop-blur-xl rounded-3xl p-10 border border-white/20">
                <div className="flex justify-between items-center mb-6">
                  <span className="text-xl text-indigo-300">
                    {getText("question")} {qIdx + 1}/{questions.length}
                  </span>
                  <span className="text-3xl font-black text-yellow-400">
                    {score} {getText("score")}
                  </span>
                </div>
                <h2 className="text-4xl font-black mb-10 text-center">
                  {questions[qIdx].q}
                </h2>
                <div className="grid grid-cols-2 gap-4">
                  {questions[qIdx].opts.map((opt, i) => (
                    <motion.button
                      key={i}
                      whileHover={{ scale: 1.05 }}
                      whileTap={{ scale: 0.95 }}
                      onClick={() => handleAnswer(i)}
                      className="bg-white/20 hover:bg-white/30 p-5 rounded-2xl text-xl font-bold border-2 border-white/10"
                    >
                      {opt}
                    </motion.button>
                  ))}
                </div>
              </div>
            )}

            {state === "end" && (
              <div className="text-center bg-white/10 backdrop-blur-xl p-12 rounded-3xl border border-white/20">
                <h2 className="text-5xl font-black mb-4">
                  {getText("completed")}
                </h2>
                <div className="text-8xl font-black text-yellow-400 mb-8">
                  {score}
                </div>
                <button
                  onClick={() => setState("menu")}
                  className="bg-white text-indigo-900 px-8 py-3 rounded-full font-black text-xl hover:bg-gray-200"
                >
                  {getText("back")}
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
