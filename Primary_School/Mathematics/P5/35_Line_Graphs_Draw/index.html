<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫îÊï∏Â≠∏ÔºöÁπ™Ë£ΩÊäòÁ∑öÂúñ | Drawing Line Graphs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: #0f172a;
        color: white;
        overflow-x: hidden;
      }
      .glass-panel {
        background: rgba(190, 24, 93, 0.2); /* Pink 900/800 mix */
        backdrop-filter: blur(12px);
        border: 1px solid rgba(244, 114, 182, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector } = window.MathI18n || {
        LanguageSelector: () => null,
      };

      const t = {
        title: {
          en: "Drawing Line Graphs",
          zh: "Áπ™Ë£ΩÊäòÁ∑öÂúñ",
          ja: "Êäò„ÇåÁ∑ö„Ç∞„É©„Éï„ÇíÊèè„Åè",
          ko: "Í∫æÏùÄÏÑ† Í∑∏ÎûòÌîÑ Í∑∏Î¶¨Í∏∞",
          es: "Dibujo de Gr√°ficos Lineales",
          de: "Liniendiagramme zeichnen",
          fi: "Viivakaavioiden piirt√§minen",
          fr: "Dessiner des graphiques lin√©aires",
          ar: "ÿ±ÿ≥ŸÖ ÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸäÿ© ÿßŸÑÿÆÿ∑Ÿäÿ©",
          it: "Disegno grafici a linee",
        },
        graphTitle: {
          en: "Sales Data",
          zh: "Èä∑ÂîÆÊï∏Êìö",
          ja: "Â£≤‰∏ä„Éá„Éº„Çø",
          ko: "ÌåêÎß§ Îç∞Ïù¥ÌÑ∞",
          es: "Datos de Ventas",
          de: "Verkaufsdaten",
          fi: "Myyntitiedot",
          fr: "Donn√©es de vente",
          ar: "ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™",
          it: "Dati di vendita",
        },
        tip: {
          en: "Change values to update graph!",
          zh: "Ë™øÊï¥Êï∏ÂÄºÔºåËßÄÂØüÊäòÁ∑öÂúñÁöÑËÆäÂåñÔºÅ",
          ja: "ÂÄ§„ÇíÂ§âÊõ¥„Åó„Å¶„Ç∞„É©„Éï„ÇíÊõ¥Êñ∞ÔºÅ",
          ko: "Í∞íÏùÑ Î≥ÄÍ≤ΩÌïòÏó¨ Í∑∏ÎûòÌîÑ ÏóÖÎç∞Ïù¥Ìä∏!",
          es: "¬°Cambia valores para actualizar!",
          de: "√Ñndere Werte zum Aktualisieren!",
          fi: "Muuta arvoja p√§ivitt√§√§ksesi!",
          fr: "Changez les valeurs pour maj !",
          ar: "ÿ∫ŸäŸëÿ± ÿßŸÑŸÇŸäŸÖ ŸÑÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ±ÿ≥ŸÖ!",
          it: "Cambia i valori per aggiornare!",
        },
        mon: {
          en: "Mon",
          zh: "ÈÄ±‰∏Ä",
          ja: "Êúà",
          ko: "Ïõî",
          es: "Lun",
          de: "Mo",
          fi: "Ma",
          fr: "Lun",
          ar: "ÿ•ÿ´ŸÜŸäŸÜ",
          it: "Lun",
        },
        tue: {
          en: "Tue",
          zh: "ÈÄ±‰∫å",
          ja: "ÁÅ´",
          ko: "Ìôî",
          es: "Mar",
          de: "Di",
          fi: "Ti",
          fr: "Mar",
          ar: "ÿ´ŸÑÿßÿ´ÿßÿ°",
          it: "Mar",
        },
        wed: {
          en: "Wed",
          zh: "ÈÄ±‰∏â",
          ja: "Ê∞¥",
          ko: "Ïàò",
          es: "Mi√©",
          de: "Mi",
          fi: "Ke",
          fr: "Mer",
          ar: "ÿ£ÿ±ÿ®ÿπÿßÿ°",
          it: "Mer",
        },
        thu: {
          en: "Thu",
          zh: "ÈÄ±Âõõ",
          ja: "Êú®",
          ko: "Î™©",
          es: "Jue",
          de: "Do",
          fi: "To",
          fr: "Jeu",
          ar: "ÿÆŸÖŸäÿ≥",
          it: "Gio",
        },
        fri: {
          en: "Fri",
          zh: "ÈÄ±‰∫î",
          ja: "Èáë",
          ko: "Í∏à",
          es: "Vie",
          de: "Fr",
          fi: "Pe",
          fr: "Ven",
          ar: "ÿ¨ŸÖÿπÿ©",
          it: "Ven",
        },
      };

      const getText = (key, lang) => t[key]?.[lang] || t[key]?.["en"] || key;

      function App() {
        const [lang, setLang] = useState("zh");
        const [data, setData] = useState([
          { id: "mon", value: 20 },
          { id: "tue", value: 35 },
          { id: "wed", value: 25 },
          { id: "thu", value: 40 },
          { id: "fri", value: 30 },
        ]);
        const maxVal = 50;

        // SVG Layout
        const width = 350;
        const height = 210;
        const padding = { top: 20, bottom: 30, left: 40, right: 20 };
        const chartW = width - padding.left - padding.right;
        const chartH = height - padding.top - padding.bottom;

        const points = data.map((d, i) => ({
          x: padding.left + i * (chartW / (data.length - 1)),
          y: height - padding.bottom - (d.value / maxVal) * chartH,
          ...d,
        }));

        const pointDescription = points.map((p) => `${p.x},${p.y}`).join(" ");

        return (
          <div className="min-h-screen flex flex-col items-center p-4">
            <div className="w-full max-w-4xl flex justify-between items-center mb-10">
              <h1 className="text-4xl font-black text-pink-400 drop-shadow-[0_0_15px_rgba(236,72,153,0.5)]">
                ‚úèÔ∏è {getText("title", lang)}
              </h1>
              <div className="bg-slate-800/80 p-1.5 rounded-xl border border-white/10 flex flex-wrap justify-end gap-1 max-w-[50%]">
                {[
                  "zh",
                  "en",
                  "ja",
                  "ko",
                  "es",
                  "de",
                  "fi",
                  "fr",
                  "ar",
                  "it",
                ].map((l) => (
                  <button
                    key={l}
                    onClick={() => setLang(l)}
                    className={`px-3 py-1.5 rounded-lg font-bold text-xs uppercase transition-all ${
                      lang === l
                        ? "bg-pink-600 text-white shadow-lg scale-105"
                        : "text-slate-400 hover:text-white hover:bg-white/5"
                    }`}
                  >
                    {l}
                  </button>
                ))}
              </div>
            </div>

            <div className="w-full max-w-3xl flex flex-col gap-6">
              {/* Graph Area */}
              <div className="glass-panel p-8 rounded-3xl flex flex-col items-center">
                <h3 className="text-xl font-bold text-pink-200 mb-6 uppercase tracking-widest border-b border-pink-500/20 pb-2">
                  {getText("graphTitle", lang)}
                </h3>

                <div className="w-full max-w-lg">
                  <svg
                    viewBox={`0 0 ${width} ${height}`}
                    className="w-full h-auto overflow-visible"
                  >
                    {/* Grid & Axis Y */}
                    {[0, 10, 20, 30, 40, 50].map((v) => {
                      const y = height - padding.bottom - (v / maxVal) * chartH;
                      return (
                        <g key={v}>
                          <line
                            x1={padding.left}
                            y1={y}
                            x2={width - padding.right}
                            y2={y}
                            stroke="rgba(255,255,255,0.1)"
                            strokeWidth="1"
                          />
                          <text
                            x={padding.left - 5}
                            y={y + 3}
                            textAnchor="end"
                            className="text-[10px] fill-slate-400 font-mono"
                          >
                            {v}
                          </text>
                        </g>
                      );
                    })}

                    {/* Axis Lines */}
                    <line
                      x1={padding.left}
                      y1={padding.top}
                      x2={padding.left}
                      y2={height - padding.bottom}
                      stroke="#94a3b8"
                      strokeWidth="2"
                    />
                    <line
                      x1={padding.left}
                      y1={height - padding.bottom}
                      x2={width - padding.right}
                      y2={height - padding.bottom}
                      stroke="#94a3b8"
                      strokeWidth="2"
                    />

                    {/* Line Path */}
                    <motion.path
                      initial={false}
                      animate={{ d: `M${pointDescription}` }}
                      transition={{
                        type: "spring",
                        stiffness: 300,
                        damping: 30,
                      }}
                      fill="none"
                      stroke="#ec4899"
                      strokeWidth="3"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                    />

                    {/* Area fill */}
                    <motion.path
                      initial={false}
                      animate={{
                        d: `M${points[0].x},${
                          height - padding.bottom
                        } L${pointDescription} L${
                          points[points.length - 1].x
                        },${height - padding.bottom} Z`,
                      }}
                      fill="rgba(236, 72, 153, 0.1)"
                    />

                    {/* Points & Labels X */}
                    {points.map((p, i) => (
                      <g key={i}>
                        <motion.circle
                          cx={p.x}
                          animate={{ cy: p.y }}
                          r="5"
                          fill="#be185d"
                          stroke="white"
                          strokeWidth="2"
                        />
                        <text
                          x={p.x}
                          y={height - 10}
                          textAnchor="middle"
                          className="text-[10px] fill-slate-300 font-bold uppercase tracking-wider"
                        >
                          {getText(p.id, lang)}
                        </text>
                      </g>
                    ))}
                  </svg>
                </div>
              </div>

              {/* Input Controls */}
              <div className="grid grid-cols-5 gap-3">
                {data.map((d, i) => (
                  <div
                    key={d.id}
                    className="glass-panel p-3 rounded-xl flex flex-col items-center gap-2"
                  >
                    <label className="text-xs font-bold text-pink-300 uppercase">
                      {getText(d.id, lang)}
                    </label>
                    <input
                      type="number"
                      min="0"
                      max="50"
                      value={d.value}
                      onChange={(e) => {
                        const n = [...data];
                        let val = parseInt(e.target.value);
                        if (isNaN(val)) val = 0;
                        if (val > 50) val = 50;
                        if (val < 0) val = 0;
                        n[i].value = val;
                        setData(n);
                      }}
                      className="w-full bg-slate-900 border border-pink-500/30 rounded-lg text-center font-black text-xl text-white outline-none focus:border-pink-500"
                    />
                  </div>
                ))}
              </div>

              {/* Tip */}
              <div className="bg-amber-500/10 border border-amber-500/20 p-4 rounded-xl flex gap-3 text-amber-200 text-sm justify-center items-center">
                <span className="text-2xl">üí°</span>
                <span className="font-bold">{getText("tip", lang)}</span>
              </div>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
