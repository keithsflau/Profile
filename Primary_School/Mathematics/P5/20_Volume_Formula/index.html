<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫îÊï∏Â≠∏ÔºöÈï∑ÊñπÈ´îÈ´îÁ©çÂÖ¨Âºè | Cuboid Volume Formula</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: #0f172a;
        color: white;
        overflow-x: hidden;
      }
      .glass-panel {
        background: rgba(30, 41, 59, 0.7);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      .scene-3d {
        perspective: 1000px;
        transform-style: preserve-3d;
      }
      .cube-3d {
        transform-style: preserve-3d;
        transition: transform 0.1s ease-out, width 0.3s, height 0.3s;
      }
      .face {
        position: absolute;
        border: 1px solid rgba(255, 255, 255, 0.2);
        opacity: 0.9;
      }
      .face-front {
        transform: translateZ(var(--d-half));
        background: rgba(236, 72, 153, 0.6);
      }
      .face-back {
        transform: rotateY(180deg) translateZ(var(--d-half));
        background: rgba(236, 72, 153, 0.6);
      }
      .face-right {
        transform: rotateY(90deg) translateZ(var(--w-half));
        background: rgba(219, 39, 119, 0.6);
      }
      .face-left {
        transform: rotateY(-90deg) translateZ(var(--w-half));
        background: rgba(219, 39, 119, 0.6);
      }
      .face-top {
        transform: rotateX(90deg) translateZ(var(--h-half));
        background: rgba(244, 114, 182, 0.6);
      }
      .face-bottom {
        transform: rotateX(-90deg) translateZ(var(--h-half));
        background: rgba(244, 114, 182, 0.6);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector } = window.MathI18n || {
        LanguageSelector: () => null,
      };

      const t = {
        title: {
          en: "Volume Formula",
          zh: "È´îÁ©çÂÖ¨Âºè",
          ja: "‰ΩìÁ©ç„ÅÆÂÖ¨Âºè",
          ko: "Î∂ÄÌîº Í≥µÏãù",
          es: "F√≥rmula de Volumen",
          de: "Volumenformel",
          fi: "Tilavuuskaava",
          fr: "Formule de volume",
          ar: "ÿµŸäÿ∫ÿ© ÿßŸÑÿ≠ÿ¨ŸÖ",
          it: "Formula del Volume",
        },
        length: {
          en: "Length",
          zh: "Èï∑",
          ja: "Èï∑„Åï",
          ko: "Í∏∏Ïù¥",
          es: "Largo",
          de: "L√§nge",
          fi: "Pituus",
          fr: "Longueur",
          ar: "ÿßŸÑÿ∑ŸàŸÑ",
          it: "Lunghezza",
        },
        width: {
          en: "Width",
          zh: "Èóä",
          ja: "ÂπÖ",
          ko: "ÎÑàÎπÑ",
          es: "Ancho",
          de: "Breite",
          fi: "Leveys",
          fr: "Largeur",
          ar: "ÿßŸÑÿπÿ±ÿ∂",
          it: "Larghezza",
        },
        height: {
          en: "Height",
          zh: "È´ò",
          ja: "È´ò„Åï",
          ko: "ÎÜíÏù¥",
          es: "Altura",
          de: "H√∂he",
          fi: "Korkeus",
          fr: "Hauteur",
          ar: "ÿßŸÑÿßÿ±ÿ™ŸÅÿßÿπ",
          it: "Altezza",
        },
        formula: {
          en: "Volume = L √ó W √ó H",
          zh: "È´îÁ©ç = Èï∑ √ó Èóä √ó È´ò",
          ja: "‰ΩìÁ©ç = Èï∑„Åï √ó ÂπÖ √ó È´ò„Åï",
          ko: "Î∂ÄÌîº = Í∏∏Ïù¥ √ó ÎÑàÎπÑ √ó ÎÜíÏù¥",
          es: "Volumen = L √ó A √ó A",
          de: "Volumen = L √ó B √ó H",
          fi: "Tilavuus = P √ó L √ó K",
          fr: "Volume = L √ó l √ó h",
          ar: "ÿßŸÑÿ≠ÿ¨ŸÖ = ÿßŸÑÿ∑ŸàŸÑ √ó ÿßŸÑÿπÿ±ÿ∂ √ó ÿßŸÑÿßÿ±ÿ™ŸÅÿßÿπ",
          it: "Volume = L √ó P √ó A",
        },
      };

      const getText = (key, lang) => t[key]?.[lang] || t[key]?.["en"] || key;

      function App() {
        const [lang, setLang] = useState("zh");
        const [dim, setDim] = useState({ l: 6, w: 4, h: 5 });
        const [rot, setRot] = useState({ x: -25, y: -45 });

        const U = 30; // Unit multiplier in px

        // Handling rotation drag
        const handleMouseMove = (e) => {
          if (e.buttons === 1) {
            setRot((p) => ({ x: p.x + e.movementY, y: p.y + e.movementX }));
          }
        };

        return (
          <div
            className="min-h-screen flex flex-col items-center p-4 font-sans bg-slate-900 text-white"
            onMouseMove={handleMouseMove}
          >
            <div className="w-full max-w-5xl flex justify-between items-center mb-10 pointer-events-none">
              <h1 className="text-4xl font-black text-pink-400 drop-shadow-[0_0_15px_rgba(244,114,182,0.5)]">
                üì¶ {getText("title", lang)}
              </h1>
              <div className="flex bg-slate-800/80 p-1.5 rounded-xl border border-white/10 flex-wrap justify-end gap-1 max-w-[50%] pointer-events-auto">
                {[
                  "zh",
                  "en",
                  "ja",
                  "ko",
                  "es",
                  "de",
                  "fi",
                  "fr",
                  "ar",
                  "it",
                ].map((l) => (
                  <button
                    key={l}
                    onClick={() => setLang(l)}
                    className={`px-3 py-1.5 rounded-lg font-bold text-xs uppercase transition-all ${
                      lang === l
                        ? "bg-pink-600 text-white shadow-lg scale-105"
                        : "text-slate-400 hover:text-white hover:bg-white/5"
                    }`}
                  >
                    {l}
                  </button>
                ))}
              </div>
            </div>

            <div className="w-full max-w-6xl flex flex-col lg:flex-row gap-8 items-start">
              {/* 3D Stage */}
              <div className="flex-1 w-full glass-panel rounded-3xl overflow-hidden relative h-[500px] flex items-center justify-center border-4 border-slate-700/50 cursor-move">
                <div
                  className="absolute inset-0 opacity-20 pointer-events-none"
                  style={{
                    backgroundImage:
                      "linear-gradient(#f9a8d4 1px, transparent 1px), linear-gradient(90deg, #f9a8d4 1px, transparent 1px)",
                    backgroundSize: "40px 40px",
                  }}
                ></div>

                <div className="scene-3d w-full h-full flex items-center justify-center">
                  <div
                    className="cube-3d relative"
                    style={{
                      width: `${dim.l * U}px`,
                      height: `${dim.h * U}px`,
                      // Depth is managed via transforms
                      transform: `rotateX(${rot.x}deg) rotateY(${rot.y}deg)`,
                      "--d-half": `${(dim.w * U) / 2}px`,
                      "--w-half": `${(dim.l * U) / 2}px`, // distance from center to side face
                      "--h-half": `${(dim.h * U) / 2}px`, // distance from center to top/bottom
                    }}
                  >
                    {/* Depth is dim.w */}
                    {/* CSS Cube faces */}
                    {/* Front/Back Width = L, Height = H */}
                    <div
                      className="face face-front flex items-center justify-center text-white/50 font-bold text-2xl"
                      style={{ width: dim.l * U, height: dim.h * U }}
                    ></div>
                    <div
                      className="face face-back"
                      style={{ width: dim.l * U, height: dim.h * U }}
                    ></div>

                    {/* Right/Left Width = W, Height = H */}
                    <div
                      className="face face-right"
                      style={{ width: dim.w * U, height: dim.h * U }}
                    ></div>
                    <div
                      className="face face-left"
                      style={{ width: dim.w * U, height: dim.h * U }}
                    ></div>

                    {/* Top/Bottom Width = L, Height = W ?? No. */}
                    {/* Top face dimensions are L x W */}
                    <div
                      className="face face-top flex items-center justify-center text-white/50 font-bold"
                      style={{ width: dim.l * U, height: dim.w * U }}
                    ></div>
                    <div
                      className="face face-bottom"
                      style={{ width: dim.l * U, height: dim.w * U }}
                    ></div>

                    {/* Dimensions Lines (floating outside) */}
                    {/* We can use simple divs positioned via translate */}
                  </div>
                </div>

                <div className="absolute bottom-4 text-xs text-slate-500 uppercase font-bold tracking-widest pointer-events-none">
                  Drag to Rotate
                </div>
              </div>

              {/* Controls */}
              <div className="w-full lg:w-80 flex flex-col gap-6">
                <div className="glass-panel p-6 rounded-3xl flex flex-col gap-6">
                  <div className="flex flex-col gap-4">
                    <ControlSlider
                      label={getText("length", lang)}
                      val={dim.l}
                      set={(v) => setDim({ ...dim, l: v })}
                      color="text-pink-300"
                    />
                    <ControlSlider
                      label={getText("width", lang)}
                      val={dim.w}
                      set={(v) => setDim({ ...dim, w: v })}
                      color="text-pink-300"
                    />
                    <ControlSlider
                      label={getText("height", lang)}
                      val={dim.h}
                      set={(v) => setDim({ ...dim, h: v })}
                      color="text-pink-300"
                    />
                  </div>

                  <div className="h-px bg-white/10 my-2"></div>

                  <div className="bg-slate-950/50 p-4 rounded-xl border border-white/5 text-center">
                    <div className="text-slate-400 text-xs font-bold uppercase tracking-widest mb-2">
                      {getText("formula", lang)}
                    </div>
                    <div className="text-4xl font-black text-white">
                      {dim.l * dim.w * dim.h}
                    </div>
                    <div className="text-xs text-pink-400 mt-1 font-mono">
                      {dim.l} √ó {dim.w} √ó {dim.h}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      const ControlSlider = ({ label, val, set, color }) => (
        <div className="flex flex-col gap-2">
          <div className={`flex justify-between font-bold ${color}`}>
            <label>{label}</label>
            <span>{val}</span>
          </div>
          <input
            type="range"
            min="1"
            max="10"
            value={val}
            onChange={(e) => set(Number(e.target.value))}
            className="w-full accent-pink-500"
          />
        </div>
      );

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
