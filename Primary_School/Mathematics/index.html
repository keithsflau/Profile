<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>數學科互動學習平台 | Mathematics Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide React Icons -->
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.min.js"></script>
    <script>
      // Shim to ensure lucideReact is available
      if (
        typeof lucideReact === "undefined" &&
        typeof window.lucideReact === "undefined"
      ) {
        // If the CDN fails or name is different, we might overlap.
        // But usually 0.263.1 works.
        console.warn("lucideReact not loaded correctly");
      }
    </script>

    <script src="common/i18n.js"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background-color: #f0f9ff;
        background-image: radial-gradient(
            at 0% 0%,
            hsla(253, 16%, 7%, 1) 0,
            transparent 50%
          ),
          radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
          radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
        background-size: 100% 100%;
        background-repeat: no-repeat;
        min-height: 100vh;
      }
      .glass-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.5);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;
      // Inline Icon Components to avoid CDN issues
      const Icon = ({ size = 24, children, ...props }) => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          {...props}
        >
          {children}
        </svg>
      );

      const ArrowRight = (props) => (
        <Icon {...props}>
          <path d="M5 12h14" />
          <path d="M12 5l7 7-7 7" />
        </Icon>
      );
      const Star = (props) => (
        <Icon {...props}>
          <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
        </Icon>
      );
      const Shapes = (props) => (
        <Icon {...props}>
          <path d="M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z" />
          <rect x="3" y="14" width="7" height="7" rx="1" />
          <circle cx="17.5" cy="17.5" r="3.5" />
        </Icon>
      );
      const Blocks = (props) => (
        <Icon {...props}>
          <rect width="7" height="7" x="14" y="3" rx="1" />
          <path d="M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3" />
        </Icon>
      );
      const Calculator = (props) => (
        <Icon {...props}>
          <rect width="16" height="20" x="4" y="2" rx="2" />
          <line x1="8" x2="16" y1="6" y2="6" />
          <line x1="16" x2="16" y1="14" y2="18" />
          <path d="M16 10h.01" />
          <path d="M12 10h.01" />
          <path d="M8 10h.01" />
          <path d="M12 14h.01" />
          <path d="M8 14h.01" />
          <path d="M12 18h.01" />
          <path d="M8 18h.01" />
        </Icon>
      );
      const Compass = (props) => (
        <Icon {...props}>
          <circle cx="12" cy="12" r="10" />
          <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76" />
        </Icon>
      );
      const BarChart3 = (props) => (
        <Icon {...props}>
          <path d="M3 3v18h18" />
          <path d="M18 17V9" />
          <path d="M13 17V5" />
          <path d="M8 17v-3" />
        </Icon>
      );
      const Circle = (props) => (
        <Icon {...props}>
          <circle cx="12" cy="12" r="10" />
        </Icon>
      );
      const { LanguageSelector } = window.MathI18n;

      // Local Text Dictionary
      const t = {
        title: {
          en: "Interactive Mathematics Platform",
          zh: "數學科互動學習平台",
          ja: "インタラクティブ数学プラットフォーム",
          ko: "인터랙티브 수학 플랫폼",
          es: "Plataforma de Matemáticas Interactiva",
          de: "Interaktive Mathematik-Plattform",
          fi: "Interaktiivinen matematiikka-alusta",
          fr: "Plateforme de mathématiques interactive",
          ar: "منصة الرياضيات التفاعلية",
          it: "Piattaforma di matematica interattiva",
        },
        enter: {
          en: "Enter Course",
          zh: "進入課程",
          ja: "コースに入る",
          ko: "코스 입장",
          es: "Entrar al curso",
          de: "Kurs betreten",
          fi: "Siirry kurssille",
          fr: "Entrer dans le cours",
          ar: "دخول الدورة",
          it: "Entra nel corso",
        },
        p1: {
          code: "P1",
          text: { en: "Primary 1", zh: "小一數學" },
          desc: {
            en: "Numbers to 20, Shapes...",
            zh: "20以內的數、基本圖形...",
          },
        },
        p2: {
          code: "P2",
          text: { en: "Primary 2", zh: "小二數學" },
          desc: {
            en: "Numbers to 1000, Operations...",
            zh: "1000以內的數、四則運算...",
          },
        },
        p3: {
          code: "P3",
          text: { en: "Primary 3", zh: "小三數學" },
          desc: { en: "5-Digit Numbers, Time...", zh: "五位數、時間、長度..." },
        },
        p4: {
          code: "P4",
          text: { en: "Primary 4", zh: "小四數學" },
          desc: { en: "Adv. Operations, Area...", zh: "進階運算、面積..." },
        },
        p5: {
          code: "P5",
          text: { en: "Primary 5", zh: "小五數學" },
          desc: { en: "Primary 5", zh: "多位數、分數、面積體積..." },
        },
        p6: {
          code: "P6",
          text: { en: "Primary 6", zh: "小六數學" },
          desc: { en: "Primary 6", zh: "百分數、圓周、速度..." },
        },
        copyright: {
          en: "© 2025 Band 1A Interactive Learning Division",
          zh: "© 2025 Band 1A 互動學習部",
        },
      };

      const getTxt = (key, lang) => {
        const obj = t[key];
        if (!obj) return key;
        return obj[lang] || obj["en"] || obj["zh"];
      };

      const getLevelTxt = (lvl, lang) => {
        // Fallback logic for levels
        const obj = t[lvl];
        const title = obj.text[lang] || obj.text["en"];
        const desc = obj.desc[lang] || obj.desc["en"] || obj.desc["zh"]; // Fallback to zh if en missing for desc
        return { title, desc };
      };

      const Card = ({ level, color, icon: Icon, href, lang }) => {
        const txt = getLevelTxt(level, lang);
        return (
          <a
            href={href}
            className="glass-card rounded-3xl p-8 transform hover:scale-105 transition-all duration-300 group flex flex-col h-full"
          >
            <div
              className={`w-16 h-16 ${color} rounded-2xl flex items-center justify-center text-white mb-6 shadow-lg group-hover:rotate-12 transition-transform`}
            >
              <Icon size={32} />
            </div>
            <h2 className="text-3xl font-black text-slate-800 mb-2">
              {txt.title}
            </h2>
            <h3 className="text-lg font-bold text-slate-400 mb-4">
              {t[level].code}
            </h3>
            <div
              className={`h-1 w-12 ${color} rounded-full mb-4 group-hover:w-full transition-all`}
            ></div>
            <p className="text-slate-600 font-medium flex-grow">{txt.desc}</p>
            <div
              className={`mt-6 inline-flex items-center font-bold ${color
                .replace("bg-", "text-")
                .replace("500", "600")}`}
            >
              {getTxt("enter", lang)}
              <ArrowRight className="ml-2 w-4" />
            </div>
          </a>
        );
      };

      function App() {
        const [lang, setLang] = useState("zh"); // Default

        return (
          <div className="p-8 flex items-center justify-center min-h-screen">
            <LanguageSelector lang={lang} setLang={setLang} />

            <div className="max-w-7xl w-full">
              <header className="text-center mb-16 text-white">
                <h1 className="text-5xl md:text-7xl font-black tracking-tight mb-4 drop-shadow-lg">
                  {getTxt("title", lang)}
                </h1>
                <p className="text-xl md:text-2xl opacity-90 font-medium">
                  Interactive Mathematics Platform
                </p>
              </header>

              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-8">
                <Card
                  level="p1"
                  lang={lang}
                  href="./P1/index.html"
                  color="bg-orange-500"
                  icon={Star}
                />
                <Card
                  level="p2"
                  lang={lang}
                  href="./P2/index.html"
                  color="bg-rose-500"
                  icon={Shapes}
                />
                <Card
                  level="p3"
                  lang={lang}
                  href="./P3/index.html"
                  color="bg-blue-500"
                  icon={Blocks}
                />
                <Card
                  level="p4"
                  lang={lang}
                  href="./P4/index.html"
                  color="bg-emerald-500"
                  icon={Calculator}
                />
                <Card
                  level="p5"
                  lang={lang}
                  href="./P5/index.html"
                  color="bg-amber-500"
                  icon={Compass}
                />
                <Card
                  level="p6"
                  lang={lang}
                  href="./P6/index.html"
                  color="bg-purple-500"
                  icon={BarChart3}
                />
              </div>

              <footer className="mt-16 text-center text-white/60 font-medium">
                <p>{getTxt("copyright", lang)}</p>
              </footer>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
