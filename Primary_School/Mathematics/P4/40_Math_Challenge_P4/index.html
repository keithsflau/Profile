<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞èÂõõÊï∏Â≠∏ÔºöÊï∏Â≠∏ÁµÇÊ•µÊåëÊà∞ | Math Ultimate Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #111827 0%, #4c1d95 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion, AnimatePresence } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Ultimate Math Challenge",
          zh: "Êï∏Â≠∏ÁµÇÊ•µÊåëÊà∞",
          ja: "Á©∂Ê•µ„ÅÆÊï∞Â≠¶„ÉÅ„É£„É¨„É≥„Ç∏",
          ko: "ÏàòÌïô Í∂ÅÍ∑πÏùò ÎèÑÏ†Ñ",
          es: "Desaf√≠o Matem√°tico Supremo",
          de: "Ultimative Mathe-Herausforderung",
          fi: "Lopullinen matematiikkahaaste",
          fr: "D√©fi math√©matique ultime",
          ar: "ÿ™ÿ≠ÿØŸä ÿßŸÑÿ±Ÿäÿßÿ∂Ÿäÿßÿ™ ÿßŸÑŸÜŸáÿßÿ¶Ÿä",
          it: "Sfida matematica finale",
        },
        start: {
          en: "Start Challenge",
          zh: "ÈñãÂßãÊåëÊà∞",
          ja: "„ÉÅ„É£„É¨„É≥„Ç∏ÈñãÂßã",
          ko: "ÎèÑÏ†Ñ ÏãúÏûë",
          es: "Iniciar Desaf√≠o",
          de: "Herausforderung starten",
          fi: "Aloita haaste",
          fr: "Commencer le d√©fi",
          ar: "ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿ≠ÿØŸä",
          it: "Inizia la sfida",
        },
        question: {
          en: "Question",
          zh: "ÂïèÈ°å",
          ja: "Ë≥™Âïè",
          ko: "ÏßàÎ¨∏",
          es: "Pregunta",
          de: "Frage",
          fi: "Kysymys",
          fr: "Question",
          ar: "ÿ≥ÿ§ÿßŸÑ",
          it: "Domanda",
        },
        points: {
          en: "Points",
          zh: "ÂàÜ",
          ja: "ÁÇπ",
          ko: "Ï†ê",
          es: "Puntos",
          de: "Punkte",
          fi: "Pistett√§",
          fr: "Points",
          ar: "ŸÜŸÇÿßÿ∑",
          it: "Punti",
        },
        completed: {
          en: "Challenge Completed!",
          zh: "ÊåëÊà∞ÂÆåÊàêÔºÅ",
          ja: "„ÉÅ„É£„É¨„É≥„Ç∏ÂÆå‰∫ÜÔºÅ",
          ko: "ÎèÑÏ†Ñ ÏôÑÎ£å!",
          es: "¬°Desaf√≠o Completado!",
          de: "Herausforderung abgeschlossen!",
          fi: "Haaste suoritettu!",
          fr: "D√©fi termin√© !",
          ar: "ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸä!",
          it: "Sfida completata!",
        },
        menu: {
          en: "Back to Menu",
          zh: "Âõû‰∏ªÈÅ∏ÂñÆ",
          ja: "„É°„Éã„É•„Éº„Å´Êàª„Çã",
          ko: "Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞",
          es: "Volver al Men√∫",
          de: "Zur√ºck zum Men√º",
          fi: "Takaisin valikkoon",
          fr: "Retour au menu",
          ar: "ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑŸÇÿßÿ¶ŸÖÿ©",
          it: "Torna al menu",
        },
      };

      const questionsData = [
        {
          q: {
            en: "How many factors does 12 have?",
            zh: "12 ÁöÑÂõ†Êï∏ÊúâÂπæÂÄãÔºü",
            ja: "12„ÅÆÂõ†Êï∞„ÅØ„ÅÑ„Åè„Å§„ÅÇ„Çä„Åæ„Åô„ÅãÔºü",
            ko: "12Ïùò ÏïΩÏàòÎäî Î™á Í∞úÏûÖÎãàÍπå?",
            es: "¬øCu√°ntos factores tiene 12?",
            de: "Wie viele Faktoren hat 12?",
            fi: "Kuinka monta tekij√§√§ luvulla 12 on?",
            fr: "Combien de facteurs a 12 ?",
            ar: "ŸÉŸÖ ÿπÿØÿØ ŸÇŸàÿßÿ≥ŸÖ 12ÿü",
            it: "Quanti fattori ha 12?",
          },
          options: ["4", "5", "6", "8"],
          ans: "6",
        },
        {
          q: {
            en: "What is the L.C.M. of 15 and 20?",
            zh: "15 Âíå 20 ÁöÑÊúÄÂ∞èÂÖ¨ÂÄçÊï∏ (L.C.M.) ÊòØÔºü",
            ja: "15„Å®20„ÅÆÊúÄÂ∞èÂÖ¨ÂÄçÊï∞(L.C.M.)„ÅØÔºü",
            ko: "15ÏôÄ 20Ïùò ÏµúÏÜåÍ≥µÎ∞∞Ïàò(L.C.M.)Îäî?",
            es: "¬øCu√°l es el m.c.m. de 15 y 20?",
            de: "Was ist das KGV von 15 und 20?",
            fi: "Mik√§ on lukujen 15 ja 20 pienin yhteinen jaettava?",
            fr: "Quel est le PPCM de 15 et 20 ?",
            ar: "ŸÖÿß ŸáŸà ÿßŸÑŸÖÿ∂ÿßÿπŸÅ ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸÉ ÿßŸÑÿ£ÿµÿ∫ÿ± ŸÑŸÄ 15 Ÿà 20ÿü",
            it: "Qual √® il m.c.m. di 15 e 20?",
          },
          options: ["30", "60", "45", "100"],
          ans: "60",
        },
        {
          q: {
            en: "Square perimeter is 36cm, side length?",
            zh: "Ê≠£ÊñπÂΩ¢Âë®ÁïåÊòØ 36cmÔºåÈÇäÈï∑ÊòØÔºü",
            ja: "Ê≠£ÊñπÂΩ¢„ÅÆÂë®Âõ≤„ÅØ36cm„Åß„Åô„ÄÅËæ∫„ÅÆÈï∑„Åï„ÅØÔºü",
            ko: "Ï†ïÏÇ¨Í∞ÅÌòï ÎëòÎ†àÍ∞Ä 36cmÏùº Îïå, Ìïú Î≥ÄÏùò Í∏∏Ïù¥Îäî?",
            es: "El per√≠metro cuadrado es 36cm, ¬ølongitud del lado?",
            de: "Der quadratische Umfang betr√§gt 36cm, Seitenl√§nge?",
            fi: "Neli√∂n piiri on 36cm, sivun pituus?",
            fr: "Le p√©rim√®tre du carr√© est 36cm, longueur du c√¥t√© ?",
            ar: "ŸÖÿ≠Ÿäÿ∑ ÿßŸÑŸÖÿ±ÿ®ÿπ 36 ÿ≥ŸÖÿå ÿ∑ŸàŸÑ ÿßŸÑÿ∂ŸÑÿπÿü",
            it: "Il perimetro quadrato √® 36cm, lunghezza del lato?",
          },
          options: ["6cm", "9cm", "12cm", "4cm"],
          ans: "9cm",
        },
        {
          q: {
            en: "¬Ω + ¬º = ?",
            zh: "¬Ω + ¬º = ?",
            ja: "¬Ω + ¬º = ?",
            ko: "¬Ω + ¬º = ?",
            es: "¬Ω + ¬º = ?",
            de: "¬Ω + ¬º = ?",
            fi: "¬Ω + ¬º = ?",
            fr: "¬Ω + ¬º = ?",
            ar: "¬Ω + ¬º = ?",
            it: "¬Ω + ¬º = ?",
          },
          options: ["¬æ", "2/6", "3/8", "1"],
          ans: "¬æ",
        },
        {
          q: {
            en: "7.5 - 2.3 = ?",
            zh: "7.5 - 2.3 = ?",
            ja: "7.5 - 2.3 = ?",
            ko: "7.5 - 2.3 = ?",
            es: "7.5 - 2.3 = ?",
            de: "7.5 - 2.3 = ?",
            fi: "7.5 - 2.3 = ?",
            fr: "7.5 - 2.3 = ?",
            ar: "7.5 - 2.3 = ?",
            it: "7.5 - 2.3 = ?",
          },
          options: ["5.2", "5.8", "4.2", "9.8"],
          ans: "5.2",
        },
        {
          q: {
            en: "Which is a prime number?",
            zh: "‰∏ãÂàóÂì™ÂÄãÊòØË≥™Êï∏Ôºü",
            ja: "Á¥†Êï∞„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü",
            ko: "Îã§Ïùå Ï§ë ÏÜåÏàòÎäî?",
            es: "¬øCu√°l es un n√∫mero primo?",
            de: "Welches ist eine Primzahl?",
            fi: "Mik√§ on alkuluku?",
            fr: "Lequel est un nombre premier ?",
            ar: "ÿ£Ÿä ŸÖŸÖÿß ŸäŸÑŸä ÿπÿØÿØ ÿ£ŸàŸÑŸäÿü",
            it: "Quale √® un numero primo?",
          },
          options: ["9", "15", "17", "21"],
          ans: "17",
        },
        {
          q: {
            en: "Rectangle area 40cm¬≤, length 8cm, width?",
            zh: "Èï∑ÊñπÂΩ¢Èù¢Á©ç 40cm¬≤ÔºåÈï∑ 8cmÔºåÈóäÊòØÔºü",
            ja: "Èï∑ÊñπÂΩ¢„ÅÆÈù¢Á©ç40cm¬≤„ÄÅÈï∑„Åï8cm„ÄÅÂπÖ„ÅØÔºü",
            ko: "ÏßÅÏÇ¨Í∞ÅÌòï Î©¥Ï†Å 40cm¬≤, Í∏∏Ïù¥ 8cm, ÎÑàÎπÑÎäî?",
            es: "√Årea rect√°ngulo 40cm¬≤, largo 8cm, ¬øancho?",
            de: "Rechteckfl√§che 40cm¬≤, L√§nge 8cm, Breite?",
            fi: "Suorakulmion pinta-ala 40cm¬≤, pituus 8cm, leveys?",
            fr: "Aire du rectangle 40cm¬≤, longueur 8cm, largeur ?",
            ar: "ŸÖÿ≥ÿßÿ≠ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿ∑ŸäŸÑ 40 ÿ≥ŸÖ¬≤ÿå ÿßŸÑÿ∑ŸàŸÑ 8 ÿ≥ŸÖÿå ÿßŸÑÿπÿ±ÿ∂ÿü",
            it: "Area rettangolo 40cm¬≤, lunghezza 8cm, larghezza?",
          },
          options: ["5cm", "32cm", "4cm", "12cm"],
          ans: "5cm",
        },
        {
          q: {
            en: "MMXXIV represents?",
            zh: "MMXXIV ‰ª£Ë°®Ôºü",
            ja: "MMXXIV „ÅØ‰Ωï„ÇíË°®„Åó„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü",
            ko: "MMXXIVÎäî Î¨¥ÏóáÏùÑ ÎÇòÌÉÄÎÉÖÎãàÍπå?",
            es: "¬øMMXXIV representa?",
            de: "MMXXIV steht f√ºr?",
            fi: "MMXXIV edustaa?",
            fr: "MMXXIV repr√©sente ?",
            ar: "MMXXIV ŸäŸÖÿ´ŸÑÿü",
            it: "MMXXIV rappresenta?",
          },
          options: ["2024", "2023", "2025", "2124"],
          ans: "2024",
        },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const getText = (key) => t[key][lang] || t[key]["en"];

        const [gameState, setGameState] = useState("menu"); // menu, playing, end
        const [score, setScore] = useState(0);
        const [qIdx, setQIdx] = useState(0);

        const handleAnswer = (opt) => {
          if (opt === questionsData[qIdx].ans) {
            setScore((s) => s + 100);
          }
          if (qIdx < questionsData.length - 1) {
            setQIdx((prev) => prev + 1);
          } else {
            setGameState("end");
          }
        };

        const startGame = () => {
          setScore(0);
          setQIdx(0);
          setGameState("playing");
        };

        return (
          <div className="min-h-screen p-8 flex flex-col items-center">
            <div className="absolute top-4 right-4 z-50">
              <LanguageSelector lang={lang} setLang={setLang} />
            </div>

            {gameState === "menu" && (
              <div className="text-center mt-20">
                <h1 className="text-6xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-500 mb-8 drop-shadow-lg p-4">
                  üèÜ {getText("title")}
                </h1>
                <button
                  onClick={startGame}
                  className="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-12 py-6 rounded-full text-4xl font-black hover:scale-110 transition-transform shadow-2xl ring-4 ring-white/20"
                >
                  {getText("start")}
                </button>
              </div>
            )}

            {gameState === "playing" && (
              <div className="w-full max-w-2xl bg-white/10 backdrop-blur-xl rounded-3xl p-8 md:p-12 border border-white/20 mt-12 text-white">
                <div className="flex justify-between items-center mb-8">
                  <div className="text-2xl font-bold text-purple-300">
                    {getText("question")} {qIdx + 1}/{questionsData.length}
                  </div>
                  <div className="text-4xl font-black text-yellow-400">
                    {score} {getText("points")}
                  </div>
                </div>

                <h2 className="text-3xl md:text-4xl font-black mb-12 text-center min-h-32 flex items-center justify-center">
                  {questionsData[qIdx].q[lang] || questionsData[qIdx].q["en"]}
                </h2>

                <div className="grid grid-cols-2 gap-6">
                  {questionsData[qIdx].options.map((opt, i) => (
                    <motion.button
                      key={i}
                      whileHover={{ scale: 1.05 }}
                      whileTap={{ scale: 0.95 }}
                      onClick={() => handleAnswer(opt)}
                      className="bg-white/20 hover:bg-white/30 p-6 rounded-2xl text-2xl font-bold border-2 border-white/10 transition-colors"
                    >
                      {opt}
                    </motion.button>
                  ))}
                </div>
              </div>
            )}

            {gameState === "end" && (
              <div className="text-center bg-white/10 backdrop-blur-xl p-12 rounded-3xl border border-white/20 mt-20 text-white">
                <h2 className="text-5xl font-black mb-4">
                  {getText("completed")}
                </h2>
                <div className="text-8xl font-black text-yellow-400 mb-8">
                  {score}
                </div>
                <button
                  onClick={() => setGameState("menu")}
                  className="bg-white text-purple-900 px-8 py-3 rounded-full font-black text-xl hover:bg-gray-200"
                >
                  {getText("menu")}
                </button>
              </div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
