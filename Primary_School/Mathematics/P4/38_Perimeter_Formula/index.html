<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞èÂõõÊï∏Â≠∏ÔºöÂë®ÁïåÂÖ¨Âºè | Perimeter Formula</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #e0f2fe 0%, #0284c7 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { motion } = window.Motion;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Perimeter Formula",
          zh: "Âë®ÁïåÂÖ¨Âºè",
          ja: "Âë®Âõ≤„ÅÆÂÖ¨Âºè",
          ko: "ÎëòÎ†à Í≥µÏãù",
          es: "F√≥rmula del Per√≠metro",
          de: "Umfangsformel",
          fi: "Piirin kaava",
          fr: "Formule du p√©rim√®tre",
          ar: "ÿµŸäÿ∫ÿ© ÿßŸÑŸÖÿ≠Ÿäÿ∑",
          it: "Formula del perimetro",
        },
        length: {
          en: "Length",
          zh: "Èï∑",
          ja: "Èï∑„Åï",
          ko: "Í∏∏Ïù¥",
          es: "Largo",
          de: "L√§nge",
          fi: "Pituus",
          fr: "Longueur",
          ar: "ÿßŸÑÿ∑ŸàŸÑ",
          it: "Lunghezza",
        },
        width: {
          en: "Width",
          zh: "Èóä",
          ja: "ÂπÖ",
          ko: "ÎÑàÎπÑ",
          es: "Ancho",
          de: "Breite",
          fi: "Leveys",
          fr: "Largeur",
          ar: "ÿßŸÑÿπÿ±ÿ∂",
          it: "Larghezza",
        },
        formula: {
          en: "Formula: (Length + Width) √ó 2",
          zh: "ÂÖ¨ÂºèÔºö(Èï∑ + Èóä) √ó 2",
          ja: "ÂÖ¨ÂºèÔºö(Èï∑„Åï + ÂπÖ) √ó 2",
          ko: "Í≥µÏãù: (Í∏∏Ïù¥ + ÎÑàÎπÑ) √ó 2",
          es: "F√≥rmula: (Largo + Ancho) √ó 2",
          de: "Formel: (L√§nge + Breite) √ó 2",
          fi: "Kaava: (Pituus + Leveys) √ó 2",
          fr: "Formule : (Longueur + Largeur) √ó 2",
          ar: "ÿßŸÑÿµŸäÿ∫ÿ©: (ÿßŸÑÿ∑ŸàŸÑ + ŸàÿßŸÑÿπÿ±ÿ∂) √ó 2",
          it: "Formula: (Lunghezza + Larghezza) √ó 2",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const getText = (key) => t[key][lang] || t[key]["en"];

        const [w, setW] = useState(5);
        const [h, setH] = useState(3);

        // Perimeter path logic (0,0) -> (w,0) -> (w,h) -> (0,h) -> (0,0)
        const scale = 40;
        const p = w * 2 + h * 2;

        return (
          <div className="min-h-screen p-8 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-sky-900 mb-8 mt-8">
              üìè {getText("title")}
            </h1>

            <div className="bg-white/95 backdrop-blur-md rounded-3xl p-8 shadow-2xl max-w-4xl w-full flex flex-col md:flex-row gap-12 items-center">
              <div className="flex flex-col gap-6 w-72">
                <div className="flex items-center gap-4">
                  <label className="font-bold text-sky-800 text-xl w-24">
                    {getText("length")}
                  </label>
                  <input
                    type="range"
                    min="1"
                    max="8"
                    value={w}
                    onChange={(e) => setW(parseInt(e.target.value))}
                    className="w-full accent-sky-600"
                  />
                  <span className="text-2xl font-black text-sky-700">{w}</span>
                </div>
                <div className="flex items-center gap-4">
                  <label className="font-bold text-sky-800 text-xl w-24">
                    {getText("width")}
                  </label>
                  <input
                    type="range"
                    min="1"
                    max="8"
                    value={h}
                    onChange={(e) => setH(parseInt(e.target.value))}
                    className="w-full accent-sky-600"
                  />
                  <span className="text-2xl font-black text-sky-700">{h}</span>
                </div>

                <div className="bg-sky-50 p-6 rounded-2xl border-2 border-sky-200">
                  <h3 className="font-bold text-sky-800 mb-2">
                    {getText("formula")}
                  </h3>
                  <div className="text-2xl font-bold text-sky-900 mb-2">
                    ({w} + {h}) √ó 2
                  </div>
                  <div className="text-4xl font-black text-sky-600">= {p}</div>
                </div>
              </div>

              {/* Visual Animation */}
              <div className="relative bg-sky-50 p-12 rounded-2xl shadow-inner border border-sky-200 min-w-[400px] min-h-[400px] flex items-center justify-center">
                <svg width="350" height="350" className="overflow-visible">
                  <rect
                    x="0"
                    y="0"
                    width={w * scale}
                    height={h * scale}
                    fill="#bae6fd"
                    stroke="#0ea5e9"
                    strokeWidth="2"
                  />

                  <motion.circle
                    r="8"
                    fill="#facc15"
                    stroke="#ca8a04"
                    strokeWidth="2"
                    animate={{
                      x: [0, w * scale, w * scale, 0, 0],
                      y: [0, 0, h * scale, h * scale, 0],
                    }}
                    transition={{
                      duration: 4,
                      repeat: Infinity,
                      ease: "linear",
                    }}
                  />

                  {/* Labels */}
                  <text
                    x={(w * scale) / 2}
                    y="-10"
                    textAnchor="middle"
                    className="font-bold fill-sky-700"
                  >
                    {getText("length")} ({w})
                  </text>
                  <text
                    x={w * scale + 10}
                    y={(h * scale) / 2}
                    textAnchor="start"
                    className="font-bold fill-sky-700"
                  >
                    {getText("width")} ({h})
                  </text>
                  <text
                    x={(w * scale) / 2}
                    y={h * scale + 20}
                    textAnchor="middle"
                    className="font-bold fill-sky-700"
                  >
                    {getText("length")} ({w})
                  </text>
                  <text
                    x="-10"
                    y={(h * scale) / 2}
                    textAnchor="end"
                    className="font-bold fill-sky-700"
                  >
                    {getText("width")} ({h})
                  </text>
                </svg>
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
