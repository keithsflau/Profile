<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞èÂõõÊï∏Â≠∏ÔºöÈñ±ËÆÄÊ£íÂΩ¢Âúñ | Reading Bar Charts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&family=Fredoka:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Fredoka", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #e0e7ff 0%, #6366f1 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState } = React;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "Bar Chart Master",
          zh: "Èñ±ËÆÄÊï∏ÊìöÂ§ßÂ∏´",
          ja: "Ê£í„Ç∞„É©„Éï„Éû„Çπ„Çø„Éº",
          ko: "ÎßâÎåÄ Í∑∏ÎûòÌîÑ ÎßàÏä§ÌÑ∞",
          es: "Maestro de Gr√°ficos de Barras",
          de: "Balkendiagramm-Meister",
          fi: "Pylv√§skaaviomestari",
          fr: "Ma√Ætre des graphiques √† barres",
          ar: "ÿ≥ŸäÿØ ÿßŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸä ÿßŸÑÿ¥ÿ±Ÿäÿ∑Ÿä",
          it: "Maestro dei grafici a barre",
        },
        q1: {
          en: "Who read the most books?",
          zh: "Ë™∞Èñ±ËÆÄÁöÑÊõ∏Êú¨ÊúÄÂ§öÔºü",
          ja: "Ë™∞„Åå‰∏ÄÁï™Êú¨„ÇíË™≠„Åø„Åæ„Åó„Åü„ÅãÔºü",
          ko: "ÎàÑÍ∞Ä Í∞ÄÏû• ÎßéÏùÄ Ï±ÖÏùÑ ÏùΩÏóàÏäµÎãàÍπå?",
          es: "¬øQui√©n ley√≥ m√°s libros?",
          de: "Wer hat die meisten B√ºcher gelesen?",
          fi: "Kuka luki eniten kirjoja?",
          fr: "Qui a lu le plus de livres ?",
          ar: "ŸÖŸÜ ŸÇÿ±ÿ£ ÿ£ŸÉÿ®ÿ± ÿπÿØÿØ ŸÖŸÜ ÿßŸÑŸÉÿ™ÿ®ÿü",
          it: "Chi ha letto pi√π libri?",
        },
        q2: {
          en: "How many books did David and Amy read together?",
          zh: "Â∞èÊòéÂíåÂ∞èÁæéÂÖ±ËÆÄ‰∫ÜÂ§öÂ∞ëÊú¨Ôºü",
          ja: "Â∞èÊòé„Å®Â∞èÁæé„ÅØÂêàË®à„Åß‰ΩïÂÜäË™≠„Åø„Åæ„Åó„Åü„ÅãÔºü",
          ko: "Îç∞Ïù¥ÎπÑÎìúÏôÄ ÏóêÏù¥ÎØ∏Îäî Ìï®Íªò Î™á Í∂åÏùò Ï±ÖÏùÑ ÏùΩÏóàÏäµÎãàÍπå?",
          es: "¬øCu√°ntos libros leyeron David y Amy juntos?",
          de: "Wie viele B√ºcher haben David und Amy zusammen gelesen?",
          fi: "Kuinka monta kirjaa David ja Amy lukivat yhdess√§?",
          fr: "Combien de livres David et Amy ont-ils lus ensemble ?",
          ar: "ŸÉŸÖ ÿπÿØÿØ ÿßŸÑŸÉÿ™ÿ® ÿßŸÑÿ™Ÿä ŸÇÿ±ÿ£Ÿáÿß ÿØŸäŸÅŸäÿØ Ÿàÿ¢ŸÖŸä ŸÖÿπŸãÿßÿü",
          it: "Quanti libri hanno letto David e Amy insieme?",
        },
        q3: {
          en: "How many more books did Sarah read than Ben?",
          zh: "ÂøÉÊÄ°ÊØîÂ§ßÊñáÂ§öËÆÄ‰∫ÜÂ§öÂ∞ëÊú¨Ôºü",
          ja: "ÂøÉÊÄ°„ÅØÂ§ßÊñá„Çà„Çä‰ΩïÂÜäÂ§ö„ÅèË™≠„Åø„Åæ„Åó„Åü„ÅãÔºü",
          ko: "ÏÇ¨ÎùºÎäî Î≤§Î≥¥Îã§ Î™á Í∂å Îçî ÏùΩÏóàÏäµÎãàÍπå?",
          es: "¬øCu√°ntos libros m√°s ley√≥ Sarah que Ben?",
          de: "Wie viele B√ºcher mehr hat Sarah als Ben gelesen?",
          fi: "Kuinka monta kirjaa enemm√§n Sarah luki kuin Ben?",
          fr: "Combien de livres Sarah a-t-elle lus de plus que Ben ?",
          ar: "ŸÉŸÖ ÿπÿØÿØ ÿßŸÑŸÉÿ™ÿ® ÿßŸÑÿ™Ÿä ŸÇÿ±ÿ£ÿ™Ÿáÿß ÿ≥ÿßÿ±ÿ© ÿ£ŸÉÿ´ÿ± ŸÖŸÜ ÿ®ŸÜÿü",
          it: "Quanti libri ha letto Sarah pi√π di Ben?",
        },
        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµ!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        incorrect: {
          en: "Look closer!",
          zh: "ÂÜçÁúãÊ∏ÖÊ•ö‰∏ÄÈªûÔºÅ",
          ja: "„Çà„ÅèË¶ã„Å¶ÔºÅ",
          ko: "ÏûêÏÑ∏Ìûà Î≥¥ÏÑ∏Ïöî!",
          es: "¬°Mira m√°s de cerca!",
          de: "Schau genauer hin!",
          fi: "Katso tarkemmin!",
          fr: "Regarde de plus pr√®s !",
          ar: "ÿßŸÜÿ∏ÿ± ÿπŸÜ ŸÉÿ´ÿ®!",
          it: "Guarda meglio!",
        },
        question: {
          en: "Question",
          zh: "ÂïèÈ°å",
          ja: "Ë≥™Âïè",
          ko: "ÏßàÎ¨∏",
          es: "Pregunta",
          de: "Frage",
          fi: "Kysymys",
          fr: "Question",
          ar: "ÿ≥ÿ§ÿßŸÑ",
          it: "Domanda",
        },
        David: {
          en: "David",
          zh: "Â∞èÊòé",
          ja: "Â∞èÊòé",
          ko: "Îç∞Ïù¥ÎπÑÎìú",
          es: "David",
          de: "David",
          fi: "David",
          fr: "David",
          ar: "ÿØŸäŸÅŸäÿØ",
          it: "David",
        },
        Amy: {
          en: "Amy",
          zh: "Â∞èÁæé",
          ja: "Â∞èÁæé",
          ko: "ÏóêÏù¥ÎØ∏",
          es: "Amy",
          de: "Amy",
          fi: "Amy",
          fr: "Amy",
          ar: "ÿ¢ŸÖŸä",
          it: "Amy",
        },
        Ben: {
          en: "Ben",
          zh: "Â§ßÊñá",
          ja: "Â§ßÊñá",
          ko: "Î≤§",
          es: "Ben",
          de: "Ben",
          fi: "Ben",
          fr: "Ben",
          ar: "ÿ®ŸÜ",
          it: "Ben",
        },
        Sarah: {
          en: "Sarah",
          zh: "ÂøÉÊÄ°",
          ja: "ÂøÉÊÄ°",
          ko: "ÏÇ¨Îùº",
          es: "Sarah",
          de: "Sarah",
          fi: "Sarah",
          fr: "Sarah",
          ar: "ÿ≥ÿßÿ±ÿ©",
          it: "Sarah",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const getText = (key) => t[key][lang] || t[key]["en"];

        // Data: Books read by students
        const data = [
          { name: getText("David"), val: 12 },
          { name: getText("Amy"), val: 18 },
          { name: getText("Ben"), val: 8 },
          { name: getText("Sarah"), val: 24 },
        ];

        // Need to reconstruct questions based on lang
        // Since questions depend on data values which are static, we can hardcode logic but need translated strings for Q and A options
        // For Option names, we should use the translated names. The answer check compares string.
        // It's better to verify by index or keep English internally for logic?
        // Let's use logic check.

        const questions = [
          {
            qKey: "q1",
            optionsKeys: ["David", "Amy", "Ben", "Sarah"],
            ansIndex: 3, // Sarah
          },
          {
            qKey: "q2",
            // 30 is number, no translation needed
            options: ["20", "30", "40", "25"],
            ans: "30",
          },
          {
            qKey: "q3",
            options: ["12", "16", "14", "18"],
            ans: "16",
          },
        ];

        const [qIdx, setQIdx] = useState(0);
        const [feedback, setFeedback] = useState(null);

        const currentQ = questions[qIdx];
        const currentQText = getText(currentQ.qKey);

        const check = (opt, index) => {
          let isCorrect = false;
          // Logic based on question type
          if (qIdx === 0) {
            // Option is translated name. Ans is translated name.
            // We stored ansIndex
            if (index === currentQ.ansIndex) isCorrect = true;
          } else {
            // Number comparison
            if (opt === currentQ.ans) isCorrect = true;
          }

          if (isCorrect) {
            setFeedback("correct");
            setTimeout(() => {
              setFeedback(null);
              setQIdx((qIdx + 1) % questions.length);
            }, 1500);
          } else {
            setFeedback("incorrect");
          }
        };

        return (
          <div className="min-h-screen p-8 flex flex-col items-center">
            <LanguageSelector lang={lang} setLang={setLang} />
            <h1 className="text-4xl md:text-5xl font-black text-indigo-900 mb-8 mt-8">
              üìä {getText("title")}
            </h1>

            <div className="bg-white/95 backdrop-blur-md rounded-3xl p-8 shadow-2xl max-w-5xl w-full flex flex-col md:flex-row gap-8">
              <div className="flex-1 bg-slate-50 border-2 border-slate-200 rounded-2xl p-6 relative h-[400px] flex items-end justify-around">
                {/* Grid Lines */}
                <div className="absolute inset-0 flex flex-col justify-between p-6 pointer-events-none">
                  {[...Array(6)].map((_, i) => (
                    <div key={i} className="w-full h-px bg-slate-300 relative">
                      <span className="absolute -left-8 -top-3 text-sm font-bold text-slate-500">
                        {(5 - i) * 5}
                      </span>
                    </div>
                  ))}
                </div>

                {data.map((d, i) => (
                  <div
                    key={i}
                    className="relative w-16 bg-indigo-500 rounded-t-lg z-10 group hover:opacity-90 transition-all cursor-pointer"
                    style={{ height: `${(d.val / 25) * 100}%` }}
                  >
                    <div className="absolute bottom-[-30px] w-full text-center font-bold text-slate-700">
                      {d.name}
                    </div>
                    <div className="absolute -top-8 w-full text-center font-bold text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity bg-white shadow rounded p-1">
                      {d.val}
                    </div>
                  </div>
                ))}
              </div>

              <div className="w-full md:w-80 flex flex-col justify-center">
                <div className="bg-indigo-50 p-6 rounded-2xl border-2 border-indigo-200 mb-4">
                  <div className="text-xs font-bold text-indigo-400 mb-2">
                    {getText("question")} {qIdx + 1}/{questions.length}
                  </div>
                  <h3 className="text-xl font-bold text-indigo-900 mb-6">
                    {currentQText}
                  </h3>

                  <div className="space-y-3">
                    {qIdx === 0
                      ? currentQ.optionsKeys.map((key, i) => (
                          <button
                            key={getText(key)}
                            onClick={() => check(getText(key), i)}
                            className="w-full py-3 bg-white border-2 border-indigo-100 rounded-xl font-bold text-indigo-700 hover:bg-indigo-500 hover:text-white transition-all"
                          >
                            {getText(key)}
                          </button>
                        ))
                      : currentQ.options.map((opt) => (
                          <button
                            key={opt}
                            onClick={() => check(opt, -1)}
                            className="w-full py-3 bg-white border-2 border-indigo-100 rounded-xl font-bold text-indigo-700 hover:bg-indigo-500 hover:text-white transition-all"
                          >
                            {opt}
                          </button>
                        ))}
                  </div>
                </div>

                {feedback === "correct" && (
                  <div className="bg-green-500 text-white p-4 rounded-xl text-center font-black text-xl animate-bounce">
                    ‚úì {getText("correct")}
                  </div>
                )}
                {feedback === "incorrect" && (
                  <div className="bg-red-500 text-white p-4 rounded-xl text-center font-black text-xl animate-shake">
                    ‚úó {getText("incorrect")}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
