<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫åÊï∏Â≠∏ÔºöÁõ¥Á∑ö (ÂûÇÁõ¥/Âπ≥Ë°å) | Lines</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #f3f4f6 0%, #9ca3af 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "üìè Lines",
          zh: "üìè Áõ¥Á∑ö",
          ja: "üìè Áõ¥Á∑ö",
          ko: "üìè ÏÑ†",
          es: "üìè L√≠neas",
          de: "üìè Linien",
          fi: "üìè Viivat",
          fr: "üìè Lignes",
          ar: "üìè ÿÆÿ∑Ÿàÿ∑",
          it: "üìè Linee",
        },
        whatLine: {
          en: "What line is this?",
          zh: "ÈÄôÊòØÁîöÈ∫ºÁ∑öÔºü",
          ja: "„Åì„Çå„ÅØ‰Ωï„ÅÆÁ∑ö„Åß„Åô„ÅãÔºü",
          ko: "Ïù¥Í≤ÉÏùÄ Î¨¥Ïä® ÏÑ†ÏûÖÎãàÍπå?",
          es: "¬øQu√© l√≠nea es esta?",
          de: "Was f√ºr eine Linie ist das?",
          fi: "Mik√§ viiva t√§m√§ on?",
          fr: "Quelle ligne est-ce ?",
          ar: "ŸÖÿß Ÿáÿ∞ÿß ÿßŸÑÿÆÿ∑ÿü",
          it: "Che linea √® questa?",
        },
        vertical: {
          en: "Vertical Line",
          zh: "ÂûÇÁõ¥Á∑ö",
          ja: "ÂûÇÁõ¥Á∑ö",
          ko: "ÏàòÏßÅÏÑ†",
          es: "L√≠nea vertical",
          de: "Vertikale Linie",
          fi: "Pystyviiva",
          fr: "Ligne verticale",
          ar: "ÿÆÿ∑ ÿπŸÖŸàÿØŸä",
          it: "Linea verticale",
        },
        horizontal: {
          en: "Horizontal Line",
          zh: "Âπ≥Ë°åÁ∑ö/Ê∞¥Âπ≥Á∑ö",
          ja: "Ê∞¥Âπ≥Á∑ö",
          ko: "ÏàòÌèâÏÑ†",
          es: "L√≠nea horizontal",
          de: "Horizontale Linie",
          fi: "Vaakaviiva",
          fr: "Ligne horizontale",
          ar: "ÿÆÿ∑ ÿ£ŸÅŸÇŸä",
          it: "Linea orizzontale",
        },
        oblique: {
          en: "Oblique Line",
          zh: "ÊñúÁ∑ö",
          ja: "ÊñúÁ∑ö",
          ko: "ÏÇ¨ÏÑ†",
          es: "L√≠nea oblicua",
          de: "Schr√§ge Linie",
          fi: "Viisto viiva",
          fr: "Ligne oblique",
          ar: "ÿÆÿ∑ ŸÖÿßÿ¶ŸÑ",
          it: "Linea obliqua",
        },
        check: {
          en: "Check",
          zh: "Ê™¢Êü•",
          ja: "Á¢∫Ë™ç",
          ko: "ÌôïÏù∏",
          es: "Comprobar",
          de: "Pr√ºfen",
          fi: "Tarkista",
          fr: "V√©rifier",
          ar: "ÿ™ÿ≠ŸÇŸÇ",
          it: "Controlla",
        },
      };

      function App() {
        const [lang, setLang] = useState("zh");
        const [type, setType] = useState("V"); // V (Vertical), H (Horizontal), O (Oblique)
        const [feedback, setFeedback] = useState("");
        const [bgGrid, setBgGrid] = useState(true);

        const newProb = () => {
          setFeedback("");
          const t = ["V", "H", "O"][Math.floor(Math.random() * 3)];
          setType(t);
        };

        useEffect(newProb, []);

        const check = (ans) => {
          let correct = false;
          if (ans === "V" && type === "V") correct = true;
          if (ans === "H" && type === "H") correct = true;
          if (ans === "O" && type === "O") correct = true;

          if (correct) {
            setFeedback("CORRECT");
            setTimeout(newProb, 1500);
          } else {
            setFeedback("WRONG");
          }
        };

        // Render line
        // Vertical: x1=100, y1=20, x2=100, y2=180
        // Horizontal: x1=20, y1=100, x2=180, y2=100
        // Oblique: x1=40, y1=40, x2=160, y2=160

        let x1, y1, x2, y2;
        if (type === "V") {
          x1 = 100;
          y1 = 20;
          x2 = 100;
          y2 = 180;
        } else if (type === "H") {
          x1 = 20;
          y1 = 100;
          x2 = 180;
          y2 = 100;
        } else {
          x1 = 40;
          y1 = 40;
          x2 = 160;
          y2 = 160;
        }

        return (
          <div className="min-h-screen p-8 flex flex-col items-center justify-center">
            <LanguageSelector lang={lang} setLang={setLang} />

            <h1 className="text-4xl md:text-5xl font-black text-slate-800 mb-8 max-w-2xl text-center">
              {t.title[lang] || t.title["en"]}
            </h1>

            <div className="bg-white/90 rounded-3xl p-8 shadow-2xl w-full max-w-xl text-center border-4 border-slate-300">
              <div className="h-64 flex items-center justify-center mb-8 bg-slate-50 rounded-2xl overflow-hidden relative border-2 border-slate-200">
                {bgGrid && (
                  <div
                    className="absolute inset-0 grid grid-cols-10 grid-rows-10"
                    style={{
                      backgroundImage:
                        "linear-gradient(#e2e8f0 1px, transparent 1px), linear-gradient(90deg, #e2e8f0 1px, transparent 1px)",
                      backgroundSize: "20px 20px",
                    }}
                  ></div>
                )}

                <svg
                  width="200"
                  height="200"
                  viewBox="0 0 200 200"
                  className="relative z-10"
                >
                  <line
                    x1={x1}
                    y1={y1}
                    x2={x2}
                    y2={y2}
                    stroke="#0f172a"
                    strokeWidth="8"
                    strokeLinecap="round"
                  />
                </svg>
              </div>

              <div className="text-2xl font-bold text-slate-700 mb-8">
                {t.whatLine[lang] || t.whatLine["en"]}
              </div>

              <div className="grid grid-cols-1 gap-4">
                <button
                  onClick={() => check("V")}
                  className="bg-blue-100 hover:bg-blue-200 p-4 rounded-xl font-bold text-blue-900 border-2 border-blue-200 transition-all active:scale-95"
                >
                  {t.vertical[lang] || t.vertical["en"]}
                </button>
                <button
                  onClick={() => check("H")}
                  className="bg-green-100 hover:bg-green-200 p-4 rounded-xl font-bold text-green-900 border-2 border-green-200 transition-all active:scale-95"
                >
                  {t.horizontal[lang] || t.horizontal["en"]}
                </button>
                <button
                  onClick={() => check("O")}
                  className="bg-orange-100 hover:bg-orange-200 p-4 rounded-xl font-bold text-orange-900 border-2 border-orange-200 transition-all active:scale-95"
                >
                  {t.oblique[lang] || t.oblique["en"]}
                </button>
              </div>

              <div className="h-16 mt-6">
                {feedback === "CORRECT" && (
                  <div className="text-center text-4xl font-black text-green-500 animate-bounce">
                    {get("correct", lang)}
                  </div>
                )}
                {feedback === "WRONG" && (
                  <div className="text-center text-4xl font-black text-red-500 animate-shake">
                    {get("wrong", lang)}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
