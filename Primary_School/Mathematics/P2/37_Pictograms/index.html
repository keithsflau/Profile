<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å°äºŒæ•¸å­¸ï¼šè±¡å½¢åœ– (ä¸€æ ¼ä»£è¡¨å¤šå€‹) | Pictograms Scaling</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #fefce8 0%, #ca8a04 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "ğŸ“Š Pictograms",
          zh: "ğŸ“Š è±¡å½¢åœ–",
          ja: "ğŸ“Š ãƒ”ã‚¯ãƒˆã‚°ãƒ©ãƒ ",
          ko: "ğŸ“Š ê·¸ë¦¼ ê·¸ë˜í”„",
          es: "ğŸ“Š Pictogramas",
          de: "ğŸ“Š Piktogramme",
          fi: "ğŸ“Š Piktogrammit",
          fr: "ğŸ“Š Pictogrammes",
          ar: "ğŸ“Š Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØ¶ÙŠØ­ÙŠØ©",
          it: "ğŸ“Š Pittogrammi",
        },
        eachRepresents: {
          en: "Each icon =",
          zh: "æ¯å€‹åœ–å½¢ä»£è¡¨",
          ja: "å„ã‚¢ã‚¤ã‚³ãƒ³ =",
          ko: "ê° ì•„ì´ì½˜ =",
          es: "Cada icono =",
          de: "Jedes Symbol =",
          fi: "Jokainen kuvake =",
          fr: "Chaque icÃ´ne =",
          ar: "ÙƒÙ„ Ø£ÙŠÙ‚ÙˆÙ†Ø© =",
          it: "Ogni icona =",
        },
        fruits: {
          en: "fruits",
          zh: "å€‹æ°´æœ",
          ja: "å€‹ã®æœç‰©",
          ko: "ê°œì˜ ê³¼ì¼",
          es: "frutas",
          de: "FrÃ¼chte",
          fi: "hedelmÃ¤Ã¤",
          fr: "fruits",
          ar: "ÙÙˆØ§ÙƒÙ‡",
          it: "frutti",
        },
        howMany: {
          en: "How many",
          zh: "å…±æœ‰å¤šå°‘å€‹",
          ja: "ã„ãã¤ã‚ã‚Šã¾ã™ã‹",
          ko: "ì–¼ë§ˆë‚˜ ë§ì€",
          es: "CuÃ¡ntos",
          de: "Wie viele",
          fi: "Kuinka monta",
          fr: "Combien de",
          ar: "ÙƒÙ… Ø¹Ø¯Ø¯",
          it: "Quanti",
        },
        check: {
          en: "Check",
          zh: "æª¢æŸ¥",
          ja: "ç¢ºèª",
          ko: "í™•ì¸",
          es: "Comprobar",
          de: "PrÃ¼fen",
          fi: "Tarkista",
          fr: "VÃ©rifier",
          ar: "ØªØ­Ù‚Ù‚",
          it: "Controlla",
        },
      };

      const itemsData = [
        { name: { zh: "è˜‹æœ", en: "Apple", ja: "ãƒªãƒ³ã‚´" }, icon: "ğŸ" },
        { name: { zh: "æ©™", en: "Orange", ja: "ã‚ªãƒ¬ãƒ³ã‚¸" }, icon: "ğŸŠ" },
        { name: { zh: "æ¢¨", en: "Pear", ja: "æ¢¨" }, icon: "ğŸ" },
        { name: { zh: "é¦™è•‰", en: "Banana", ja: "ãƒãƒŠãƒŠ" }, icon: "ğŸŒ" },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [scale, setScale] = useState(2); // 2, 5, or 10
        const [counts, setCounts] = useState([4, 6, 8, 2]); // Actual counts (must be divisible by scale)
        const [targetIdx, setTargetIdx] = useState(0);
        const [input, setInput] = useState("");
        const [feedback, setFeedback] = useState("");

        const newProb = () => {
          setFeedback("");
          setInput("");

          const s = [2, 5, 10][Math.floor(Math.random() * 3)];
          setScale(s);

          const newCounts = itemsData.map(
            () => (Math.floor(Math.random() * 5) + 1) * s
          );
          setCounts(newCounts);
          setTargetIdx(Math.floor(Math.random() * itemsData.length));
        };

        useEffect(newProb, []);

        const check = () => {
          if (parseInt(input) === counts[targetIdx]) {
            setFeedback("CORRECT");
            setTimeout(newProb, 2000);
          } else {
            setFeedback("WRONG");
          }
        };

        const getItemName = (item) => item.name[lang] || item.name["en"];

        return (
          <div className="min-h-screen p-8 flex flex-col items-center justify-center">
            <LanguageSelector lang={lang} setLang={setLang} />

            <h1 className="text-4xl md:text-5xl font-black text-yellow-900 mb-8 max-w-2xl text-center">
              {t.title[lang] || t.title["en"]}
            </h1>

            <div className="bg-white/90 rounded-3xl p-8 shadow-2xl w-full max-w-3xl text-center border-4 border-yellow-300">
              {/* Graph */}
              <div className="bg-yellow-50 rounded-xl p-6 border-2 border-yellow-200 mb-6">
                <div className="text-right text-sm font-bold text-yellow-700 mb-4 bg-yellow-200 inline-block px-3 py-1 rounded-full">
                  {t.eachRepresents[lang] || t.eachRepresents["en"]} {scale}{" "}
                  {t.fruits[lang] || t.fruits["en"]}
                </div>

                <div className="flex justify-around items-end h-64 border-b-4 border-yellow-600 pb-2 gap-4">
                  {itemsData.map((item, i) => (
                    <div
                      key={i}
                      className="flex flex-col items-center w-full justify-end h-full"
                    >
                      <div
                        className="flex flex-col-reverse items-center w-full gap-1 transition-all duration-500"
                        style={{ height: "100%" }}
                      >
                        {[...Array(counts[i] / scale)].map((_, j) => (
                          <div
                            key={j}
                            className="text-2xl md:text-3xl animate-bounce-short"
                            style={{ animationDelay: `${j * 100}ms` }}
                          >
                            {itemsData[i].icon}
                          </div> // Use generic block or icon
                        ))}
                      </div>
                      <div className="mt-4 font-bold text-slate-600 text-sm md:text-base whitespace-nowrap">
                        {getItemName(item)}
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="text-2xl font-bold text-slate-700 mb-6 flex flex-col items-center">
                {lang === "zh" ? (
                  <>
                    {t.howMany[lang]} {getItemName(itemsData[targetIdx])}ï¼Ÿ
                  </>
                ) : (
                  <>
                    {t.howMany[lang] || t.howMany["en"]}{" "}
                    {getItemName(itemsData[targetIdx])}s?
                  </>
                )}
              </div>

              <div className="flex items-center justify-center gap-4 text-4xl mb-8 font-black text-yellow-900">
                <input
                  type="number"
                  value={input}
                  onChange={(e) => setInput(e.target.value)}
                  className="w-32 text-center border-b-4 border-yellow-500 bg-yellow-50 focus:outline-none rounded-t-lg"
                  autoFocus
                />
              </div>

              <div className="text-center">
                <button
                  onClick={check}
                  className="px-10 py-3 bg-yellow-500 text-white rounded-full font-black text-2xl shadow-xl hover:bg-yellow-600 active:scale-95 transition-transform"
                >
                  {t.check[lang] || t.check["en"]}
                </button>
              </div>

              <div className="h-16 mt-8">
                {feedback === "CORRECT" && (
                  <div>
                    <div className="text-center text-4xl font-black text-green-500 animate-bounce">
                      {get("correct", lang)}
                    </div>
                    <div className="text-slate-400 font-bold mt-2">
                      {counts[targetIdx] / scale} Ã— {scale} ={" "}
                      {counts[targetIdx]}
                    </div>
                  </div>
                )}
                {feedback === "WRONG" && (
                  <div className="text-center text-4xl font-black text-red-500 animate-shake">
                    {get("wrong", lang)}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
    <style>
      @keyframes bounce-short {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-3px);
        }
      }
      .animate-bounce-short {
        animation: bounce-short 1s infinite;
      }
    </style>
  
      
      <!-- Footer -->
      <footer class="text-center py-4 text-slate-500 text-sm">
        <p class="italic mb-1">
          But God made the earth by his power; he founded the world by his wisdom and stretched out the heavens by his
          understanding. Jeremiah 10:12
        </p>
        <p class="text-xs mb-1 mt-2">
          ã€Œè€¶å’Œè¯ç”¨èƒ½åŠ›å‰µé€ å¤§åœ°ï¼Œç”¨æ™ºæ…§å»ºç«‹ä¸–ç•Œï¼Œç”¨è°æ˜é‹ªå¼µç©¹è’¼ã€‚ã€ è€¶åˆ©ç±³æ›¸ 10:12
        </p>
        <p class="text-xs mt-2 pt-2 border-t border-slate-300">
          @ 2025 Education Engineering Portfolio | Generated by Gemini Pro 3.0 | Prepared by SF Lau
        </p>
      </footer>
</body>
</html>
