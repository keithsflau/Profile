<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞è‰∫åÊï∏Â≠∏ÔºöÁ´ãÈ´îÂúñÂΩ¢ | 3D Shapes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="../../common/i18n.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #fae8ff 0%, #c026d3 100%);
      }
      .scene {
        perspective: 600px;
        width: 200px;
        height: 200px;
        margin: 0 auto;
      }
      .cube,
      .prism {
        transform-style: preserve-3d;
        animation: rotate 10s infinite linear;
      }
      @keyframes rotate {
        0% {
          transform: rotateX(-20deg) rotateY(0deg);
        }
        100% {
          transform: rotateX(-20deg) rotateY(360deg);
        }
      }
      .face {
        position: absolute;
        border: 2px solid rgba(0, 0, 0, 0.2);
        opacity: 0.8;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: white;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { LanguageSelector, get } = window.MathI18n;

      const t = {
        title: {
          en: "üßä 3D Shapes",
          zh: "üßä Á´ãÈ´îÂúñÂΩ¢",
          ja: "üßä 3DÂõ≥ÂΩ¢",
          ko: "üßä ÏûÖÏ≤¥ ÎèÑÌòï",
          es: "üßä Formas 3D",
          de: "üßä 3D-Formen",
          fi: "üßä 3D-muodot",
          fr: "üßä Formes 3D",
          ar: "üßä ÿ£ÿ¥ŸÉÿßŸÑ ÿ´ŸÑÿßÿ´Ÿäÿ© ÿßŸÑÿ£ÿ®ÿπÿßÿØ",
          it: "üßä Forme 3D",
        },
        whatShape: {
          en: "What shape is this?",
          zh: "ÈÄôÊòØÁîöÈ∫ºÂúñÂΩ¢Ôºü",
          ja: "„Åì„Çå„ÅØ‰Ωï„ÅÆÂΩ¢„Åß„Åô„ÅãÔºü",
          ko: "Ïù¥Í≤ÉÏùÄ Ïñ¥Îñ§ Î™®ÏñëÏûÖÎãàÍπå?",
          es: "¬øQu√© forma es esta?",
          de: "Welche Form ist das?",
          fi: "Mik√§ muoto t√§m√§ on?",
          fr: "Quelle est cette forme ?",
          ar: "ŸÖÿß Ÿáÿ∞ÿß ÿßŸÑÿ¥ŸÉŸÑÿü",
          it: "Che forma √® questa?",
        },
        check: {
          en: "Check",
          zh: "Ê™¢Êü•",
          ja: "Á¢∫Ë™ç",
          ko: "ÌôïÏù∏",
          es: "Comprobar",
          de: "Pr√ºfen",
          fi: "Tarkista",
          fr: "V√©rifier",
          ar: "ÿ™ÿ≠ŸÇŸÇ",
          it: "Controlla",
        },
      };

      const shapesData = [
        {
          id: "cube",
          name: { zh: "Ê≠£ÊñπÈ´î", en: "Cube", ja: "Á´ãÊñπ‰Ωì" },
          type: "cube",
        },
        {
          id: "cuboid",
          name: { zh: "Èï∑ÊñπÈ´î", en: "Cuboid", ja: "Áõ¥Êñπ‰Ωì" },
          type: "cuboid",
        },
        {
          id: "cylinder",
          name: { zh: "ÂúìÊü±È´î", en: "Cylinder", ja: "ÂÜÜÊü±" },
          type: "cylinder",
        },
        {
          id: "sphere",
          name: { zh: "ÁêÉÈ´î", en: "Sphere", ja: "ÁêÉ" },
          type: "sphere",
        },
        {
          id: "cone",
          name: { zh: "ÂúìÈåêÈ´î", en: "Cone", ja: "ÂÜÜÈåê" },
          type: "cone",
        },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [current, setCurrent] = useState(null);
        const [options, setOptions] = useState([]);
        const [feedback, setFeedback] = useState("");

        const next = () => {
          setFeedback("");
          const c = shapesData[Math.floor(Math.random() * shapesData.length)];
          setCurrent(c);
          // Generate options
          let opts = shapesData.filter((s) => s.id !== c.id);
          opts.sort(() => Math.random() - 0.5);
          opts = opts.slice(0, 3);
          opts.push(c);
          opts.sort(() => Math.random() - 0.5);
          setOptions(opts);
        };

        useEffect(next, []);

        const check = (sel) => {
          if (sel.id === current.id) {
            setFeedback("CORRECT");
            setTimeout(next, 1500);
          } else {
            setFeedback("WRONG");
          }
        };

        if (!current) return <div>Loading...</div>;

        const getShapeName = (s) => s.name[lang] || s.name["en"];

        return (
          <div className="min-h-screen p-8 flex flex-col items-center justify-center">
            <LanguageSelector lang={lang} setLang={setLang} />

            <h1 className="text-4xl md:text-5xl font-black text-fuchsia-900 mb-8 max-w-2xl text-center">
              {t.title[lang] || t.title["en"]}
            </h1>

            <div className="bg-white/90 rounded-3xl p-8 shadow-2xl w-full max-w-4xl text-center border-4 border-fuchsia-300">
              <div className="h-64 flex items-center justify-center mb-8 bg-fuchsia-50 rounded-2xl overflow-hidden relative">
                {current.type === "cube" && (
                  <div className="scene">
                    <div className="cube w-32 h-32 relative top-16 left-8">
                      <div
                        className="face bg-red-400 w-32 h-32 translate-z-[64px]"
                        style={{ transform: "translateZ(64px)" }}
                      ></div>
                      <div
                        className="face bg-red-500 w-32 h-32"
                        style={{ transform: "rotateY(90deg) translateZ(64px)" }}
                      ></div>
                      <div
                        className="face bg-red-400 w-32 h-32"
                        style={{
                          transform: "rotateY(180deg) translateZ(64px)",
                        }}
                      ></div>
                      <div
                        className="face bg-red-500 w-32 h-32"
                        style={{
                          transform: "rotateY(-90deg) translateZ(64px)",
                        }}
                      ></div>
                      <div
                        className="face bg-red-600 w-32 h-32"
                        style={{ transform: "rotateX(90deg) translateZ(64px)" }}
                      ></div>
                      <div
                        className="face bg-red-600 w-32 h-32"
                        style={{
                          transform: "rotateX(-90deg) translateZ(64px)",
                        }}
                      ></div>
                    </div>
                  </div>
                )}

                {current.type === "cuboid" && (
                  <div className="scene">
                    <div className="cube w-48 h-24 relative top-20 left-0">
                      <div
                        className="face bg-blue-400 w-48 h-24"
                        style={{ transform: "translateZ(32px)" }}
                      ></div>
                      <div
                        className="face bg-blue-500 w-16 h-24"
                        style={{
                          transform: "rotateY(90deg) translateZ(216px)",
                          left: "-64px",
                        }}
                      ></div>
                      <div className="text-[10rem]">üì¶</div>
                    </div>
                  </div>
                )}
                {/* Fallback for others to Emoji/Text scale for simplicity & reliability in "no external assets" */}
                {current.type === "cylinder" && (
                  <div className="text-[10rem]">üõ¢Ô∏è</div>
                )}
                {current.type === "sphere" && (
                  <div className="text-[10rem]">‚öΩ</div>
                )}
                {current.type === "cone" && (
                  <div className="text-[10rem]">üéâ</div>
                )}
              </div>

              <div className="text-xl text-slate-500 mb-8 font-bold">
                {t.whatShape[lang] || t.whatShape["en"]}
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                {options.map((opt, i) => (
                  <button
                    key={i}
                    onClick={() => check(opt)}
                    className="bg-white hover:bg-fuchsia-100 border-2 border-fuchsia-200 rounded-xl p-4 text-xl font-bold text-slate-700 shadow-sm transition-all active:scale-95"
                  >
                    {getShapeName(opt)}
                  </button>
                ))}
              </div>

              <div className="h-16 mt-6">
                {feedback === "CORRECT" && (
                  <div className="text-4xl font-black text-green-500 animate-bounce">
                    {get("correct", lang)}
                  </div>
                )}
                {feedback === "WRONG" && (
                  <div className="text-4xl font-black text-red-500 animate-shake">
                    {get("wrong", lang)}
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
