<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>小六數學：終極挑戰 | Final Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: linear-gradient(135deg, #020617 0%, #1e1b4b 100%);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;

      function App() {
        const [state, setState] = useState("menu"); // menu, play, end
        const [score, setScore] = useState(0);
        const [qIdx, setQIdx] = useState(0);

        const questions = [
          {
            q: "3/4 ÷ 1/2 = ?",
            opts: ["3/8", "3/2", "1/2", "6/4"],
            ans: "3/2",
          },
          {
            q: "圓周長的公式是？",
            opts: ["πr²", "2πr", "πd²", "2πd"],
            ans: "2πr",
          },
          { q: "2x + 5 = 15, x = ?", opts: ["5", "10", "2", "20"], ans: "5" },
          {
            q: "1:500 的地圖上，2cm 代表實際距離？",
            opts: ["10m", "100m", "1000m", "1m"],
            ans: "10m",
          }, // 1000cm = 10m
          {
            q: "擲硬幣兩次，兩次都是公的概率？",
            opts: ["1/2", "1/4", "1/3", "1/8"],
            ans: "1/4",
          },
          {
            q: "正六邊形的內角和是？",
            opts: ["360°", "540°", "720°", "900°"],
            ans: "720°",
          },
          {
            q: "本金$1000，年利率5%，2年後的利息？",
            opts: ["$50", "$100", "$200", "$10"],
            ans: "$100",
          },
          { q: "-5 + 8 = ?", opts: ["-13", "3", "-3", "13"], ans: "3" },
          {
            q: "一組數據中出現最多次的數叫？",
            opts: ["平均數", "中位數", "眾數", "小數"],
            ans: "眾數",
          },
          {
            q: "求折扣率：原價$100，售價$80",
            opts: ["20%", "80%", "25%", "10%"],
            ans: "20%",
          },
        ];

        const handleAnswer = (opt) => {
          if (opt === questions[qIdx].ans) setScore((s) => s + 100);

          if (qIdx < questions.length - 1) {
            setQIdx(qIdx + 1);
          } else {
            setState("end");
          }
        };

        return (
          <div className="min-h-screen flex flex-col items-center justify-center p-8 text-white relative overflow-hidden">
            {/* Background particles or gradient effect */}
            <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>

            {state === "menu" && (
              <motion.div
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                className="text-center z-10"
              >
                <h1 className="text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 mb-4">
                  小六數學終極挑戰
                </h1>
                <p className="text-2xl text-blue-200 mb-12 font-bold tracking-widest">
                  PRIMARY 6 FINAL CHALLENGE
                </p>

                <button
                  onClick={() => {
                    setScore(0);
                    setQIdx(0);
                    setState("play");
                  }}
                  className="group relative px-12 py-6 bg-blue-600 hover:bg-blue-500 rounded-full font-black text-3xl transition-all shadow-[0_0_40px_rgba(37,99,235,0.6)] hover:shadow-[0_0_60px_rgba(37,99,235,0.8)]"
                >
                  <span className="relative z-10">開始挑戰 START</span>
                </button>
              </motion.div>
            )}

            {state === "play" && (
              <div className="w-full max-w-3xl z-10">
                <div className="flex justify-between items-end mb-8 border-b border-white/20 pb-4">
                  <div className="text-blue-300 font-bold text-xl">
                    QUESTION {qIdx + 1} / {questions.length}
                  </div>
                  <div className="text-4xl font-black text-yellow-400 drop-shadow-lg">
                    {score} PTS
                  </div>
                </div>

                <motion.div
                  key={qIdx}
                  initial={{ opacity: 0, x: 50 }}
                  animate={{ opacity: 1, x: 0 }}
                  className="bg-white/10 backdrop-blur-xl p-10 rounded-3xl border border-white/10 shadow-2xl mb-8"
                >
                  <h2 className="text-4xl font-bold text-center mb-4">
                    {questions[qIdx].q}
                  </h2>
                </motion.div>

                <div className="grid grid-cols-2 gap-4">
                  {questions[qIdx].opts.map((opt, i) => (
                    <motion.button
                      key={i}
                      whileHover={{
                        scale: 1.02,
                        backgroundColor: "rgba(255,255,255,0.2)",
                      }}
                      whileTap={{ scale: 0.98 }}
                      onClick={() => handleAnswer(opt)}
                      className="bg-white/10 p-6 rounded-2xl text-2xl font-bold border border-white/20 hover:border-white/50 transition-all"
                    >
                      {opt}
                    </motion.button>
                  ))}
                </div>
              </div>
            )}

            {state === "end" && (
              <motion.div
                initial={{ scale: 0.8, opacity: 0 }}
                animate={{ scale: 1, opacity: 1 }}
                className="text-center z-10 bg-white/10 backdrop-blur-xl p-16 rounded-3xl border border-white/20 text-white shadow-2xl"
              >
                <h2 className="text-6xl font-black mb-6">CHALLENGE COMPLETE</h2>
                <div className="text-9xl font-black text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-600 mb-8 drop-shadow-2xl">
                  {score}
                </div>
                <p className="text-2xl text-blue-200 mb-8 font-bold">
                  滿分: {questions.length * 100}
                </p>
                <button
                  onClick={() => setState("menu")}
                  className="px-10 py-4 bg-white text-blue-900 rounded-full font-black text-xl hover:bg-blue-50 transition-colors"
                >
                  再玩一次 Play Again
                </button>
              </motion.div>
            )}
          </div>
        );
      }
      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
