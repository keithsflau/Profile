<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞èÂÖ≠Êï∏Â≠∏ÔºöÊØîÁöÑÊ¶ÇÂøµ | Ratio Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: #0f172a;
        color: white;
        overflow-x: hidden;
      }
      .glass-panel {
        background: rgba(30, 41, 59, 0.7);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector } = window.MathI18n || {
        LanguageSelector: () => null,
      };

      const t = {
        title: {
          en: "Ratio Master",
          zh: "ÊØîÁéáÂ§ßÂ∏´",
          ja: "ÊØîÁéá„Éû„Çπ„Çø„Éº",
          ko: "ÎπÑÏú® ÎßàÏä§ÌÑ∞",
          es: "Maestro de Proporciones",
          de: "Verh√§ltnis-Meister",
          fi: "Suhdemestari",
          fr: "Ma√Ætre des Ratios",
          ar: "ÿ≥ŸäÿØ ÿßŸÑŸÜÿ≥ÿ®",
          it: "Maestro delle Proporzioni",
        },
        quantityA: {
          en: "Quantity A (Blue)",
          zh: "Êï∏Èáè A (Ëóç)",
          ja: "Êï∞Èáè A (Èùí)",
          ko: "ÏàòÎüâ A (ÌååÎûë)",
          es: "Cantidad A (Azul)",
          de: "Menge A (Blau)",
          fi: "M√§√§r√§ A (Sininen)",
          fr: "Quantit√© A (Bleu)",
          ar: "ÿßŸÑŸÉŸÖŸäÿ© A (ÿ£ÿ≤ÿ±ŸÇ)",
          it: "Quantit√† A (Blu)",
        },
        quantityB: {
          en: "Quantity B (Pink)",
          zh: "Êï∏Èáè B (Á≤â)",
          ja: "Êï∞Èáè B („Éî„É≥„ÇØ)",
          ko: "ÏàòÎüâ B (Î∂ÑÌôç)",
          es: "Cantidad B (Rosa)",
          de: "Menge B (Rosa)",
          fi: "M√§√§r√§ B (Vaaleanpunainen)",
          fr: "Quantit√© B (Rose)",
          ar: "ÿßŸÑŸÉŸÖŸäÿ© B (Ÿàÿ±ÿØŸä)",
          it: "Quantit√† B (Rosa)",
        },
        ratio: {
          en: "Ratio",
          zh: "ÊØî",
          ja: "ÊØî",
          ko: "ÎπÑ",
          es: "Proporci√≥n",
          de: "Verh√§ltnis",
          fi: "Suhde",
          fr: "Ratio",
          ar: "ÿßŸÑŸÜÿ≥ÿ®ÿ©",
          it: "Rapporto",
        },
        simplified: {
          en: "Simplified Ratio",
          zh: "ÊúÄÁ∞°ÊØî",
          ja: "Á∞°Âçò„Å™ÊØî",
          ko: "Í∞ÑÎã®Ìïú ÎπÑ",
          es: "Proporci√≥n Simplificada",
          de: "Vereinfachtes Verh√§ltnis",
          fi: "Sievennetty suhde",
          fr: "Ratio simplifi√©",
          ar: "ÿßŸÑŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÖÿ®ÿ≥ÿ∑ÿ©",
          it: "Rapporto Semplificato",
        },
        fraction: {
          en: "As Fraction",
          zh: "ÂØ´ÊàêÂàÜÊï∏",
          ja: "ÂàÜÊï∞„Å®„Åó„Å¶",
          ko: "Î∂ÑÏàòÎ°ú ÌëúÏãú",
          es: "Como Fracci√≥n",
          de: "Als Bruch",
          fi: "Murtolukuna",
          fr: "En fraction",
          ar: "ŸÉŸÉÿ≥ÿ±",
          it: "Come Frazione",
        },
        concept: {
          en: "Concept: Relationship between two quantities",
          zh: "Ê¶ÇÂøµÔºöÂÖ©ÂÄãÊï∏Èáè‰πãÈñìÁöÑÈóú‰øÇ",
          ja: "Ê¶ÇÂøµÔºö2„Å§„ÅÆÈáè„ÅÆÈñ¢‰øÇ",
          ko: "Í∞úÎÖê: Îëê ÏàòÎüâ Í∞ÑÏùò Í¥ÄÍ≥Ñ",
          es: "Concepto: Relaci√≥n entre dos cantidades",
          de: "Konzept: Beziehung zwischen zwei Gr√∂√üen",
          fi: "K√§site: Kahden m√§√§r√§n v√§linen suhde",
          fr: "Concept : Relation entre deux quantit√©s",
          ar: "ÿßŸÑŸÖŸÅŸáŸàŸÖ: ÿßŸÑÿπŸÑÿßŸÇÿ© ÿ®ŸäŸÜ ŸÉŸÖŸäÿ™ŸäŸÜ",
          it: "Concetto: Relazione tra due quantit√†",
        },
        total: {
          en: "Total Parts",
          zh: "Á∏Ω‰ªΩÊï∏",
          ja: "ÂêàË®àÈÉ®ÂàÜ",
          ko: "Ï¥ù Î∂ÄÎ∂Ñ",
          es: "Partes Totales",
          de: "Gesamtteile",
          fi: "Kokonaisosat",
          fr: "Total des parts",
          ar: "ŸÖÿ¨ŸÖŸàÿπ ÿßŸÑÿ£ÿ¨ÿ≤ÿßÿ°",
          it: "Parti Totali",
        },
      };

      const getText = (key, lang) => t[key]?.[lang] || t[key]?.["en"] || key;

      function App() {
        const [lang, setLang] = useState("zh");
        const [a, setA] = useState(4);
        const [b, setB] = useState(6);

        const gcd = (x, y) => (!y ? x : gcd(y, x % y));
        const commonDivisor = gcd(a, b);
        const simpleA = a / commonDivisor;
        const simpleB = b / commonDivisor;
        const total = a + b;

        return (
          <div className="min-h-screen flex flex-col items-center p-4 font-sans bg-slate-900 text-white">
            <div className="w-full max-w-5xl flex justify-between items-center mb-8">
              <h1 className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-pink-500 drop-shadow-md">
                üìä {getText("title", lang)}
              </h1>
              <div className="flex bg-slate-800/80 p-1.5 rounded-xl border border-white/10 flex-wrap justify-end gap-1 max-w-[50%]">
                {[
                  "zh",
                  "en",
                  "ja",
                  "ko",
                  "es",
                  "de",
                  "fi",
                  "fr",
                  "ar",
                  "it",
                ].map((l) => (
                  <button
                    key={l}
                    onClick={() => setLang(l)}
                    className={`px-3 py-1.5 rounded-lg font-bold text-xs uppercase transition-all ${
                      lang === l
                        ? "bg-indigo-600 text-white shadow-lg scale-105"
                        : "text-slate-400 hover:text-white hover:bg-white/5"
                    }`}
                  >
                    {l}
                  </button>
                ))}
              </div>
            </div>

            <div className="flex flex-col lg:flex-row gap-8 w-full max-w-6xl items-start">
              {/* Visual Stage */}
              <div className="flex-1 w-full glass-panel rounded-3xl p-8 shadow-2xl relative overflow-hidden">
                <div className="absolute inset-0 bg-gradient-to-br from-indigo-900/30 to-pink-900/30 -z-10"></div>

                <div className="flex flex-col gap-8">
                  {/* Inputs */}
                  <div className="flex justify-center items-end gap-4 md:gap-8">
                    <InputGroup
                      label={getText("quantityA", lang)}
                      val={a}
                      setVal={setA}
                      color="text-indigo-400"
                      borderColor="border-indigo-500"
                    />
                    <div className="text-6xl font-black text-white/50 mb-4">
                      :
                    </div>
                    <InputGroup
                      label={getText("quantityB", lang)}
                      val={b}
                      setVal={setB}
                      color="text-pink-400"
                      borderColor="border-pink-500"
                    />
                  </div>

                  {/* Visual Bars */}
                  <div className="space-y-4">
                    {/* Bar A */}
                    <div className="flex items-center gap-4">
                      <div className="w-12 text-right font-bold text-indigo-400 font-mono">
                        A
                      </div>
                      <div className="flex-1 flex gap-1 h-12 bg-slate-800/50 rounded-lg p-1">
                        {Array.from({ length: a }).map((_, i) => (
                          <motion.div
                            key={`a-${i}`}
                            initial={{ scale: 0 }}
                            animate={{ scale: 1 }}
                            className="h-full flex-1 bg-indigo-500 rounded shadow-lg border border-indigo-400/50"
                          ></motion.div>
                        ))}
                        {/* Spacer to keep scale correct if we wanted fixed width bars? No, simpler to just fill flex space? 
                                Actually for ratio comparison, equal width units are better.
                                Let's use a grid of max possible units or just flex with max-w constraints.
                                Let's assume units have fixed width for better conceptual understanding.
                            */}
                      </div>
                      <div className="w-12 font-mono text-xl">{a}</div>
                    </div>

                    {/* Bar B */}
                    <div className="flex items-center gap-4">
                      <div className="w-12 text-right font-bold text-pink-400 font-mono">
                        B
                      </div>
                      <div className="flex-1 flex gap-1 h-12 bg-slate-800/50 rounded-lg p-1">
                        {Array.from({ length: b }).map((_, i) => (
                          <motion.div
                            key={`b-${i}`}
                            initial={{ scale: 0 }}
                            animate={{ scale: 1 }}
                            className="h-full flex-1 bg-pink-500 rounded shadow-lg border border-pink-400/50"
                          ></motion.div>
                        ))}
                      </div>
                      <div className="w-12 font-mono text-xl">{b}</div>
                    </div>
                  </div>

                  {/* Combined / Total View */}
                  <div className="mt-8 pt-8 border-t border-white/10">
                    <div className="text-center text-slate-400 text-sm font-bold uppercase tracking-widest mb-4">
                      {getText("total", lang)}: {total}
                    </div>
                    <div className="flex justify-center">
                      <div className="flex h-16 rounded-2xl overflow-hidden shadow-2xl border-4 border-slate-700 max-w-2xl w-full">
                        <motion.div
                          animate={{ flex: a }}
                          className="bg-indigo-500 flex items-center justify-center font-black text-2xl relative group"
                        >
                          <span className="drop-shadow-md">{a}</span>
                          <div className="absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        </motion.div>
                        <div className="w-1 bg-slate-900 z-10"></div>
                        <motion.div
                          animate={{ flex: b }}
                          className="bg-pink-500 flex items-center justify-center font-black text-2xl relative group"
                        >
                          <span className="drop-shadow-md">{b}</span>
                          <div className="absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                        </motion.div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              {/* Analysis Panel */}
              <div className="w-full lg:w-96 flex flex-col gap-6">
                <div className="glass-panel p-6 rounded-3xl">
                  <h2 className="text-xl font-bold text-white mb-4 border-b border-white/10 pb-2">
                    {getText("ratio", lang)}
                  </h2>

                  <div className="text-center space-y-6">
                    <div>
                      <div className="text-5xl font-black bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-pink-400">
                        {a} : {b}
                      </div>
                    </div>

                    {commonDivisor > 1 && (
                      <div className="bg-emerald-500/10 p-4 rounded-xl border border-emerald-500/30">
                        <div className="text-emerald-400 text-xs font-bold uppercase mb-1">
                          {getText("simplified", lang)} (√∑{commonDivisor})
                        </div>
                        <div className="text-4xl font-black text-emerald-300">
                          {simpleA} : {simpleB}
                        </div>
                      </div>
                    )}

                    <div className="bg-slate-800/50 p-4 rounded-xl border border-slate-700">
                      <div className="text-slate-400 text-xs font-bold uppercase mb-2">
                        {getText("fraction", lang)}
                      </div>
                      <div className="flex items-center justify-center gap-4">
                        <span className="font-mono text-xl text-indigo-400">
                          A/B ={" "}
                        </span>
                        <div className="flex flex-col items-center">
                          <span className="text-2xl font-bold text-indigo-300">
                            {a}
                          </span>
                          <div className="w-full h-0.5 bg-white/30 my-0.5"></div>
                          <span className="text-2xl font-bold text-pink-300">
                            {b}
                          </span>
                        </div>
                        {commonDivisor > 1 && (
                          <>
                            <span>=</span>
                            <div className="flex flex-col items-center">
                              <span className="text-2xl font-bold text-emerald-300">
                                {simpleA}
                              </span>
                              <div className="w-full h-0.5 bg-white/30 my-0.5"></div>
                              <span className="text-2xl font-bold text-emerald-300">
                                {simpleB}
                              </span>
                            </div>
                          </>
                        )}
                      </div>
                    </div>
                  </div>
                </div>

                <div className="p-4 bg-orange-500/10 border border-orange-500/30 rounded-2xl text-orange-200 text-sm font-medium">
                  üí° {getText("concept", lang)}
                </div>
              </div>
            </div>
          </div>
        );
      }

      function InputGroup({ label, val, setVal, color, borderColor }) {
        return (
          <div className="flex flex-col items-center gap-2">
            <label
              className={`font-bold ${color} text-sm uppercase tracking-wider`}
            >
              {label}
            </label>
            <div className="flex items-center gap-2">
              <button
                onClick={() => setVal(Math.max(1, val - 1))}
                className="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 font-black text-xl transition-all"
              >
                -
              </button>
              <div
                className={`w-20 h-20 flex items-center justify-center text-4xl font-black bg-black/20 rounded-2xl border-2 ${borderColor} ${color}`}
              >
                {val}
              </div>
              <button
                onClick={() => setVal(Math.min(20, val + 1))}
                className="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 font-black text-xl transition-all"
              >
                +
              </button>
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
