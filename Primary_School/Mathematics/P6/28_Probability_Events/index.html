<!DOCTYPE html>
<html lang="zh-HK">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Â∞èÂÖ≠Êï∏Â≠∏ÔºöÊ¶ÇÁéá‰∫ã‰ª∂ | Probability Events</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Outfit:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="../../common/i18n.js"></script>
    <style>
      body {
        font-family: "Outfit", "Noto Sans TC", sans-serif;
        background: #0f172a;
        color: white;
        overflow-x: hidden;
      }
      .glass-panel {
        background: rgba(30, 41, 59, 0.7);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React;
      const { motion } = window.Motion;
      const { LanguageSelector } = window.MathI18n || {
        LanguageSelector: () => null,
      };

      const t = {
        title: {
          en: "Probability Types",
          zh: "Ê¶ÇÁéá‰∫ã‰ª∂ÂàÜÈ°û",
          ja: "Á¢∫Áéá„ÅÆÁ®ÆÈ°û",
          ko: "ÌôïÎ•†Ïùò Ïú†Ìòï",
          es: "Tipos de Probabilidad",
          de: "Wahrscheinlichkeitsarten",
          fi: "Todenn√§k√∂isyystyypit",
          fr: "Types de probabilit√©",
          ar: "ÿ£ŸÜŸàÿßÿπ ÿßŸÑÿßÿ≠ÿ™ŸÖÿßŸÑÿßÿ™",
          it: "Tipi di Probabilit√†",
        },
        classify: {
          en: "Classify the Event",
          zh: "ÂàÜÈ°û‰∫ã‰ª∂",
          ja: "„Ç§„Éô„É≥„Éà„ÇíÂàÜÈ°û",
          ko: "ÏÇ¨Í±¥ Î∂ÑÎ•ò",
          es: "Clasificar el Evento",
          de: "Das Ereignis klassifizieren",
          fi: "Luokittele tapahtuma",
          fr: "Classer l'√©v√©nement",
          ar: "ÿ™ÿµŸÜŸäŸÅ ÿßŸÑÿ≠ÿØÿ´",
          it: "Classifica l'Evento",
        },
        impossible: {
          en: "Impossible",
          zh: "‰∏çÂèØËÉΩ",
          ja: "‰∏çÂèØËÉΩ",
          ko: "Î∂àÍ∞ÄÎä•",
          es: "Imposible",
          de: "Unm√∂glich",
          fi: "Mahdoton",
          fr: "Impossible",
          ar: "ŸÖÿ≥ÿ™ÿ≠ŸäŸÑ",
          it: "Impossibile",
        },
        possible: {
          en: "Possible",
          zh: "ÂèØËÉΩ",
          ja: "ÂèØËÉΩ",
          ko: "Í∞ÄÎä•",
          es: "Posible",
          de: "M√∂glich",
          fi: "Mahdollinen",
          fr: "Possible",
          ar: "ŸÖŸÖŸÉŸÜ",
          it: "Possibile",
        },
        certain: {
          en: "Certain",
          zh: "‰∏ÄÂÆö",
          ja: "Á¢∫ÂÆü",
          ko: "ÌôïÏã§",
          es: "Cierto",
          de: "Sicher",
          fi: "Varma",
          fr: "Certain",
          ar: "ŸÖÿ§ŸÉÿØ",
          it: "Certo",
        },
        correct: {
          en: "Correct!",
          zh: "Á≠îÂ∞ç‰∫ÜÔºÅ",
          ja: "Ê≠£Ëß£ÔºÅ",
          ko: "Ï†ïÎãµ!",
          es: "¬°Correcto!",
          de: "Richtig!",
          fi: "Oikein!",
          fr: "Correct !",
          ar: "ÿµÿ≠Ÿäÿ≠!",
          it: "Corretto!",
        },
        wrong: {
          en: "Try Again",
          zh: "ÂÜçË©¶‰∏ÄÊ¨°",
          ja: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶",
          ko: "Îã§Ïãú ÏãúÎèÑ",
          es: "Int√©ntalo de nuevo",
          de: "Versuchen Sie es erneut",
          fi: "Yrit√§ uudelleen",
          fr: "R√©essayez",
          ar: "ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ",
          it: "Riprova",
        },
        next: {
          en: "Next",
          zh: "‰∏ã‰∏ÄÈ°å",
          ja: "Ê¨°„Å∏",
          ko: "Îã§Ïùå",
          es: "Siguiente",
          de: "Weiter",
          fi: "Seuraava",
          fr: "Suivant",
          ar: "ÿßŸÑÿ™ÿßŸÑŸä",
          it: "Avanti",
        },
      };

      const getText = (key, lang) => t[key]?.[lang] || t[key]?.["en"] || key;

      const EVENTS = [
        {
          prob: "certain",
          text: {
            en: "The sun rises in the east",
            zh: "Â§™ÈôΩÂæûÊù±ÈÇäÂçáËµ∑",
            ja: "Â§™ÈôΩ„ÅØÊù±„Åã„ÇâÊòá„Çã",
            ko: "Ìï¥Îäî ÎèôÏ™ΩÏóêÏÑú Îú¨Îã§",
            es: "El sol sale por el este",
            de: "Die Sonne geht im Osten auf",
            fr: "Le soleil se l√®ve √† l'est",
            it: "Il sole sorge a est",
          },
        },
        {
          prob: "impossible",
          text: {
            en: "Rolling a 7 on a standard die",
            zh: "Êì≤È™∞Â≠êÊì≤Âá∫ 7",
            ja: "„Çµ„Ç§„Ç≥„É≠„Åß7„ÅåÂá∫„Çã",
            ko: "Ï£ºÏÇ¨ÏúÑÏóêÏÑú 7Ïù¥ ÎÇòÏò®Îã§",
            es: "Sacar un 7 en un dado",
            de: "Eine 7 w√ºrfeln",
            fr: "Obtenir un 7 sur un d√©",
            it: "Fare 7 con un dado",
          },
        },
        {
          prob: "possible",
          text: {
            en: "It will rain tomorrow",
            zh: "ÊòéÂ§©ÊúÉ‰∏ãÈõ®",
            ja: "ÊòéÊó•„ÅØÈõ®„ÅåÈôç„Çã",
            ko: "ÎÇ¥Ïùº ÎπÑÍ∞Ä Ïò¨ Í≤ÉÏù¥Îã§",
            es: "Llover√° ma√±ana",
            de: "Morgen wird es regnen",
            fr: "Il pleuvra demain",
            it: "Domani piover√†",
          },
        },
        {
          prob: "possible",
          text: {
            en: "Flipping a coin gives Heads",
            zh: "Êì≤Á°¨Âπ£ÊòØÂÖ¨ (Ê¥ãÁ¥´Ëçä)",
            ja: "„Ç≥„Ç§„É≥Êäï„Åí„ÅßË°®„ÅåÂá∫„Çã",
            ko: "ÎèôÏ†Ñ ÎçòÏßÄÍ∏∞ ÏïûÎ©¥",
            es: "Sale cara al lanzar moneda",
            de: "M√ºnzwurf ergibt Kopf",
            fr: "Pile ou face donne Face",
            it: "Testa al lancio della moneta",
          },
          sub: {
            en: "(Equal Chance)",
            zh: "(Ê©üÊúÉÂùáÁ≠â)",
            ja: "(‰∫îÂàÜ‰∫îÂàÜ)",
            ko: "(Î∞òÎ∞ò)",
            es: "(Probabilidad Igual)",
            de: "(Gleiche Chance)",
            fr: "(Chance √©gale)",
            it: "(Possibilit√† uguale)",
          },
        },
        {
          prob: "impossible",
          text: {
            en: "Dividing by zero",
            zh: "Ë¢´Èõ∂Èô§",
            ja: "„Çº„É≠„ÅßÂâ≤„Çã",
            ko: "0ÏúºÎ°ú ÎÇòÎàÑÍ∏∞",
            es: "Dividir por cero",
            de: "Durch Null teilen",
            fr: "Diviser par z√©ro",
            it: "Dividere per zero",
          },
        },
        {
          prob: "certain",
          text: {
            en: "Triangle has 3 sides",
            zh: "‰∏âËßíÂΩ¢Êúâ 3 Ê¢ùÈÇä",
            ja: "‰∏âËßíÂΩ¢„Å´„ÅØ3„Å§„ÅÆËæ∫„Åå„ÅÇ„Çã",
            ko: "ÏÇºÍ∞ÅÌòïÏùÄ 3Í∞úÏùò Î≥ÄÏùÑ Í∞ÄÏßÑÎã§",
            es: "El tri√°ngulo tiene 3 lados",
            de: "Ein Dreieck hat 3 Seiten",
            fr: "Un triangle a 3 c√¥t√©s",
            it: "Il triangolo ha 3 lati",
          },
        },
      ];

      function App() {
        const [lang, setLang] = useState("zh");
        const [currentIdx, setCurrentIdx] = useState(0);
        const [status, setStatus] = useState("idle"); // idle, correct, wrong
        const [selectedType, setSelectedType] = useState(null);

        const currentEvent = EVENTS[currentIdx];
        const eventText = currentEvent.text[lang] || currentEvent.text["en"];
        const subText = currentEvent.sub
          ? currentEvent.sub[lang] || currentEvent.sub["en"]
          : "";

        const handleSelect = (type) => {
          if (status === "correct") return;
          setSelectedType(type);

          // Special logic: 'possible' covers equal chance too for simplicity in UI classification
          // But let's check exact match logic
          const isCorrect =
            currentEvent.prob === type ||
            (currentEvent.prob === "equal" && type === "possible"); // Assuming 'equal' maps to 'possible' in this simplified 3-choice UI?

          // Actually, the previous data only had impossible/possible/certain, but one item was labeled 'equal'.
          // Let's stick to 3 categories: Impossible (0%), Possible (>0% <100%), Certain (100%).
          // So 'equal' is a subset of 'possible'.

          if (
            type === currentEvent.prob ||
            (currentEvent.prob === "equal" && type === "possible")
          ) {
            setStatus("correct");
          } else {
            setStatus("wrong");
          }
        };

        const next = () => {
          setCurrentIdx((currentIdx + 1) % EVENTS.length);
          setStatus("idle");
          setSelectedType(null);
        };

        const CHOICE_BTNS = [
          { type: "impossible", color: "bg-red-500", label: "impossible" },
          { type: "possible", color: "bg-yellow-500", label: "possible" },
          { type: "certain", color: "bg-green-500", label: "certain" },
        ];

        return (
          <div className="min-h-screen flex flex-col items-center p-4 font-sans bg-slate-900 text-white">
            <div className="w-full max-w-4xl flex justify-between items-center mb-10">
              <h1 className="text-4xl font-black text-emerald-400 drop-shadow-[0_0_15px_rgba(52,211,153,0.5)]">
                üîÆ {getText("title", lang)}
              </h1>
              <div className="flex bg-slate-800/80 p-1.5 rounded-xl border border-white/10 flex-wrap justify-end gap-1 max-w-[50%]">
                {[
                  "zh",
                  "en",
                  "ja",
                  "ko",
                  "es",
                  "de",
                  "fi",
                  "fr",
                  "ar",
                  "it",
                ].map((l) => (
                  <button
                    key={l}
                    onClick={() => setLang(l)}
                    className={`px-3 py-1.5 rounded-lg font-bold text-xs uppercase transition-all ${
                      lang === l
                        ? "bg-emerald-600 text-white shadow-lg scale-105"
                        : "text-slate-400 hover:text-white hover:bg-white/5"
                    }`}
                  >
                    {l}
                  </button>
                ))}
              </div>
            </div>

            <div className="w-full max-w-3xl flex flex-col gap-8">
              {/* Question Card */}
              <motion.div
                key={currentIdx}
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                className="glass-panel p-12 rounded-3xl min-h-[200px] flex flex-col items-center justify-center text-center relative overflow-hidden"
              >
                <div className="absolute inset-0 bg-emerald-900/10 -z-10"></div>
                <h2 className="text-3xl md:text-4xl font-black text-white mb-4 leading-tight">
                  {eventText}
                </h2>
                {subText && (
                  <p className="text-slate-400 font-bold">{subText}</p>
                )}
              </motion.div>

              {/* Classification Buttons */}
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                {CHOICE_BTNS.map((btn) => {
                  const isSelected = selectedType === btn.type;
                  let stateClass = "opacity-100";
                  if (status !== "idle" && !isSelected)
                    stateClass = "opacity-50 blur-[1px]";

                  return (
                    <button
                      key={btn.type}
                      onClick={() => handleSelect(btn.type)}
                      className={`
                                   relative h-32 rounded-2xl border-4 transition-all duration-300 shadow-xl overflow-hidden group
                                   ${
                                     isSelected
                                       ? status === "correct"
                                         ? "border-green-400 scale-105 z-10"
                                         : "border-red-400 scale-105 z-10"
                                       : "border-transparent hover:border-white/20 hover:scale-105"
                                   }
                                   ${stateClass}
                                   ${btn.color}
                               `}
                    >
                      <div className="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors"></div>
                      <div className="absolute inset-0 flex items-center justify-center">
                        <span className="text-2xl font-black uppercase tracking-wider drop-shadow-md pb-2">
                          {getText(btn.label, lang)}
                        </span>
                      </div>

                      {/* Probability Bar Visualization */}
                      <div className="absolute bottom-4 left-4 right-4 h-2 bg-black/30 rounded-full overflow-hidden">
                        <div
                          className="h-full bg-white"
                          style={{
                            width:
                              btn.type === "impossible"
                                ? "0%"
                                : btn.type === "certain"
                                ? "100%"
                                : "50%",
                          }}
                        ></div>
                      </div>
                    </button>
                  );
                })}
              </div>

              {/* Feedback / Next */}
              {status !== "idle" && (
                <motion.div
                  initial={{ opacity: 0, height: 0 }}
                  animate={{ opacity: 1, height: "auto" }}
                  className="flex justify-center"
                >
                  {status === "correct" ? (
                    <button
                      onClick={next}
                      className="px-12 py-4 bg-green-500 hover:bg-green-400 text-slate-900 text-xl font-black rounded-2xl shadow-[0_0_20px_rgba(34,197,94,0.5)] transition-transform active:scale-95 flex items-center gap-3"
                    >
                      <span>üéâ {getText("correct", lang)}</span>
                      <span>{getText("next", lang)} ‚ûî</span>
                    </button>
                  ) : (
                    <div className="px-12 py-4 bg-slate-700 text-red-400 text-xl font-bold rounded-2xl border-2 border-red-500/50">
                      {getText("wrong", lang)}
                    </div>
                  )}
                </motion.div>
              )}
            </div>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
